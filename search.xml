<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MathJax语法入门指南</title>
    <url>/posts/2fa412f3.html</url>
    <content><![CDATA[<p>MathJax 是一个用于在网页上显示数学公式的 JavaScript 引擎。它支持多种数学表示法，包括 LaTeX、MathML 和 AsciiMath。以下是一些常见的 MathJax 语法示例：</p>
<ol>
<li><strong>行内数学公式（Inline Math）</strong>：使用单个美元符号 <code>$</code> 来包围行内数学公式</li>
</ol>
<ul>
<li>如<code>$E=mc^2$</code>.</li>
<li>$E=mc^2$.</li>
</ul>
<ol start="2">
<li><strong>块级数学公式（Display Math）</strong>： 使用双美元符号 <code>$$</code> 来包围块级数学公式</li>
</ol>
<ul>
<li>如<code>$$ F = G \frac&#123;m_1 m_2&#125;&#123;r^2&#125; $$</code>.<br>
如下</li>
<li>$$ F = G \frac{m_1 m_2}{r^2} $$</li>
</ul>
<ol start="3">
<li><strong>上标和下标</strong>：使用 <code>^</code> 表示上标，使用 <code>_</code> 表示下标</li>
</ol>
<ul>
<li>如<code>$x^2$</code>、<code>$y_1$</code>.</li>
<li>$x^2$   、<!-- x squared -->$y_1$   <!-- y sub 1 --></li>
</ul>
<ol start="4">
<li><strong>分数</strong>： 使用 <code>\frac</code> 命令来创建分数</li>
</ol>
<ul>
<li>如<code>$\frac&#123;a&#125;&#123;b&#125;$</code>.</li>
<li>$\frac{a}{b}$   <!-- a over b --></li>
</ul>
<ol start="5">
<li><strong>根号</strong>： 使用 <code>\sqrt</code> 命令来创建根号</li>
</ol>
<ul>
<li>如<code>$\sqrt&#123;2&#125;$</code>.</li>
<li>$\sqrt{2}$   <!-- square root of 2 --></li>
</ul>
<ol start="6">
<li><strong>希腊字母</strong>：使用 <code>\</code> 后跟希腊字母名称来插入希腊字母</li>
</ol>
<ul>
<li>如<code>$\alpha$</code>、<code>$\beta$</code>、<code>$\gamma$</code>.</li>
<li>$\alpha$, $\beta$, $\gamma$   <!-- alpha, beta, gamma --></li>
</ul>
<ol start="7">
<li><strong>求和、积分</strong>：使用 <code>\sum</code> 和 <code>\int</code> 命令来表示求和和积分</li>
</ol>
<ul>
<li>如<code>$$\sum_&#123;i=1&#125;^&#123;n&#125; i$$</code>、<code>$$\int_&#123;0&#125;^&#123;\infty&#125; f(x) \, dx$$</code>.</li>
<li>$\sum_{i=1}^{n} i$   <!-- sum from i=1 to n of i -->、$\int_{0}^{\infty} f(x) , dx$   <!-- integral from 0 to infinity of f(x) with respect to x --></li>
</ul>
<ol start="8">
<li><strong>矩阵</strong>：使用 <code>matrix</code> 环境创建矩阵,起始标记<code>\begin&#123;matrix&#125;</code> ，结束标记 <code>\end&#123;matrix&#125;</code>,每一行末尾标记 <code>\\</code> ，行间元素以 <code>&amp;</code> 分割。</li>
</ol>
<ul>
<li>如<code> $$ \begin&#123;matrix&#125;  1 &amp; 2\\\\ 3 &amp; 4\\\\  \end&#123;matrix&#125; $$</code>.</li>
</ul>
<p>$$<br>
\begin{matrix}<br>
1&amp;2\\<br>
3&amp;4\\<br>
\end{matrix}<br>
$$   <!-- 2x2 matrix --></p>
<blockquote>
<p>这里要注意的是，由于 博客 Markdown 语法与 MathJax 存在冲突，<code>\\</code> 实际上被转义成了单个 <code>\</code> ，这导致最终博客将矩阵显示成一行，所以实际上在写博客时凡是涉及 <code>\\</code> 都要写成 <code>\\\\</code> 。</p>
</blockquote>
<ul>
<li><strong>矩阵边框</strong><br>
在起始、结束标记处用下列词替换 matrix</li>
</ul>
<p><code>pmatrix</code> ：小括号边框<br>
<code>bmatrix</code> ：中括号边框<br>
<code>Bmatrix</code> ：大括号边框<br>
<code>vmatrix</code> ：单竖线边框<br>
<code>Vmatrix</code> ：双竖线边框</p>
<ul>
<li><strong>省略元素</strong>
<ul>
<li>横省略号：<code>\cdots</code></li>
<li>竖省略号：<code>\vdots</code></li>
<li>斜省略号：<code>\ddots</code></li>
</ul>
</li>
</ul>
<ol start="9">
<li><strong>矢量</strong>：使用 \vec 命令来表示矢量</li>
</ol>
<ul>
<li>如<code>$\vec&#123;v&#125;$</code>.</li>
<li>$\vec{v}$   <!-- vector v --></li>
</ul>
<ol start="10">
<li><strong>逻辑运算符</strong>：使用相应的 LaTeX 命令表示逻辑运算符</li>
</ol>
<ul>
<li>如<code>$a \land b$</code>、<code>$c \lor d$</code>、<code>$\lnot e$</code>.</li>
<li>$a \land b$   <!-- logical AND -->、$c \lor d$    <!-- logical OR -->、 $\lnot e$     <!-- logical NOT --></li>
</ul>
<ol start="11">
<li><strong>希腊字母</strong></li>
</ol>
<table>
<thead>
<tr>
<th>希腊字母</th>
<th>Mathjax命令</th>
<th>希腊字母</th>
<th>Mathjax命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\alpha$</td>
<td><code>$\alpha$</code></td>
<td>$\beta$</td>
<td><code>$\beta$</code></td>
</tr>
<tr>
<td>$\gamma$</td>
<td><code>$\gamma$</code></td>
<td>$\delta$</td>
<td><code>$\delta$</code></td>
</tr>
<tr>
<td>$\epsilon$</td>
<td><code>$\epsilon$</code></td>
<td>$\zeta$</td>
<td><code>$\zeta$</code></td>
</tr>
<tr>
<td>$\eta$</td>
<td><code>$\eta$</code></td>
<td>$\theta$</td>
<td><code>$\theta$</code></td>
</tr>
<tr>
<td>$\iota$</td>
<td><code>$\iota$</code></td>
<td>$\kappa$</td>
<td><code>$\kappa$</code></td>
</tr>
<tr>
<td>$\lambda$</td>
<td><code>$\lambda$</code></td>
<td>$\mu$</td>
<td><code>$\mu$</code></td>
</tr>
<tr>
<td>$\nu$</td>
<td><code>$\nu$</code></td>
<td>$\xi$</td>
<td><code>$\xi$</code></td>
</tr>
<tr>
<td>$\pi$</td>
<td><code>$\pi$</code></td>
<td>$\rho$</td>
<td><code>$\rho$</code></td>
</tr>
<tr>
<td>$\sigma$</td>
<td><code>$\sigma$</code></td>
<td>$\tau$</td>
<td><code>$\tau$</code></td>
</tr>
<tr>
<td>$\upsilon$</td>
<td><code>$\upsilon$</code></td>
<td>$\phi$</td>
<td><code>$\phi$</code></td>
</tr>
<tr>
<td>$\chi$</td>
<td><code>$\chi$</code></td>
<td>$\psi$</td>
<td><code>$\psi$</code></td>
</tr>
<tr>
<td>$\omega$</td>
<td><code>$\omega$</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol start="12">
<li><strong>关系运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th>数学符号</th>
<th>Mathjax命令</th>
<th>数学符号</th>
<th>Mathjax命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\mid$</td>
<td><code>$\mid$</code></td>
<td>$\nmid$</td>
<td><code>$\nmid$</code></td>
</tr>
<tr>
<td>$\cdot$</td>
<td><code>$\cdot$</code></td>
<td>$\leq$</td>
<td><code>$\leq$</code></td>
</tr>
<tr>
<td>$\geq$</td>
<td><code>$\geq$</code></td>
<td>$\neq$</td>
<td><code>$\neq$</code></td>
</tr>
<tr>
<td>$\approx$</td>
<td><code>$\approx$</code></td>
<td>$\equiv$</td>
<td><code>$\equiv$</code></td>
</tr>
<tr>
<td>$\prec$</td>
<td><code>$\prec$</code></td>
<td>$\preceq$</td>
<td><code>$\preceq$</code></td>
</tr>
<tr>
<td>$\ll$</td>
<td><code>$\ll$</code></td>
<td>$\succ$</td>
<td><code>$\succ$</code></td>
</tr>
<tr>
<td>$\succeq$</td>
<td><code>$\succeq$</code></td>
<td>$\gg$</td>
<td><code>$\gg$</code></td>
</tr>
<tr>
<td>$\sim$</td>
<td><code>$\sim$</code></td>
<td>$\simeq$</td>
<td><code>$\simeq$</code></td>
</tr>
<tr>
<td>$\asymp$</td>
<td><code>$\asymp$</code></td>
<td>$\cong$</td>
<td><code>$\cong$</code></td>
</tr>
<tr>
<td>$\doteq$</td>
<td><code>$\doteq$</code></td>
<td>$\propto$</td>
<td><code>$\propto$</code></td>
</tr>
<tr>
<td>$\models$</td>
<td><code>$\models$</code></td>
<td>$\parallel$</td>
<td><code>$\parallel$</code></td>
</tr>
<tr>
<td>$\bowtie$</td>
<td><code>$\bowtie$</code></td>
<td>$\perp$</td>
<td><code>$\perp$</code></td>
</tr>
<tr>
<td>$\circ$</td>
<td><code>$\circ$</code></td>
<td>$\ast$</td>
<td><code>$\ast$</code></td>
</tr>
<tr>
<td>$\bigodot$</td>
<td><code>$\bigodot$</code></td>
<td>$\bigotimes$</td>
<td><code>$\bigotimes$</code></td>
</tr>
<tr>
<td>$\bigoplus$</td>
<td><code>$\bigoplus$</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol start="13">
<li><strong>算术运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th>数学符号</th>
<th>Mathjax命令</th>
<th>数学符号</th>
<th>Mathjax命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\pm$</td>
<td><code>$\pm$</code></td>
<td>$\mp$</td>
<td><code>$\mp$</code></td>
</tr>
<tr>
<td>$\times$</td>
<td><code>$\times$</code></td>
<td>$\ast$</td>
<td><code>$\ast$</code></td>
</tr>
<tr>
<td>$\star$</td>
<td><code>$\star$</code></td>
<td>$\circ$</td>
<td><code>$\circ$</code></td>
</tr>
<tr>
<td>$\bullet$</td>
<td><code>$\bullet$</code></td>
<td>$\cdot$</td>
<td><code>$\cdot$</code></td>
</tr>
<tr>
<td>$\div$</td>
<td><code>$\div$</code></td>
<td>$\sum$</td>
<td><code>$\sum$</code></td>
</tr>
<tr>
<td>$\prod$</td>
<td><code>$\prod$</code></td>
<td>$\coprod$</td>
<td><code>$\coprod$</code></td>
</tr>
<tr>
<td>$\oplus$</td>
<td><code>$\oplus$</code></td>
<td>$\bigoplus$</td>
<td><code>$\bigoplus$</code></td>
</tr>
<tr>
<td>$\bigotimes$</td>
<td><code>$\bigotimes$</code></td>
<td>$\oslash$</td>
<td><code>$\oslash$</code></td>
</tr>
<tr>
<td>$\odot$</td>
<td><code>$\odot$</code></td>
<td>$\bigodot$</td>
<td><code>$\bigodot$</code></td>
</tr>
<tr>
<td>$\diamond$</td>
<td><code>$\diamond$</code></td>
<td>$\bigtriangleup$</td>
<td><code>$\bigtriangleup$</code></td>
</tr>
<tr>
<td>$\bigtriangledown$</td>
<td><code>$\bigtriangledown$</code></td>
<td>$\triangleleft$</td>
<td><code>$\triangleleft$</code></td>
</tr>
<tr>
<td>$\triangleright$</td>
<td><code>$\triangleright$</code></td>
<td>$\bigcirc$</td>
<td><code>$\bigcirc$</code></td>
</tr>
</tbody>
</table>
<ol start="14">
<li><strong>字体</strong></li>
</ol>
<ul>
<li>打印机字体 Typewriter：<code>$\mathtt&#123;A&#125;$</code> 显示为 $\mathtt{A}$</li>
<li>黑板粗体字 Blackboard Bold：<code>$\mathbb&#123;A&#125;$</code> 显示为 $\mathbb{A}$</li>
<li>无衬线字体 Sans Serif：<code>$\mathsf&#123;A&#125;$</code> 显示为 $\mathsf{A}$</li>
<li>手写体：<code>$\mathscr&#123;A&#125;$</code> 显示为 $\mathscr{A}$</li>
<li>罗马字体：<code>$\mathrm&#123;A&#125;$</code> 显示为 $\mathrm{A}$</li>
</ul>
<ol start="15">
<li><strong>括号</strong></li>
</ol>
<ul>
<li>小括号： <code>$()$</code> ，显示为 $()$</li>
<li>中括号：<code>$[]$</code> ，显示为 $[]$</li>
<li>尖括号：<code>$\langle$</code> 和 <code>$\rangle$</code>，显示为 $\langle$ 和 $\rangle$</li>
<li>大括号：<code>$\lbrace$</code>和 <code>$\rbrace$</code>，显示为$\lbrace$ 和 $\rbrace$ 。<code>\&#123;</code> 和 <code>\&#125;</code> 也可以使用，但推荐前一种，后一种无法被 Hexo 博客显示。</li>
</ul>
<ol start="16">
<li><strong>求和、极限与积分</strong></li>
</ol>
<ul>
<li>求和：<code>$\sum$</code>
<ul>
<li><code>$\sum_&#123;i=1&#125;^n&#123;a_i&#125;$</code> 显示为 $\sum_{i=1}^n{a_i}$</li>
</ul>
</li>
<li>极限：<code>$\lim$</code>
<ul>
<li><code>$\lim_&#123;x\to 0&#125;$</code> 显示为 $\lim_{x\to 0}$</li>
</ul>
</li>
<li>积分：<code>$\int$</code>
<ul>
<li><code>$\int_0^xf(x)\text&#123;d&#125;x$</code> 显示为 $\int_0^xf(x)\text{d}x$</li>
</ul>
</li>
</ul>
<ol start="17">
<li><strong>特殊函数</strong></li>
</ol>
<ul>
<li><code>$\函数名$</code>
<ul>
<li><code>$\sin x$</code> ，<code>$\ln x$</code> ，<code>$\max(A, B, C)$</code> 显示为 $\sin x$ ，$\ln x$ ，$\max(A, B, C)$</li>
</ul>
</li>
</ul>
<ol start="18">
<li><strong>空格</strong><br>
LaTeX 语法会忽略空格，需要使用转义字符 <code>\</code></li>
</ol>
<ul>
<li>小空格 <code>$a\ b$</code> 显示为 $a\ b$</li>
<li>四个空格：<code>$a\quad b$</code> 显示为 $a\quad b$</li>
</ul>
<ol start="19">
<li>方程组</li>
</ol>
<ul>
<li>起始以 <code>\begin&#123;cases&#125;</code> 声明，结束以 <code>\end&#123;cases&#125;</code> 声明</li>
<li>如<code>$$ \begin&#123;cases&#125; a_1x+b_1y+c_1z=d_1\\\\ a_2x+b_2y+c_2z=d_2\\\\ a_3x+b_3y+c_3z=d_3\\\\ \end&#123;cases&#125; $$</code></li>
</ul>
<p>$$<br>
\begin{cases}<br>
a_1x+b_1y+c_1z=d_1\\<br>
a_2x+b_2y+c_2z=d_2\\<br>
a_3x+b_3y+c_3z=d_3\\<br>
\end{cases}<br>
$$</p>
<ol start="20">
<li>公式编号</li>
</ol>
<ul>
<li>用 <code>\tag&#123;n&#125;</code> 标签</li>
<li>举例：<code>$$f(x)=x\tag&#123;1&#125;$$</code> 显示为<br>
$$f(x)=x\tag{1}$$</li>
</ul>
]]></content>
      <categories>
        <category>手册</category>
      </categories>
      <tags>
        <tag>工具</tag>
        <tag>手册</tag>
        <tag>指南</tag>
        <tag>学习记录</tag>
      </tags>
  </entry>
  <entry>
    <title>markdown可用图标</title>
    <url>/posts/20afcfaf.html</url>
    <content><![CDATA[<p>😄 😆 😊 😃 😏 😍 😘 😚 😳 😌 😆 😁 😉 😜 😝 😀 😗 😙 😛 😴 😟 😦 😧 😮 😬 😕 😯 😑 😒 😅 😓 😥 😩 😔 😞 😖 😨 😰 😣 😢 😭 😂 😲 😱 😫 😠 😡 😤 😪 😋 😷 😎 😵 👿 😈 😐 😶 😇 👽 💛  💡</p>
<p>💙 💜 ❤️ 💚 💔 💓 💗 💕 💞 💘 💖 ✨ ⭐️ 🌟 💫 💥 💥 💢 ❗️ ❓ ❕ ❔ 💤 💨 💦 🎶 🎵 🔥 💩 💩 💩 👍 👍 👎 👎 👌 👊 👊 ✊ ✌️ 👋 ✋ ✋ 👐 ☝️ 👇 👈 👉 🙌 🙏 👆 👏 💪 🤘 🖕 🏃 🏃 👫 👪 👬 👭 💃 👯 🙆 🙅 💁</p>
<p>🙋 👰 🙎 🙍 🙇 💑 💆 💇 💅 👦 👧 👩 👨 👶 👵 👴 👱 👲 👳 👷 👮 👼 👸 😺 😸 😻 😽 😼 🙀 😿 😹 😾 👹 👺 🙈 🙉 🙊 💂 💀 🐾 👄 💋 💧 👂 👀 👃 👅 💌 👤 👥 💬 💭 ☀️ ☔️ ☁️ ❄️ ⛄️ ⚡️ 🌀 🌁 🌊 🐱</p>
<p>🐶 🐭 🐹 🐰 🐺 🐸 🐯 🐨 🐻 🐷 🐽 🐮 🐗 🐵 🐒 🐴 🐎 🐫 🐑 🐘 🐼 🐍 🐦 🐤 🐥 🐣 🐔 🐧 🐢 🐛 🐝 🐜 🐞 🐌 🐙 🐠 🐟 🐳 🐋 🐬 🐄 🐏 🐀 🐃 🐅 🐇 🐉 🐐 🐓 🐕 🐖 🐁 🐂 🐲 🐡 🐊 🐪 🐆 🐈 🐩</p>
<p>🐾 💐 🌸 🌷 🍀 🌹 🌻 🌺 🍁 🍃 🍂 🌿 🍄 🌵 🌴 🌲 🌳 🌰 🌱 🌼 🌾 🐚 🌐 🌞 🌝 🌚 🌑 🌒 🌓 🌔 🌕 🌖 🌗 🌘 🌜 🌛 🌙 🌍 🌎 🌏 🌋 🌌 ⛅️ 🎍 💝 🎎 🎒 🎓 🎏 🎆 🎇 🎐 🎑 🎃 👻 🎅 🎄 🎁 🔔 🔕 🎋 🎉 🎊</p>
<p>🎈 🔮 💿 📀 💾 📷 📹 🎥 💻 📺 📱 ☎️ ☎️ 📞 📟 📠 💽 📼 🔉 🔈 🔇 📢 📣 ⌛️ ⏳ ⏰ ⌚️ 📻 📡 ➿ 🔍 🔎 🔓 🔒 🔏 🔐 🔑 💡 🔦 🔆 🔅 🔌 🔋 📲 ✉️ 📫 📮 🛀 🛁 🚿 🚽 🔧 🔩 🔨 💺 💰 💴 💵 💷 💶 💳 💸 📧 📥</p>
<p>📤 ✉️ 📨 📯 📪 📬 📭 📦 🚪 🚬 💣 🔫 🔪 💊 💉 📄 📃 📑 📊 📈 📉 📜 📋 📆 📅 📇 📁 📂 ✂️ 📌 📎 ✒️ ✏️ 📏 📐 📕 📗 📘 📙 📓 📔 📒 📚 🔖 📛 🔬 🔭 📰 🏈 🏀 ⚽️ ⚾️ 🎾 🎱 🏉 🎳 ⛳️ 🚵 🚴 🏇 🏂 🏊 🏄</p>
<p>🎿 👾 ♠️ ♥️ ♣️ ♦️ 💎 💍 🏆 🎼 🎹 🎻 🎮 🃏 🎴 🎲 🎯 🀄️ 🎬 📝 📝 📖 🎨 🎤 🎧 🎺 🎷 🎸 👞 👡 👠 💄 👢 👕 👕 👔 👚 👗 🎽 👖 👘 👙 🎀 🎩 👑 👒 👞 🌂 💼 👜 👝 👛 👓 🎣 ☕️ 🍵 🍶 🍼 🍺 🍻 🍸 🍹 🍷 🍴 🍕 🍔</p>
<p>🍟 🍗 🍖 🍝 🍛 🍤 🍱 🍣 🍥 🍙 🍘 🍚 🍜 🍲 🍢 🍡 🥚 🍞 🍩 🍮 🍦 🍨 🍧 🎂 🍰 🍪 🍫 🍬 🍭 🍯 🍎 🍏 🍊 🍋 🍒 🍇 🍉 🍓 🍑 🍈 🍌 🍐 🍍 🍠 🍆 🍅 🌽 🏠 🏡 🏫 🏢 🏣 🏥 🏦 🏪 🏩 🏨 💒 ⛪️ 🏬 🏤 🌇</p>
<p>🌆 🏯 🏰 ⛺️ 🏭 🗼 🗾 🗻 🌄 🌅 🌠 🗽 🌉 🎠 🌈 🎡 ⛲️ 🎢 🚢 🚤 ⛵️ ⛵️ 🚣 ⚓️ 🚀 ✈️ 🚁 🚂 🚊 🚞 🚲 🚡 🚟 🚠 🚜 🚙 🚘 🚗 🚗 🚕 🚖 🚛 🚌 🚍 🚨 🚓 🚔 🚒 🚑 🚐 🚚 🚋 🚉 🚆 🚅 🚄 🚈 🚝 🚃 🚎</p>
<p>🎫 ⛽️ 🚦 🚥 ⚠️ 🚧 🔰 🏧 🎰 🚏 💈 ♨️ 🏁 🎌 🏮 🗿 🎪 🎭 📍 🚩 🇯🇵 🇰🇷 🇨🇳 🇺🇸 🇫🇷 🇪🇸 🇮🇹 🇷🇺 🇬🇧 🇬🇧 🇩🇪 1️⃣ 2️⃣ 3️⃣ 4️⃣ 5️⃣ 6️⃣ 7️⃣ 8️⃣ 9️⃣ 🔟 🔢 0️⃣ #️⃣ 🔣 ◀️ ⬇️ ▶️ ⬅️ 🔠 🔡 🔤 ↙️ ↘️ ➡️ ⬆️ ↖️ ↗️ ⏬ ⏫ 🔽 ⤵️ ⤴️ ↩️ ↪️ ↔️ ↕️</p>
<p>🔼 🔃 🔄 ⏪ ⏩ ℹ️ 🆗 🔀 🔁 🔂 🆕 🔝 🆙 🆒 🆓 🆖 🎦 🈁 📶 🈵 🈂️ 🚻 🚹 🚺 🚼 🚭 🅿️ ♿️ 🚇 🛄 🉑 🚾 🚰 🚮 ㊙️ ㊗️ Ⓜ️ 🛂 🛅 🛃 🉐 🆑 🆘 🆔 🚫 🔞 📵 🚯 🚷 🚱 🚳 🚸 ⛔️ ✳️ ❇️ ✴️ 💟 🆚 📳 📴</p>
<p>💹 💱 ♈️ ♉️ ♊️ ♋️ ♌️ ♍️ ♎️ ♏️ ♐️ ♑️ ♒️ ♓️ ⛎ 🔯 ❎ 🅰️ 🅱️ 🆎 🅾️ 💠 ♻️ 🔚 🔙 🔛 🔜 🕐 🕜 🕙 🕥 🕚 🕦 🕛 🕧 🕑 🕝 🕒 🕞 🕓 🕟 🕔 🕠 🕕 🕡 🕖 🕢 🕗 🕣 🕘 🕤 💲 ©️ ®️ ™️ ❌ ❗️ ‼️ ⁉️ ⭕️ ✖️ ➕ ➖ ➗ 💮 💯 ✔️ ☑️ 🔘 🔗 ➰ 〰️ 〽️ 🔱 ▪️ ▫️ ◾️ ◽️ ◼️ ◻️ ⬛️ ⬜️ ✅ 🔲 🔳 ⚫️ ⚪️ 🔴 🔵 🔷 🔶 🔹 🔸 🔺 🔻</p>
]]></content>
      <categories>
        <category>手册</category>
      </categories>
      <tags>
        <tag>工具</tag>
        <tag>手册</tag>
        <tag>指南</tag>
      </tags>
  </entry>
  <entry>
    <title>《可塑的我：自我发展心理学的35堂必修课》_陈婕君</title>
    <url>/posts/d9c2fff.html</url>
    <content><![CDATA[<h2 id="前言">前言</h2>
<p>一个人最终成为他自己，需要一个<strong>动态的、独特的</strong>过程。</p>
<p>在这个过程中，人们会发展并完善出相对稳定的人格，整合自己的内在冲突，一步步走向<strong>自我实现</strong>；与此同时也会一次次走出自己平衡的、舒适的状态（可能是主动的，也可能是被动的），寻求新的可能性，直到找到新的平衡。</p>
<p>可以说，自我的发展就是一个从<strong>平衡到失衡，再从失控到重新掌控</strong>的过程。</p>
<p>本书要探讨的就是自我发展的过程以及如何通过心理学更好地创造出完整的、成熟的自我。</p>
<p>而<strong>心理基因</strong>则会影响人们对事情的感受和理解，从而影响行为。简单来说，<strong>一个人面对周围发生的事情时的各种反应，就是心理基因的表现形式</strong>。<strong>心理基因是人从很小的时候就逐渐建立起来的，是人们理解周围世界、周围人以及自己的底层逻辑</strong>。这些底层逻辑包括观念、想法，以及处理情绪和事情的方式，它会潜移默化地影响人们如何应对人生中发生的每一件事情。</p>
<p>举个例子，小时候的你可能很多次想自己下楼和小朋友玩，父母却总是阻挠，威胁说如果没有大人在身边，就会有大灰狼把你叼走。父母为了你的安全限制了你的自由。他们的本意是好的，只是在这一过程中，他们也会同时把自己的焦虑感传递给你，渐渐地让你认为世界是充满危险的，是不安全的。同时，在这一基础上，如果你已经慢慢长大，有了一定的处理事情的能力，但是父母为了安全还是习惯性地限制你的很多尝试，代你解决问题，帮你回避很多冲突，<strong>而没有引导你学会自己解决问题、锻炼自己的处事能力</strong>，那么在潜意识里，你就会认为除了躲开，除了努力避免危险发生，自己没能力在危险发生时真正保护好自己。</p>
<p>长此以往，和那些有解决问题的意识的人比起来，你在面对生活中的问题和新挑战的时候，更容易表现得固执、保守、多疑，或者一遇到事情就想退缩，等等。这就是一个<strong>从小到大、积少成多的过程</strong>。慢慢地，这样的应对模式就有可能影响很多决定，比如，要不要尝试一个新的餐厅，要不要学一个新的方法以分析工作问题，要不要接受工作调动并到一个新的城市发展，等等。这些从小形成的应对模式，通过影响生活中各种大大小小的决定，时刻影响着你的生活。这些影响日积月累，有一天你会突然发现自己和周围的人已经走在不同的路上。</p>
<p><strong>真正的掌控其实一般会有以下共同的表现。</strong></p>
<ol>
<li>
<p>第一，真正能掌控人生的人并非事事都要控制在自己手里，而是在事情发生变化时可以从容面对。</p>
</li>
<li>
<p>第二，真正能掌控人生的人在目标实现受阻时能快速认清事实并灵活调整计划，而不是严重受不良情绪的影响而变得情绪化、不理智，甚至为了一时的意气而做出让自己后悔的事。</p>
</li>
<li>
<p>第三，对于很多人普遍认为需要高度自律才可以做好的事，真正能掌控人生的人完成得毫不费力，没有内耗，而且很开心、很快乐。</p>
</li>
</ol>
<blockquote>
<p><strong>心理学上一些周期概念</strong></p>
<ol>
<li>0-1.5岁：婴儿期</li>
<li>1.5-6岁：幼儿期</li>
<li>5-8岁：习惯养成的阶段，培养出基本的意志力和实干能力，从而拥有主动性的发展</li>
<li>7-12岁：儿童中后期，是坚毅力、心理柔韧性、逆商的发展过程。</li>
<li>12-18岁：青春期</li>
<li>0-18岁：意志力、坚韧的品格、良好的判断力、自控能力等此时培养</li>
<li>18-28岁：成年初显期</li>
<li>28-35岁：成年转型期</li>
<li>25-40岁：泛中年危机</li>
<li>35-40岁：中年叛逆期（中年危机）</li>
<li>40-60岁：成年中期（中年）</li>
<li>60岁以上：老年</li>
</ol>
</blockquote>
<h2 id="第一章-自我发展">第一章 自我发展</h2>
<h3 id="未来预警：走对当前每一步，未来才能不焦虑">未来预警：走对当前每一步，未来才能不焦虑</h3>
<p>很多25～40岁的人都会面临或经历一个问题：泛中年危机。</p>
<p>心理学意义上的中年危机一般发生在<strong>35～40岁</strong>，但是这一危机的潜伏期很长。中年危机的潜伏期一般从25岁起，而其<strong>根源在18～25岁</strong>。如果在18～25岁打好根基，25～35岁能够稳定发展并自我改变，中年危机会以中年黄金期的面貌出现。</p>
<p>中年阶段有一个很重要的标志性心理状态——焦虑。</p>
<p>在心理学看来，所有的焦虑都像晴雨表，焦虑在告诉你，你的决定不明智，或者你曾经想逃避的东西重新浮现了。</p>
<p>很多人认为有问题的是焦虑本身，应该消除焦虑、抑郁。其实不然。如果一开始就能掌握一套方法，辨别内心的声音，知道怎样做出决策，就可以避免焦虑的出现。</p>
<p>只要能不陷入情绪，而是在体察情绪的同时清醒地思考，就有了面对中年危机以及大部分人生问题的良好基础。能做到这一步，泛中年危机就有可能被转化为自我成长的机会。</p>
<p>不管是青春期还是中年危机，其实都是人正常的发展过程，就像种子发芽一样，是<strong>利用内在的发展动力冲破外在束缚的过程</strong>。如果动力不足，这一过程就会变成内心的冲突引发焦虑。从这一角度理解，<strong>人生一直都需要积攒能量、实现突破，这是贯穿一生的发展过程</strong>。发展过程会带来很多能力，除了专业能力，还有自主性、能动性、思考能力、逻辑思考能力以及平衡情绪和理智等能力。</p>
<p>真正的情绪管理与阶段性成长密切相关。</p>
<p><strong>已经出现的坏情绪是一种提示</strong>，而如果知道什么具体问题导致了焦虑、恐慌和拖延，那么<strong>只要把问题解决，以后就不会再有类似的事发生，也就不再需要情绪的提示，因此情绪就会越来越稳定</strong>。所以年纪越大的人往往越从容、越淡定，这其实就是解决泛中年危机，或者从一个阶段顺利发展到下个阶段的过程。</p>
<p>实际上，如果真正弄明白情绪、想法、行动三者之间的关系，并且可以理解一个人的心理与外在发展过程，就会发现其实对于很多人而言，中年危机只是一个成长过程的开始，而不是最终结果。对于他们而言，所谓<strong>中年危机其实只是一个复习、深化人生经验，准备进入下一人生阶段的过程</strong>。</p>
<p><strong>拥有一定的人生智慧后，人们就会本能地把这些智慧整合起来，融会贯通成自己的能力，自然就会想进入下一个更高的阶段</strong>。所以<strong>心理学家</strong>认为，所谓的中年危机，其实就是人在拥有了一定人生经验后，需要进入另一个人生阶段时动荡不安的心理状态。</p>
<p>其实这个过程，就好像人们从初中毕业进入高中后，学习内容深入很多，思考也更深了，再到了大学，人生看法都会随之改变。<strong>每一次提升都相当于向外突破了一个圈层，而能否顺利突破取决于个人积攒、发挥了多少能力，理解了多少事情，以及能否将收获的人生智慧融会贯通成能力和见识</strong>。感到焦虑其实是好事，意味着你可能要发展到下一个阶段了。</p>
<p><strong>理解成熟，理解完整，沉淀人生的厚度，这些都是从量变到质变的过程；而对外的突破、圈层的突破，都是质变。</strong></p>
<p>我曾问一位教授：“在做心理咨询的时候，病人怎样才算是被治愈？”教授的答案让我印象深刻，他说：“<strong>一个人有没有被治愈，其实指的是他是不是有了成熟的人格和成熟的心理状态</strong>。”</p>
<p>成熟指的是内心的发展跟身体的发展处于同一个水平。同时，意味着能做出有意识的选择，并且能承担结果。</p>
<p>心理学上有一个概念是“<strong>黏附性认同</strong>”，指的是很多人并没有属于自己的价值观，总认为别人说的就是对的，依附于权威。这样的人除了不能自己独立做决定，还会表现得不敢反驳别人，活在别人的价值观里，没有自己的个性。</p>
<p><strong>真正成熟</strong>的很重要的特点就是，<strong>清楚地知道自己在做什么选择，而且知道不同的选择将带来怎样的后果，自己是否有能力承担其中不如意的结果，以及过程中存在怎样的风险，怎样控制这些风险。</strong></p>
<p>其实，感觉人生失控的<strong>根本原因</strong>是，想要的东西太多，但能力太低。</p>
<h3 id="成年初显期：一边探索，一边成长">成年初显期：一边探索，一边成长</h3>
<p>很多人会以为一个人的成年是在18岁的时候，但是从心理学的角度上来看，<strong>成年是一个过程</strong>，这个过程大概在<strong>18～28岁</strong>进行。当人们可以<strong>把年轻时学到的经验和知识融会成人生智慧</strong>的时候，成年的过程就算基本完成。</p>
<p>青春期是成年期之前的一个阶段，是成年的基础。青春期的重要性在于它是一个整合自我的过程。青春期的主要挑战是<strong>如何整合自己身上的各种特质，明白自己想要成为怎样的人，适合成为怎样的人</strong>，而不再做一个对父母和老师言听计从的孩子。如果可以完成自我整合，就可以拥有对自己作为一个独立的人的自我认识，既能保持自己的独特性，又能为社会所接受；而如果没有充分整合自我，就会留下一个破碎的、不清晰的自我认知。</p>
<p>人在从出生到高中的这十几年的时间里，累积了很多对自己和世界的认知，开始对未来的生活有自己的展望。也许有的人会认为这些都是不懂事时的胡思乱想，但其实即使当时的想法再幼稚，对于人生发展而言也都非常重要。</p>
<p>很多来访者最后逐渐活成了他们所不喜欢的父母的样子。不要惊讶，这其实就像人从小吃的食物会影响其身体发育一样。一个人从小吃的“<strong>精神食粮</strong>”也会影响他的<strong>心理成长</strong>。这里的“精神食粮”就是<strong>父母处理情绪的方式、思维方式以及所有行为。这些都会成为一个人成长的心理环境的一部分。</strong></p>
<p>这些心理环境和精神食粮会使后代继承父母的心理特点。如果父母性格有矛盾，子女的内心就会同时存在两种矛盾的心理。同时，周围的环境也对人的心理成长有着潜移默化的影响。如果这些影响因素互相矛盾或不相容，就会让人内心产生很多困惑。<strong>如果当时这些困惑无法得到充分的解决，就会固着在生命中，像一块石头横亘在生命之河中，致使后续的很多人生发展都绕不开这块石头。</strong></p>
<p>这些影响、想法和特质就像一堆碎片，也会互相矛盾，需要被整合，否则人们就会感觉自己的内在很破碎、很矛盾，不知道应该怎样看待自己。</p>
<p>在这一时期，通过<strong>阅读人物传记</strong>可以了解别人怎样整合自己身上的特点，还可以看到他们怎样走出自己独特的路，为周围的人做出贡献。</p>
<p>举个例子，很多人都看过一些励志的少年热血漫画，例如《火影忍者》《海贼王》等。</p>
<p>以《火影忍者》为例，主人公漩涡鸣人在出生之后就成了孤儿，因为学习不好无法毕业，他喜欢的女孩也不喜欢他，看起来就是一个失败者。可是，这部漫画的重要之处就在于，它让我们看到，一个在很多方面都很失败的人，怎样看待自己的短板，怎样重新找到自己、找到自己想要保护的人、找到自己的人生目标。为了保护自己想要保护的人，为了实现人生目标，他克服了自己的弱点和障碍，最后成为人人称赞的英雄。这就是一个自我整合的过程。这个故事在<strong>心理学上</strong>的意义就是，我们在<strong>自我整合的过程中，既要发现自己，又要看到别人，并且在发展自己的过程中融入自己的社群，与社群成员互相成就。</strong></p>
<p>青春期对于成年初显期而言，就是进入社会前的一个准备。<strong>人们在青春期建立自己的自尊、自信、爱好、特长、社会技能和适应性，然后准备突破到下一阶段。这一阶段的青少年会通过对内、对外的探索不断提升自己的社交能力，并且尝试不同的社交行为，逐渐确认自己的社会身份，明确自己想成为怎样的人，希望拥有怎样的关系</strong>。但是有一部分人在青春期时只顾着考试，于是这一阶段的人生任务就会被推后。</p>
<p><strong>青春期最重要的事是自我整合</strong>。在观察、了解、学习其他榜样的过程中，了解到人不是非黑即白的，再伟大的人也有自己的脾气和短板，再普通的人也有自己不同凡响之处。于是人在这个阶段就慢慢开始探索，接受自己所谓的缺点和独特的优势并将之整合为完整的自我认知。完成了这一整合的人，面对优点不会很骄傲，面对缺点也不会很自卑而无法接纳自己。这一阶段很重要的一点是，不再追求完美，认清所有的特点都是自己的一部分。从上文的描述可以看到，从儿童到青春期的阶段，人们的主要精力都在自己身上。<strong>如果把精力称为能量，人们将这时的大部分能量都放在自己身上</strong>。这是这一发展阶段应该有的状态。完成青春期阶段的整合后，心理成长就完成了一个非常重要的突破——完整的自我已经初步成型。此后，人们开始把能量放在和外界的联系上，也就是开始更多地关注周围的人、社群、社会和世界。</p>
<p>而那些<strong>没有</strong>在这一阶段<strong>完成整合</strong>的人，在二三十岁时，还会很在意别人怎么看自己，还会纠结自己的形象、面子，依然将注意力都放在自己身上，无法理解和体察周围的人。这些都是自我整合没有完成的表现。因此，他们就表现得很小家子气或格局很小，无法真正把目光投向外界。</p>
<p>过了青春期这一阶段后，就进入了成年初显期。根据埃里克森的理论，<strong>20～25岁是成年初显期</strong>，这一阶段的成长任务是亲密与孤独。</p>
<p><strong>亲密与孤独</strong>，是完成青春期的整合并开始把目光投向外界后，所要面对的<strong>第一个</strong>人生问题。然而很多人对这个问题并没有形成成熟的答案而在随波逐流。比如，有的人在面对婚姻家庭问题时，只是因为年龄大了就结婚，顺其自然地生了孩子。那么，在这个维度上，他们就只是<strong>交了卷</strong>，但是<strong>并没有回答问题</strong>，因为他们并没有根据自己的经历和思考得出自己的答案。</p>
<p>每个人的特点都不一样，整合出的自我也不一样，整合过程中锻炼出的能力也不一样。所以，在各种人生问题上，人们自然也必定得出各自不同的答案。<strong>而随波逐流其实是对自我成长的忽视和压制</strong>。之所以要回答亲密与孤独这个问题，是因为它并不仅仅是夫妻之间的问题，更多时候是在拷问人们：<strong>我如何跟另外一个人建立关系，应该建立怎样的关系，以及应该怎样处理这些关系</strong>。</p>
<p>只有通过这一过程，才能慢慢发展出在<strong>亲密关系、情绪和道德方面</strong>都能做出完整承诺的能力。做出完整承诺既需要体察自己，也需要体察别人；既能提出人际要求，也能承担相应的责任；既能融入社群和朋友关系，也能处理好彼此的独立性。</p>
<p>所以，亲密与孤独这一问题的答案，并非只涉及是否结婚，它涵盖的内容很多，包括<strong>是否能够理解自己、信任自己，是否对自己有安全感等</strong>。因为只有在可以信任自己的时候，人们才能感到很踏实、很安全。有安全感，亲密关系才可能从互相索取、相爱相杀的状态变成互相支持的状态。比如，有的人需要伴侣时时刻刻关注自己、照顾自己，或者自己不进行沟通却希望别人能猜到自己的心思并满足自己，如果别人做不到就会很生气，难以平息。这些都是<strong>缺乏安全感</strong>的表现。</p>
<p>在成年初显期，人们会和不同的人建立不同的关系，并且在建立关系的过程中逐渐<strong>看清自己、发展自己</strong>。但这并不意味着要做交际花或者必须要有很广泛的人脉，而意味着要<strong>开始思考，自己是一个怎样的人，想要怎样的关系，以及怎样建立适合自己的关系。</strong></p>
<p>同时，在成年初显期，人们还要经历一个很重要的探索过程，通过<strong>把目光投向外界</strong>，开始<strong>把过去对未来生活的想象落实到实际的行动中，并且接受现实、调整目标</strong>，根据实际情况进一步发展自我。在这一探索的过程中，个人会将青春期时对自己的想象落实到具体的立足点上，并会随着探索的深入灵活调整自己的计划。</p>
<h3 id="转型期：向管理者转型，获得晋升">转型期：向管理者转型，获得晋升</h3>
<p>首先要问自己，在30岁的人生节点，你的立足点是什么？</p>
<p>个人观点是，三十而立的“立”意味着需要在<strong>30岁</strong>的时候<strong>找到自己人生的立足点，找到人生意义和内心满足感的来源，同时应该对社会和自己都有比较明确的认识和理解，并且在此基础上产生属于自己的独立人格意识。</strong></p>
<p>要确定自己的立足点，可以先问自己两个很简单的问题。</p>
<p>问题一：你是否具备某种能力，仅凭这一能力，你就能在社会中生存下去？</p>
<p>问题二：如果以自己具备的能力为立足点，你能否站得住并站得稳，而且没有焦虑或不安的感觉。</p>
<p>在经过成年初显期的探索后，在30岁左右的时候就要对之前的经历进行总结和反思，找到一个自己可以立足的点，也就是原点。然后围绕这一原点规划自己的生活，并且在未来的时间里逐渐让自己的规划完善、落地，在此基础上不断优化、迭代自己的规划，从而建立起自己的“王国”。</p>
<p><strong>这个过程必然伴随着试错，试错就是这个阶段的核心。</strong></p>
<p>那些中年危机来得特别猛烈的人，很多都是因为在这一阶段<strong>不敢犯错、不能接受自己会错、要求自己完美的人</strong>。因为要求完美，他们完美地错过了这一重要的发展阶段。人们正是在不断探索、学习、试错的过程中，才能逐渐锻炼出独立存在于社会之中的能力。</p>
<p>人们在这个阶段逐渐开始有了<strong>自己的积累</strong>，具备了一定的<strong>抗风险能力</strong>，开始在经济上有<strong>安全感</strong>；在试错的过程中，人们了解了<strong>自己的能力</strong>，更重要的是知道了自身能力的界限，从而开始<strong>学会合作</strong>，也学会根据现实而不是根据想象或幻想行事。检验现实的能力，也是在蜕变为成熟的成年人的过程中必须发展出的重要能力。</p>
<p>同时，在探索的过程中，人们也更了解自己的喜好，知道自己怎样生活才会觉得有意义；最后，通过十年左右的时间，建立起了一个稳固的自己和稳固的“王国”，并且能感受自己的力量，获得掌控自我和改变自我的能力。</p>
<p><strong>三十而立是什么，是独立，是能力</strong>，而不是一定要有房有车、为人父母。</p>
<p>在这一阶段，更重要的是认同自己，围绕自己赖以生存的立足点继续走下去。</p>
<p>其实，经过成年初显期，大致在<strong>28～30岁</strong>时会遇到一个小的分支，这个分支其实就是青春期和成年初显期的一场毕业考试。</p>
<p>经过前面的种种努力，身体在这个阶段开始一点点地衰退。这时就要开始有意识地对那些不适合的因素做一些取舍，包括生活习惯、处理问题的习惯、心理的习惯、观念上的束缚等。要把有限的精力投入最重要的事情。</p>
<p>所以，<strong>如果感到身体有局限，就不应继续透支，要学会面对现实，根据现实条件找到和年轻时不一样的方法，实现同样的目标。</strong></p>
<p><strong>其实成长本来就是一个动态调整的过程，那些因为各种原因不得不放弃的事情和没有实现的目标，本来就是调整内心和理解世界的工具</strong>。这一调整的过程可能会让人失去一些东西，但是也会让一些人拥有<strong>更系统、更全面、更成熟的思维方式</strong>。如果抱着很多过去的认知不改变，就相当于架空自己，让自己只活在自己的想象里。</p>
<p><strong>综上</strong>，28～30岁这一阶段的重要人生任务就是明确地认识自身的局限性，认识生命和精力的稀缺性，因为只有意识到这些，才会真正地把精力都用在刀刃上。</p>
<p>针对这一点，有一个小工具可以帮助我们从四个维度判断选定的方向是否适合自己，以及应该在哪些方面进行优化。</p>
<p>维度一，自信。你现在做的事情会给你带来自信吗？你认为未来会越来越好还是会让你怀疑、否定自己？如果你有强烈的自我否定情绪，那你的选择就是不适合你的。</p>
<p>维度二，收获。在做这件事的过程里，除了收入，你都有哪些收获？</p>
<p>维度三，力量感。你现在做的事是消耗了你的力量感，还是增加了你的力量感？</p>
<p>维度四，取舍。如果只是这件事的一部分耗损了你的力量感，你是否可以灵活地把这一部分舍弃？</p>
<p>要按照这四个维度的提示思考，学会取舍，否则就有可能影响人生下一阶段的发展，导致中年危机的出现。</p>
<p>人生这一阶段的宝贵之处在于已经拥有的智慧和积累，我们之所以还没有取得突破，很可能是因为还没学会如何使用它们。此时要正视自己的困惑。比如，困惑会让人感到恐慌、焦虑，但如果选择压制这种情绪，不面对自己脆弱的一面，也就压制了自我整合的功能，限制了自己的智慧成长。</p>
<p>反之，<strong>一个真正智商高的聪明人可以平衡自己的智力和情绪，他既不需要变成一个冷冰冰、超理智的机器人，也不需要歇斯底里地发泄自己的情绪。</strong></p>
<p>这是因为，<strong>人的心理是有一定的疗愈力和恢复力的</strong>。</p>
<p>心理学家王浩威说过一句让我印象深刻的话，他说：“只要拿起桨开始划，无论朝哪个方向，总会抵达一些目的地。”我也把这句话送给你，<strong>希望你知道无论朝哪个方向前行，总比留在原地强</strong>。</p>
<p><strong>35岁之前，是跃升阶层最容易的时候，之后则会越来越困难。思考自己的人生问题，梳理自己全部的经验和心理基因，就会有更大的概率抓住机会。</strong></p>
<h3 id="人格繁衍与停滞：如何增强自己的影响力">人格繁衍与停滞：如何增强自己的影响力</h3>
<p>从埃里克森的发展心理学的角度来看，成年中期，也就是成年之后、中年之前这一阶段，要解决的核心问题有两个：<strong>繁衍与停滞、寻找人生意义</strong>。</p>
<p>多数成年人在成年中期都会经历一次转变，这个转变涉及<strong>一个人对自己人生角色的重新定义或转换</strong>。因为在这一阶段，一段关系或一份工作可能变得不再能满足个人的自我实现的需求，人们或许会在某个时间点突然意识到余生能保持体力和精力充沛的时间好像已经所剩无几，觉得人生不能就这样“走下坡”，要为自己做点其他有意义的事。</p>
<p>这种转变其实很好理解。<strong>生理、认知和情绪能力</strong>会在<strong>自我整合</strong>的过程中不断发生变化，所处的社会背景也同样会在人的一生中不断发展和变化，所以自身的转变就是对这些内在和外在的变化所做出的非常自然的回应。</p>
<p><strong>35～40岁可以被理解为中年的叛逆期</strong>。在青少年时期的叛逆期，人们感到父母和自我认知的束缚，要寻求突破和改变；而在中年的叛逆期，人们感到自身力量的衰退和时间的紧迫而想要进一步改变，进一步体会生命的意义。</p>
<p><strong>成年中期就是为40岁前后的突破积攒力量的时候</strong>。一个顺利的转变通常会伴随着深度的自我反省。所以此时就需要完成对目前角色的重新评价，探索提供新的生命意义感的可能性，做出放弃旧角色投入新角色的决定。能顺利完成这些转变的人，会对生活产生一种全新的热情并找到新的生命意义感，也就不会陷入中年危机。</p>
<p>非常有趣的是，在这一过程中，很多人会像青春期一样，<strong>又一次更深刻地重新构建对自己的认知和定位，建立起一个更复杂的自我同一性</strong>，并且在重新审视工作、婚姻、孩子、人生时具有了完全不一样的目光。</p>
<p>反之，一些在青春期<strong>没有解决自己同一性</strong>问题的人，在这一阶段就会暴露出很多问题，会跟不上这一阶段的变化，没有足够的能力，但是又必须面对生命、时间有限等限制性条件。</p>
<p><strong>青春期的人生任务是要形成自我的同一性，弄清“我是谁”</strong>。这个自我认知并不仅仅停留在评判自己是好是坏这一简单的判断维度，而是要真正意识到自己是一个怎样的人，比如知道自己喜欢和人建立怎样的关系，性格是内向还是外向；同时还要真正接受自己，比如明白自己天生就是一个内向的人，所以可能更适合做分析的工作，甚至更适合独自一人工作，从而自信地拒绝那些需要频繁接触他人的工作，也可以只交几个知心朋友，不需要熟人满天下。</p>
<p>很有趣的是，在步入成年中期后，人们又要重新开始面对“我是谁”的这个问题。这是因为人一直都在成长，周围的环境也一直在变化，在经历成年初显期和成年期后，自身和周围的环境都会发生变化，能力也有所改变。因此，<strong>要成长到下一个维度，突破圈层，需要重新进行自我的整合</strong>。</p>
<p>其实，经历了成年初显期、成年转型期，人们已经在心理、人格，以及外在的职业上稳定下来。但是，这种稳定并不等同于固执、一成不变，而是在一个稳定的结构框架内，灵活地面对更多的挑战和变化。</p>
<p>所谓<strong>繁衍，其实是一个传承自己的学识经验、智慧沉淀，形成自己对人生新的理解，提携后辈的过程。</strong></p>
<p><strong>繁衍的核心意义</strong>在于让凝聚、积累的智慧传承下去，发挥影响力，让自己可以影响其他人的人生，并且让自己和别人都更完满。繁衍是对生命和思想经验的传承和延续。虽然身体会衰老、会消失，但是生命和思想会延续。</p>
<p>此时，人们往往已经进入一个人格相对平稳的成年中期，不仅仅会照顾自己的孩子，也会对其他孩子甚至是工作关系中的晚辈抱有一种天然的照顾的心态。有的教授、科学家及一些领域的成功人士则会选择出版著作、做讲座，以便传递自己的学识、思想、理念和观点，分享自己的人生经验。这些行为其实就是作为一个人的一种生物本能——<strong>繁衍，让智慧、经验具有延续性，通过信息传递，不断调整迭代，不断延续、传承、发展。</strong></p>
<p><strong>广义上</strong>的繁衍还包括传承、延续影响力，以及让他人在受到影响后能够进一步发展出对人生、对自己、对意义的思考。</p>
<p>中年人有所谓的油腻感，其实是因为个人开始固守自己已经拥有的东西，不再寻求发展，逐渐变得固执，不愿意接受新的观念。人到中年，人们可能会发现生活好像一成不变了，一眼就看到头了，好像就只能越来越老，直到死亡了，这样的人生还有什么意义呢？</p>
<p>面对焦虑，首先要做的是别怕！焦虑是一件好事，就像发烧一样，是免疫系统为了保护自己在和病菌打仗。如果从这一角度理解焦虑，就会发现焦虑就好像一个聪明的报错工具一样，能够提示人们哪里出了问题。</p>
<p><strong>要先学会安抚自己的情绪，提高情绪的承受能力，让自己可以容纳自己的焦虑，只有这样才有可能把焦虑的积极作用发挥出来。</strong></p>
<p>但是，大部分人在面对情绪时，往往会立刻做其他的事情以逃避、排解这些情绪，比如喝酒、购物、看恐怖片等。逃避焦虑的行为会进一步导致焦虑和空虚。要知道，<strong>真正能够处理情绪的活动会让人事后感到充实和满足，不管是在短期内还是在长期内，都不会为此感到空虚和自责</strong>。这样的处理方式才是成熟的，才是在解决问题，而不是在逃避。</p>
<p>只有在有了一定的情绪耐受度时，人们才有可能做出真正的思考和改变。</p>
<p>对于人生的意义，没有唯一正确的答案，<strong>唯一的标准就是答案是否经过深思熟虑。</strong></p>
<p>重新定义自己人生转变时，要重新思考以下两个问题。</p>
<p>问题一：我到底是谁？</p>
<p>看看你能用多少个维度来回答。</p>
<p>问题二：余生中对你最重要的事情是什么？</p>
<p>这个问题会反映出个人真正的价值观、人生观和世界观。</p>
<h3 id="心理地图：绘制自己的人生轨迹">心理地图：绘制自己的人生轨迹</h3>
<p>绘制心理地图需要以下三个步骤。</p>
<p><strong>第一步</strong>，回答与自我发展密切相关的四个基本问题，对应这四个问题检视内心的第一反应。</p>
<p>这四个问题是<strong>自我发展</strong>的过程中<strong>最重要和最基础</strong>的问题，如果能完整地回答它们，即使遇到挫折和挑战，我们心底也会有应对的底气。很多人觉得在生活中失去了掌控，无力面对发生的问题，是因为他脚下的四块基石不稳固。</p>
<p><strong>问题一</strong>：你觉得你所处的世界和环境安全吗？</p>
<p>这个问题考察的是一个人的<strong>基础安全感和信任感</strong>，也就是说，你是否对周围和对自己感到安全。这份安全更多地是指心理上的安全。</p>
<p>回答第一个问题的时候，可以静下心来，试着感觉一下，自己对别人有多少信任和多少怀疑，觉得周围的世界在多大程度上存在现实层面的不安全，在多大程度上存在心理层面的不安全。</p>
<p><strong>基础安全感和信任感是一个人有良好的自尊的前置条件。一个人有了良好的自尊，才能在此基础上建立自信。</strong></p>
<p>其实，<strong>自信真正的意思是，觉得自己是可以被信赖的</strong>。比如，一个自信的演讲者会相信自己有能力通过认真调研和准备对演讲内容产生深刻理解，有能力在演讲台上把自己的观点表述清楚，这是对自己的能力的确定感。这个确定感来自于过去多次的演讲经验，他每次都可以在台上把话说完、说清楚。也就是说，<strong>自信不是夸张地表现自己，而是信赖自己在做事的时候，是一个有智慧且认真、负责、不轻易放弃的人，同时清楚自己的短板所在，并且有能力善后。</strong></p>
<p><strong>问题二</strong>：你觉得无论自己是否成功都值得被无条件喜欢吗，你喜欢你自己吗？</p>
<p><strong>能确认自己是一个有存在价值的人，是自尊和自信的基础。一个有稳定的自我认知的人</strong>，别人的追捧不会让他们沾沾自喜，因为他们知道自己的分量，别人的贬低也不会使他们自我怀疑，因为他们知道自己的能力。同时，对于别人提出的好的建议，他们<strong>会思考、会接受、会成长</strong>，而不会觉得自己被别人针对了。这是<strong>自尊发展良好</strong>的表现。</p>
<p>判断一个人是否有良好的自尊，要看一个人是否能够认识到自己的优势，要看一个人在逆境时、在承受压力时，是否仍然有能力找到让自己感觉良好的办法。而自尊发展不良的人的一个比较典型的人格类型就是<strong>讨好型</strong>。讨好型的人为了被周围的人喜欢、认可，为了不起冲突，<strong>会压制自己的需求</strong>，以别人喜欢的方式和他人相处，别人有任何意见，他们都会觉得是自己的错。如果你是讨好型的人，那么很多时候，即使别人告诉你他喜欢你，你也很难相信，需要不断地、反复地测试对方。</p>
<p>这种心理其实在很大程度上是因为自己不够喜欢自己，所以也不会相信别人会喜欢自己。这种人往往不敢表达自己的需求。</p>
<p><strong>问题三</strong>：你有能力做些什么事情，你有什么可以赖以为生的能力？</p>
<p>这个问题探讨的是对自己的能力的认知。</p>
<p>正如上文所述，青春期和成年初显期要完成建立自我同一性这一任务，这会影响职业选择以及能否独立生存。如果人们根本不相信自己有能力独立生存，自然会找到很多方法证明自己确实不行，然后变得依赖他人，而后还会影响成年中期这一阶段是选择繁衍还是停滞。</p>
<p>在安全感、自尊、自信方面存在不足的人，当提到自己的优点、自己的能力时，反而会强调“我还有这里不好，那里不好，我还没有做到，我还缺这个那个”。这时要记住一点，这种<strong>自我检讨</strong>的想法可以有，但是如果<strong>过度</strong>了，这些想法就会变成<strong>自我贬低</strong>。所以在回答这一问题时，要写下自己完成过的事情，以及完成这些事情时所展现出的能力。</p>
<p><strong>问题四</strong>：充分发挥自己的能力做事情时，你能做多少，能把这些事情做到什么程度？<br>
这一问题反映的是自我认知和对能力边界的理解。在生活中，有很多人经常随意承诺很多自己完成不了的事情，而在随意承诺时，因为没有真正考虑过自己能力的边界，他们真的以为自己能完成这些事情。有的人对金钱、时间、能力没有概念，于是给自己揽了很多活，最后却完成不了。也有的人属于常见的完美主义，认为自己做什么都必须完美，必须是最好的。<strong>这些都是对自己的能力、生命、时间和资源的认知存在局限性的表现。</strong></p>
<p>正如上文所述，成年到中年，能力进一步加强，但是生活局限也进一步加剧，这其实就是一个考验平衡和突破的过程。如果一个人不愿意承认或无法确认自己能力的边界，一味认为自己什么都行，那么他的中年危机就会特别猛烈，直到他能接受现实为止。</p>
<p><strong>第二步</strong>，从成长环境的角度分析这四个问题的产生和影响。</p>
<p>一个3～7岁的孩子的注意力能够集中的时间大约在20分钟，但是如果他总被严格地要求练琴1小时，由于他害怕自己的父母，也很想讨好他们，他就会欺骗自己的父母。在成年之后制订计划的时候，他就会制订出一些自己完成不了的计划，并且从来不敢面对自己的真实能力。</p>
<p>之所以会产生<strong>自我欺骗</strong>，甚至是在潜意识里产生不自知的自我欺骗，其实是因为不敢面对自己的真实能力。</p>
<p>因为<strong>缺少自由的自我探索</strong>甚至娱乐或游戏，而一直在被要求，所以<strong>这样的人就很难正确地看待自己、判断自己的能力</strong>。这些能力还包括一种对成功而言最重要的特质——自我控制。</p>
<p><strong>5～8岁是习惯养成的阶段</strong>。然而，养成习惯是否会限制发展呢？其实不会。这一阶段的<strong>所谓良好习惯实际上指的是，是否有办法调节自己的情绪</strong>。因为即使是在做自己喜欢的事情，也会遇到挫折，良好的习惯会帮助人们在遇到挫折时调整情绪并继续将事情做下去。很多时候，人们之所以无法坚持做一件事就是因为遇到了挫折，或许是觉得困难、无趣、漫长、暂时看不到成效，等等。</p>
<p>这时养成的习惯决定了人们在今后遇到困难时是轻易放弃还是坚持到底。比如，在亲密关系中，有的人一吵架就说分手，就想放弃一段感情，但有的人会选择努力沟通并化解两个人的矛盾，这和小时候养成的习惯有关。<strong>如果在这一阶段能给自己制定情绪规范，这个规范就会成为一个人持续发展的重要基础，否则情绪的泛滥就会影响思维能力的发展</strong>。正如上文所述，拥有了一定情绪的耐受度，才能进行真正意义上的思考和改变。</p>
<p>所以如果可以在5～8岁这一阶段培养出基本的意志力和实干能力，从而拥有主动性的发展，就可以顺利进入青春期。</p>
<p><strong>第三步</strong>，评估在过去的时光里，自己对事业和生活的掌控有多少。</p>
<p>到现在为止，如果对上述问题进行了认真思考并写下自己的答案，也思考了这些答案，那么一个心理地图就已经初具雏形了。</p>
<p>请继续回答以下四个更深入的问题。</p>
<p>问题一：在儿童期和少年期的时候，你对后续的生活有过怎样的期许？</p>
<p>问题二：在青春期的时候，最让你困惑的问题是什么？同时考虑一下，这些困惑和你在那一阶段需要发展出来的能力之间有什么关系？</p>
<p>问题三：上面的这些主题——年少时的期许和困惑，在成年初显期里是怎样的？是随着你的社会化水平的变化而变化，还是被埋葬了，抑或是进入了一个更深的层次，使你不断积累自己的实力？</p>
<p>问题四：在成年期的时候，你的脚步是虚浮的还是已经扎实立足？</p>
<p>思考这些问题并结合上文的内容对答案进行梳理，就会画出一个属于自己的心理地图的基本框架。</p>
<h2 id="第二章-事业管理">第二章 事业管理</h2>
<h3 id="心态管理：工作对你意味着什么">心态管理：工作对你意味着什么</h3>
<p>在现实的生活中，很多人在<strong>中年时</strong>开始感觉<strong>失去了工作的热情和动力</strong>，很多时候只剩下“熬着”，这是一种进退两难的状态。很多人在此时开始感到力不从心，而且不良工作状态已经开始影响生活的其他方面。</p>
<p>一般来说，这种状态的出现有三种不同的原因。</p>
<p><strong>第一种</strong>，本来就不喜欢这一职业。随着工作内容和难度的变化，压力也会增大，每天的工作就变成了和负面情绪、负面经历做斗争。</p>
<p><strong>第二种</strong>，由于过往的一些经历的影响，无法激活自己的活力，这阻碍了全部能力的发挥。比如，上学时老师对于考试成绩不太好的你总是横加指责，同学也孤立你。当领导一个新的项目时，你可能也会担心无法让同事认同，无法让领导满意，总是记得上学时的不好的感觉，于是面对工作很容易产生消极情绪。</p>
<p><strong>第三种</strong>，职业倦怠。上述原因都容易导致在工作中难以保持愉快，而更多地感到有压力。如果把愉快的经历比喻为收入，把焦虑和难受比喻为支出，当感到自己开始在工作中失去掌控时，人们其实已经处于入不敷出的状态。这就像一台机器在不断地运作，但是却没有得到任何保养，也没有任何的原材料、原动力被加入。</p>
<p><strong>对工作失去控制，指的是一种没有力量掌握周围的事情和事态发展的感觉</strong>。这种感觉进一步发展后，就会变为心理瘫痪的感觉。有些时候，心理瘫痪的感觉会被很多人定义为拖延症。很多人身上其实会同时存在这几种情况，只不过程度有所不同。</p>
<p>在过往的咨询中有很多人都会问我，为什么别人做某件事就那么轻松，但是我自己做某件事就这么困难？其实世界很公平，每个人都有每个人的苦难，没有人能够轻易成功，人们可能只是看到了别人轻易成功的部分，<strong>却没有看到背后是多年的努力和付出</strong>。人们看到的可能是他们没有心理内耗时的表现，但是没有看到<strong>为了过没有内耗的生活，他们付出过多大的努力。</strong></p>
<p>几乎所有的心理学家都会同意一个关于生活和工作的真相：<strong>如果想要获得心理健康，那么就要过遵循内心的生活。过遵循内心的生活需要很多勇气和付出</strong>。所以人们看到的只是他人付出努力后的结果。如果你也想有这样的生活，就要看看这些人比其他人多付出了什么。</p>
<p><strong>第一</strong>，他们坚持自己的想法，并且他们可以承受别人的看法和反对，并且在这种情况之下，他们仍然可以一直坚持，只要这个想法遵循自己内心。</p>
<p><strong>第二</strong>，在被要求做一些违背内心想法的事情时，他们知道怎样灵活处理。不管是直接拒绝，还是周旋，还是妥协，他们总能灵活地找到出路，而不是做违背内心的事情。他们不认为妥协是一件消极的事情，因为妥协其实意味着双方可以协商解决。</p>
<p>其实很多有<strong>内耗的人、内心纠结的人</strong>，在生活中经常都会在很多方面<strong>让步</strong>，但是这些让步都是<strong>出于恐惧、不安全感</strong>，而让步的结果通常是委屈了自己，在内心积压了很多消极的情绪。他们通常以为“如果我忍下来了，如果我委屈一下，这件事情很快就过去了，就不麻烦了”。</p>
<p>确实，“打碎牙往肚子里吞”在当时看起来是个很快能摆平事情的做法，<strong>可是在后期要付出很高的心理代价，甚至会有一种背叛自己的“存在主义负罪感”</strong>。而那些没有内耗的人，他们其实每天都花了很多时间在这些“很麻烦”的事情上。他们不会随便对抗或讨好，<strong>而是花很多时间调节自己的情绪后，思考怎样协调好周围的事情，并且在这些事情上找到一条中间的道路。</strong></p>
<p>正是因为他们每天都会花很多时间思考协调这些事情，所以他们走的每一步、做的每一件事情都是踏实的，都是遵循自己内心的。因为有这分踏实，他们就可以稳稳地掌控自己周围的事情，并且不会感到急躁或不耐烦，也因此他们在大部分时间里都是从容而充满热情的。</p>
<h3 id="选择管理：如何面对事业困境与瓶颈">选择管理：如何面对事业困境与瓶颈</h3>
<p>大部分人在上大学之前从来没有真正思考过自己想要做的事情。很多人只是根据高考分数报考专业，或者听说什么专业容易就业，就选择什么专业。</p>
<p>很多人都<strong>缺乏自己的价值判断，缺乏思考力</strong>，在生活和工作中处于被动状态，被事情推着走，但是内心又感觉有很大落差。<strong>这是一种比较严重的价值观体系和自我缺失的表现</strong>。关于这一问题，北大著名的心理学副教授徐凯文，根据他和学生一同工作的经验，将这一情况称为“<strong>空心病</strong>”。</p>
<p>比如，一个没有内在的价值判断、喜好判断、感觉导航系统的人，就好像一个玩具机器人，像一个用他人的评价堆砌起来的玩具，而其内在实际上是空空如也的，因此他们的心理危机很多时候会在高三或在大学时暴发。<strong>就算此时没有暴发，顺利毕业进入职场，他们在后续发展中也会面临巨大的困境。从小学青少年时期的积累，进行自我认知，到后面的整合迭代，到最后的突破，这是一个环环相扣的发展过程。</strong></p>
<p><strong>每一环节里走过的捷径，最终都会在后续环节中变成最长的弯路</strong>。徐凯文副教授提到的<strong>空心病</strong>，在日常咨询中非常常见，<strong>其表现为对他人意见的异常依赖</strong>。比如，有问题不知道应该怎么做出选择，必须征求别人的意见；很在意别人对自己的看法，如果有哪点不如别人就会很难受；也不知道自己喜欢什么，别人说什么就是什么；虽然自己在生活中似乎什么都做对了，但是又总感觉哪里不对，总感觉自己活得不舒展、不舒服。</p>
<p>一些大学生以及进入社会的成年人由于严重的空心病，容易陷入严重的抑郁，甚至最后不得不退学或病休在家，难以回到学校或工作岗位。造成这个问题的根源之一便是拥有一个被包办的童年，尤其是在<strong>5～13岁</strong>这一时期。</p>
<p>为什么很多家长要包办孩子的童年呢？因为对有些人而言，学习好就代表一切都好，包办孩子的童年可以使孩子很快取得很好的成绩，所以这是一条很多家长喜欢走的捷径，但它却是人生发展中最长的弯路。<strong>因为包办童年、只看学习成绩这条捷径的代价是孩子的自我、自主性、价值观没有得到充分发展。</strong></p>
<p><strong>童年时，如果每一次都让别人帮自己做选择，没有经历过思考和选择，就无法形成自己的价值观。价值观的意思就是一个人觉得什么更值“钱”</strong>。当然，这个钱其实指的不仅是金钱，还有时间、精力等稀缺资源。价值观的形成是一个不断练习、不断试错的过程。<strong>在这一过程中逐渐了解自己更看重什么、什么事情对自己来说更重要，然后在往后的抉择中，人们就会在自己看重的事情上投入更多，并且限制自己在不重要的事情上的投入</strong>。毕竟时间、金钱、精力都是有限的。</p>
<p><strong>价值观就是取舍</strong>。如果很多事情从小就都由父母包办，人们自然就会缺少练习选择、面对取舍的过程。</p>
<p><strong>没有父母的“包办”，孩子就需要自己学会面对挫折和失败，学会协调很多不同的冲突，也需要学会认识自己，并且逐步为自己的选择承担责任</strong>。一个人如果没有经历过挫折，或者面对挫折时都是被动应对而不是主动迎战，或者一直都选择最容易的路，他的心理免疫系统就会很脆弱，就好像一直处在无菌病房里一样。而那些一直在真实生活中摸爬滚打的人所经历的就像从小到大的发烧、感冒一样，在经历各种各样的病毒和细菌感染后生病，病愈之后体内就会有抗体，免疫系统就会越来越强大。</p>
<p><strong>这一过程还会锻炼人承受情绪的能力</strong>。每一次生病都会很难受，都会带来很多情绪，久而久之，人们就会慢慢知道怎样面对这些情绪。如果从小没有经历过这些，心理可能就会很脆弱。<strong>如果在过往的人生中走的都是捷径，那么最好的办法其实就是尽快把之前欠的债都还清。</strong></p>
<p><strong>人在面对选择时需要具有自己的取舍标准和承受能力</strong>，这些能力的强弱取决于13岁之前的几个发展阶段的发展情况，而在这些发展阶段要回答的问题是，我能做什么，我能做多少。这些问题的答案决定了人们以怎样的标准做事业上的选择。</p>
<p>回答这些问题需要回到4岁的时候。<strong>一个正常发展的孩子在4岁的时候，需要大量玩耍，也喜欢玩耍</strong>。一个孩子开始玩耍时，就会发展出真实的能力，并且开始知道自己喜欢什么，能干什么。<strong>玩耍时，孩子的专注力和创造力都是自发的，不需要刻意努力。注意力集中、创造力旺盛是所有人天生就自带的状态</strong>。如果觉得注意力很难集中，要学习的是如何恢复到天生的状态，而不是学习重建这个状态。</p>
<p>人类天生充满好奇心、专注力和创造力。人们并不需要学习怎么好奇，学习怎么专注，怎么有创造力。</p>
<p>很多小孩可以花半天时间看蚂蚁，可以问出很多问题，可以很专注地玩一个玩具，玩一下午都不腻，还可以把积木拼搭成各种样子，把它想象为一个人，想象为一个厨房，等等。这些充满创造力的状态其实是人类天生就有的，所以真正要关注的是，在发展的过程中到底是什么事情使人们失去了这一状态。</p>
<p>比如，很多人觉得不知道自己喜欢什么，是因为从小就被要求学钢琴、学小提琴等，而不是因为自己喜欢。有的人可能会说：“说不定这些爱好练着练着就逐渐爱上它了呢？”其实，这是两种不一样的状态。真正的爱好其实是发现这件事情的有趣之处后才开始学习，而不是在学习过程中体会到有趣之处。</p>
<p>而对于在学习尝试后找到的爱好，如果是因为在学习的过程中找到了乐趣，体会了快乐，那也可以算是真正的喜欢；但如果练习的动力是每次获奖时的风光，那么爱好其实是获奖，而不是这件事情本身。<strong>而对于有空心病的人而言，他需要享受的就是获奖时的风光，就是别人的赞扬甚至是自己藐视别人时的虚荣。</strong></p>
<p>孩子在玩耍过程中，就会逐渐发现自己的兴趣，慢慢知道自己喜欢什么、能干什么。当然，<strong>这有个大前提，就是安全感</strong>。一个人如果没有安全感，害怕失去，害怕被别人讨厌，那么他就不敢自由自在地玩。这样的孩子在长大之后，就会在一定程度上受制于别人的观点。</p>
<p>很多人在面临选择时，所选择的并不是自己喜欢的，而是妈妈觉得他喜欢的，或者是周围的人觉得他看起来很擅长的事情。这样的人会把别人的感觉看得比自己的真实感觉更重要。</p>
<p>在面临选择时，在尝试寻找突破时，尝试找寻自己真正喜欢的事情时，<strong>是把自己的感受放在优先位置，还是把别人的感受、看法放在优先位置，是一个很本质的区别</strong>。如果在做抉择的过程中，首要考虑的是别人的看法，那么有很大概率做出一个并不适合自己发展的决定；如果把自己的感觉放在优先位置，然后再平衡周围人的感受以做出最终选择，那么所做的事情至少是自己喜欢的，人生就会容易很多。</p>
<p>如果在儿童期没有充分地玩耍，那么这些没玩够的人往往会在事业上遭遇瓶颈。我在咨询过程中发现，很多人实现自我转变的方法是学习如何玩。在练习玩耍的过程中，那些为了满足别人而被压抑下来、没有得到满足的情绪就会浮现出来。这是一件好事。虽然这些情绪可能会让人很难受，但是这些情绪就是重新获得发展生机的很重要的动力。</p>
<p>开始练习玩耍前，需要思考以下三个问题。</p>
<p>问题一：回忆从小到大是否有过太投入而忘记了时间流逝的经历？如果有，当时在做什么？</p>
<p>问题二：上一次放肆玩耍并且觉得很开心是什么时候？当时在做什么，跟谁在一起？</p>
<p>问题三：回忆你上一次玩耍结束后，是感觉更充实还是更空虚？</p>
<p>其实不然。对大部分人而言，玩耍还远远没达到放纵的地步。如果真的很担心这一点，可以学习区分逃避式的放纵娱乐和真正的玩耍，标准就是，做完这件事情后是感到更充实，还是感到更空虚。对于那些有强迫性思维的来访者，我甚至会告诉他们：我能给你开的药就是每天必须睡够12小时，玩够6小时，而且还不仅仅是玩电子游戏，还必须每天变着花样玩。</p>
<p>这个练习可能很困难，但是记住一点，这些困难一个一个地被解决的过程，恰恰是重新获得生机的过程。如果可以重新开始投入地玩耍，很多原来的强迫性思维，很多职业上的困境都会被解决。</p>
<p><strong>在转变的过程中，限制性思维和错误信念也是很大的障碍</strong>。比如，在谈及学习和进步时，一个典型的观念是“学海无涯苦作舟”。人们普遍认为学习的过程是痛苦的，因此他们会在人生中不断寻找痛苦，认为只有承受痛苦才可以达到人生的目标。这样的人可能一生都会很痛苦，而且这份痛苦还是自找的。反之，如果把这一限制性思维模式替换为“人在痛苦中固然可以学到一些内容，但是在快乐中学习也可以学到很多东西，获得很多人生意义”，就会在面对选择时，也可以选择快乐，这样自然就会更容易避免一些痛苦。</p>
<p><strong>在成长过程中，找出自己的限制性观念非常重要</strong>。学会玩耍，其实是很多人走出<strong>30～40岁</strong>困境的一个重要环节。这虽然看似风马牛不相及，但是在临床工作中，这一简单的做法几乎百分之百帮助了面临中年危机的人。</p>
<p>而且，学会玩耍这件事情本身就有助于恢复很多没有被发展出来的心理功能。</p>
<h3 id="精力管理：如何拥有精力和专注力">精力管理：如何拥有精力和专注力</h3>
<p>心理学史上非常著名的案例，案例的主角叫米西（Missy）。米西是一个很难得一见的典型，其典型之处在于她的家庭环境良好、父母心理状态稳定，她顺利地度过了人生发展的每个阶段。</p>
<p>米西的身上拥有很多成年人都没有发展出的状态管理能力。</p>
<p><strong>第一点</strong>，米西对于吸引自己的东西可以自然而直接地表现出喜爱之情并且会主动追求。很多其他孩子进入房间后，可能只是远远地看着这些玩具，或者看到玩具在箱子里面就认为“这个玩具不能玩”，或者尝试一下就放弃了，但是玩普通玩具时就会心不在焉。</p>
<p><strong>第二点</strong>，米西对于解决问题有坚持不懈的品质，而且是坚持而不是固执，她能灵活地选择和尝试不同办法。有的人做事浅尝辄止，无法坚持不懈；有的成年人在事业的道路上一条路走到黑，觉得非如此不可，不接受任何其他意见，这就是固执。</p>
<p><strong>第三点</strong>，米西有觉察自己情绪的能力。这种觉察来自于她能接纳这样一个事实：消极情绪就是日常生活里很自然的部分，出现消极情绪就去调节和解决。这得益于她的父母的情绪成熟度。所以，她很熟悉自己的消极情绪，在沮丧等消极情绪严重影响自己之前，她就会主动采取行动，及时进行调节。很多人压抑自己的情绪，不允许自己有消极情绪，却任由情绪在心底发酵，影响日常的工作状态。</p>
<p><strong>第四点</strong>，米西能暂时离开自己的压力来源，通过熟悉的办法调节情绪，然后再继续解决问题。她既没有和箱子死磕到底，也没有找到替代品就回避和逃避内心的追求。有的孩子看到很吸引他的玩具后，就无法再去玩普通的玩具，情绪就卡在“好玩具得不到、普通玩具看不上”的困境里。</p>
<p>从米西在这一实验中的表现可以看到她的很多优秀的心理素质和心理能力的萌芽。在后续的人生里，她或许能把这种玩耍和探索顺利转移到对人生、事业、关系的探索上，并且保持了好奇和热忱、坚毅和灵活。</p>
<p>首先，当一个人投入地玩耍时，这一状态就是一个人最专注的状态。如果发现自己不会玩，或者不敢玩，或者玩的时候觉得很无聊，那么现在就要非常重视这个问题。</p>
<p>重新学会玩，可能是完成阶段性突破的第一步。玩耍时，人的创造力、精力、专注度是最高的。如果没有玩耍，无法享受一些经历，那么人们就会缺乏调节情绪的出口了。毕竟，调节情绪不等于压抑情绪，而是要释放压力，然后将愉快的情绪填充进去。</p>
<p>其次，很多人都有注意力涣散的问题，这其实是在成长过程中没能保护好自己自然的状态，而被外界的影响入侵过多造成的。如果一个小孩在很专注的时候总是被打断，这个孩子自然就无法形成专注力。</p>
<p>什么叫总是被打断？比如，很多家长在带孩子去动物园玩时，因为想要“值回票价”，总希望能带孩子看完所有动物。但实际上，孩子的注意力很有限。</p>
<p>小时候没有充分玩耍的孩子，就无法在玩耍和探索的过程中顺利发展出对后续人生而言至关重要的各种心理能力。没有玩耍的状态作为参照物，一个人也就很难形成专注状态的标准，也无从知晓调节自己的精力以维持专注状态的方法，也很难知道自己喜欢什么。</p>
<p>米西带来的另一个在状态管理上的启发是，小时候的玩耍质量与长大之后学习的状态、进入社会后工作的状态、在亲密关系中维持亲密的状态都密切相关。</p>
<p>要注意孩子的玩耍质量。有的孩子可以自由探索，会在玩耍时先观察周围都有什么玩具，分别怎么玩，以及最想玩哪个，或者看看怎么把玩具组合起来。他们会有很多想象，比如，同样是积木，如果他们今天玩建造游戏，那些积木可能就是一块块砖头，明天玩的可能是过家家，那些积木可能就会是不同的人。在玩耍过程中，他们的想象力、创造力等都会发挥出来，他们也会从中体会很多乐趣。</p>
<p>所谓的坚持、坚毅，其实是指在某件事情时如果遇到问题或挑战能不退缩，并且能调整自己的状态。坚持、坚毅，并不是要求人们一定要做一件很难的事情或很讨厌的事情并在其中获得锻炼。这是很多人对坚持、坚毅的误解。</p>
<p>要做到真正的坚持、坚毅需要认清在做事情的过程中一定会遇到困难或挑战的现实，但是仍然对这件事情心存热爱，仍然愉悦地完成这件事情，坚信眼前的困难只是一时的，总会过去。这样的人在遇到困难的时候是有期盼的。</p>
<p>如果做一份工作只是为了钱，那么这份工作带来的也就只有钱，而没有自我认同和自我成长，并不能带来人生的意义。如果持续这种状态，四五十岁时就很容易陷入绝望和停滞，晚年生活也可能很痛苦。</p>
<p>所以，大家如果现在正好有机会，就可以尝试发掘“我玩什么时比较高兴”。现在的玩耍乐趣不一定要成为职业，但是如果不曾将任何时间花在一件自己真正认同的事情上，那么在后续的人生中可能会自然而然地产生更多的绝望感和无力感。</p>
<p>作为一个小练习，请你在一周内尝试做三件没有意义的事情。这很重要。</p>
<p>什么是“没有意义”？</p>
<p>如果不知道自己喜欢什么，自然会用功利的标准评判一件事情。例如这件事情是否有利于个人成长，或者有利于竞争。所以，如果根本不知道自己喜欢做什么事情，你要做的第一件事情就是，试着做一些看起来没有意义的事情，因为这些事情对于你而言才是新的尝试。“没有意义”这个标准是在帮助你跳脱出功利的思想，寻找一些自己以前从来没有尝试过的事情。</p>
<p>比如，看一看蚂蚁搬家，或者晒个太阳、懒散一下，或者玩玩沙子，甚至给自己买一直想玩的遥控车、芭比娃娃，等等。这些你觉得没有意义的事情，在此时，对于个人突破来说，才是应该立即探索的。否则，一直囿于很多以往的评判标准，你的眼睛永远只能看到那些固定思维让你看到的东西。</p>
<p>再次回到米西的案例。维持专注需要对精力进行管理。很多人都会要求自己有大段时间、有完美的状态才开始工作。而米西带来的启示是，<strong>在日常生活中，精力是有限的，状态会随时改变，如果一切都要等到所有条件成熟才能做，那就永远无法开始。</strong></p>
<p>专注不是等出来的，不是刷手机刷出来的，而是在做事情的过程中慢慢进入的一种状态，而且这种状态会受到情绪的影响，而情绪就是会经常波动。比如米西想去解决问题的时候，她就会专注于解决问题；当情绪开始干扰状态时，她就会选择暂时放下问题，用玩耍重新给自己补充能量；能量充足后再去解决问题。</p>
<p><strong>一个人的意志力、精力、专注力都有限</strong>。假设一个人一天的意志力、精力和专注力是100份，上午的工作消耗了40份，下午的工作消耗了50份，到了晚上，其实就只剩下10份。10份意志力、精力和专注力可能不足以抵御夜宵的诱惑。如果要求自己不吃夜宵，这时就会很难受，因为已经没有“余额”完成自控这件事情了。面对这种情况，要么为自己“充值”，要么减少在工作上消耗的意志力、精力、专注力，将其多分配一些在自己的生活上。<strong>透支固然也是一种选择，但透支的利息很高。</strong></p>
<h3 id="人脉管理：如何提升自己的社交价值">人脉管理：如何提升自己的社交价值</h3>
<p>在玩耍的过程中，孩子能通过别人的回应体会自己的所作所为带给别人的感受，以及别人的所作所为带给自己的感受。在这一互相协调的过程中，他们渐渐学会如何兼顾别人的感受和自己的感受。</p>
<p>在玩耍的过程中，孩子会不断调试、不断学习怎样既让自己玩好也和别人相处好。慢慢地，孩子就会知道自己应该找什么样的朋友，以及什么样的人不适合与之成为朋友。在这一过程中，孩子会慢慢学习到很多关于社交的知识。</p>
<p>在玩耍的过程中，孩子既了解了别人，也通过别人这面镜子从更多层面了解了自己。<strong>如果能真正了解自己、接纳自己，当需要在人际关系上或事业上做决定的时候，人们就不容易被别人的观点裹挟，而会更有主见。</strong></p>
<p>在和别人自然地发展关系的过程中，我们既能<strong>了解别人，也理解自己，并且还能发展出同理心、共情能力、换位思考能力</strong>。以这些认知和能力为基础，就能逐渐把通过社交获得的社会资源用于个人的发展。社会资源的作用不仅仅体现在工作方面，更多的是让我们通过<strong>了解别人的经历，接触更多观点，增加新知识的输入，开阔自己的眼界；同时，人和人之间的良好互动也会成为情绪稳定的后盾</strong>。人际关系发展过程必然带来更多的发展机会。</p>
<p>人到中年时的一个很重要的人生课题是繁衍与停滞。其中，一个很容易衡量的指标就是<strong>影响力</strong>。</p>
<p>一个人的影响力，可以简单地被理解为，有多少人能听见他说的话，以及有多少人会听从他的话或思考他提出的观点。影响力和权力不一样。一个人可以没有权力，但是如果有影响力，他的话就有分量，就会有很多人愿意追随他，听取他的建议。</p>
<p>有影响力的人通常具有以下几种特点。</p>
<p><strong>第一</strong>，能处理自己的情绪，体察别人的情绪，并且可以在调节情绪后找到事情的解决方法。</p>
<p><strong>第二</strong>，对其他人感兴趣，并且并非出于个人利益，而是真正对其他人感兴趣，<strong>能整合团队，充分发挥每个人的作用</strong>，也就是常说的<strong>知人善用</strong>。这样的领导者不仅能真正了解每个团队成员的优点和缺点，也知道怎样帮助团队成员发挥长处，避免其短处成为整个团队的障碍；同时，因为对他人感兴趣且真正关注他人，所以他们可以在和他人协作的过程中，根据不同人的特点帮助他们进行个人发展。这样的人很快就会成为团队的核心，即使不是职位最高的人，他也一定是说话最有分量的人。</p>
<p>一个人要建立自己的影响力，很重要的一点是，和周围人建立关系。这种关系应该是真实的人和人之间的关系，而不仅仅是利益关系。利益和权力可以带来服从，但是影响力只能建立在真实的关注和共情的基础上，是一种利益关系和比等级关系更深刻的人际互动。一个人能否建立影响力，取决于一个人是否拥有上述能力，以及他能否和周围的人有深刻的互动和共同的经历。</p>
<p>综上，在进行人脉管理时，首先要和对方玩到一起，玩到一起是建立人脉的基础，意味着人与人之间有建立深厚关系的基础，有共同的经历或者曾经同舟共济。</p>
<p>有很多人在想建立亲密关系时会尝试相亲，但相亲的结果往往不尽如人意。其中很简单的一个原因就是<strong>缺少共同的经历</strong>，只是把亲密关系建立在<strong>条件交换</strong>的基础之上。</p>
<p>建立人脉的一个基础是共同的经历。如果两个人之间没有共同的经历，那么熟人就很难真正成为人脉，而只会是通信录中的某人。</p>
<p>关系的建立往往有赖于共同的信任合作和互相支持。信任，来自于可预测性和可重复性，“每次我找你你都在”或“我失败你不会指责我”，慢慢地人与人之间就会产生信任。支持，则来自于互相的深度理解。</p>
<p>所以如果想建立良性的人脉关系，给自己带来真正的提升，要做的第一件事情就是认识自己。在此情况之下，不难发现，一个人的人脉管理其实和自我管理一样。所以，如果想管理好人脉，就要从重新认识自己开始。</p>
<h3 id="价值管理：如何提升工作中的自我价值">价值管理：如何提升工作中的自我价值</h3>
<p>很多时候，那些内心没有自我的人，其实往往有很优秀的背景和经历，都能将很多事情做得很完美，只是这些事情并不能带给他们存在感，所以他们才会在很多的时候不知道自己喜欢什么，觉得活着很没有意义。</p>
<p>存在感首先表现为一个人能确认自己的存在。有时候人们觉得自己没有存在感，或者存在感低，指的就是没有人在意自己，甚至有时自己都会不自觉地忽视自己。从心理学的层面来讲，<strong>一个人之所以能确认自己的存在，是因为能确认自己可以被其他人感知，并且可以感受别人的反应，看到别人的眼里有自己</strong>。这种存在感的确认方式来自于<strong>生命早期</strong>。照顾孩子的人能确认孩子的需求和感受并给予回应，于是孩子就能确认自己和他人的存在。如果孩子大喊大叫都没有人理，或者表达的任何感受都被说是错的，久而久之就会产生自我怀疑、自我压抑。更有甚者，就会变得唯唯诺诺，没有自我。</p>
<p>一个人能确认自己的存在，就能感到自己拥有力量感，也就是感到自己可以推动一些事情，可以通过与周围那些会回应自己的人协作完成一些任务。这就是上文提及的“我能做什么，我能做多少”的心理发展阶段。在能够认知并且使用自己拥有的能力做事情后，就会慢慢看到自己做的事情对周围世界的影响以及周围世界的反馈，人们会因此感到自己的存在。这就是存在感。</p>
<p>存在感和意义感是所有人都渴望获得的，对心理和精神而言是极其重要的养分。缺少二者，心理就会饥饿。人总是希望能在世界上留下更多的痕迹。</p>
<p>人是追求意义的生物，而意义是对自己做的事情的理解。这种理解包含三方面的含义。</p>
<p><strong>第一方面</strong>，是否对所做的事情有深刻的理解，是否思考过自己做这件事情的目的。比如，对于需要长期重复的事情，是把它当作最终结果，还是一个达到目标的过程；是在穷忙，还是在有意识地做准备。</p>
<p><strong>第二方面</strong>，这种理解和这个目的是否能带来正向的价值感。</p>
<p><strong>第三方面</strong>，这种理解和这个目的是否能使人产生一种自己从属于某一个大于自身的事物的感觉。</p>
<p>当体会到存在的意义时，人们才会感到自己的存在是有价值的。因此，要不断尝试觉察工作中的真实感受。</p>
<p>存在感是一种充实的感觉，一种“我很有力量”的感觉。看到自己对周围的人和世界产生的影响，看到周围的人和世界的正向反馈，会让人逐渐稳固自己的存在感，并且进一步感受自己的力量。在这一基础上，如果对自己从事的事情有进一步的理解，并且看到其背后更宏大的目标，就会产生意义感。</p>
<p>比如，一个人如果只是每天在流水线上做着重复的工作，其心智就容易日渐麻木，但是如果他从事这份工作是为了更宏大的目标，就会产生意义感，这份工作对他而言就不再只是日常重复劳动。</p>
<p><strong>意义感让人们体会到自己做的事情超出了日常琐事的范畴，从而在精神上给予人们外在的滋养。</strong></p>
<h2 id="第三章-人际关系">第三章 人际关系</h2>
<h3 id="依恋循环：原生家庭如何影响你的人格发展">依恋循环：原生家庭如何影响你的人格发展</h3>
<p>在成长的过程中，家庭环境和家庭关系会奠定人格和性格发展的底色并影响整个发展过程。<strong>亲密关系是对原生家庭的延续，却又是突破原有模式、获得新的成长的契机</strong>。因为每个人又是各自孩子的原生家庭的缔造者，所以这些模式也会传承给各自的孩子。</p>
<p>在理解一个人的性格、人际交往方式、思维方式等方面的形成过程时，需要综合考虑两方面，一方面是外在环境，另一方面是他们如何在内在心理发展的过程中理解、消化自己的经历。</p>
<p>每个人的经验组织形式都有各自的特点，所以对待同一件事情，不同的人会有不同的反应。所谓的经验组织形式，简单来说就是“怎么理解发生在我身上的事情”。比如，对于“第二次高考失败”“第二次创业失败”“第二次失恋”，有的人认为自己是“厚积薄发、大器晚成”，而有的人则会认为“事不过三，再失败人生就完了”，如果是后者，在经历两次失败后，内心就会很焦虑，因为情况已经接近他认为自己要彻底完蛋的底线了。但是如果一个人相信自己大器晚成，就会相对平静地安排自己的第三次高考、第三次创业、第三次恋爱。</p>
<p>这些不同的反应就是经验组织模式，将之内化在心里，就形成了解释自己经历和行为的模板。这一模板会在很大程度上决定人们对人生的看法和幸福感。这一模板是怎么形成的？为什么有的人可以越战越勇，有的人不堪一击？这就与依恋循环有关。</p>
<p>依恋循环是依恋治疗师弗里曼博士提出的临床模型，这一模型可以很直观地描述一个人从小到大的日常生活如何影响其经验组织形式，包括遇到压力时的感受、归因、处理；会觉得周围环境有恶意，还是觉得自己可以获得帮助也值得被帮助；会退缩还是会冲动行事。这些经验和经历日积月累就形成了稳定的人格和性格。</p>
<p><strong>依恋循环模型包括四个步骤：需求—表达—满足/不满足—心理结果。</strong></p>
<p>在第三步中，如果需求被满足了，就会感到这个世界是安全的，自己会被看见、听见，需求会被满足，知道自己的这一需求是正当的。在这一循环基础上日积月累，就可以建立起基础的信任感和安全感，以及自尊、自信和价值感。</p>
<p>如果需求在表达出来后没有被满足，人往往会有两种反应，一种是生气、愤怒，另一种是抑郁，这也会导致不同的心理结果。</p>
<p>这一循环是一个人心理基石中最小单元，人们会在这个基础上处理外界传递的信息，形成基本人格和性格以及行为模式。</p>
<p>接下来，学习如何利用依恋循环这个模型重新梳理自己的经历。</p>
<p><strong>第一步，需求。</strong></p>
<p>一个人在出生时，在生理上至少有三种需求，分别是食物、接触和运动。</p>
<p>和这三个生理上的需求相对应，心理层面上也会有三个类似的需求。</p>
<p>第一个，爱的需求。心理也需要吃饭，也需要精神食粮和心理滋养。从上文的腓特烈二世的故事可以看出，婴儿不是只要有食物就可以存活，他们还需要别人的关注，需要别人了解自己的需求。无论是在神经科学还是心理学层面上，这一现象都可以找到很多理论和临床研究上的证据。</p>
<p>第二个，联结的需求，对应身体层面接触的需求。人们在心理层面上需要另外一个人愿意跟自己产生联结，比如，妈妈愿意看着自己，周围的人愿意聆听自己说话，朋友愿意了解自己。</p>
<p>第三个，情感流动的需求，对应身体层面运动的需求。在心理层面上，仅仅有人看着自己、听自己说话也还是不够，人们还需要有情感的流动。人们需要表达和被聆听，也需要别人对自己的理解和反应，需要和其他人存在感情的流动和融合。情感的流动是否通畅、流动的方式是海啸洪水还是死水一塘，是值得思考的。</p>
<p>以上就是生理和心理上的六个基本需求。当这六个需求可以被理解、被感知并被满足时，个人基本上就可以健康发展。完全孤独的状态，会对个人的心理健康有很大的影响，使心理上和精神上的能量很容易枯竭。</p>
<p>这源自一个人在童年时和父母的互动关系及其父母之间的互动关系。他们的父母本来就缺少情感的流动，或者他们小时候想让爸爸陪自己玩，想让妈妈陪自己读书时，他们的父母会说“你要求太多了”。</p>
<p>如果在小时候习惯了自己的需求被拒绝，长大之后自然也不会觉得自己的要求应该被满足，也不会认为伴侣不满足这些要求是伴侣的错。心理扭曲这个词听起来很可怕，其实在微观层面上很好理解。</p>
<p>每个人在需求层面都会有一定程度的心理扭曲，这一点并不可怕，只要一步一步把这些过去搭错的线重新理清楚即可。要建立一个健康的循环，第一步就要先从需求开始，学会接受自己的需求。</p>
<p><strong>第二步，表达需求。</strong></p>
<p>首先，要知道表达需求是必要的。因为需求只有被表达了，别人才会知道。</p>
<p>这时有很多人就会说：“可是我很希望，什么都不用说，他就能明白我。难道不是只有这样才能被称为真正的友情、爱情吗？”</p>
<p>这不是成年人的爱，是一种“婴儿式的爱”。婴儿出生后的六个月内，几乎只能哭或挥动小手小脚。妈妈通过这些行为分辨出婴儿是渴了、饿了还是排便了。拥有“婴儿式的爱”这种想法，或许是因为在那个阶段有过过于良好的互动，以至于认为自己不需要长大。如果你被照顾得太好了，根本就没必要照顾别人的情绪，因为“就算我大吵大闹，别人都会对我好，那我何必那么忙，何必去管束自己的情绪，何必去照顾别人的感受”。</p>
<p>不管是被照顾得太好了，还是没有被这样照顾过，每个人的内心都或多或少对这个阶段有所要求，渴望能够重温这个阶段。</p>
<p>很多人在表达需求时都存在问题，要么是不表达、让别人猜，要么是加一些内心戏，以扭曲的方式让别人主动满足自己的需求。因为很多人觉得如果自己直接、主动表达需求，自己好像是在乞讨，或者是把主动权交给别人，他们很害怕被拒绝，被拒绝之后会很羞愧、很难受，所以干脆以后就不再提任何需求，甚至根本不承认自己有需求。</p>
<p>反思一下，自己是否有过很多扭曲的表达，在今后，是不是可以试着诚实、直接地表达自己的需求？</p>
<p>如果可以有意识地表达自己的需求，就会进入如何应对别人的回应这一阶段。</p>
<p><strong>如果一个人表达了正当的需求，并且得到了合理回应，他内心就会建立一个很好的依恋循环</strong>。如果你每次提出的需求都会被回应，在情感的流动中，你的需求会被不同程度地满足，渐渐地你就会对周围的环境产生信任感和安全感。<br>
信任感和安全感是建立在反复可获得性上的，就是“你喊10次妈妈，有8次她都回应你”了，你就会逐渐相信“你自己会喊，她会听见”。慢慢地，你就会产生基础信任感和基础的安全感，进而把这种对周围环境的信任感和安全感，内化为对自己的信任感和安全感。<strong>建立了这种内在自信和安全感的人会相信自己是好的，因为周围的环境会回应自己，同时自己也会相信自己，只要努力表达、沟通，就能获得回应</strong>。这样就会逐渐建立起良好的自尊，在日后遇到困难时就有了抓手。信念和好用的工具就是心理上的“第一桶金”。</p>
<p>所以，当人们重新建立了良性的依恋循环，就可以自然而然地重新获得人格和心理上的发展。</p>
<p>需求不能被满足的时候，往往会产生愤怒、抑郁、成瘾等后果。有的人可能会生气。生气其实是一种升级的表达，对方也会做出一些更升级的反应，如果在这一过程中双方可以磨合出新的交往方式，就可以重新回到良性循环。当然，这一过程也可能修改需求，比如，孩子要买10条裙子，父母说“不行，但是可以每年在生日的时候买一套你喜欢的新裙子和鞋子”。</p>
<p>需求没有被满足的另一种结果就是陷入抑郁。严重的抑郁就相当于将内心和社会环境之间的交往切断，外界的滋养进不来，内心的情绪也出不去。将自己封闭起来也就没有资源可以被用来调节对自己的感觉。抑郁会让人觉得自己是不好的、不对的，或者自己提什么需求都不会被满足，没人可以理解自己。在这种情况下，人们就会感觉自己很糟糕，在一个恶性的依恋循环里建立比较消极的自尊。</p>
<p>依恋循环一旦形成，日常生活中的每件事都将以此为基本单元循环往复，这其实就是一种原生家庭对人们的思维、情绪、心理过程的遗传性影响。</p>
<p>最后，我要强调一点，<strong>成熟的情感互动是，一个人可以表达自己的需求，同时也允许别人拒绝自己的需求；在别人拒绝自己时，他能同时考虑自己的需求和对方的难处，不会把一件事情上升到对一个人也包括自己的否定，这也是一个人自尊稳定的表现</strong>。</p>
<h3 id="CCRT工具：如何发现自己的核心关系模式">CCRT工具：如何发现自己的核心关系模式</h3>
<p>CCRT（Core Conflictual Relationships Theme）是“核心关系冲突主题”的简称。用CCRT这一模型探索内在模型，有助于把人生剧本的基调看得更清楚。</p>
<p>所谓的“主题”，强调的是不同的人际关系冲突中的问题具有的共同之处，其会在过去和当前的各种关系中重复出现。</p>
<p>再来看一下“核心关系”的含义。核心关系就是对一个人影响最大的关系。这一关系的原型一般都是和早期照顾者之间的关系。这一早期关系会以各种各样的变体出现在日后的其他重要关系中，比如伴侣关系、亲子关系等。</p>
<p>总体来说，核心关系的质量会影响一个人的方方面面，是否能达成工作目标，能赚多少钱，有多少可以信任的朋友，处于何种情绪，拥有何种思维方式，如何面对压力和失败，等等。</p>
<p>人际关系中的冲突，基本上反映了一个人在关系中的愿望和实际体验之间的差异，有时候也包括在与他人的关系中，意识中的愿望与潜意识中寻求的内容之间的互相矛盾。</p>
<p>通过CCRT的分析，我希望大家可以有以下两点收获。</p>
<p>第一，在关系中，看清并正确地表露自己真实的愿望，做出合理的调整，最终在关系中满足自己的愿望。</p>
<p>第二，努力修正自己对他人反应的预期，看到自己的诉求，也看到自己固有的思维方式和他人过往的反应，以对自己的模式拥有完整的理解。</p>
<p>CCRT可以防止人们总是掉入相同的人际关系冲突主题中而不自知，逐渐为自己与他人的关系创造新的经验。简单来说，CCRT可以让人们重新选择一个新的故事替换潜意识里的旧的故事，重新理解周围发生的事情。</p>
<p>想要不重复人际关系中的冲突，重点就是要找到“主题”，找出潜意识里的剧情，然后走出来。</p>
<h3 id="哈佛幸福课：伴侣关系和人格生机、终身发展">哈佛幸福课：伴侣关系和人格生机、终身发展</h3>
<p>在人的发展阶段中，28岁前后需要面对和回答的阶段性课题是“亲密与孤独”。建立亲密关系并不仅仅等于婚姻，但个人和伴侣之间的关系确实会影响彼此的终身发展。</p>
<p>上文用CCRT工具分析了人际关系模式里的核心冲突主题，介绍了自我的限制性观念和内在需求，CCRT这一工具也让人们看到了自己的关系模式会如何限制关系的发展，如何导致自己对某类人特别感兴趣，而对那些真正能为自己带来幸福关系的人视而不见。</p>
<p>这种潜意识里的限制性观念的形成和成长环境息息相关。有一个简单的方法可以帮助大家找到自己成长和发展中的限制性观念——听到“应该”这两个字的时候，就意味着潜意识里的限制性的观念要出现了。比如，我觉得我应该在30岁结婚，我觉得我应该有两个孩子，我觉得我的丈夫应该是一个比我高的人，她明明没有做错什么所以我不应该生气，等等。所有的“应该”都是在标记一个冲突。当一个“应该”出现的时候，就有一个“可是”被限制住了。所有的“应该”出现的时候，都是重新复盘自己的契机。比如，当我想吃冰激凌的时候，我可能会想，我应该选择更健康的食物。这就意味着自己内心有一个需求，但是这个需求和外界压力带来的限制性观念产生了冲突。</p>
<p>其实很多时候有一些“应该”是有促进作用的，并不完全是限制发展的。比如，应该在和其他人交往的时候顾及别人的感受，而不是以自己的喜好为前提。这些“应该”有助于更好地与人交往。但有些“应该”是以损耗或者压抑自己的合理需求为代价的，这些“应该”就会成为限制性观念。要试着观察自己日常的想法，从中找出限制性的条件。</p>
<p>既然限制性观念的根源在原生家庭里，那么本节就用心理学家的角度审视一下过往的成长环境，看看成长环境在亲密关系方面向你灌输了哪些“应该”。从依恋循环的角度可知，人们的很多关系模式其实来源于父母。父母怎么处理事情，他们怎样相处，他们怎样理解自己，以及他们怎样处理跟别人的关系，<strong>这些都是孩子从小到大耳濡目染、内化于心的精神食粮、精神营养</strong>。所以你可以尝试看一看你父母的人生画卷。</p>
<p>回忆一下你最近一次回家的时候家里的生活，你也可以在下一次回家的时候，花一两小时观察一下父母之间的互动，进而思考以下几个问题。</p>
<p>问题一：你父母的日常生活是怎样的？<br>
问题二：父母各自会有什么需求？<br>
问题三：父母之间通常怎样表达需求？<br>
问题四：父母之间的表达方式给你的感觉是什么？<br>
问题五：你觉得父母之间的互动方式会给你的成长带来怎样的影响？</p>
<p>良好的伴侣关系是你得到真正的幸福和内心平静的重要因素，会影响你的一生，而伴侣关系和家庭关系的最初模板其实来自于父母。</p>
<p><strong>父母的亲密关系模式能让你看清自己的亲密关系的起跑线在哪里。起跑线固然会对最终的成绩有一定影响，但是后续的长跑过程才是真正的决胜因素</strong>。我经常这样形容真爱：真爱不是你一眼就看上的人，真爱是“一起走过”“一起走到最后”的过程。</p>
<p>两个人的亲密关系也是有发展阶段的。这个发展阶段的起点就是双方在认识的时候各自的家庭影响和各自的人格成熟程度以及各自的阅历。<strong>在亲密关系的发展过程中，双方的特点会互相碰撞、互相激发。在互动和冲突解决的过程中，关系会进一步加深，而且双方也会促进对方的人格成熟和人格发展，互相成就。</strong></p>
<p>有很多人认为婚礼是个终点，两个人自此就一辈子生活在一起了。事实并非如此。<strong>伴随着个人的人生发展，夫妻间的关系也有发展过程</strong>。比如，刚开始在一起时，<strong>女生也许抱着“找爹”的心理需求，男生抱着“找女儿”的心理需求，但随着自身的发展，各自对伴侣的需求会改变</strong>。在从丈夫身上得到了父亲般的照顾后，也许女生之前缺乏父爱的需求就可以得到弥补。在这个过程中，你可能慢慢从一个女孩变成一个成熟的女性，这时你内心自然就不再需要父亲的照料。只不过在这个例子里，长大的是内心的小女孩，所以如果这时男生仍然只是以照顾女儿的方式照顾女生，这段关系可能就无法继续满足女生的需求。反之也是如此。所以，<strong>随着双方各自的成长，亲密关系也要发生相应的转变</strong>。如果双方都能像跳舞一样，不断地适应对方又不放开对方的手，就能在流动中互相促进，一起成长。</p>
<p>在这一过程中，<strong>夫妻双方其实都会不断完善各自的人格</strong>。相应地，因为双方都发生了变化，<strong>夫妻之间的关系动力也会相应地发生改变</strong>。结婚后，事情并不会变得更简单，反而是<strong>在人格成熟标准里增加了新的维度，使双方的人格发展更多维、更立体</strong>。在婚姻里，双方既会在各自人格成熟的道路上继续前进，也会通过伴侣之间的互动进一步完善彼此的人格。所以，在夫妻关系里，如果可以找得到一个跟自己一样有<strong>不断前进的能力、有不断成熟的能力的人</strong>，就可能在亲密关系中找到发展的生机，并且使夫妻关系发展、彼此的人格发展变得更多维、更丰富。</p>
<h3 id="关系发展：一元关系、共生关系与多元关系">关系发展：一元关系、共生关系与多元关系</h3>
<p>关系的发展进化阶段有三个，分别是一元关系、共生关系（二元关系）与多元关系。</p>
<p>这三个阶段是心理人际关系或称客体关系、依恋关系的发展阶段。<strong>依恋关系的发展和人格的发展相辅相成，共同影响整个人生。人格的发展指自己对自己的认识的发展</strong>。依恋关系的发展阶段是和周围的人乃至周围的世界之间的关系的发展。“我们是谁”影响我们如何看待外界，而和外界的互动又影响我们怎么看待自己。</p>
<p><strong>人格发展经历的前几个阶段，分别是安全感和信任感的建立、自尊的建立、知晓自己能做什么和能做多少</strong>。相应地，这些阶段在依恋关系上的发展也会从一元关系到共生关系再到多元关系。</p>
<p><strong>这三种关系模型的发生发展从出生开始一直持续到大概五六岁的时候</strong>。在正常情况下，每个人都会经历这三个阶段的全部过程。这三个阶段在心理学上都有对应的专有名词：一元关系对应的是婴儿全能感期，二元关系对应的是和母亲的共生期，多元关系对应心理学中的俄狄浦斯期。</p>
<p>一元关系发生在婴儿刚出生的时候。由于受到大脑和神经系统发育的影响，这时婴儿对外界的感觉很模糊。比如，婴儿感觉到胃部不舒服，因为他还没有疼这个概念，他只能表达我很难受。这就是婴儿时期的原始的内心状态。</p>
<p>这种感觉之所以原始，是因为它只有刺激反应和解除反应。感到一个刺激，把它表达出来，然后刺激就会消失，婴儿就回到一个没有刺激的状态。这种感觉其实就是一种紧张—放松的循环状态。</p>
<p>这个时期被叫作一元关系，这时婴儿对于内在和外界的感知非常模糊。婴儿只有自己的感觉，而很难区分是自己的感觉还是外界对他产生的影响。你可以想象一下早上起床前半睡半醒的状态，你觉得腿特别麻、特别疼，像针刺的一样，你被这样的感觉刺激醒了。等你完全清醒后，你可能发现不是你的腿出了问题，而是晚上睡觉时压到了腿，于是你就会知道，这个疼痛是外界引起的，而不是半梦半醒时的单一感觉。婴儿期的原始精神状态就类似这种半梦半醒的状态。在这种状态下，想象和现实、内在和外界之间的区分是很模糊的。</p>
<p>这个阶段之所以也叫作婴儿全能感期，也正是源于内外区分的缺失。由于婴儿在这个时期还无法区分外界和自己，所以他会把一切都归因于自己，拥有一种我就是全世界，全世界就是我的感觉。</p>
<p>所以，<strong>婴儿全能感期，也就是一元关系期，是一个人建立原始的自尊、建立原始的安全感和信任感的时期。从心理发展的角度来说，父母应该尽量满足这个时期孩子的需求。</strong></p>
<p>总体来说，一元关系是生命与世界最初的联结。这个时候，个体会发展出个体的全能感并由此开始产生原始的自尊和原始的自信，以及基础的安全感和信任。这些基本的心理发育会长远地影响后续的心理发展。</p>
<p>在后续的发展中，婴儿会慢慢意识到，原来世界上不是只有自己，<strong>自己的需求也需要由他人来满足</strong>。这个认识的产生就是二元共生阶段的开始。</p>
<p>该发展阶段的第一个关键点在于大脑和感觉系统开始进一步发育，婴儿可以有能力看得更清楚、感受更多，其大脑也开始可以整合看到的和感觉到的信息，并且利用这些信息形成对周围环境和事物的理解。这得益于大脑前额叶的发展。<strong>前额叶就是大脑的中央处理器，其发育有一个很重要的特征——语言的出现。</strong></p>
<p>二元共生阶段的第二个关键点在于<strong>开始意识并体会到挫折。当婴儿的一些需求无法被及时满足时</strong>，比如他感觉冷了，妈妈过一会才会来给他盖小被子，他就会慢慢发现，原来不舒服的感觉的消失需要依赖其他人。</p>
<p><strong>在一元关系里，婴儿感觉自己是全能的，有一种很正向的、有力量的感觉</strong>。当他意识到原来自己的生存需要依靠另外一个人，依赖于一种外在的力量时，他就会尽量靠近这股力量，想要全部拥有它，并且会崇拜这股力量，希望这股力量的来源，比如妈妈，永远属于自己、照顾自己。这个时候，<strong>如果孩子的母亲拥有良好养育能力，孩子就能感到自己的需求被妈妈看到，感到互动是非常良好的、安全的。</strong></p>
<p>但是如果在这个阶段母婴之间的互动不是良性的，比如妈妈对自己无法理解孩子非常恐慌，或者无法安抚孩子的情绪而对自己产生怀疑，或者有产后抑郁，就会影响互动带给孩子的感受。因为从妈妈那里接收的都是过于强烈的情绪，<strong>孩子可能会关闭自己对外的感受通道，或者孩子会延续之前的自恋模式，把母亲视作自己的工具，而不是一个客体</strong>。这两种都不是共生关系，尤其第二种，属于心理掠夺的关系。</p>
<p>这个时期的发展虽然发生在生命非常早的时期，但是在一些成年人的身上仍然可以看到当时发展的痕迹。比如，我很想要一个我一个眼神对方就能懂我的灵魂伴侣，或者我希望什么都不说别人就能懂我，等等。这种需求就来自这一阶段的感受——<strong>渴求那个理想化的照顾者重新出现在生命里。所以小时候与父母相处的模式会影响人们以后的生活。</strong></p>
<p><strong>如果这个阶段的需求被过度满足，人们就无法进入共生阶段，而容易把周围的人给予的帮助当作理所当然，会物化别人，以自我为中心，无法共情或体会别人的感受，难以换位思考</strong>。有不少所谓低情商的行为就是基于这一原因。而如果这些需求没有被满足，就会执着于此，总希望重新得到这种关系。</p>
<p><strong>弗洛伊德曾经说过，我们一生都在弥补童年时期的缺失。无论是被过度满足，还是完全不被满足，人都会产生一种需求和渴望，想要再找到一个能满足自己这个阶段需求的人。</strong></p>
<p>从这个角度看，其实人们在有长久的记忆以前，和周围环境的互动已经奠定了后续的路。这些无意识的缺失和渴望会在暗地里影响人们的注意力，决定人们被什么特点吸引，从而在人们周围聚集起来具有这些特点人和事，形成人们的世界。这也就是为什么即使在同样的条件下，有的人总会遇到不顺心的事情，而有的人却总能发现机会。</p>
<p>在二元关系中，<strong>假设你顺利地从意识到自己不是全能的这个心理危机中走出来，和母亲建立起了一个共生的盟友关系，你就会重新感觉到安全，并且体会和另外一个人之间存在的亲密感</strong>，感到你们是如此和谐，完全地心意相通，觉得你们二人就是全世界。直到有一天，你突然意识到，原来有一个人叫“爸爸”，虽然他也会关心我对我好，但是他居然和我妈妈更亲密！</p>
<p>在成年人的关系里，有的人总是会害怕老公、女朋友跟别人在一起，或者在发现他跟家人的关系比跟自己还亲密的时候，感到非常恐惧，认为自己要被抛弃了，或者觉得对方不再在乎自己了。甚至在职场上，看到另外两个同事关系特别好，就会感到自己受到威胁，或者感到自己被孤立。<strong>所有的这些焦虑其实都源自小时候在多元关系阶段的经历。</strong></p>
<p>俄狄浦斯情结的核心是怎样开始处理三者关系，并且以三个人的关系为单元，建立起了一个基本的剧本，延伸到其他情境，将之变成处理跟很多人之间关系的蓝本。</p>
<p>如果之前的共生关系发展得好，在和照顾自己的人关系特别好的时候突然发现，原来他还有一个爱人，他们才是更紧密的团体。这个时候就是所谓的俄狄浦斯期的开始，我们也就进入了多元关系期。那么，怎么样才算是顺利度过这个时期呢？</p>
<p>妈妈可以跟孩子说：“我跟你爸爸是夫妻，我们是在一起的，但是我有你爸爸并不代表我不要你，我跟爸爸会一起爱你。”</p>
<p>如果孩子能和进入二元关系时一样，在进入多元关系后重获安全感，这个阶段就会顺利过去。接下来孩子就会进入潜伏期，潜伏期大概从进入小学开始。</p>
<p>在潜伏期，孩子开始把那些需要用来抓住母亲、与父亲竞争的能量很安全地放回到自己身上，借此发展自己，而不再担心生存问题和三角关系问题。</p>
<p>在这个过程中，如果父母本身关系不好，父母中的一方想拉拢你成为他的同盟，就会鼓励你更多地跟他在一起，更多地把精力放在讨好他的身上，而不是关注你自己的发展。在这种情况下，你可能就会被卷入三角关系，其关系的核心就会变成“我是一段双人关系中的第三者”。</p>
<p><strong>如果这个阶段的发展不顺利，人们和他人建立亲密关系时就会遇到困难，而且更容易陷入人际关系的权力斗争中</strong>。比如，有人会利用出轨控制伴侣，或者用讨好建立人际关系，或者总是忍不住破坏别人的关系，自己总想成为人群的中心，等等。</p>
<p><strong>这个阶段问题的解药是重新发展出和别人建立关系的能力</strong>。很多多元关系中的权力游戏都是在消化一元、二元关系中没有处理完的问题。<strong>而当你能重新认识自己、理解你在意的人，并且重新建立自己的安全感和自尊时，你自然就可以从权力的游戏中解脱出来了。</strong></p>
<h3 id="镜映原理：如何从孩子身上洞察自己的人生">镜映原理：如何从孩子身上洞察自己的人生</h3>
<p>很多人听到亲子关系时，可能第一个反应都是自己跟孩子之间的关系。其实在中年阶段，亲子关系不仅仅是自己跟孩子之间的关系，此时很多时候需要面对的是以下三种关系。</p>
<p>第一种，和自己父母之间的关系。<br>
第二种，已婚者要面对跟对方父母的关系。<br>
第三种，和自己孩子之间的关系。</p>
<p>首先来看和自己父母之间的亲子关系。人们在28～40岁这个阶段，其和父母的亲子关系已经发生了很大的转变，这是很多人没有意识到的。</p>
<p>在20岁左右时，人们面临的问题很简单，父母在这个时候可能仍然非常健康，还在继续工作，他们在经济上和心理上处于刚刚开始离开家、离开父母、能够独立的阶段。<strong>这个阶段面临的问题是找到自己的伴侣，以及开始独立尝试不同的事情，逐渐走向人格的成熟和独立。</strong></p>
<p>步入成年到中年的发展阶段，身上的担子就会越来越重，很多人年过三十就不敢再轻易辞职，因为他们在这个阶段要面对和承担很多事情，<strong>要平衡很多问题，要同时扮演很多角色</strong>。之前自己只有子女和学生的身份，现在同时是子女、伴侣、父母、社会人、职场人。而这个时候，蓦然回首，当要去处理和父母之间的亲子关系时，人们才发现很多事已经变了。</p>
<p>尤其是如果离家多年，你再回去看父母时会发现好像在自己离家的这些年里，父母的生活发生了翻天覆地的变化。这个阶段，大部分中年人的父母都已经退休，他们即将面对衰老甚至死亡问题。作为子女，当他们的衰老其实也是在提醒自己，你也会有这样的一天。很多人此时最恐惧的其实并不是跟父母的关系，<strong>而是看到父母现在的情况想到自己走到这个人生阶段的时候应该怎么办，自己应该怎么面对衰老和死亡。</strong></p>
<p><strong>这个阶段面临的另一个问题是和父母之间新的边界问题</strong>。子女独立之前的生活和父母的生活融为一体，需要父母的支持，父母也习惯了掌控子女的生活。但中年人已经成为独立的个体，他们也慢慢发现父母除了父母的角色外也有其他角色，也有不扮演父母角色的时候。这时候如果父母无法拥有其他身份，而仍然需要一个孩子，或者你不愿意独立，仍然希望当一个孩子，中年期的亲子关系问题就会变得很突出，孩子就会面对跟父母间的边界问题而走向下一个危机。因为这个时候父母可能已经无法像以前那样全方位地支持你，<strong>他们也有自己的人生，他们在不同人生阶段也有不同的课题</strong>，子女又无法代劳。</p>
<p><strong>中年人和父母相处的第三个问题就是过往的原生家庭的一些问题</strong>。很多人向我咨询的时候都抱着跟父母和解的目的。当很多人谈到与原生家庭和解、与父母和解的时候，他们都是希望一家人能回到相亲相爱的状态。</p>
<p><strong>但到了中年阶段，过往和父母相处的模式已经根深蒂固，而且父母已经处于五六十岁的阶段，这时如果要双方都能发生很大的变化其实并不容易</strong>。很多人面临的挑战其实是“我是否可以放弃让我的父母变好，我是否可以放弃改变我的父母，而只是改变调整我自己”。</p>
<p><strong>那种特别融洽的亲子关系其实只是一个想象</strong>。孩子已经不是小时候的孩子，父母也不再是他们年轻时候的样子，父母和孩子都无法以那个时候的关系状况为蓝本指导现在的生活。</p>
<p><strong>真正需要做的事是找到和原生家庭相处的新的平衡点，探索出和父母相处的更好方式。跟父母之间的和解并不是原谅，而是理解他们的经历，理解自己当年的处境，然后找到现在能互相尊重、互相理解的相处模式。</strong></p>
<p>如果中年的你已经进入婚姻，那么<strong>除了面临与自己父母之间的亲子关系，还需要面对与伴侣的父母之间的关系</strong>。是融入两个家庭，把两个家庭融合在一起，形成一个大家庭，还是保持彼此的边界，首先建立一个小家庭，然后再处理小家庭跟两个大家庭之间的关系。</p>
<p>有些人更崇尚自己的核心小家庭，有些人则崇尚一个大家族，这两种形式没有对错之分。所以这时要处理的问题其实是对于自己来说哪种形式更适合。</p>
<p>第三种亲子关系是自己和孩子之间的关系。正如上文所述，在依恋循环里，曾经的孩子其实就是他们的孩子的原生家庭。</p>
<p>在这个发展阶段有两种亲子问题。第一种是如果还没有孩子，怎样避免自己的问题出现在孩子身上；第二种是如果已经看到了孩子身上存在发展困难，怎样调整自己和孩子。</p>
<p>孩子之所以出现问题，一般来说都是因为家长的问题，尤其是在孩子的人生转折点，比如<strong>10～12岁、16～18岁</strong>这两个阶段，孩子在学习上、品行方面或者性格以及情绪调节等方面出现比较多的问题，<strong>其实都是在帮助父母回顾自己身上的问题。</strong></p>
<p>大家可以把周围的这些关系当作镜子，这些亲密的关系能直接反映出你内心的冲突，让你看到自己身上的不足和冲突，帮助你进行改进。这其实是周围环境给予你的帮助，而不是对你的要求。此时，你可以通过人际关系这面镜子，透视以下几个问题。</p>
<p>问题一：你跟周围的人的关系怎样？<br>
问题二：你为什么允许别人这样对自己，如果你有一个经常对你很冷漠或指责你的伴侣，想想为什么你会允许这样的伴侣存在？<br>
问题三：在这样的人际关系中，你的收益是什么？</p>
<p>很多时候，有的人之所以把自己弄得很惨，甚至把自己变成一个受害者，是因为有获益——<strong>这样他就可以站在道德的制高点并证明了别人都是错的</strong>。具有这一人生目标的人，自然会在身边聚集很多对不起自己的人，甚至会默许他人做一些伤害自己的事情，以便自己可以成为受害者，可以站在道德的制高点。</p>
<p>问题四：你是否还要继续下去？<br>
如果你已经不想再做一个受害者，也不想再站在道德制高点上，而想真正过属于自己的人生，就来看最后一个问题。<br>
问题五：如果需要改变，你还缺少什么？</p>
<h2 id="第四章-重塑生活">第四章 重塑生活</h2>
<h3 id="人生资本：心理体质带给我们的安稳和能力">人生资本：心理体质带给我们的安稳和能力</h3>
<p>首先要理解掌控和控制的差别。很多人错误地将掌控一件事理解为完成这件事的每一步都一定要按照自己的方式进行。其实，<strong>掌控只是需要在事情完成的过程中对于自己能控制和超出控制的部分都有所了解，并且能通过灵活的应对方案实现自己的目标。</strong></p>
<p>掌控并不是控制，掌控意味着，如果你想一周健身三次，虽然你想尽量安排在星期一、星期三、星期五，但是如果其中某天有其他的事情，你也完全可以将健身计划调换到其他时间；如果周一晚上很累，也可以不去健身，而在周二上午进行。因为需要做到的只是一周健身三次，并不一定要在固定时间进行。</p>
<p><strong>掌控的特点是在计划的推进和目标的实现过程中可以有一定的灵活性，预料到事情会发生改变并及时进行调整，能接受这些改变和调整是自然发生的事情</strong>，不完全受自己控制。因为不排斥这些改变和调整，所以可以从容应对，更重要的是，能顺利完成目标。</p>
<p><strong>人的精力和意志力都是有限的，人到了成年中后期，最重要的事情是认清自己的局限性和自己所有资源的稀缺性，然后才能开始把资源都用在刀刃上。</strong></p>
<p><strong>很多时候人们会把对目标的实现转变为对过程和手段的纠结。当纠结过程和手段时，人们往往就忘记了真正的目标</strong>。很多人会错误地把完全控制过程理解为自律，这其实就是<strong>过度控制</strong>的表现。自律并不是一定要每天按照时间点完成相应的事情，而是可以在这一段时间之内很好地平衡需要完成的事情，平衡自己的情绪。比如现在情绪不太好，就先调节一下自己的情绪，然后再完成要做的事情，也会确保在规定的时间内把事情完成，又不会因为没完成计划而形成一个自我挫败的过程。这才是比较健康的自律。所以，掌控、自律跟控制是不一样的。</p>
<p>实际上，要做到掌控是有前提的，这个前提就是达到理智和情感、想法和情绪之间的平衡。很多人设定了目标并制订了非常详细的计划，但完成不了，进而产生了挫败感。在这个过程中，他们混淆了掌控和控制。</p>
<p>有些人认为懂得调节情绪就是每天情绪都很好，能避免坏情绪的出现。其实不然，真正开始学习调节情绪时，可能需要有意识地寻找一些调节情绪的机会，而不是避开这些机会。</p>
<p>想要做到掌控，还需要有非常好的平衡力以走出非黑即白的二元对立困境。非黑即白的困境包括事情只分对错，做事情走极端，或者有人认为这件事情只能这么办、没有其他办法，或者一定要判断谁对谁错。</p>
<p><strong>很多人受困于非常僵化的处理事情的方式而无法灵活变通</strong>，所以在做事情时或处理人际关系时会遇到很多困难。<strong>而掌控，就是面对变数时可以灵活处理</strong>。当你能走出非黑即白的困境，能尝试用不同的方式解决问题时，就意味着你已经可以接受这一事实——事情并不是只有一种解决方法，也往往没有最优解，要做的只是不断寻找把这件事情解决好的办法。只有从非黑即白的思维逻辑中跳出来，才有可能做到真正从容地面对生活。</p>
<h3 id="精力管理：掌控精力是提高效率的基础">精力管理：掌控精力是提高效率的基础</h3>
<p><strong>进入成年中后期时，个人要对很多事情的稀缺性和自己的局限性有准确的认识</strong>。到了这个阶段已经不再像小时候那样拥有大量的时间和精力，这些限制都实实在在地存在于物理层面、生理层面。其中精力的稀缺尤为明显。</p>
<p>到了一定年龄，身体最主要的表现是体力下降。体力下降包括多个方面，包括注意力持久度的下降、记忆力的下降。而且在这个身体变化的时期，工作挑战也在变大，所以很多人在此时会面临瓶颈期。其中的主要困境就是感觉自己已经没有那么多精力和能量，但是工作压力却在变大。很多人会有意无意地忽略自己的体能其实已经跟以前不一样了。</p>
<p>这时要做的并不是怀念以前自己还是个孩子的时候体能有多好，<strong>而是要意识到自己现在的身体已经发生了很大变化</strong>。但是很多人其实会有意无意地忽略自己体力的变化，这在临床上叫作<strong>否认</strong>。</p>
<p>想一想你每天有多少时间花在试图证明自己没有变老上。<strong>如果可以坦然接受自己身体能量和精力逐渐减少的事实，你只需要思考怎样合理地利用这些精力即可</strong>，而不是想怎样让自己回到过去。如果可以在否认上少花一些时间，可以在生活中使用的精力就会变多。</p>
<p>如果精力在这一阶段消耗过多而没有得到很好的补充，就透支了后续几个发展阶段可以使用的能量。</p>
<p>精力可以简单地从字面意义上理解为精神力量，也就是每天醒来时，有多少精神力量可供这一天使用。如果今天起床的时候感觉自己不精神，那你今天的精力就是少的。</p>
<p>精力管理很大的一个挑战是，日常生活中的各种事务已经占据了人们很多的精力，但是如果需要做出改变并进一步积攒力量以便突破现在的圈层而进入下一个阶段，<strong>必须首先要保证现实层面不出现问题。</strong></p>
<p><strong>精力管理也一样。在突破自己，往上迈一个台阶时，能力、思维方式、处世方式大都需要改变</strong>。人们在这个改变过程中也是很脆弱的，需要处于一个相对有保障的情况之下，比如在一个既不会丢掉工作也不会影响日常收入的情况下，慢慢进行自我调整。待把这些日常条件都稳定下来，并且可以调整到每天还有剩余精力做更多的事情时，才能开始进一步探索自己并且实现自我成长。</p>
<p>所以，<strong>精力管理的第一步是理顺现在的生活，第二步才是留出一部分精力为后续的发展做准备</strong>。积攒额外的精力也是突破圈层、走到下一阶段的必要准备。</p>
<h3 id="体力管理：如何管理体力，平衡工作与生活">体力管理：如何管理体力，平衡工作与生活</h3>
<p>第一个方面，睡眠。睡眠的重要性无须赘述，很多人都深受失眠的折磨。睡眠对现代生活的重大影响体现在两方面。一方面是健忘。因为人在非睡眠状态下只能形成一些短期记忆，短期记忆变成长期记忆所需要的长期记忆蛋白的合成只能发生在深度睡眠时。另一方面，在深度睡眠状态下，大脑会清理很多生理代谢的废物。大脑如果不能及时清理这些废物，就会大大增加阿尔兹海默症的发病风险。</p>
<p>当睡眠不好时，人的体能、精神状态，还大脑功能、运算能力、判断能力都会受到很大影响。</p>
<p>睡眠还作用于情绪的产生。睡眠不好时，个人的情绪也会很差。而当情绪不好时，有些人会依赖上瘾物质或行为以逃避这些情绪。</p>
<p>比如，有些人回家后不断看电视剧、刷购物平台、浏览娱乐消息以缓解一天的不良情绪。这种调节情绪的方式会占用大量时间和精力，其结果是睡眠时间更少，睡眠质量更差，进而形成恶性循环。</p>
<p>睡眠问题成为现代人的普遍性问题的原因主要是现代社会的压力比以前大很多，包括信息带来的压力。</p>
<p>最新研究成果显示，一个人的睡眠时间长短不是很重要，重要的是能达到深度睡眠及深度睡眠的时长。一个人的睡眠周期通常是90分钟左右。在这90分钟里，人们会经历一个从清醒状态到浅层睡眠，到眼动睡眠，到深度睡眠，再清醒的过程。有的人一个晚上可能会经历3～4个这样的睡眠周期，在两个相邻周期之间会经历一个浅层睡眠阶段，有的人可能会在这个阶段醒来，但是很快又会进入下一个睡眠周期，也有的人并不会在此时醒来。</p>
<p>如果你的职业要求你经常保持清醒，你需要保证的是尽量把睡眠时长调整为90分钟的倍数，比如你可以睡1.5小时、3小时、4.5小时，并且按照睡眠节律调节自己的睡眠。如果你在睡眠周期的末期醒来，就会感觉到睡眠质量比较好。</p>
<p>第二个方面，体能活动。上文已有所涉及，在需要休息、恢复精力的时候，对于脑力劳动者来说，最好的休息反而是在睡眠充足的前提下，再进行一些肢体性的活动。因为脑力劳动如想问题、做分析、写作等用的是同一部分脑区，而进行体力活动时，激活的是其他部分的脑区，这样大脑就得到更好的休息。</p>
<p>反之也一样，如果你当天做的事情基本上都是体力活动，回家后你可以花一点时间看看书，或者一个人思考一下人生，以便大脑的脑区交替活动。</p>
<p>这是体力管理的一个很重要的过程。在这一过程中，要做到的是，尽量找到各种各样的方式进行活动，以便灵活地使用不同的脑区和不同的调节方式。</p>
<p>第三个方面，进食。食物是体力的源泉，饮食不足，体力自然得不到保证；过度进食又会增加身体的负担，比如晚上吃的食物很多，第二天早上起来身体就可能浮肿、沉重，状态也可能非常不好，没精打采。所以进食也是体力管理中很重要的一部分。</p>
<h3 id="财富管理：拥有财富必备的五个心理守则">财富管理：拥有财富必备的五个心理守则</h3>
<p>钱有五种不同的形态。</p>
<p>第一种形态，收入。对大多数人来说，直接收入是最重要的财富来源，是一个人的生存基础，也反映着一个人怎样看待时间和精力的价值。一个人的财务状况如何，实际上很直接地、赤裸裸地为他的时间和精力标出来了价码。有人会争辩说自己身不由己，但是一个人目前的生活状态都是由自己的决策一步一步形成的，就是其人格成熟度、心理状态、发展状态的最直观的表现。</p>
<p>一个人的收入是其个人状况的重要反映，主要反映了以下两点。</p>
<p>第一点，反映一个人对自己的个人价值的衡量，包括其信念、自尊、价值观。<br>
第二点，反映一个人对自己的付出及工作的价值认可。</p>
<p>如果觉得自己只有先付出金钱或劳动，才有资本和他人谈回报或报酬，这一心理反映的是自己内心的虚弱。这分虚弱，很多时候来自个人的价值感和自尊水平。</p>
<p>第二种形态，存款。存款和收入是完全不一样的形态。很多人可能有很高的收入，但并没有多少存款。存款实际上是生活中的缓冲，存款有很大的心理意义，可以在心理上给你提供安全感。</p>
<p>为什么存款有重要的心理意义？因为存款可以把你从生存线的挣扎中解放出来，意味着即使暂时没有收入，你仍然可以依靠它独立生存一段时间。</p>
<p>从这个意义上而言，如果你没有存款作为缓冲，就意味着你其实根本不自由，随时会面临危机。你可能在过往的生活中从未感到过自由，一直都活得不自由，只是你已经习惯了这种生活状态，所以从来没有想过还有别的活法。</p>
<p>第三种形态，债务。提到债务，大家的联想都是痛苦的感受。而且比起愉悦，痛苦的感觉对人的影响更大。</p>
<p>债务有优良之分，但是不管是哪一种债务，都会带来很大的心理消耗。不是所有人都可以在这样大的压力之下，仍然保持正常的决策能力。尤其是从心理学的层面上讲，压力一定会影响自我功能。当压力过大或生活打击过大时，人的自我功能就可能受到影响，从而影响其判断能力。</p>
<p>在做债务决策时，不管是哪一种债务，都要<strong>首先考虑清楚你是否有能力承担这个债务，以及如何平衡这个债务可能带来的心理影响和消耗</strong>。只有觉得有能力承担时，你才可以做出一些有关债务的决策。</p>
<p>第四种形态，收入及财富目标。财富目标或财务目标不仅仅和收入相关，还关联着不同的情绪。和单纯谈及收入时的情绪不一样，收入的增长及财富目标会直接激发起恐惧、限制性思维等一系列感受。</p>
<p>第五种形态，有害的收入。有害的收入常常被很多人忽略，但其对人的影响非常大。<br>
有害的收入指的是一些会使人失去自我，或者使人愤怒、无力、痛苦、内疚的收入。</p>
<h3 id="人生规划：如何完成人生的角色转换">人生规划：如何完成人生的角色转换</h3>
<p>在第一步即稳定目前的情况时，需要注意以下问题。</p>
<p>第一，整个转型期，不建议大家采用休克式的方法重建生活。很多人会问，如果在转型期发现有很多地方需要补课或者调整，甚至可能需要换工作、换行业，我是否应该辞职休息一段时间，再重新开始。</p>
<p>从人的发展阶段和心理健康的角度上看，大多数人在这个阶段并不适合进行脱产学习，除非你已经有了足够的心理成熟度和经济上的准备，并且彻底思考过这件事情而不是一时冲动。</p>
<p>责任是成年人的心理发展和人格发展成熟里很重要的一部分，责任所带来的正向的人格发展动力是非常重要的。</p>
<p>当然，并不是不可以换工作，并不是不可以重新学习，而是需要做好规划，并且清楚自己这么做不是为了逃避，而是为了拥有更稳固的发展基础。</p>
<p>第二，留出足够的体力、精力、财力重新发展自我。如果现在的体力、精力、财力都仅能维持现在的生活，你就没有多余资源供你完成自我发展。因此，首先要做的是调整现在的生活使自己开始有余力进行发展。</p>
<p>第二步，在查漏补缺这一步，首先要注意的是保证自己有转变的余力，而不是透支自己的精力、体力、财力。</p>
<p>查漏补缺需要大家做的是建立起自我觉察的习惯。自我觉察的习惯，其实就是以客观的视角，尝试用旁观者的角度、眼光看待自己。</p>
<p>建立自我觉察，可以从每天回顾自己的生活开始，比如晚上睡觉之前，罗列一下今天做的事情、做这些事情时的感觉，以及这些事情和感觉对自己的意义；如果觉得这一天很没有意义，那么原因是什么；明天可以做哪些小小的改变，给自己带来一点点的意义。</p>
<p>自我觉察练习看起来很简单，但其实非常难坚持。真正开始做时，会发现自己其实并不想看见自己。一个人的逃避很多时候来自对自己的视而不见，来自看到一件事情时，选择闭上眼睛，不去看、不去管，只要把这个时间熬过去即可。<strong>如果没有反思，生活就会得过且过，经历就不会沉淀为智慧。</strong></p>
<p>第三步，参考人生阶段的发展，重新规划。上文曾提及人生的发展阶段，包括成年初显期、青春期以及成年期。</p>
<p>不同的人生阶段都有各自阶段性的问题需要回答。大家可以通过上文中的问题重新复盘自己以往的人生课题的答案，这一答案是你主动做出的，还是你被生活推着被迫做出的，如果你现在有机会重新思考，你会怎样看待这段人生。</p>
<p>回顾和规划的时间段主要从16岁到现在。因为16岁是青春期的开始，也是人格和性格发展很重要的一个阶段。</p>
<h2 id="第五章-心理基因">第五章 心理基因</h2>
<h3 id="安全与信任：贯穿一生的自信和勇气">安全与信任：贯穿一生的自信和勇气</h3>
<p>先来看一看米西在0～18个月时的心理发展情况。这一时期在心理学上叫作<strong>前语言期</strong>，也就是开始说话之前的时期。这一时期的特点是大脑的前额叶部分，也就是负责理性、理智、运算的部分大脑还没有开始发展。大脑还不能整合和理解这一时期所经历的事情，只能将之作为身体记忆存储在身体中。</p>
<p>通常，照顾者的离开是分离焦虑产生的核心原因，所以照顾者的重新出现就是这个问题的解药。在陌生情景实验里，不同的孩子对这种情况的反应并不相同。一般会有以下四种行为。第一种，当他有需要时会寻求他可以依靠、信赖的依恋对象；第二种，保持身体的接触，比如，婴儿会表达出被抱起来的愿望，这时如果妈妈把他抱起来，他就会重新在妈妈的怀里安静下来。</p>
<p>另外两种行为分别是回避行为和抵抗行为。有的孩子在妈妈离开时，表面上并不会表现出太大的情绪波动，或者有明显的情绪波动，但是在母亲重新回来时，孩子可能会对母亲视而不见，或者看到母亲后情绪反而更加激烈，更加难以安抚。前者是回避型的行为，后者是抵抗或抗拒行为。</p>
<p>这四种不同的行为体现了孩子不同的依恋风格。</p>
<p>很多人被问及“你小时候感到很沮丧、很忧虑或不高兴的时候会怎么处理”时，<strong>只有一部分人会说找父母商量或告诉他信任的成年人，很多人会说遇到这样的情况就自己解决</strong>。他们可能会将原因解释为“因为父母对我有很多的期待，所以我也不想告诉他们”，或者说“父母可能很忙，我就不给他们添乱了”，等等。这种孩子看起来可能是很懂事，但实际上这些就是<strong>不安全依恋</strong>的表现。</p>
<p><strong>不安全依恋的第二类表现是不敢期待别人能够满足自己的需求</strong>。很多时候，有的人之所以不求助、不表达需求，是因为他们不相信或不敢相信别人会帮助自己。</p>
<p><strong>不安全依恋的第三类表现是压抑自己的需求。</strong></p>
<p><strong>不安全依恋的第四类表现是总是很难哄，很难平复、安抚自己的情绪</strong>，这类人情绪一般不会很好。</p>
<p>不安全的依恋关系会产生很多不良影响，比如不敢对别人有期待，害怕别人的看法或在意别人的看法，害怕被抛弃，等等。如果存在这些问题，就要回顾在0～18个月时，周围的环境对自己产生了怎样的影响。</p>
<p>3岁前的环境影响和教养对一个人的人格形成非常重要。这一阶段是自尊、基础安全感、基础信任感等心理发展的重要阶段，而这些是一个人产生自信的基础。</p>
<p>有一定的安全感和基础信任感，才有可能感觉自己是好的。<strong>安全感和基础信任感是在依恋循环里通过循环和满足建立起来的</strong>。感受自己的需求并将之表达出来，需求被满足后就会感到别人能看见自己的需求、能明白自己。这会使人们知道自己的需求是正当的，并且外界会对自己发出的声音、做出的努力有反应。在这一过程中，人们就会慢慢对外界产生信任，而后才能相信自己有能力处理遇到的问题。这样的事情多了，慢慢地，人们对自己的信任就会越来越稳固，这就是自信。</p>
<p>自信不是打鸡血，不是自我催眠，<strong>自信的意思就是能信任自己。而自信发展的前提是有良好的自尊。维持自尊的能力就是维持自我良好感觉的能力，就是自己能尊重自己的能力。能尊重自己就意味着认可自己是一个完整的人，是一个有价值的人。</strong></p>
<p>当然，和自尊相提并论的往往还有自大和自卑两个概念。自大，就是不管什么时候都自我感觉过度良好，是脱离现实的。自卑，就是看不清自己到底是怎样的，并且在有压力或遇到挫折的情况下，会首先感觉到自己是不好的，会一直自责。<strong>自尊的人在面对压力时，可以用各种各样的办法调节自己的感觉。比如，当别人说自己不好时，会认为自己可能确实在某些方面不够好，但是同时这并不代表自己就是一个不好的人。</strong></p>
<p>自卑的人在有不好的事情发生时会首先觉得是自己的错，会觉得只有自己会变好了，事情才会变好。</p>
<p>回顾米西在实验里的表现，当她想拿到箱子里的玩具又拿不出来、很沮丧时，<strong>她会先玩其他玩具，调节自己的情绪，等她重新感到有力量了，再继续解决箱子里的玩具的问题</strong>。这就是可以在孩子身上观察到的维持自尊的能力的萌芽。</p>
<h3 id="自主性和能动性：如何找到人生更多的可能性">自主性和能动性：如何找到人生更多的可能性</h3>
<p>自主性和能动性的发展，决定了人生到底有多少种可能性。</p>
<p>在0～18个月的发展过程中，周围的环境对一个人的影响是非常重要的。如果在这一阶段发展得好，就会获得心理上的第一桶金。所以，<strong>在18个月之前，建议大家可以尽可能地满足孩子的基本需求，尤其是孩子1岁之前的需求，都应该尽量满足；10～18个月这一阶段，养育者要慢慢开始退出，多留一点空间给孩子，让孩子在养育者的帮助下发展。</strong></p>
<p>心理上的这第一桶金可以在日后的很多地方发挥作用，比如有的人可能在一件事情经历了10次失败后，仍然可以继续做第11次，而有的人在第1次失败之后就不敢再做尝试了。一个人可以在一件事情上不断尝试，可能是因为他有一个基本的信念：<strong>如果这件事情可以做成，而我还没有做到，只需要继续尝试不同的方式。他不会认为这件事情没有做好就是我不好，也不会担心这件事情做不好时别人对他的看法，他会把注意力都放在事情本身上，思考如何处理好这件事情，他相信自己的能力，也相信别人会给予他帮助，他需要做的只是找到完成这件事情的途径。</strong></p>
<p>获得心理上的第一桶金会促成人们的自主性和能动性的发展。自主性能动性很重要的一点，就是一个人能<strong>自我调整</strong>，调整好了之后，他是可以自发完成一些事情，通过<strong>自我驱动实现目标</strong>。也就是说，这个人的自我效能很高。</p>
<p>在现实生活中，有很多人在自己有需求时没有办法向别人求助；或者预见一个问题很难解决而不想解决时，就不动脑筋了；或者在向别人求助被拒绝了之后会很难受；或者如果别人向他提供不同的方法，他也会觉得不对，一定要用自己的方法解决这个问题。</p>
<p>很多人其实会被各种各样的情绪入侵，这些情绪会阻止人们解决问题，甚至引发人身攻击。而米西在2岁左右的时候，就已经可以<strong>灵活处理情绪，不被情绪控制，而以目标为导向解决问题</strong>。她已经可以做到<strong>想办法解决问题，在解决不了问题时寻求帮助，寻求帮助受挫的过程中，独立思考对方的建议，判断是否可以按照对方的建议做，灵活转换自己处理问题的方式，以便尽快处理问题。</strong></p>
<p><strong>灵活处理问题很重要</strong>。因为当她去向妈妈寻求帮助时，妈妈给她的帮助并不是她原来期待的。一般来说，在这种情况下，很多人可能会感到沮丧，产生有很多情绪，不一定能接受建议，但是米西接受了这个建议，因为她目标明确——我要把这个问题解决掉，而不纠缠为什么你不按照我说的做。米西表现出了自主性和能动性，她可以自己尝试解决这个问题，而且在有想法时能就这一想法和思考行动起来，同时，在行动受挫时，她可以尝试新的做法，用新的方法解决问题。</p>
<p>米西具备的这些能力是如何获得的呢？</p>
<p><strong>第一，她从母亲身上获得了安全感，并且把母亲给予她的安全感内化为自信</strong>。她的母亲能回应她，并且会跟她非常愉快地一起玩耍。所以，母亲跟她很投入地玩耍这件事情，会慢慢内化为她的自信，她会相信自己是可以给别人带来欢乐的，别人会喜欢自己，<strong>自己和外界之间可以产生良性互动。</strong></p>
<p><strong>第二，米西是有处理情绪的能力的</strong>，她能接纳自己不好的状态，当状态不好时，她会通过自己的办法调整情绪。比如，当她感觉很沮丧时，就会玩其他的玩具让自己的情绪好起来，然后再想办法。</p>
<p>这一点其实很多成年人都不一定做得到。<strong>很多成年人面对压力时，可能确实会找到办法调节情绪，但很多时候是对问题的回避、逃避而不是解决。</strong></p>
<p>回避和逃避就是，一个人可能有很多相对不那么健康的娱乐方式，他们在娱乐之后反而<strong>感觉更为空虚、沮丧，而不是感觉重新获得面对问题的力量</strong>。</p>
<p>这些做法可能确实能帮人们调节情绪，至于是调节还是逃避取决于做完这件事情后，自己的情绪有没有好转，这件事情有没有帮助自己重新将注意力转回到问题上。比如，看1小时网剧后，我感觉心情好一些了，这时候我可以关掉网剧，重新投入刚才的工作，这是自我调节；但如果开始看网剧后，我就一直不断地看，看了一整天，到要睡觉时才突然发现自己什么都没干，该解决的问题还是没有解决，于是我感到更沮丧、更难受，这就是回避和逃避。</p>
<p><strong>第三，米西可以非常快地接纳一个新的方法，而不是纠缠于自己的方法</strong>。这种自主性和能动性建立在自尊、安全感、信任感都得到良好发展的基础之上，只有在一个相对安全的、被保护的环境中才能被培养出来。</p>
<p>很多人小时候可能由于各种各样的原因，没有被保护、被满足，是不是这些能力就不能发展出来而从此人生就悲剧了？并非如此。弄清自主性和能动性是如何基于安全感和信任感发展出来的，我们就可以<strong>在现在的阶段为自己创造机会，重新发展自主性和能动性。</strong></p>
<p>自主性和能动性之所以重要，是因为<strong>自主性跟自我强度的发展相互影响，而能动性是平衡思考和行动的能力。</strong></p>
<p>自主性跟自我强度的发展相互影响。<strong>自我强度就是应对内在的需求跟外界的压力之间的调节能力</strong>。比如，我的身体已经很想休息了，但是外界信息告诉我这个任务很重要，此时怎样调节二者之间的矛盾，就叫作自我强度。</p>
<p>自我强度包括很多方面，比如有没有娱乐自己的能力，有没有自我照顾的能力，有没有维持作息的能力，有没有维持自尊的能力，等等。</p>
<p>能动性其实是一个平衡思考跟行动的能力。自信不足的人很多时候会感觉自己无法行动，包括拖延症等。解决拖延症的方法并不是强迫自己做完该做的事情，<strong>而是要解决能动性和自主性的问题</strong>。</p>
<h3 id="心理韧性：前进必备的坚毅与弹性">心理韧性：前进必备的坚毅与弹性</h3>
<p><strong>儿童中后期——7～12岁</strong>的发展，是坚毅力、心理柔韧性、逆商的发展过程。</p>
<p><strong>孩子进入小学阶段后，需要发展的是坚毅力、柔韧性以及自我掌控和自我认知。</strong></p>
<p>一个人可以发展出自我掌控和自我认知需要基于之前各阶段的顺利发展。</p>
<p>孩子在小学阶段，也就是7～12岁的阶段，我们需要发展自己的以下几项能力。</p>
<p>第一，开始养成良好的习惯。<br>
第二，开始有能力选择自己的习惯。<br>
第三，养成自己想要拥有的习惯。</p>
<p>逆商就是从小学开始，经历了很多大大小小的挫折，慢慢一步一步练就出来的。一个人的逆商、毅力，又如何在日常培养呢？难道我们要刻意制造一些人生打击吗？并非如此。</p>
<p>在孩子小时候，很多人都会很在意一件事情，叫作“坐得住”。</p>
<p>坐得住，在小时候意味着能坐在桌旁集中精力做作业；在长大后就意味着一个人在面对事情时，可以足够冷静，可以沉得住气，可以保持稳重、耐心，等等。</p>
<p>培养孩子的逆商，让孩子坐得住，要注意以下几方面。</p>
<p><strong>第一，要注意周围的环境</strong>。如果你是家长，可以思考一下，自己是不是平时也坐得住。你也可以回想一下自己的家庭环境，你的父母平时是否是坐得住的。如果你想要孩子爱上阅读，想想自己平时是否有阅读的习惯，你的家人是否有阅读的习惯。</p>
<p>如果你的家人都是坐不住的人，都没有阅读的习惯，你没有这些习惯也是很正常的。如果你的家庭环境比较吵闹，而你却可以安静地看书，这一定是因为你额外付出了很大的努力。</p>
<p><strong>第二，要适应年龄的发展</strong>。比如一二年级的小学生可以比较高质量地集中注意力学习的时间大概只有20分钟。如果你强迫一个一二年级的孩子坐2小时，他真正注意力集中的时间也许只有20分钟。</p>
<p>于是对于这个阶段的孩子来说，如果可以花20～30分钟的时间集中精力做一件事情，他们就已经做得很好了。随着孩子的长大，他们注意力集中的时间会逐渐延长。一个孩子可能到了10岁左右时，坐得住的时间就会有40～45分钟，40分钟后就可以让他休息玩耍，过一段时间再继续学习。</p>
<p><strong>第三，要平衡自己的情绪</strong>。在必须面对一个重复或一个不那么愉悦的过程时，我们应该如何调节自己焦躁的心情？</p>
<p>一个小学阶段的孩子，怎样才能应对坐得住的挑战呢？</p>
<p><strong>通过模仿和学习，并且通过练习把这些方法内化为自己的一部分。<strong>比如，有一些孩子可能很想上台演出，但是上台演出之前要背台词，他又觉得很烦，于是这个时候有些孩子可能就会自己给自己</strong>做心理建设</strong>，把这件事情想象为一个难关，要去突破，要挑战自己，渡过这个难关。只要渡过这个难关，他就可能变成一个更厉害的人。这样的孩子可能从动画片、儿童书里看到英雄人物是怎样克服困难、练就一身本事的，从而受到影响和激励。</p>
<p>有些时候他们可能会选择模仿自己的偶像，比如他的偶像可能会说：“我每天晚上其实写歌要写到大半夜，有些时候也会没有灵感，我会苦恼好几天，把自己关起来一定要把这件事情完成。”如果自己的偶像有这些特点，很多人就会在自己遇到困难时向自己的偶像学习。对于小学生来说，很多时候一个优秀偶像的带动作用是很大的。</p>
<p>在小学阶段，一个人从完全自我进入开始和社会和人群接触的阶段，在自我成长上也开始面临独立发展能力的阶段。所以，如何面对困难和挫折成为人生新课题。</p>
<p>通过处理这些困难和挫折，逐渐养成良好的习惯和面对问题的思维方式，并且锻炼出解决问题的耐性，这就是逆商发芽的时候。</p>
<p>逆商是一种全面的能力，并不仅仅体现在面对很大的人生困难或逆境时，它更体现在日常生活遇到的方方面面的问题中。很多时候捷径是人生最长的弯路。很多人之所以说有发展出逆商正是因为他们走了所谓捷径。</p>
<p>小升初、初中升高中、高中升大学，这是学生要面临的几大关口。所以在小学阶段很多家长更愿意让孩子把注意力集中在学习上，这是一个把人生任务都简化掉的过程。<strong>这一过程看似可以让孩子顺利地进入一个更好学校，但是其代价可能是让孩子的个人发展存在极大缺陷。</strong></p>
<p>比如成绩优先或父母代劳，这些都是<strong>空心病</strong>的开始。因为如果孩子只需要关注作业，只需要关注成绩，而不需要关注任何其他事情，<strong>他们可能就没有机会思考人生意义，也没有机会做更多探索</strong>。</p>
<h3 id="自我整合：成功的人是如何规避短板的">自我整合：成功的人是如何规避短板的*</h3>
<p>自我整合大致涵盖初中、高中、大学以及刚刚进入社会的阶段。<strong>从心理学意义来说，自我整合一般发生在12～18岁这个时期，也就是少年期和青春期</strong>。</p>
<p>当然，人的发展不可以简单地按照年龄阶段划分，并非完成本年龄段需要发展的事情后，就可以将其他事情留待下一阶段完成。</p>
<p><strong>人的发展是重叠的、连续的过程</strong>。比如，如果在人生阶段最开始的时候，安全感并没有得到良好的发展，人生后续所有的发展阶段都会受此影响。如果安全感没有在第一阶段发展好，<strong>这一课题并不会就此结束，而可能使人在后续人生经历中进一步受到伤害，或者影响其他跟安全感有关的人生课题</strong>。某一年龄段的发展任务，其实指的是该年龄段是某个发展阶段的敏感期。</p>
<p>比如，很多人可能终其一生都在发展安全感，但是安全感最重要的发展时期是出生后最初的几年，也就是说，在出生后最初的几年，本来很容易培养出的安全感，<strong>如果到错过这个时期很久之后再重新发展，就需要付出极大的努力。</strong></p>
<p><strong>16～22岁是自我整合发展阶段的敏感时期。</strong></p>
<p>自我整合需要一个慢慢进入的阶段，一个人在经历自我整合期时，有三个主题需要思考，这三个主题也是自我整合的三个基本步骤。</p>
<p>第一步，明白自己是谁；<br>
第二步，观察面对自己时会产生的情绪反应；<br>
第三步，在自己现有的基础上找到自己的发展路径。</p>
<p>第一步，明白自己是谁。在这一过程中，要把对自己的描述和对自己的评判、对自己的批判区分开。这点很重要，因为当人们评判、批判自己时，实际上是在把自己内心分裂为好的部分和不好的部分，而不是整合起来。</p>
<p>要明白自己是谁，首先要克服的一个习惯就是评判，不管是评判自己，还是评判别人。<strong>当需要通过指责别人获得力量时，其实自己是无力的</strong>。当某人批判自己、批判他人的时候，其目的其实在于让自己获得力量感，这并不会帮助人们进一步看清楚自己。</p>
<p>一个人可以开始睁大眼睛看自己，尝试描述自己时，一定会出现各种各样的情绪。<strong>批判其实就是为了帮自己规避一些情绪体验</strong>。当看到自己身上有自己不那么满意的地方时，人们可能会很愤怒，可能会有一些无助，可能会有一些悲伤。<strong>当人们指责自己、父母或周围人时，注意力就从自己身上转移到了别的地方</strong>。这种非常微妙的逃避行为使得人们的注意力从真正重要的事情上移开了。</p>
<p>在自我觉察的过程中，如果可以慢慢发现自己原来在逃避什么，就一定会产生一些情绪。所以，<strong>在自我整合的过程中，很重要的一点是要调节好自己的情绪。调节好情绪不意味着将这些情绪置之不理，而是真正体会这些情绪</strong>。比如，原来看到自己某个特点时，会感觉很无力；现在虽然自己看到这一特点时仍然会很难受，但是没有关系，此时已经有了让这些情绪释放出来的方法。</p>
<p>因为否定这些情绪或压抑这些情绪，实际上就是在把自己撕开、撕裂、分裂，把自己分裂成不同的部分。所以，有很多人虽然非常不接纳自己，甚至内心存在深深的自卑，但却有狂妄自大等一些极端化表现。</p>
<p><strong>当一个人可以开始不评判自己而描述自己，看见自己是谁，并且在可以理解自己、观察自己的同时觉察自己的情绪，他就可以走到一个结合点</strong>。这就是整合的开始，他开始明白自己身上有一些特点，特点本身并没有好坏之分。比如，我的特点可能是单次注意力集中时间只有50分钟，如果非要定义优缺点，这也可以是一个优点。因为这意味着我的注意力可以在50分钟内有很好的爆发力。</p>
<p>所以，<strong>达到自我整合要做的其实就是开始描述、接受自己</strong>。当一个人可以开始接纳自己身体上、心理上以及生活中的各种现状时，他就有了一个稳固的现实基础以找到自己的发展路径。</p>
<p>找到自己的发展路径对于大部分的人来说，其实主要发生在高中和大学阶段。但是因为高考压力非常大，所以很多人在高中时会将精力集中在学习上，关于发展路径的选择可能会被延续到上大学之后，甚至延续到进入社会之后。</p>
<p>可能很多人会觉得世界很不公平，认为“明明在学校时我的成绩那么好，为什么现在那些成绩不如我的人混得比我还好”。从自我发展的过程来说，大家就可以理解这一点，也许那些当年成绩没有你好的人，把时间花在了让自己成为社会人的过程上，把时间花在如何认识情绪、调节情绪、找到自己热爱的事情上，甚至他们探索出了与众不同的路，在你埋头学习时，<strong>别人可能在处理为未来发展打下基础的各种各样其他的事情。</strong></p>
<p>高中时期的自我整合阶段还有一个很重要的过程：<strong>模仿、体会、思考、内化</strong>。比如，人们会通过了解自己的偶像的生活方式，或者阅读名人传记，学习、借鉴别人的发展过程，逐渐整合自己。因为他人身上总会有我们不喜欢的地方，也总会有我们喜欢的地方，压制、摒弃自己不喜欢的地方，或是把自己喜欢的地方发展为自己的一部分，这就是整合的过程。</p>
<p>所以在高中时期，<strong>大家可以多看名人传记，观察、了解自己崇拜的人，通过模仿、体会、思考、内化，增加对自己的认识完成自我整合过程。</strong></p>
<p>自我整合是成年之前的第一道坎，其涉及很多回顾和面对，但是很多人会逃避和拖延这一过程。常见的逃避方式有以下几种。</p>
<p><strong>第一种，有很多人，尤其在成年之后，会以追求进步逃避回顾和面对，逃避整合。</strong></p>
<p><strong>自我整合是一个需要停下来、慢下来、向内看的过程</strong>。很多人为了逃避这一过程，会采用追求进步的方式，向前不停地努力，不停地奋斗。这听起来是一个非常冠冕堂皇的借口。追求进步无可厚非，但是每天除了追求进步，是否留出时间<strong>回顾、沉淀、面对自己</strong>，这非常关键。</p>
<p><strong>第二种，过度简化自己的人生</strong>。在学生阶段，周围的环境以及父母可能都会强调，只要学习好就什么都好，或者只要能赚钱什么都好。也许别人都会这么说，但是你要思考自己是否认同这种价值观。</p>
<p><strong>人在各个方面的发展都是互相制约、互相促进的</strong>。这种极度简化的人生，让很多人可以在单一的某一个方面非常快地取得突破，但是如果在其他方面很难跟进，很快就会遇到瓶颈。</p>
<p><strong>第三种，随波逐流、放弃思考</strong>。这一做法和思维方式的发展有关系。</p>
<p>比如，你不知道世界上有盐，就不会知道盐的味道。所以，理解自己也是一个需要发展的思维方式。有很多人在离开中学之后就不再学习、不再进步，他们就需要反思、沉淀、思考，进一步培养自己的思维方式。</p>
<p><strong>自我接纳不代表不思进取。自我接纳是指看清楚现在的情况，整理好自身的资源，了解自己的特点，然后再按照自己期待的方向规划自己的发展</strong>。很多人不愿意自我接纳，认为自我接纳等同于不要求进步。并非如此。比如，我知道自己注意力集中时间只有50分钟，我就可以选择一个需要短时间内高度集中注意力的工作，并且在发挥短时高度集中注意力的天赋的同时，开始发展自己的其他能力。可能三五年之后，<strong>我就可以拥有新的能力，怀揣固有的天赋进入下一个发展阶段。</strong></p>
<h3 id="基因检测：个人发展的蓝本是什么">基因检测：个人发展的蓝本是什么</h3>
<p>在了解自己的心理基因的过程中，有两条主要的线索。</p>
<p>第一条线索是人格发展线。<br>
第二条线索是性格发展线。</p>
<p>人格发展和性格发展，会同时受到以下三方面的影响。</p>
<p>第一，内外环境的影响。<br>
第二，依恋模式的影响。<br>
第三，人生阶段的影响。</p>
<p><strong>人格</strong>，在心理学意义上更关注的是“<strong>是一个怎样的人”。</strong></p>
<p><strong>性格</strong>，更多考虑的是“<strong>如何面对自己的内心和外界产生的刺激”。</strong></p>
<p>通过这个比喻，大家就可以理解人格和性格的不同。大家现在可以在理解自己的基础上，重新回答上文提及的对人格发展很重要的四个问题。</p>
<p>问题一：你觉得你所处的世界和环境安全吗？<br>
问题二：你觉得无论你是否成功，都值得被无条件喜欢吗，你喜欢你自己吗？<br>
问题三：你是否清楚自己都有哪些能力？<br>
问题四：关于这些事，你能做多少，做到什么程度？</p>
<p>这四个问题其实涵盖了儿童期之前的发展过程中最主要的四个问题，包含了基础安全感、基础信任、自尊、自信、自主性、能动性、自我协调和自我整合。</p>
<p>在基础安全感方面，可以回顾一下小时候周围的人是怎么对待你的，彼时你是怎样应对周围的环境的？彼时的环境和所经历的事情为你打下了怎样的安全感基础？你现在的感觉如何？你现在觉得周围的生活以及你的生活状态是否安全？比如，你是否觉得经济储备、健康储备不够，你是否觉得现在的工作可能不稳定，等等。</p>
<p>在自尊方面，可以回顾一下你的自我感觉。你的自我感觉是一种很平和、很平衡的，还是一直很消极？你现在自信吗？你的自主性、能动性、自我协调以及自我整合怎样？</p>
<p><strong>当分析自己的人格基本发展时，可以从以上这四个基本问题入手。</strong></p>
<p>分析自己的性格发展，<strong>首先要看依恋循环</strong>。依恋循环在心理上有三个基本环节或三个步骤，即表达需求、外界对此需求做出反应、自己对外界反应进一步产生的反应、产生的后果。</p>
<p>分析自己性格发展时，梳理依恋循环是第一步，第二步是梳理自己成长过程中的关系发展。</p>
<p>上文曾提及三种关系：一元关系、共生关系以及多元关系。其中，一元关系其实对应着人格发展的自尊、安全感、自信的发展阶段。</p>
<p>所以，如果一个人在婴儿全能期发展得很好，他跟自己的关系就会很好。</p>
<p>比如，有的人现在可能特别厌恶自己、憎恨自己，这就与他在一元关系里的发展有很大关系。</p>
<p>共生关系涉及一个人跟另外一个人之间的互动。一个人对其他人的期待是什么？如何面对其他人对自己的期待？共生关系还会涉及一个人如何开始在社会中寻找自己的位置，并且把一部分精力放在完成自我发展上。在这一过程中，人们就会开始进行自我跟外界之间的平衡和整合。</p>
<p>所以，在回顾性格发展这条线时，要看一看自己的每一个阶段是怎样发展的？哪里缺失了？哪里太过了？比如，自己从小到大一直都被照顾得非常好，所有的问题都由家长代为解决，这就是太过了。过度的照顾损伤了孩子的独立性和自主性、能动性。</p>
<p>性格发展的过程对目前的关系模式也有影响。要分析过往的关系发展对现在的影响，就需要用一个工具——CCRT核心关系冲突主题。通过该模型可以看到人际关系中发生冲突和困难的核心所在。CCRT可以防止人们总是掉入相同的人际关系冲突主题中，帮助人们逐渐为自己与他人的关系创造新的经验。</p>
<p>第三步，要把这些对自我的认知放到人生全程中看待。比如，因为一些缺失，一个人小时候的性格比较内向，<strong>但是现在周围的环境可能已经发生改变，人际关系也发生了改变，自己完全可以做出改变，重新发展或学习新的应对办法。</strong></p>
<p>通过过往的经历在人生中留下的痕迹，人们可以分析出自己的心理基因。这是个人发展的蓝本，决定了一个人在人生的各个阶段如何规划今后的人生，如何找到人生的意义，并在寻找人生意义的过程中成就自己。</p>
<h2 id="第六章-情商发展">第六章 情商发展</h2>
<h3 id="情商要素：情商是什么">情商要素：情商是什么</h3>
<p><strong>真正的情商其实包括以下三方面</strong>。</p>
<p><strong>第一</strong>，真正高情商的人可以协调自己的感受、情绪和想法三者之间的关系。<br>
<strong>第二</strong>，高情商的人可以通过协调三者使自己的内心平稳、舒服，即使独处也很舒服。<br>
<strong>第三</strong>，高情商的人不仅能处理好自己的情绪，同时也可以体察和兼顾别人的情绪，并且有能力在双方的情绪以及交际方面找到平衡点。</p>
<p>平衡点的概念很重要。有很多人的所谓高情商，其实是为了满足别人、讨好别人而委屈自己。</p>
<p>有人觉得，我可以为别人付出，别人都愿意在我身边，就表明我情商高。并非如此。不管是过度付出还是过度索取，双方的关系实际上都是失衡的。</p>
<p>从平衡点的意义上来看，发展出高情商至少需要以下四种能力。</p>
<p><strong>第一种</strong>，体察自己的情绪、感受自己的想法的能力。<br>
<strong>第二种</strong>，体察他人的情绪，感受他人的想法的能力。<br>
<strong>第三种</strong>，理性思考分析的能力。<br>
<strong>第四种</strong>，平衡双方或多方情绪的能力。</p>
<p>发展高情商先要分清、处理一个很重要的三者关系：情绪、感受、想法。很多人无法处理事情或情绪，是因为他们将这三者混为一谈。</p>
<p>感受是什么？人对外界的刺激产生的一些生理性的、生物性的反应，感受不仅包含对周围环境刺激的反应，也包含对自己内在刺激的反应。</p>
<p>情绪是什么？情绪就是人们对感受的反应。比如，周围的环境很热使身体感觉很热，手心出汗，心跳加速。情绪就是当自己的身体很热、手心出汗、心跳加速时感到的烦躁或兴奋。</p>
<p>情绪和感受一般会通过神经系统的<strong>周围神经系统</strong>做出反应。</p>
<p>什么是想法？想法就是一个人怎样理解、解释自己的感受和情绪。因为涉及理解和解释，所以想法一般不产生在周围神经系统，而产生于<strong>中枢神经系统。</strong></p>
<p>所以，感受、情绪、想法，实际上也包含了周围神经系统和中枢神经系统以及大脑的协调。但是由于周围神经系统和中枢神经系统是两套系统，所以在很多时候确实会出现想法和情绪、感受无法一一对应或存在一些扭曲的情况。</p>
<h3 id="心理防御：如何分辨健康与僵化的防御机制">心理防御：如何分辨健康与僵化的防御机制</h3>
<p>“防御”是弗洛伊德首先在精神分析中提出的一个非常核心的概念。</p>
<p>就像人们在抵抗病毒时会启动生理免疫机制一样，人们面临外界的冲突、紧张的情境，以及挫折、打击时，就会不自觉地想要逃避内心的焦虑、不安，让自己的情绪变得镇静、头脑变得理性。</p>
<p>所以防御机制是一种自我保护机制，防御机制最重要的功能是保护人们，使人们不会受到外界压力的伤害，也可以从一定程度上防止人在冲动之下做出不当举动。当然了，当防御机制过于僵化或者使用不当时，也可能误把一些实际上对人们有用的压力、有用的影响也挡在外面。</p>
<p>防御机制的存在首先是对自我的保护，即使有些防御机制看起来很笨拙，不合情理。比如，拖延症、找借口合理化自己的过失、贬低别人维护自己的自尊等，也都是在保护自己的内心。</p>
<p>压抑和反向形成是两种常见的心理防御机制下面对此做个简单的分析。</p>
<p><strong>第一种，压抑。</strong></p>
<p>压抑其实很好理解，就是刻意忘记自己的一些感受和想法。当人们遇到很大的打击时，比如一个人辛苦做了很久的策划案却被大家批评得一无是处，他内心会非常受伤，陷入自我否定，想要大哭一场，<strong>但往往这时候他并不是先急着哭，而去重新坚持把当下的事做好，在做好了当下的事之后，再回忆当时那种脆弱的感觉，也不会觉得那件事那么难以承受了</strong>。这类“压抑”是一种很健康的防御，让人避免陷入当时的负面情绪，而且还有能力和理性先把事情做好。</p>
<p><strong>第二种，反向形成。</strong></p>
<p>有时候人们有某种感受出现，但是我们不愿意承认，就会用相反的方式表达。这种现象就叫反向形成。比如很多人非常害怕蹦极，但是越害怕，就越想去做这件事。</p>
<p>如果发现别人开始重重防御、重重保护自己，这时候要意识到你可能无意识地触碰了别人的痛处。</p>
<p>而当你对别人说的一些话，让自己有特别激烈的情绪时，也就意味着别人触碰了你的痛处。</p>
<p>从这个意义上讲，如果在日常生活中留意自己有哪些痛处，也就同时找到了自己可以成长的地方。</p>
<p><strong>当前的事件之所以令人受伤，是因为它唤起了曾经的痛苦记忆，那些没能克服、没能释怀、没能战胜的痛苦过往。</strong></p>
<p>每一个记忆都可以帮助人们重新审视自我。</p>
<p>在任何亲密关系之中，关于爱和安全的感受都会被随之注入人们的精神并留下印记。在人生的某些艰难时刻，我们更需要回顾过去的经历，<strong>通过觉察情绪背后隐藏的未被满足的需求，找到自我成长的契机，不再把过去的问题带到当下的关系里，这其实就是情商的体现。</strong></p>
<p>就像是身体弱的时候需要穿更多衣服一样，人的心理比较脆弱时，自然需要更多的防御机制，用更多的办法把内心与外界隔离开来。当一个人的内心重新变得强大之后，他自然可以放下防御，坦然地拥抱生活。</p>
<p>因此，防御机制除了具备保护的功能，也是一种处理信息的机制。</p>
<p>也许曾经受过伤害，于是给心灵戴上了一副墨镜。人们在经历过很多不同的事情后，也就给自己戴上了各种各样不同的墨镜。于是，他们所看见的世界，接收到的外界的信息，都经过了这样一层一层的墨镜过滤才进入大脑。</p>
<p>这样一种有色眼镜一样的防御机制，很有可能降低人们的社会适应性，也会损害人们的社交，损害人们对世界的认识。</p>
<p>但是，心理防御系统处理信息并不都是损失的，其也会帮助人们提高适应性，也就是提高情商。这种防御机制，被称为成熟的防御机制。</p>
<p>降低对压力的敏感度有两个相对应的心理防御机制，一个叫否认，另一个叫压抑。</p>
<p>否认是完全当这些压力不存在，假装感觉不到自己有压力。压抑是知道自己压力很大，也知道自己很累，但是仍然鼓励自己先咬牙熬过去。</p>
<p>通过假装看不到真实的状况、回避压力，内部消耗很大，心理代价很高。但是通过暂时把注意力都集中到解决问题上，之后再处理自己的情绪，可以帮助人们更好地适应压力环境，提高个人的适应性，以及与他人相处时的情绪稳定性，这会直接影响到个人是否可以平和地处理问题、经营与对方的关系。</p>
<p><strong>心理免疫系统如何应对外界刺激，就体现为人的性格</strong>，也就是一个人倾向于用哪些防御手段组合防御外界的压力。这是性格分析中非常重要的一环。</p>
<p>判断一个人的心理免疫系统即防御机制是否健康有三个标准。</p>
<p><strong>第一个标准</strong>，一个人的心理防御机制是否能够帮助他更好地看清现实。</p>
<p>举个例子，一个人面对困境时，至少可以有两种选择：第一种是他看清楚了这个困境，但是仍然鼓励自己面对；第二种是假装这件事情没有发生，继续原来的行为。第一种是看清现实，第二种是自我催眠、扭曲现实。如果一个心理防御机制不能帮助人们看清现实，反而扭曲现实、鼓励人们活在幻想中，这个防御机制就是不健康的，也是非常危险的，因为它让人逐步脱离现实而封闭在自己的世界里。</p>
<p><strong>第二个标准</strong>，一个人的心理防御机制是否有助于发展他对外界的适应性。</p>
<p>举个例子，比如很多人在日常生活中都曾面临无力感和无能感。此时，<strong>一个具有成长性的面对方式是，接受那些自己不能控制的，然后增强自己的能力，控制好那些自己能掌控的</strong>。但有一些人会<strong>通过指责别人获得控制感和优越感，抵御自己的无力感</strong>。这样的防御方式，只是给人带来拥有控制感的幻觉，转移了注意力，并没有真正解决无力感，无法发展出对外界的适应性。</p>
<p>心理防御机制的适应性还会受到其敏感度的影响。有的人会对别人的看法、周围的环境过度敏感，有的人过度把自己封闭在内心世界里面，仿佛周围的一切事情对他都没有影响。这种<strong>过于敏感或过于迟钝</strong>的心理防御机制都会影响人们发展适应外界的能力。</p>
<p><strong>第三个标准</strong>，一个人的心理防御机制是否灵活多样。</p>
<p>灵活多样的意思就是面对不同的压力，可以有不同的处理方式，甚至面对同一种压力，也可以有不同的处理方式。心理防御机制的多样性和灵活性是其健康程度的一个重要指标。</p>
<p>理解了人的心理防御机制就像戴了有色眼镜一样，使人们对外界的理解都是经过过滤的，因此人们所看到的并不是事实的全部。人与人之间容易产生矛盾的一个很重要的原因是各自都认为只有自己看到的或自己理解的才是对的。</p>
<p>当人们对自己内心处理信息的方式有了了解后就能明白，自己看到的并不是事实的全部，而包含了自己过往经历的影子，别人看到的也同样不是事实的全部。人们各自看到的世界，反映的都是各自过去的人生经历。一个人在重新分析自己的人生经历并获得不同的理解后，才能慢慢摘下有色眼镜，人生才会更真实、更开阔。</p>
<p>这样，人和人之间就有了一个很大的空间和宽容度。如果能理解到这一点，其实很多人际矛盾、冲突就不会发生。慢慢地，人们也不会那么在乎别人怎么看自己，自己也会少了很多对别人的埋怨和批判。</p>
<h3 id="共情能力：如何理解情商的心理意义">共情能力：如何理解情商的心理意义</h3>
<p>日常生活出现问题时，首要的是解决这个问题。这一过程可以被拆解为四点，变成一套公式。</p>
<p>第一，是否能了解、理解自己当下的状况？<br>
第二，是否能了解、理解他人，尤其是他人的背景、他人在某一事情中的状况以及想法？<br>
第三，是否可以清晰地知道正在发生的事情到底是什么？比如，两个人看似正在拌嘴，他们是真的在拌嘴，还是还发生了其他的事情，或者拌嘴只是他们解决问题的手段。<br>
第四，在了解自己、了解他人以及清晰目前的状况后，找到问题的症结。</p>
<h3 id="情商的发展与形成：如何理解自己又看透别人">情商的发展与形成：如何理解自己又看透别人</h3>
<p>在精神、心理独立之前，也就是在心理断奶，离开原生家庭之前，情商发展水平受限于周围的环境。别人对你的反映就像一面心理上的镜子，你从小到大觉得自己长什么样子与你周围的人对你的反映有直接关系。</p>
<p>把周围的人对自己的反应比喻为心理镜子，我们就很容易理解周围人的情商水平会如何决定你的情商水平。周围的人如何跟你互动、跟别人互动，也会影响你的互动模式。</p>
<p>所以如何让自己看清楚原生家庭对自己的影响，了解它的局限性，并且逐渐摆脱原生家庭的影响，可以帮助一个人扩大认知，扩大他对周围世界的理解。如果能从别人身上看到人与人之间不一样的交往模式，人们就能逐渐摆脱哈哈镜般原生家庭的影响。我们可以做到了这一点时，自然就能理解更多事情，并且更好地理解自己。</p>
<p>大家可以通过镜子这一比喻慢慢梳理在自己的情商发展过程中，到底都被什么样的镜子照过，这些镜子如何影响我们对自己的看法，以及期待别人如何看待自己。如果能把这一部分梳理清楚，在日常交际之中，就会拥有更好的理解自己和他人的能力。有了这个能力后，在平衡日常生活中的事情上，就会变得更加游刃有余。而这个过程也和依恋循环的过程很类似。所以大家可以从情商发展的角度重新审视自己的依恋循环。</p>
<h3 id="人格成熟：如何让情商成为高级平衡力">人格成熟：如何让情商成为高级平衡力</h3>
<p>其实高情商是人格成熟之后的一种必然表现，所以如果在人格不够成熟的情况下单纯追求高情商的发展，是治标不治本的。</p>
<p>前文说过一个人完成自己的发展与治愈，达到人格的成熟，就会有一个表现，这个人可以有意识地做出判断和选择，并且可以承担相应的结果。</p>
<p>那么现在，这句话可以从以下两点来理解。</p>
<p><strong>第一，能够理解自己的过去，并且可以明确自己的立场。</strong></p>
<p>如果一个人可以做到有意识地判断、选择，可以获得选择权，获得主动性，就意味着他不再受到过往的经验、情绪的局限，明白自己是如何被过去的心理模式影响的，明白自己的局限性。他可以在通盘考虑的基础之上做出判断，明确自己的目标和立场，然后再做出选择。</p>
<p><strong>第二，有能力分析结果。</strong></p>
<p>有的人可能没有这样的分析能力，稀里糊涂就把事情做了，到最后才发现很难接受结果。而一个人格成熟的人可以分析出自己不同的做法、选择可能带来怎样的结果以及这些结果之间的差异，自己需要做什么、付出什么以承受这些结果，自己的承受能力如何。</p>
<p>有意识地做出判断和选择并可承担相应的结果，是一个人人格成熟的标志。</p>
<p><strong>人格成熟后高情商自然就会出现。情商，就是一种很高级的平衡能力</strong>。当然，培养高情商的过程，其实也是一个有意识地促进自己人格成熟的过程。</p>
<p>情商作为一种高级平衡能力，主要体现在以下两个方面。</p>
<p>第一，感受、情绪、想法之间的平衡。<br>
第二，自己与他人，与外界之间的平衡。</p>
<p>要做到感受、情绪、想法之间的平衡，就要涉及自我功能。<strong>自我功能，在心理学上指的是人内心产生的一套平衡机制，被用于平衡外界对自己的要求跟自己内心的想法。</strong></p>
<p>关于人际关系的平衡，以下几点值得注意。</p>
<p>第一点，共情能力，即我是否可以真正看到对方的诉求和心理动机。</p>
<p>第二点，在体会对方之后，还要明确自己的目标和底线以及在目标和底线上的灵活程度，这就是知己知彼。做到知己知彼之后，才能开始调节二者之间的动态平衡。</p>
<p>第三点，找到双方诉求的平衡。在平衡和周围人的关系时，需要留意双方的心理诉求，从而利用解决问题尽量满足双方的心理诉求，而不仅仅是解决问题。</p>
<p>人际关系的平衡并不意味着双方都要对最后的结果的满意度是100分，而是把双方对结果的满意度都控制在60～90分。有很多人认为自己情商低，也许一个潜台词是，我认为只有双方都100%满意，我才算情商高。并非如此。</p>
<h2 id="第七章-心理健身">第七章　心理健身</h2>
<h3 id="进阶地图：如何计划阶段性转变">进阶地图：如何计划阶段性转变</h3>
<p>以下几个原则可以帮助大家更好地规划系统性转变，并且规避转变之中可能出现的困难。</p>
<p><strong>第一个原则：认知的改变必须有行动的跟进。</strong></p>
<p>很多人都有一个误解：心理咨询追求的是戏剧性的一朝顿悟，认为只要一朝顿悟，人生就会从此与众不同。有时确实如此，但是顿悟之后的改变是有前提的。前提之一是在顿悟之前，已经经历了长期的自我觉察。顿悟是一个从量变到质变的过程。另一个前提是，在理解发生改变之后，行为也必须随之改变。仅仅顿悟一些道理，人生不会就此改变。<strong>人生的改变一定是长期自我觉察、自我规划以及采取改变行动后逐步产生的结果。</strong></p>
<p>记住，认知改变引起的人生改变，必须以行动为保障。</p>
<p><strong>第二个原则：在进行刻意练习时，要有意识地选择更困难的路径。</strong></p>
<p>改变一定不是一件舒适的事情，因为改变就是要走出舒适区。所以开始改变，并不会让你感觉良好，甚至会有一段时间会让你感觉更不好。</p>
<p>但是可以练习的时候要循序渐进，不需要每一件事情都做出改变。</p>
<p>你需要选择一条略微超出舒适区的路径，不是突然做出180度的转变，而是做多个20度的转变。</p>
<p>当然，有时选择更困难的路径并不一定需要高度自律。比如，如果你是一个习惯紧张的人，那么你的刻意练习可能就是练习娱乐、放松，练习在一天中找出娱乐时间，甚至练习在玩时不要想着工作。对于习惯紧张、特别僵化的人来说，练习娱乐、放松同样属于走出舒适区。</p>
<p><strong>第三个原则：养成的习惯不可能在一天之内改变，也不需要在一天之内改完</strong>。所以在规划改变及改变的过程中需要有耐心，需要理解自己、宽容自己，但同时也要有一定的自律。</p>
<p><strong>第四个原则：越早期的影响，转变所需要的周期就越长。</strong></p>
<p>如果影响来自于小时候，尤其是来自于5岁之前，改变的时间就会更长。所以，改变要从最容易执行的事情开始，也就是说，要做今天就能开始做的事情。</p>
<p><strong>第五个原则：当决定从何入手后，要做的只是每天坚持。</strong></p>
<p>让其余的事情顺其自然，这一点非常重要。很多人明确自己要转变，也明白要从小事做起，也愿意循序渐进，但是总会有很多其他的事情打扰他们，比如今天的状态不太好。</p>
<p>有的人认为必须一切条件完备才可以转变。当一些情绪影响自己时，你要记住第五个原则，当决定从何入手后，要做的只是每天坚持。比如要开始锻炼自我觉察，目标是每天打坐10分钟，那么要关注的是完成这一行为。完成比高质量完成更重要。</p>
<h3 id="心理基因报告：如何评估心理基因的表达方式">心理基因报告：如何评估心理基因的表达方式</h3>
<p>在日常的生活中，你是否感觉自己很难坦然地接受别人的好意和照顾？你是否觉得别人照顾你、对你有好感、对你好时，你会惴惴不安，觉得自己需要把人情还回去，或者担心或怀疑对方有所企图？面对别人对自己的付出，你是否会感觉有压力？<strong>这些表现意味着自尊、信任以及安全感可能存在缺失。</strong></p>
<p>在做一件事情的时候，你是否会尽量避免对结果有所期待，认为这样就不会让自己失望？在日常工作中，是否计划总是很容易受到影响？一旦发现计划有变，你是否很容易感到焦虑或生气，或者当感到事情不在控制之中时，你会有什么感觉？你是否很容易觉得周围的人会联合起来欺负你？是否觉得孩子作业做不好是为了气你？老公回来晚了，是成心让你不高兴？老婆在别人面前开个玩笑就是存心不给你面子？<strong>这些问题都可能跟自尊和安全感有关系。</strong></p>
<p>你是否觉得为了满足自己的需求而对别人提要求很难？你是否觉得直接陈述自己的想法和需求是很困难的事情？有很多人会尽力避免直接表达，而是拐弯抹角，很间接地陈述想法和需求。</p>
<p>留意自己的思维方式。你是否在遇到事情的时候总是不自觉地在内心批评自己，或者总是想分一个对错，总想深究什么是对的，什么是错的？如果一件事情很难判断对错，你可能就会很难受？或者如果你没有办法找到一件事情的最优解，你就会觉得这件事情难以推进？你是否经常在内心责怪自己、指责自己，或者别人的行为，你都觉得是在要求你、在指责你？</p>
<p>在亲密关系里，如果看到朋友、爱人身边有更好的人，你是否觉得很羞愧？是否觉得这个朋友可能不想再跟你相处了，或者担心爱人会就此离开自己？</p>
<p><strong>这与羞耻感、自尊和安全感有关系。自尊、羞耻感和安全感没有疏通，导致在面对事情的时候容易采用二分法，对事情的理解非黑即白。</strong></p>
<p>在与人相处的过程中，如果有些事情进行得不顺利，你是否有想发火的冲动？如果有的话，<strong>这和自尊调节，以及如何控制毁灭性的冲动有关。</strong></p>
<p>你是否很容易对电视剧、网文或食物有一些短期或长期的上瘾的可能性？短期或长期有所区别。如果正在面临生活的变化，面临冲击，短期使用这些事物调节情绪，这就属于情绪调节的过程。其表现为，一旦渡过难关，就会回归正常，不再需要这些调剂。但是如果上瘾行为超过三个月，就要考虑自己可能在依恋方面存在失调。</p>
<p><strong>如果存在上述特点，就要对依恋部分进行调节。依恋部分是比较底层、比较核心的心理特征，调整依恋部分所需要的时间比较长。</strong></p>
<p>你平时是否会感到自我控制能力不足？<strong>这可能会跟自我信任、情绪调节能力有关。</strong></p>
<p>你是否有些时候觉得乐极容易生悲，所以尽量不让自己得意忘形，甚至不愿意让自己成功，不让自己感觉到快乐？<strong>这些也跟安全感、信任感和自尊有直接关系。</strong></p>
<p>在跟别人交往的过程中，尤其是跟爱人交往的过程中，你是否会希望对方可以在你什么都不说的情况下就能猜透你的心思？<strong>这可能跟共生期的需求被过度满足或不被满足所留下的心理层面的固着有关。</strong></p>
<p><strong>上述问题大多源于0～4岁这一阶段的心理营养缺失</strong>。如果上述问题与你的相似度比较高，你可能就需要花更多的时间和精力从情绪调节、自尊、自信入手，在这三个问题得到一定解决后，再攻克信任感、基础安全感和依恋层面的问题。</p>
<p>在4～6岁、6～12岁阶段，心理营养缺失较多会产生如下表现。</p>
<p>在日常的工作中，你是否很害怕发起一些项目，担心别人的不赞同会让你下不来台？你是否在遇到问题或困难的时候，有些时候希望自己能暂时消失，能躲起来？</p>
<p>你会不相信自己的能力和判断力吗？是不是在具体做一件事情的时候，会觉得自己很难贯彻完成，很多事情可能都是刚开头就不再继续，做事情总是虎头蛇尾，经常有很多事情悬而未决？</p>
<p>在日常的工作中，你是否经常不知道自己想要什么，也不知道自己想要达到的目的，但是却觉得每天的工作生活很忙，根本没有时间考虑这些事情？</p>
<p><strong>上述问题跟自主性、能动性有很直接的关系。而且在自主性、能动性之下，埋藏的其实是自尊的问题。</strong></p>
<p>你是否有时会害怕自己的言行举止会让别人不舒服、会得罪人？你在做事情时会对结果感到很悲观，觉得提不起精神、有拖延？同时，你可能觉得处理与上司、同事、朋友的关系很麻烦？</p>
<p>上述问题大多源于4～12岁，开始建立同伴关系时遇到很多挫折，比如从小被孤立，或者从来没有人站出来为你说话。</p>
<p>这一时期属于俄狄浦斯期。俄狄浦斯期的问题是一个三角关系的问题，也就是说，关系中有另外二人同时存在时，这一关系带来的情绪影响以及相应的处理方式。这并不仅仅体现在跟父母、伴侣的关系上，也体现在日常的生活工作中。</p>
<p>能否将一件事情贯彻执行直至完成，反映的是在6～12岁，也就是小学阶段时，心理韧性、意志力发展的过程。能否在这一过程完成韧性发展，决定了一个人是否容易放弃，遇到困难就退缩。</p>
<p>青春期则面临自我整合的问题。</p>
<p>你是否知道自己是一个怎样的人？你是否对自己的人生有一个基本的定义？你是否觉得人生值得一过？什么对你来说有意义？你知道哪件事情更重要，哪件事情相对不那么重要？如果用500字形容自己，你会如何描述？</p>
<h3 id="健身工具：如何使用心理健身房">健身工具：如何使用心理健身房</h3>
<p>基本功，需要练习的时间最长，并且影响也是最大的。基本功扎实，学招式就会变得很容易，进步一日千里。</p>
<p>转变基础安全感、自信、信任感、自尊等心理上的底层特质需要的时间最长，而一旦完成转变，影响也最深远。</p>
<p><strong>第一点，自信和信任感。</strong></p>
<p>自信和信任感的发展，会促进安全感的建立。也就是说，当开始逐步建立对自己的信任，逐步能够依靠自己时，安全感也会随之产生。</p>
<p><strong>人最基础的安全感主要来自父母，如果小时候有幸得到父母恰当的照料，安全感就会发展得很完整</strong>。如果父母没有在孩子幼小时给孩子足够的关注，孩子的安全感发展可能就会受到一定阻碍。<strong>而人在成年后，安全感则需要依靠自己建立</strong>。很多人在找工作、找伴侣甚至在带孩子的过程中，都试图把工作、爱人、孩子当作自己的父母，<strong>试图从他们身上找到安全感。这一行为往往就会产生很多生活悲剧。</strong></p>
<p><strong>所以成年人需要发展出对自己的安全感和对自己的信任。</strong></p>
<p>很多人在建立自信的时候，都会以为自信就是可以站在台上很有力量地说话，但做到这一点并不代表这个人就自信。</p>
<p>肯定可以完成这一计划，才叫自信，而不是自大、自卑或自我贬低。所以，练习自信，要从一件力所能及的小事开始。</p>
<p>选择一件力所能及的事情，要从一件真正可以完成的小事开始。</p>
<p><strong>第二点，一旦有了一定的自信、信任感和安全感，就要开始锻炼自尊。</strong></p>
<p><strong>自尊就是尊重自己的感受和想法，自尊也意味着一个人不会因为周围的环境、周围的人而随便否定自己。</strong></p>
<p>建立自尊，需要在所有人际交往中对自己说：“我尊重自己的感受和想法。”</p>
<p>很多时候，当一个人出现在面前，你可能会本能地很恐惧他，或者想讨好他，或者会有各种各样的反应。</p>
<p>在人际交往过程中，建立自尊的第一步，就是在做出本能反应之前，先停顿20秒。在这20秒里，首先告诉自己：“我要尊重自己的感受和想法”，然后体会自己当下的感受和想法。<strong>思考自己想要什么，自己在害怕什么，以及对方到底能不能提供自己想要的东西，如果他做不到，自己还可以做些什么。</strong></p>
<p>建立自尊的过程有一定难度，因为很多时候低自尊都是因为周围的人曾经的贬低。要能重新站起来，去面对这些曾经打压过自己的人，自然要面对很多恐惧和羞耻。</p>
<p><strong>建立自尊的一个切入点就是思考自己的诉求。</strong></p>
<p>开始建立自尊的时候，不要急于期待人际关系发生实质性的改变，要做的只是在做出反应之前，思考自己的诉求，以及当下的情绪和感受。</p>
<p>当你可以放慢节奏，给自己20秒思考、感受，然后再做出反应，其实你的人际关系，包括对自己的看法就已经发生改变了。</p>
<p>在日常人际交往过程中，一般最有话语权的那个人可能都是说话最慢的、最少的。这是一个有自尊、有力量的人在人际交往中的表现，他并不是在刻意忍住不说话，<strong>而是一直在观察周围的人，也在思考自己的立场，他尊重别人，也尊重自己。</strong></p>
<p>要做到尊重别人，其实要从尊重自己开始。</p>
<p><strong>如果一件事情自己可能并不太愿意做，至少可以做到先不答应这件事情，或者回复对方，我需要考虑考虑。</strong></p>
<p>低自尊，一般有两种不同的引发形式。有的低自尊可能来自父母的指责，以及周围人的恶意，这很容易分辨。有的低自尊是由于变故，比如小学时突然因为家庭原因需要转学，或者生病导致成绩下滑后，感觉在学校没有自信，也不再受老师喜欢。这些虽然影响很大，但是可以改变。改变就从延缓自己的反应开始，利用延缓的时间里适度将自己和周围的环境隔离，并且留有时间思考自己的诉求和感受，愿意站出来保护自己。</p>
<p>改变自信、信任感、安全感和自尊在日常生活中的锻炼过程会非常缓慢。</p>
<p>就像建立自信，可能一件事情重复一两百遍后还会失败，但只要将之变成习惯，就能确信自己是可以完成这件事情的。建立自尊，需要反反复复对自己强调，我尊重自己的感受和想法，慢慢地才能真正看到自己的感受，并和周围有害的人保持距离。这样坚持一段时间，才有空间发展自己的自尊。</p>
<p><strong>第三点，需要培养分析能力。</strong></p>
<p>分析能力是需要刻意锻炼的。不过，培养分析能力比建立自尊、自信和信任感容易一点，可以试着用思维导图的方式每天分析生活中的一件事情。</p>
<p>以选择和商业伙伴谈合作这件事情为例，思维导图需要分清楚，对方需要什么，我需要什么，我的原则是什么，我的立场是什么，对方的原则和立场是什么，他的诉求是什么，我的诉求是什么。然后去分析二者如何要达到一个平衡，达成共识，各自分别有哪些途径，各自应该如何处理。</p>
<h3 id="强化工具：心理学家常用的三个自我调节工具">强化工具：心理学家常用的三个自我调节工具</h3>
<p>这三个工具分别是呼吸调节、身体扫描、觉察日记。</p>
<p>在日常的生活中，呼吸是心理状态的一个非常直接的体现。心理状态、精神状态都会反映在呼吸上。而调节呼吸，可以直接影响心率，从而调节交感神经，进而影响个人的情绪和感受。</p>
<p>如果练过武术、书法、瑜伽、舞蹈，就会知道动作、运笔等，都需要呼吸的配合。呼吸是一个非常重要的调节工具，要重视自己的呼吸，尤其是在面对压力、恐惧或感到很虚弱的时候，更要刻意调节呼吸。</p>
<p>方法一，观呼吸。</p>
<p>观呼吸是一种最正统的练习呼吸的方法。打坐或练习瑜伽往往会伴随观呼吸的练习。</p>
<p>观呼吸，就是将注意力都集中在呼吸上。在练习打坐的时候，心神总是很容易被分散，很容易坐着坐着就想起今天事情，担心明天的事情。这时要做的练习就是慢慢地、很温柔地把注意力重新拉回到呼吸上，感受呼吸时身体的感觉，肌肉的感觉，气流经过鼻孔、经过你的口腔、到达肺部时身体的感觉。</p>
<p>观呼吸还有一个附加练习，可以一边观呼吸，一边数呼吸的次数。很多人在观呼吸的过程中会走神，数次数可以让人意识到这一点。</p>
<p>方法二，448呼吸法。</p>
<p>这个呼吸法分三步：</p>
<p>第一步是4个拍子的吸气；</p>
<p>第二步是4个拍子的屏住呼吸；</p>
<p>第三步是8个拍子的呼气。</p>
<p>也就是说可以这么数，吸气1234，屏住呼吸1234，呼气12345678，整个过程就是吸气4秒，中间屏住呼吸4秒，再用8秒的时间把气吐出去。</p>
<p>这个是一个可以在急性焦虑发作的时候使用的呼吸法，按照这个呼吸法连续做10~20次，可以非常快地通过调节呼吸来调节心率，让极度焦虑的情绪可以迅速得到缓解。</p>
<p>方法三，深蹲呼吸法。</p>
<p>该呼吸法适用于情绪很低落、很抑郁的时候。</p>
<p>试着一边深蹲，一边做深呼吸。你可以在蹲下去的时候呼气，站起来的时候吸气，也就是需要发力的时候呼气，不需要发力的时候吸气。大家也可以按照自己的喜好伴随着深蹲，或者跳跃，或者其他一些需要身体大幅度活动的类似动作，配合呼吸去做调节。这种呼吸法可以让人很快地从比较低落比较抑郁的状态里面走出来。</p>
<p>身体扫描就是把注意力依次放在自己身体的每个部位，觉察每个部位的感受。</p>
<p>身体扫描可以让人真正地熟知自己的身体和感受，并使人逐渐把注意力从焦虑、抑郁等情绪带来的杂念中转移开，让思绪从过去或未来之中重新回到当下。</p>
<p>在做身体扫描的时候，可以从脚开始，感觉你的脚趾头、你的脚板、脚背、脚踝、小腿、膝盖、大腿、臀部、肚子、背部，到你的肩膀、手臂、手肘、手腕、手心、手背、你的每一根手指头，然后回到你的脖子上、头上，到你的脸部、你的眼睛、嘴巴、嘴唇、你的耳朵，等等，我们可以把身体的每个部分都扫描一遍。</p>
<p>一般来说，完成一次身体扫描大概需要四十五分钟到一小时，感觉得细腻一点可能会用一个半小时，即使感觉比较粗糙也至少需要三十分钟的时间。所以如果身体扫描过程不足三十分钟，你可能并没有真正在扫描你的身体，而是在想象之中把自己的身体感觉想象了一遍。</p>
<p>大家可以练习，每天做觉察日记，觉察日记最好用纸用笔来写，你可以安排在一天之中的任何一个时候写。如果你觉得自己有睡眠问题，可以安排在你睡觉之前去写。</p>
<p>这个听起来很简单，但是实际上当你每天写觉察日记时，就给了你一个每天反思的机会。这个反思的过程其实就是梳理当天的情绪，分析当天的事情，把当天的事情完结的过程。</p>
<h3 id="人生升级：对自我的探索越深，对人生的掌控力越大">人生升级：对自我的探索越深，对人生的掌控力越大</h3>
<p><strong>第一，我希望大家可以慢慢地体会到，你自己就是全世界，当你改变了你自己，你就改变了这个世界。</strong></p>
<p>慢慢地，大家通过本书提供的这些心理学的工具，通过反复进行书中的练习，可以体会到一点，一个人如何理解一件事情，如何看待周围的人，如何讲述自己的故事，讲述自己的人生，都和自己的经历有关系。</p>
<p>这些过往的历史，把人捆绑在了一个固定的认知之中。如果一个人认为人跟人之间是有真实感情的，当他被欺骗、被伤害的时候，他会知道这可能只是个别情况，所以仍然会对人与人之间美好的感情有期待。而这份期待可以帮助他度过这些不顺利的时光。但是如果一个人坚信人跟人之间总会互相利用、伤害，互相占便宜，那么就算遇到一个真心对待他的人，他可能也总会疑心别人会不会算计他。</p>
<p>所以，<strong>一个人对世界的理解源于个人的经历，而他过往的经历会凝结为他内心的一些信念，而这些信念就决定了他看世界的目光</strong>。也就是说，如果一个人可以把自己内心的信念，把自己过往生活的经历都梳理清楚，自然就可以决定哪些信念应该保留，哪些信念需要丢弃。这些信念可能曾经帮助过你，曾经支撑过你，但是现在已经不再适合你了，那就对它道声感谢，勇敢放手吧。如果可以做到这些，你的人生将会变得更自由更广阔。</p>
<p>从此<strong>你看到的就是机会，各式各样色彩斑斓的人生经历，而不再是过往的宿命。</strong></p>
<p><strong>第二，我希望大家可以慢慢体会得到，人生永远都会有选择。</strong></p>
<p>当你不再受控于过往的这些机械式的反应，不再受控于有仇必报的执念，不再受控于人跟人之间只有互相利用的偏见，不再受控于出身决定的成就或观念，放开这些限制性思维，你就能看到不一样的路。而这个时候你的人生才真正在你的手中，而不是被你过往的经历、被你的潜意识，被那些别人灌输给你的观念所决定、所控制。</p>
<p>只有从这些限制性思维里走出来，才会发现人生的路确实不止一条。在每一件事情上你都可以有自己选择，既可以选择自己用什么想法去理解一件事情，也可以选择自己的感受和情绪。</p>
<p>其实，愤怒、激动和兴奋在身体反应上都相差无几，比如都会引起心跳加速。但对于心跳加速，是理解为爱还是理解为恐惧，则取决于个人的反应。当你不再机械地反应，对于同样的一个不得不经历的场景，你就会以不同的态度、不同的情绪、不同的想法经历它。</p>
<p>只有拥有了这样的自由度，你的人生才是真正掌握在你自己的手中，而不是被别人所决定。</p>
<p>当你明白了自己就是全世界，改变了自己，就改变了世界，当你可以理解自己、改变自己时，你的人生永远都会有选择。</p>
<p>希望你可以手边有工具，心中有信念，在日后的人生之中不会感到孤立无援。你永远是自己最好的伙伴，你永远是自己最安全的靠山，你永远可以依靠和信赖自己，面对人生中的挑战和机遇，活出自己的人生意义。</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>二课</tag>
        <tag>阅读</tag>
      </tags>
  </entry>
  <entry>
    <title>《用概率思维提高胜算》_刘润</title>
    <url>/posts/6cfa7377.html</url>
    <content><![CDATA[<blockquote>
<p><strong>序言</strong></p>
<ol>
<li>人生算法<br>
把同样公正的机会，放在很多人面前，不同的人生算法，会导致全然不同的选择。</li>
<li>确定效应<br>
两个选择，100%拿到100万和50%拿到5000万，你会怎么选？</li>
<li>概率思维<br>
是这个时代成功者所秉持的底层思维</li>
</ol>
</blockquote>
<h1>PART ONE 1 定准方向 把握人生的精度</h1>
<h2 id="成为高手的三个阶段">成为高手的三个阶段</h2>
<h3 id="判断力">判断力</h3>
<ul>
<li>不是指你有没有优秀的“决策模型”，而是在你只有20%-30%信息量的时候，如何做出大概率正确的决定</li>
<li>是信息量的对冲</li>
</ul>
<h3 id="分寸感">分寸感</h3>
<ul>
<li>是复杂性的对冲</li>
</ul>
<h3 id="颗粒度">颗粒度</h3>
<ul>
<li>是对分辨率的对冲</li>
</ul>
<h2 id="让复杂的事情简单化">让复杂的事情简单化</h2>
<h3 id="目标和指标">目标和指标</h3>
<ul>
<li>
<p>我们要懂得为目标找到指标</p>
<ul>
<li>持续健康经营是企业经营目标</li>
<li>人均利润是指标</li>
</ul>
</li>
<li>
<p>不要因为关注指标，而忘了目标</p>
</li>
</ul>
<h3 id="回归本质">回归本质</h3>
<ul>
<li>
<p><img src="/img/probability_mind/1.jpg" alt=""></p>
</li>
<li>
<p>在变革时代，更需回归行业本质，尊重常识和规律。</p>
</li>
<li>
<p>从满足用户需求出发，把复杂事情简单化</p>
</li>
<li>
<p>只有简单，才能专注。只有专注，才能做到极致。简单，才是终极智慧。</p>
</li>
</ul>
<h3 id="熟人关系">熟人关系</h3>
<ul>
<li>真正厉害的人，都很简单</li>
<li><strong>能把复杂问题简单化，才是一流大智慧。</strong></li>
</ul>
<h2 id="知识增量，决定你的成长质量">知识增量，决定你的成长质量</h2>
<h3 id="世界上的两种知识">世界上的两种知识</h3>
<ul>
<li>
<p>看书的两个误区</p>
<ul>
<li>把看书过分神圣化，别让形式大于你的目的</li>
<li>看书不仅仅是为了获得已知，更是获得认知</li>
</ul>
</li>
<li>
<p>一种是把未知变成已知</p>
<ul>
<li>充满探索精神的科学家、思想家</li>
</ul>
</li>
<li>
<p>第二种是把已知变成认知</p>
<ul>
<li>不仅是为了知道，更是为了认知</li>
<li><strong>明白是什么，还要知道为什么、怎么用，只有这样，才是有效的知识增量</strong></li>
</ul>
</li>
</ul>
<p><img src="/img/probability_mind/2.jpg" alt=""></p>
<h3 id="高效学习的四种途径">高效学习的四种途径</h3>
<h4 id="认知之树-须鲸式学习">认知之树+须鲸式学习</h4>
<ul>
<li>认知之树：要有自己的知识框架<br>
<img src="/img/probability_mind/3.jpg" alt=""></li>
<li>须鲸式学习：先大量输入，接着把有用的知识，挂在你的认知之树<br>
<img src="/img/probability_mind/4.jpg" alt=""></li>
</ul>
<h4 id="大量听书">大量听书</h4>
<ul>
<li>好处：短时间内快速了解一个领域的全貌，获得60%-70%的核心认知。</li>
<li>对打地基很有帮助，还能很好地开阔自己的视野</li>
<li>偶遇陌生的知识，迅速扩展知识面，完善知识结构</li>
</ul>
<h4 id="集中阅读">集中阅读</h4>
<ul>
<li>听到特别好的书，想深入了解就仔细阅读</li>
<li>阅读，是做更认真的研究，吃透一个领域</li>
<li>如何阅读
<ul>
<li>先看目录</li>
<li>然后，找到what、why、how</li>
<li>先读书，然后读人</li>
<li><img src="/img/probability_mind/5.jpg" alt=""></li>
</ul>
</li>
</ul>
<h4 id="输出是最好的输入">输出是最好的输入</h4>
<p><img src="/img/probability_mind/7.jpg" alt=""></p>
<h3 id="坚持，造成人与人之间的差距">坚持，造成人与人之间的差距</h3>
<ul>
<li>
<p>用他律来自律，加入一个学习小组</p>
<ul>
<li>大家规定，每天输出，做到奖励，做不到惩罚</li>
<li>互相监督，互相鼓励</li>
</ul>
</li>
<li>
<p>充分利用碎片化的时间</p>
<ul>
<li>不要浪费第三个8小时</li>
<li>充分利用碎片化时间学习，积少成多，非常可观。</li>
<li><img src="/img/probability_mind/8.jpg" alt=""></li>
</ul>
</li>
<li>
<p>结语：大量输入，大量输出，量变引起质变。</p>
</li>
</ul>
<h2 id="你做过的事情都有价值线">你做过的事情都有价值线</h2>
<h3 id="优秀员工、高级经理人与事业伙伴">优秀员工、高级经理人与事业伙伴</h3>
<h4 id="首先是做事靠谱">首先是做事靠谱</h4>
<ul>
<li>交代的事情，按时完成</li>
<li>从质量上，满意甚至超出预期</li>
<li>能力达不到高质量的交付，会主动学习或者协调各种资源，以及求助</li>
</ul>
<h4 id="其次是值得托付">其次是值得托付</h4>
<ul>
<li>拿到目标后，询问背后真正想要的东西，调配内部资源，协调外部资源，形成计划，分解指令，让靠谱的人去完成</li>
<li>装着事，装着全局，时刻警惕风险，承担责任，永不退缩，寻找解决方案</li>
</ul>
<h4 id="最后是患难与共">最后是患难与共</h4>
<ul>
<li>有相同的思维级别，有互补的能力结构</li>
<li>把事业看成成就的来源，而不是经济的来源</li>
</ul>
<p><img src="/img/probability_mind/9.jpg" alt=""></p>
<h3 id="君子不器">君子不器</h3>
<ul>
<li>润总成就总结：<strong>在每一件事情上，我都会做到榨干我所能学习的一切东西</strong></li>
<li>你做过的那些看似没有用途的事情，会在生命的某一时刻连接在一起，<strong>形成一条价值线</strong></li>
<li>这条价值线会指引你，走向你想要的生活</li>
<li>君子不器，你想把自己塑造成什么样的形态，你说了算</li>
</ul>
<h3 id="责权利心法">责权利心法</h3>
<ul>
<li>给靠谱的担当者，而不是执行者，足够的利益</li>
<li>把80%的奖励给20%的担当者</li>
<li>随时准备好三种力从执行者转为担当者
<ul>
<li><strong>能力</strong></li>
<li><strong>愿力</strong></li>
<li><strong>潜力</strong></li>
</ul>
</li>
</ul>
<h3 id="总结">总结</h3>
<p><strong>凡事有交代，件件有着落，事事有回音。你的靠谱层次，决定了你能成为哪种人</strong></p>
<h2 id="真正困住一个人的是格局">真正困住一个人的是格局</h2>
<h3 id="放下“主动防御的本能”">放下“主动防御的本能”</h3>
<ul>
<li>当别人告诉你这件事不可能时，那是因为他做不到，不代表你不能</li>
</ul>
<h3 id="向内观格局">向内观格局</h3>
<ul>
<li>产品势能不足，才需要营销补、渠道补</li>
<li>金杯银杯，不如用户的口碑</li>
<li>资源背景，不如自身能力过硬</li>
<li>大机会时代来临，机会落在有实力的人身上，而不是机会主义身上。只有敢于不如人，才能胜于人。勇于承认自己的不足，你才能有更多的生存空间。</li>
</ul>
<h3 id="向外观视野">向外观视野</h3>
<ul>
<li>为什么如此谦卑？因为他们见过更优秀的人。</li>
<li><strong>优秀，没有极限</strong>。所以，见过这些优秀的人，常常自愧不如。</li>
<li>更可怕的是，<strong>这些优秀的人，比你更加谦卑，比你更加努力。</strong></li>
<li>如果真的想获得比别人更高的能力，就要<strong>比别人更勤奋</strong></li>
<li>格局同样如此，见识过，经历过，方知人外有人，天外有天。站得越高，才能看得越远。</li>
<li><strong>多经历、多见识、多反思、多复盘、多承受委屈和磨难，你的视野和格局才能得到提升</strong>。勇于承认自己的不足，格局都很大。</li>
</ul>
<h3 id="结语">结语</h3>
<ul>
<li>提升格局，首先是提升视野</li>
<li><strong>视野是向外观，格局是向内观</strong></li>
<li>视野是向外的，看得越多越好，越透彻越好，越有高度越好</li>
<li>格局则是向内撑大自己的心胸，越大越好</li>
</ul>
<h2 id="成大事的人，要具备的五种硬功夫">成大事的人，要具备的五种硬功夫</h2>
<h3 id="拥有强烈的好奇心">拥有强烈的好奇心</h3>
<ul>
<li>好奇心是驱动一个人进步的最大动力</li>
</ul>
<h3 id="拥抱不确定性">拥抱不确定性</h3>
<ul>
<li>厌恶不确定性，是因为厌恶不确定性背后巨大的风险</li>
<li>不确定性背后，除了巨大风险，也可能是巨大的收益</li>
<li>在可承受范围内主动拥抱不确定性，是有好处的</li>
</ul>
<h3 id="更大的目标和想象力">更大的目标和想象力</h3>
<ul>
<li><strong>要不断成长，积累价值，让自己变得稀缺</strong>，有能力去解决别人解决不了的问题。</li>
<li>想要成大事，就要有更大的目标和想象力，<strong>专注于创造价值</strong>，而不是创造财富。</li>
<li><strong>赚钱，只是一个顺带的结果而已。</strong></li>
</ul>
<h3 id="延迟满足">延迟满足</h3>
<ul>
<li>延迟满足的人，会选择提升自己</li>
<li>能够延迟满足的人，坚持长期主义，要的是未来收益，而不是当下的快感。</li>
<li>要把一件事做到极致，大部分时间都是很平淡、很枯燥的，高光时刻只有取得阶段性成果的那几秒钟。</li>
<li><img src="/img/probability_mind/10.jpg" alt=""></li>
</ul>
<h3 id="不怕犯错">不怕犯错</h3>
<ul>
<li>害怕认错认为犯错代表能力不行</li>
<li>只要不是什么致命的错误，犯一些小错误，反而是值得高兴的事情。</li>
<li>因为有有机会提升自己了，从错误中学习，以便下次做得更好</li>
<li>现在能力不行，但只要不断总结，就有行的那天</li>
<li><strong>成功，要多从外部找原因，而失败，多从内部找原因。不怕犯错，善于自省，不断改进。这样的人，没有天花板。</strong></li>
</ul>
<h2 id="复盘">复盘</h2>
<ul>
<li>高手和普通人的差别，在90%-99%这一段。这一段关键词是“极致”</li>
<li>而顶尖高手和高手的区别，在于99%-99.9999%。这一段的关键词是判断力、分寸和颗粒感。</li>
<li>真正的高手，都善于把复杂的事情简单化</li>
<li>只有简单，才能做到专注。只有专注，才能做到极致。简单，才是终极智慧。</li>
<li>我们的目的，不仅是为了知道一样东西，更是认知一样东西。</li>
<li>如果你对更广阔的海洋有渴望，对自己更强大的能力有信心，就别被恐惧拴住</li>
<li>凡事有交代，件件有着落，事事有回音。</li>
<li>在每件事情上，我都会做到榨干我所能学习的一切东西。</li>
<li>总有一天，你做过的那些看似没有用途的事情，会在生命的某一时刻连接在一起，形成一条价值线。</li>
<li>你今天必须做别人不愿做的事，明天才能够拥有别人不能拥有的东西。</li>
</ul>
<h1>part2 找对方法，看透这个世界的本质</h1>
<h2 id="用多元思维看世界">用多元思维看世界</h2>
<ul>
<li>这个世界是多元的，有很多要素是相互作用、彼此制约的，没有任何一“元”是能够统治这个世界的，所以你要用“多元认知模型”去认识它。</li>
<li>这个世界充满了这样的循环，有的时候“东风压倒西风”，而有的时候反过来“西风压倒东风”。</li>
</ul>
<h2 id="观点的两面">观点的两面</h2>
<ul>
<li>
<p>“多元认知模型”最基本的逻辑是：当你听到一个新观点时，先试着想一想，他有没有反面的观点，这是第一步。</p>
</li>
<li>
<p>第二步：思考一下，这个反面观点有没有道理。如果没有道理，就被一个观点所统治了。</p>
</li>
<li>
<p>当你看到一个观点，要做两件事</p>
<ol>
<li>找到观点的反面</li>
<li>找到反面观点的道理</li>
</ol>
</li>
<li>
<p>完成这两步，你才能更好地认识这个真实的世界。</p>
</li>
</ul>
<p><img src="/img/probability_mind/11.jpg" alt=""></p>
<ul>
<li>结语：这个世界上没有绝对正确的理论，没有放之四海皆准的道理，也没有能够让一家公司获得成功的完美的管理方法论。</li>
</ul>
<h2 id="洞察事物本质的能力">洞察事物本质的能力</h2>
<ul>
<li>
<p>除了系统学习，就是要在日常生活中不断练习。</p>
</li>
<li>
<p>投篮的本质</p>
<ol>
<li><img src="/img/probability_mind/12.jpg" alt=""></li>
<li>稳定，就是质量</li>
<li><strong>每一件事情背后都有其逻辑。逻辑对的事情不一定就能成，但是逻辑错的事情几乎成不了。理解每一件事的逻辑，找到正确的做法，然后刻意练习。</strong></li>
</ol>
</li>
<li>
<p>结语</p>
<ul>
<li>
<p>每一件事物，都有它的本质。但是大部分人却只能看到表象。</p>
</li>
<li>
<p>普通人看到的是一只手表，而优秀的人看到的，是手表背后的几百个零件。</p>
</li>
<li>
<p>普通人看到的是一次合作，而优秀的人看到的，是背后的利益分配、风险转嫁。</p>
</li>
<li>
<p>普通的人看到的是一个团队，而优秀的人看到的，是团队里错综复杂的责、权、利。</p>
</li>
<li>
<p>透过表象看本质，是顶尖高手的基本功。</p>
</li>
<li>
<p>花半秒钟看透本质的人，和花一辈子都看不清的人，注定拥有截然不同的命运。</p>
</li>
<li>
<p>每一件事情的背后，都有根本的逻辑。逻辑对的事情不一定就能成，但是逻辑错的事情几乎成不了。</p>
</li>
</ul>
</li>
</ul>
<h2 id="从零维到五维的思考">从零维到五维的思考</h2>
<p><img src="/img/probability_mind/15.jpg" alt=""></p>
<h3 id="一维思考">一维思考</h3>
<ul>
<li>
<p>不要用战术上的勤奋，掩盖战略上的懒惰</p>
</li>
<li>
<p>基于“线”的思考，它关注的是战略层面。但仅限于线性的战略层面。</p>
</li>
<li>
<p><img src="/img/probability_mind/16.jpg" alt=""></p>
</li>
</ul>
<h3 id="二维思考">二维思考</h3>
<ul>
<li>从战略到商业模式的思考</li>
<li>北大魏炜教授：商业模式就是利益相关者的交易结构。</li>
</ul>
<h3 id="三维思考">三维思考</h3>
<ul>
<li>颠覆式创新，让不可能成为可能。</li>
<li><img src="/img/probability_mind/17.jpg" alt=""></li>
</ul>
<h3 id="四维思考">四维思考</h3>
<ul>
<li>三维思考+时间维度</li>
<li>不仅能看到全局，还能沿着时间线，探寻到过去和未来。</li>
<li>原因通常不在结果附近，不要盲目去学习别人成功后的行为。</li>
<li><img src="/img/probability_mind/18.jpg" alt=""></li>
</ul>
<h3 id="五维思考">五维思考</h3>
<ul>
<li>正确的事情反复做</li>
<li><img src="/img/probability_mind/19.jpg" alt=""></li>
<li>所谓运气，也就是你要坚持正确的事情反复做，不断增加成功的概率。微观世界的概率叠加概率，概率嵌套概率，到了宏观世界，就被叫作“运气”。</li>
</ul>
<h2 id="打破自己的认知盲区">打破自己的认知盲区</h2>
<ul>
<li>未来的优势，都是认知的优势。未来的竞争，都是认知的竞争。</li>
<li>本质思维<br>
<img src="/img/probability_mind/20.jpg" alt=""></li>
</ul>
<h3 id="认知的三种层级">认知的三种层级</h3>
<h4 id="一元思维">一元思维</h4>
<ul>
<li>以我为中心，几乎听不进其他声音</li>
<li>和外界思维无法兼容，无法交流</li>
</ul>
<h4 id="二元思维">二元思维</h4>
<ul>
<li>能兼容两种不同的观点和人</li>
<li>具备基本的逻辑思维和同理心</li>
</ul>
<h4 id="多元思维">多元思维</h4>
<ul>
<li>能够兼容外界所有的思想和观点</li>
<li>可以快速取其精华，去其糟粕，并随时提炼使用</li>
<li>可复制的能力内核，才是本质<br>
<img src="/img/probability_mind/21.jpg" alt=""></li>
</ul>
<h3 id="打破认知盲区的正确方式">打破认知盲区的正确方式</h3>
<h4 id="打开自己，学会客观辩证地看待问题">打开自己，学会客观辩证地看待问题</h4>
<ul>
<li>如果你在生活中留心观察，会发现有的人在自己的观点遭到别人的反对之后，其第一个念头不是思考对方的观点是否合理，而是本能地反驳对方的观点，甚至加以讽刺，采取人身攻击的手段，来维护自己的立场。</li>
<li>我们在接受观念时，会自动屏蔽或者抗拒与以往认知不同的观点，以至于无法更新自己的认知。</li>
<li>人在面对未知的时候，都会有一种不安和恐惧，并会因此采用防御姿态，甚至主动攻击。</li>
</ul>
<h4 id="多人之镜，改变环境">多人之镜，改变环境</h4>
<ul>
<li><strong>打破认知盲区，一般都是自我主动，并借助外力才得以实现。所以，你只有改变环境（生活环境、交往环境、人际圈子等），从多个高手那里获取新的知识（新观点、新思路），反思自己的问题所在，包括吸收外界的不同意见，内部和外部融洽了，才有可能产生新的认知，打破已有的局限观念。</strong></li>
</ul>
<h4 id="不偏不倚的自我认知">不偏不倚的自我认知</h4>
<ul>
<li><img src="/img/probability_mind/22.jpg" alt=""></li>
<li><img src="/img/probability_mind/23.jpg" alt=""></li>
<li>小成靠努力，大成靠趋势。成大事者，必须先有不偏不倚的自我认知。</li>
</ul>
<h4 id="结语-2">结语</h4>
<ul>
<li>同一件事情，你站在不同角度、高度、立场，就会有不同的观点。</li>
<li>人与人的差距，在于思维视角的不同。</li>
</ul>
<h2 id="搭建人生进化系统">搭建人生进化系统</h2>
<ul>
<li>什么决定人的成功？答：<strong>找到可复制的能力内核</strong>，找到能复制自己的核心竞争力</li>
</ul>
<h3 id="0→0-1→1→10→1→N">0→0.1→1→10→1→N</h3>
<ul>
<li>
<p>内核特点</p>
<ul>
<li>足够简单，这样可以大规模复制</li>
<li>能构建成系统，像种子一样生根发芽开花结果，这样才有生命力和抵抗力</li>
</ul>
</li>
<li>
<p>但是成功不是从0到1，从1到N，真正的完整路径是：0→0.1→1→10→1→N。</p>
</li>
<li>
<p>高手，连成功都有套路。</p>
</li>
<li>
<p><img src="/img/probability_mind/24.jpg" alt=""></p>
</li>
</ul>
<h3 id="可复制的能力内核">可复制的能力内核</h3>
<ul>
<li>芒格实际上是一个科学主义者，具有证伪思维；他的思维模型是<strong>用来证伪的，不是支持你的决策</strong>，是为了打击决策，这些模型是检查清单。</li>
</ul>
<h3 id="感知-认知-决策-行动">感知-认知-决策-行动</h3>
<ul>
<li>一次完美，换不回人生的成功。次次完成，才有机会迎来人生的圆满。</li>
<li><img src="/img/probability_mind/25.jpg" alt=""></li>
<li>好奇感知指的是对外界要充满好奇心，敏感获得很多信息；</li>
<li>灰度认知指的是在认知上要理性，考虑各种变量，承认世界是灰度的；</li>
<li>黑白决策指的是在决策的时候，必须果断，做出取舍；</li>
<li>疯子行动指的是在行动环节，你像一个战士，需要不畏艰险，勇往直前，完成任务。</li>
</ul>
<h3 id="增长和福利">增长和福利</h3>
<ul>
<li>一个人乐此不疲的地方在哪里，就是他的<strong>优势和天赋</strong>所在，可能就是他的内核</li>
<li><strong>一个人的内核，就是他的价值点</strong>。我们每个人都在与这个世界做<strong>价值交换</strong>，一个人的内核，一定就是最不可替代的闪光点。找到内核后，<strong>是增长，是复制，形成只属于自己的复利。</strong></li>
<li><img src="/img/probability_mind/26.jpg" alt=""></li>
<li>老喻说成功很难设计，但是系统可以设计。</li>
<li>若系统一直壮大发展，终有一天会跨越临界点。跨越，就能跨界。转型，就会成功。走好每一步，走过临界点。成为随机漫步的傻瓜，涌现随机漫步的美丽。</li>
</ul>
<h2 id="复盘时刻">复盘时刻</h2>
<ul>
<li>这个世界充满了这样的循环，有的时候“东风压倒西风”，而有的时候反过来“西风压倒东风”</li>
<li>每一件事情背后都有其逻辑。逻辑对的事情不一定就能成，但是逻辑错的事情几乎成不了。理解每一件事情的逻辑，找到正确的做法，然后刻意练习。</li>
<li>稳定，就是质量。</li>
<li>原因通常不在结果附近</li>
<li>你可能听说过一句话“永远要向有结果的人学习，因为结果不撒谎”</li>
<li>你只要坚持“<strong>正确的事情重复做”</strong>，<strong>天不帮你，概率会帮你</strong>。</li>
<li>小成靠努力，大成靠趋势。 成大事者，必须先有<strong>不偏不倚的自我认知</strong>。</li>
<li>但是成功不是从0到1，从1到N，真正的完整路径是：0-&gt;0.1-&gt;1-&gt;10-&gt;1-&gt;N</li>
<li>我深刻感觉到，一个人乐此不疲的地方在哪里，就是他的优势和天赋所在，可能就是它的内核。</li>
<li>人生就像滚雪球，重要的是找到很湿的雪和很长的坡。</li>
</ul>
<h1>part3 做好决策 赢得人生主动权</h1>
<h2 id="困难越大，护城河越深">困难越大，护城河越深</h2>
<ul>
<li>
<p><strong>难走的路，从不拥挤</strong>。</p>
</li>
<li>
<p>简单的事比后期</p>
<ul>
<li>这些简单的事一旦进入真正的比拼环节，拼的都是后半期。</li>
<li><img src="/img/probability_mind/27.jpg" alt=""></li>
</ul>
</li>
<li>
<p>困难的事比前期</p>
<ul>
<li>简单的事比后期，困难的事比前期</li>
</ul>
</li>
<li>
<p>人脉和投资，就是困难的事</p>
<ul>
<li>
<p>首先，建立人脉</p>
<ul>
<li>只有你积累了相当长时间的能量，这些同样有能量的人才会成为你的人脉</li>
<li>获得人脉，难的是要制造“价值引力”</li>
<li><strong>人脉不是能帮上你的人，而是你能帮到的人</strong></li>
</ul>
</li>
<li>
<p>其次，坚持投资</p>
<ul>
<li>想在投资上获得巨大成就，先把投资要获得收益的本金积累出来。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>结语</p>
<ul>
<li>巴菲特护城河理论：要建立自己的堡垒，才能保证对手打不进来</li>
<li>在商业世界中，成败的关键，要看是否建立了属于自己的堡垒</li>
<li>不管是人脉还是投资，或者其他难做的事，都需要想尽一切办法努力记录</li>
<li>做简单的事，猪纷纷落地；做困难的事，鹰即将突围</li>
</ul>
</li>
</ul>
<h2 id="顶级高手都是长期主义者">顶级高手都是长期主义者</h2>
<ul>
<li>
<p>坚守长期主义，给人战略定力</p>
<ul>
<li>一切商业的起点，都是消费者获益。</li>
</ul>
</li>
<li>
<p>赚钱从来都不是商业的起点，而是终点。</p>
<ul>
<li>做餐厅，流量重要还是复购率重要？</li>
<li><img src="/img/probability_mind/28.jpg" alt=""></li>
<li>注重眼前利益的人，拼命压榨“价值空间”，一点儿“价值空间”都不想留给对方，未来路却越走越窄</li>
<li>注重长期主义的人，拼命退让“价值空间”，想要把“价值空间”最大化留给对方，未来路却越走越宽。</li>
</ul>
</li>
<li>
<p>重视长远价值，才不会失去眼前利益</p>
<ul>
<li><img src="/img/probability_mind/29.jpg" alt=""></li>
<li>重视长远价值，通常不会失去眼前利益。</li>
<li>仅仅重视眼前利益，往往会失去长远价值。</li>
</ul>
</li>
<li>
<p>长期主义就是把一件事做到极致</p>
</li>
<li>
<p>结语</p>
<ul>
<li>太聪明的人，需要对抗全世界</li>
<li>真正聪明的人，都在做笨的事情</li>
<li>真正聪明的人，不断问“事情的本质是什么”，“逻辑是什么”</li>
<li>真正聪明的人，都会坚持长期主义。坚定地创造客户价值，给合作伙伴和消费者留出足够的“价值空间”</li>
</ul>
</li>
</ul>
<h2 id="及时止损是打败困境最好的办法">及时止损是打败困境最好的办法</h2>
<ul>
<li>
<p>真正里的高手，都懂得及时止损</p>
</li>
<li>
<p><img src="/img/probability_mind/30.jpg" alt=""></p>
</li>
<li>
<p>我们最容易犯的错误：总是在牌好时孤注一掷，牌差时不及时止损。真正厉害的高手，都懂的及时止损。能及时止损抽身，回归正轨，才是一流智慧。</p>
</li>
<li>
<p>“茶杯vs竹篮”理论</p>
<ul>
<li><img src="/img/probability_mind/91.jpg" alt=""></li>
<li>如果选择赚快钱，你便被欲望吞噬了最宝贵的资源-时间。时间本来是用来打造你的核心竞争壁垒的。所以，赚快钱有如吸毒。在核心价值以外赚外快的快感越多、越快，失去的也就越多。</li>
<li>对沉没成本过分眷恋，继续投入，造成更大的亏损。</li>
</ul>
</li>
<li>
<p>结语</p>
<ul>
<li>心理学家亚科斯：我们人生中90%的不幸，都是因为不甘心引起的</li>
<li>做决策时，不要纠结于已经无法挽回的损失，而是着眼于当下和未来</li>
<li>真正的高手，都懂得及时止损。</li>
</ul>
</li>
</ul>
<h2 id="人生管理，就是目标管理">人生管理，就是目标管理</h2>
<h3 id="管理目标">管理目标</h3>
<ul>
<li>
<p>相互独立，完全穷尽，既不重叠，也不遗漏</p>
</li>
<li>
<p>平衡记分卡</p>
</li>
<li>
<p>MECE法则</p>
<ul>
<li>
<p>财务</p>
<ul>
<li>制定销售目标，关注收入</li>
</ul>
</li>
<li>
<p>客户</p>
<ul>
<li>注重客户满意度和购买体验，共赢是最重要的准则</li>
</ul>
</li>
<li>
<p>过程</p>
<ul>
<li>设置过程指标，控制结果</li>
</ul>
</li>
<li>
<p>创新</p>
<ul>
<li>团队定期培训，案例讲解，经验分享，平衡远近</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/30.jpg" alt=""></p>
</li>
</ul>
</li>
</ul>
<h3 id="制定目标">制定目标</h3>
<ul>
<li><img src="/img/probability_mind/31.jpg" alt=""></li>
</ul>
<h3 id="执行目标">执行目标</h3>
<ul>
<li>
<p>OKR</p>
<ul>
<li>不是绩效考核工具，而是目标管理工具</li>
<li>让无法用数字考核的团队，通过目标的层层分解，向同一个方向前进。</li>
<li>OKR是目标如何执行</li>
</ul>
</li>
<li>
<p>KPI</p>
<ul>
<li>目标如何管理</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/32.jpg" alt=""></p>
</li>
</ul>
<h3 id="复盘目标">复盘目标</h3>
<ul>
<li>先复盘，再翻盘。PDCA循环。</li>
<li>有计划，有沙盘，更要有总结，有复盘。每次行动后得到反馈，都应该认真总结，分析原因。</li>
<li><img src="/img/probability_mind/33.jpg" alt=""></li>
</ul>
<h2 id="做好职业规划，少走弯路">做好职业规划，少走弯路</h2>
<h3 id="成年人要能为自己的选择和决定负责">成年人要能为自己的选择和决定负责</h3>
<h3 id="先下场">先下场</h3>
<ul>
<li>大学22岁毕业</li>
<li>实习很重要，最好能确定未来大方向，对自己做好基础的判断</li>
<li>通过行业和岗位来确定自己的工作。</li>
<li>只要有基本的知识和技能，就放心大胆去投简历，在工作中学习。</li>
<li>趁着没毕业，试错成本最低的时候，多实习，找到适合自己的行业和岗位。</li>
<li>在实习中确定自己是那30%还是那70%，尽快找到适合自己的工作。</li>
</ul>
<h3 id="生存关">生存关</h3>
<ul>
<li>28岁之前，是职业生涯的生存期。最应该关注自己的成长</li>
<li>能力</li>
<li>认知</li>
<li>心力</li>
<li><img src="/img/probability_mind/92.jpg" alt=""></li>
<li><img src="/img/probability_mind/93.jpg" alt=""></li>
<li>生存期，要拼命成长。</li>
</ul>
<h3 id="发展关">发展关</h3>
<ul>
<li>职业上升期，要加速度。加速度，就是让自己变得越来越有价值，越来越重要。</li>
<li>30岁左右做到管理岗位，上不去了，在职业上升期，要有洞察。</li>
<li><strong>本质上，不是老板和组织架构产生了岗位，而是客户有了需求，需求倒逼出流程，流程产生了岗位。岗位，是客户带来的。每个人都处在一条服务客户的业务流上。</strong></li>
<li><img src="/img/probability_mind/94.jpg" alt=""></li>
</ul>
<h3 id="使命关">使命关</h3>
<h3 id="职业生涯的定位和思考，越早越好">职业生涯的定位和思考，越早越好</h3>
<ul>
<li>大三的时候，尽快实习，先下场</li>
<li>职业生涯的生存期，拼命生成。能力、认知、心力，都要成长</li>
<li>职业生涯的上升期，要加速度。价值=客户×流程。服务最好的客户，在价值链中占据更重要的位置。</li>
<li>职业生涯的使命期，寻找意义。自我实现的愿望，能让人走得很远。</li>
<li>每个人都应该为自己的职业生涯做选择。应为我们接受的教育，一直都是追求更好，更好，更好。没得选，或者选择有限。</li>
</ul>
<p><img src="/img/probability_mind/95.jpg" alt=""></p>
<h2 id="培养战略思维">培养战略思维</h2>
<h3 id="行业发展的三个阶段">行业发展的三个阶段</h3>
<ul>
<li>
<p>人无我有</p>
<ul>
<li>做出想象不到的产品</li>
</ul>
</li>
<li>
<p>人有我优</p>
<ul>
<li>比较产品性能优势</li>
</ul>
</li>
<li>
<p>人优我廉</p>
<ul>
<li>打价格战，必须转型</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/96.jpg" alt=""></p>
</li>
<li>
<p>当你理解一个公司核心的商业逻辑，它最重要的创造价值的部分，你就有机会去选择你在公司里占据哪个位置会是最有发展的。反过来说，你拥有一种能力，就会知道拥有这种能力应该去哪个行业、公司、岗位对你未来的发展最有帮助。</p>
</li>
<li>
<p><img src="/img/probability_mind/97.jpg" alt=""></p>
</li>
</ul>
<h3 id="战略思考能力">战略思考能力</h3>
<ul>
<li>
<p>老板真正擅长的是制定战略。他能选择正确的方向，选择正确的商业模式，选择正确的打法。</p>
</li>
<li>
<p>有一些公益事业虽然是发自内心的，即便创造了社会价值，但是因为没有战略思考，所以可能比不上其消耗的社会价值。</p>
</li>
<li>
<p>如何培养</p>
<ul>
<li>
<p>养成一种系统化的思考能力</p>
<ul>
<li>学会关联思考问题、整体地思考问题、动态地思考问题。</li>
<li><img src="/img/probability_mind/98.jpg" alt=""></li>
</ul>
</li>
<li>
<p>因果律</p>
</li>
</ul>
</li>
</ul>
<h3 id="三种杠杆">三种杠杆</h3>
<ul>
<li>
<p>专业</p>
<ul>
<li>最基本的杠杆</li>
<li>有了专业性杠杆（比别人做得好），就可以让单价比别人高</li>
<li>对于专业性杠杆，你应该把公司付你的钱只当成一个额外的赠送，当成一个福利，<strong>你真正获得的价值让你的专业性杠杆获得极大提升。</strong></li>
<li>在这个阶段，努力<strong>让自己变得更专业</strong>，才有走向财务自由的资本。</li>
</ul>
</li>
<li>
<p>管理</p>
<ul>
<li>一个人的时间毕竟有限的，所以需要借助别人的时间，也即是利用团队来干活。</li>
<li>管理要帮助成员成长，只有成员获得成长，才能真正去帮他做这方面的事，他才能成为一个管理者。</li>
<li>当团队成员数量上去的时候，管理者需要把战略流程化、流程工具化，要分部门，要有KPI</li>
<li>管理最终都是平衡的艺术</li>
</ul>
</li>
<li>
<p>资本</p>
<ul>
<li>当你积累了大量人脉，从25岁到45岁之后，要想获得财富，你的时间乘于的杠杆是你的资本。</li>
<li>资本是终极杠杆，把钱投在合适的项目上，投在合适的人身上。</li>
<li>这需要你对商业的洞察，以及管理期间积累的经验。</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/99.jpg" alt=""></p>
</li>
<li>
<p>实现财务自由，在单位时间内稍微做点儿工作，需要三个方面的杠杆</p>
<ul>
<li>
<p>专业性方面的积累</p>
<ul>
<li>成为领域最优秀的人</li>
</ul>
</li>
<li>
<p>管理能力的积累</p>
</li>
<li>
<p>资本的积累</p>
<ul>
<li>要拥有强大的对商业和人的判断力</li>
<li>把资本用在合适的项目上</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="向上管理">向上管理</h3>
<ul>
<li>
<p>所有的管理本质上都是一种影响力，你能够影响别人。</p>
</li>
<li>
<p><strong>世界上只有一种关系，叫基于价值的合伙关系。所以，你要思考自己对别人的价值是什么，如何能帮到别人。反过来说，别人为什么要为你帮到他而对你付出回报。</strong></p>
</li>
<li>
<p>个人的影响力来自手中的权力</p>
<ul>
<li>
<p>压力性权力</p>
</li>
<li>
<p>动力性权力</p>
<ul>
<li>
<p>表率权</p>
<ul>
<li>一个严于律己，会努力把事情做到最好，进而影响到他人</li>
</ul>
</li>
<li>
<p>专家权</p>
<ul>
<li>一个人在其工作领域是个佼佼者，诸多环节都比他人精通，可以为他人分配工作，知道他人行动</li>
</ul>
</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/100.jpg" alt=""></p>
</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/101.jpg" alt=""></p>
</li>
<li>
<p>结语</p>
<ul>
<li>用商业看行业，用行业看企业，用企业看个人</li>
<li>精英们用知识知道自己的行动</li>
<li>你的老板比你强在哪里？战略，因为老板选择了正确的方向、打法、商业模式。</li>
</ul>
</li>
</ul>
<h2 id="复盘-2">复盘</h2>
<ul>
<li>难走的路，从不拥挤</li>
<li>简单的事比后期，困难的事比前期</li>
<li>如果是我，我会选择做困难的事，因为所有难的事都会越来越简单，而简单的事都会越来越难</li>
<li>赚钱从来都不是商业的起点，而是终点</li>
<li>创业是把一件事坚持做到极致。一定程度的“傻”，有助于这种坚持</li>
<li>我们最容易犯的错：总是在牌好时孤注一掷，牌差时不及时止损。</li>
<li>把篮子当成容器，开始往里面装点滴价值，时间越长，越身强力壮。</li>
<li>OKR是目标如何执行，而KPI，是目标如何管理。</li>
<li>先复盘，再翻盘。PDCA循环，有另一个响当当的大名–戴明循环。</li>
<li>成年人要能为自己的选择和决定负责</li>
</ul>
<h1>part4 思维进化 人生需要不断地重启</h1>
<h2 id="深度思考三把刀，斩断险阻">深度思考三把刀，斩断险阻</h2>
<h3 id="序">序</h3>
<ul>
<li>美团王兴：多数人为了逃避真正的思考，愿意做任何事情。行动上的勤奋，掩盖了思维上的懒惰。</li>
<li>没有方向的努力就像无头苍蝇，没有目标的勤奋会四处碰壁。</li>
</ul>
<h3 id="进化思维">进化思维</h3>
<ul>
<li>当你拥有了上帝视角，才能敏锐发现世界的脉动，踏准时代的节拍。上帝视角，就是提炼一套抽象化的思维方式，理性看待这个世界的本质问题。</li>
<li>世界的本质，是流动的，是变换的，是进化的。把历史平铺开在桌面，加上一条长长的时间轴，你就会发现世界不断进化，我们都被推着往前走。</li>
<li>那些<strong>拥抱不确定性和热爱变化</strong>的人，选择主动走在了前头；那些冥顽恪守、止步不前的人，就落后于时代的潮头。</li>
<li>进化思维，就是接受世界在不停进化，倒逼自己协同进步。</li>
<li>我们必须和世界相拥，协同进步，才能一直走在路上。</li>
</ul>
<h3 id="本质思维">本质思维</h3>
<ul>
<li>
<p>零售的本质</p>
<ul>
<li>是连接人与货的场</li>
<li>场的本质，是信息流、资金流和物流的万千组合。</li>
</ul>
</li>
<li>
<p>你和企业的关系，本质是合伙关系</p>
</li>
<li>
<p>你和甲方的关系，本质是稀缺资源在那一方的关系</p>
</li>
<li>
<p>这个世界上，只有交易的双方，掌握稀缺资源的一方，就是强势的一方</p>
</li>
<li>
<p>维护伴侣关系的本质是对方认为最稀缺的资源（关怀和时间）</p>
</li>
<li>
<p>在个人成长上，我们需要抓住事物的本质，<strong>心态要稳，判断要准，下手要狠</strong>。</p>
</li>
<li>
<p><img src="/img/probability_mind/34.jpg" alt=""></p>
</li>
</ul>
<h3 id="系统思维">系统思维</h3>
<h4 id="商业模式">商业模式</h4>
<ul>
<li>就是利益相关者的交易结构</li>
<li>指在新技术、新思维条件下，交易结构发生了变化，必须有相应的系统思维与之对应，解构这些系统，优化组合，获得新的增长动力。</li>
</ul>
<h4 id="人生的商业模式">人生的商业模式</h4>
<ul>
<li>就是一个系统，这个系统，是<strong>能力、效率、杠杆</strong>三个要素的成绩组合</li>
<li>想要实现跨越，就要懂得提高自己的能力，让人生过得有效率，善于利用杠杆</li>
</ul>
<h4 id="能力">能力</h4>
<ul>
<li>初入职场的年轻人，出售时间时，不仅要换钱，更要有能力的跃迁。</li>
<li>榨干一切你能学习的东西，不要手软，尽管去做。去提升自己的能力。</li>
<li><strong>能力，是你人生中最深的护城河</strong>。</li>
</ul>
<h4 id="效率">效率</h4>
<ul>
<li>《高效能人士的七个习惯》</li>
<li>效率，是你人生最稳定的助推剂。</li>
</ul>
<h4 id="杠杆">杠杆</h4>
<ul>
<li>时间杠杆</li>
<li>金融杠杆</li>
<li>产品杠杆</li>
<li>杠杆，是你人生中最珍贵的好武器。</li>
<li><img src="/img/probability_mind/35.jpg" alt=""></li>
</ul>
<h2 id="比认知盲区更可怕的，是你的思想钢印">比认知盲区更可怕的，是你的思想钢印</h2>
<ul>
<li>
<p>与儿子观看《我不是药神》之感</p>
<ul>
<li>
<p>社会角度</p>
<ul>
<li>保险的价值，商业的价值</li>
</ul>
</li>
<li>
<p>个人角度</p>
<ul>
<li>让自己获得安全感的钱</li>
<li>努力变得强大，保护自己</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="三种思想钢印">三种思想钢印</h3>
<h4 id="无助型思想钢印">无助型思想钢印</h4>
<ul>
<li><img src="/img/probability_mind/102.jpg" alt=""></li>
<li>《我不是药神》背后的思想钢印：“我”只能依靠别人</li>
<li>《遥远的救世主》对白：传统思维的死结就在一个“靠”字上，在家靠父母，出门靠朋友，靠上帝，靠菩萨，靠皇恩</li>
<li>在无助型思想钢印支配下，人们的潜意识认为自己不行，只能听天由命。然后想办法证明自己真的不行，放弃努力和尝试，蜷缩起来，悲哀地过完一生。</li>
</ul>
<h4 id="无望型思想钢印">无望型思想钢印</h4>
<ul>
<li>他可以为自己的行为找出100个理由来证明他是对的，却找不到一个理由是它需要改变的。</li>
<li><strong>普通人改变结果，优秀的人改变原因，顶级优秀的人改变模型。</strong></li>
<li>可悲的人，只有情绪和逃避。</li>
<li>所谓无望，就是你身处“不可能”的框架里，大脑对你的人生有太多的限制，这不可能，那不可能。</li>
<li><strong>这是一种自我设限的框架。</strong></li>
</ul>
<h4 id="无价值型思想钢印">无价值型思想钢印</h4>
<ul>
<li>我做得到，但我不配拥有</li>
<li><img src="/img/probability_mind/103.jpg" alt=""></li>
</ul>
<h4 id="粉碎思想钢印的正确姿势">粉碎思想钢印的正确姿势</h4>
<h5 id="永远不要自我设限">永远不要自我设限</h5>
<ul>
<li>当所谓不可能，仅仅是一种可以改变的观念，并非事实时就试试</li>
<li>把时间和精力投入到寻找解决问题的方法上</li>
<li><img src="/img/probability_mind/104.jpg" alt=""></li>
</ul>
<h5 id="面对不确定性，选择拥抱而不是怀疑">面对不确定性，选择拥抱而不是怀疑</h5>
<h5 id="保持好奇心">保持好奇心</h5>
<ul>
<li>好奇心驱动他们离开舒适区，获得更多知识，不断拓展自己的边界</li>
<li>优秀的人是怎么做这件事的？这件事还能做更好吗？背后的运行规律是什么？</li>
<li>听到跟自己意见相左的观点，第一反应不是反驳，而是产生强烈的兴趣，背后的合理性是什么？</li>
<li>即使遇到让自己的利益受损，好奇心会压倒愤怒，问题背后的逻辑是什么？解决问题的关键变量是什么？最优解法是什么？</li>
<li>只要有所收获，就会获得巨大的满足。因为拥有强烈的好奇心，追求成长的道路上，永不止步。乐意接受挑战，从而获得更获机会。</li>
</ul>
<h5 id="结语-3">结语</h5>
<ul>
<li>
<p>面对未知，你勇敢尝试过吗？</p>
</li>
<li>
<p>面对失败，你坚持过吗？</p>
<ul>
<li>我能，我行，我来，是一种态度，更是一种稀缺能力。</li>
</ul>
</li>
<li>
<p>比认知盲区更可怕的，是你的思想钢印，不要让你的思想钢印阻碍你前进的步伐。</p>
</li>
<li>
<p>靠自己，自强者万强。</p>
</li>
</ul>
<h2 id="受益终身的七个习惯">受益终身的七个习惯</h2>
<p><img src="/img/probability_mind/105.jpg" alt=""></p>
<h3 id="积极主动">积极主动</h3>
<ul>
<li>
<p>消极，就是把苦难的责任，推卸给命运、基因、环境，然后怨天尤人，寻找心理宣泄。消极的时候，必须夺回选择权，就算看上去不可能，也要相信自己可以做出积极的改变</p>
</li>
<li>
<p>在刺激和回应之间，给自己思考的时间</p>
<ul>
<li>积极地寻找解决方案</li>
<li>从情绪中夺回选择权，然后交给理性和价值观</li>
</ul>
</li>
<li>
<p>用积极的语言，替代消极的语言</p>
</li>
<li>
<p>缩小关注圈，扩大影响圈</p>
<ul>
<li>影响圈：你可以影响和控制的小圈</li>
<li>把时间和精力专注在影响圈上</li>
<li>接受不能改变的，然后去改变你能改变的，把所有的精力都放在那些你能够改变的事情上。</li>
</ul>
</li>
</ul>
<h3 id="以终为始">以终为始</h3>
<ul>
<li>
<p>你心中一定要有那个“终”，你才知道应该怎么“始”。做任何事情，都要以终为始。</p>
</li>
<li>
<p><img src="/img/probability_mind/106.jpg" alt=""></p>
</li>
<li>
<p>首先要确定目标</p>
<ul>
<li>个人：明确自己的人生使命是什么</li>
<li>企业：清楚企业的愿景是什么</li>
<li>项目：明晰成功的标准是什么</li>
</ul>
</li>
<li>
<p>然后确定一些基本原则，列出详细的计划，确定每一步怎么干</p>
</li>
</ul>
<h3 id="要事第一">要事第一</h3>
<ul>
<li>
<p>按照优先级来做事情</p>
</li>
<li>
<p>时间四象限图</p>
<ul>
<li>主动戒掉“不重要不紧急”的事，拒绝大部分“紧急不重要”的事，把大部分时间花在“重要不紧急”的事。</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/107.jpg" alt=""></p>
</li>
</ul>
<h3 id="双赢思维">双赢思维</h3>
<ul>
<li>交易的本质，就是价值交换，必须双赢</li>
<li>双方合作，一定要双方都获得价值，不能损害任何一方的利益。</li>
</ul>
<h3 id="知彼解己">知彼解己</h3>
<ul>
<li>
<p>先去理解别人，再寻求被别人理解</p>
</li>
<li>
<p>首先，戒掉“自传式回应”</p>
</li>
<li>
<p>然后，移情聆听</p>
<ul>
<li>尊重对方感受</li>
<li>聆听</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/108.jpg" alt=""></p>
</li>
</ul>
<h3 id="统合综效">统合综效</h3>
<ul>
<li>通过创造性合作，实现1+1&gt;2的结果</li>
<li>报仇：1+1=0.5</li>
<li>妥协：1+1=1.5</li>
<li>合作：1+1=2</li>
<li>统合综效，创造性合作，创造更多的价值，是1+1&gt;2</li>
<li>从合作到创造性合作的秘诀是：找到共享的目标。</li>
</ul>
<h3 id="不断更新">不断更新</h3>
<ul>
<li>
<p>身体</p>
<ul>
<li>底层工作者靠体力，中高级管理者靠智力，顶级企业家靠体力</li>
<li>吃营养的食物，充分休息，定期运动，有规律作息</li>
<li>属于“重要，但不紧急”的事情</li>
</ul>
</li>
<li>
<p>精神</p>
<ul>
<li>强大的精神力量，也是需要不断训练的</li>
<li>快乐是奖赏，痛苦是成长。</li>
</ul>
</li>
<li>
<p>智力</p>
<ul>
<li>多读书</li>
<li>多写作</li>
</ul>
</li>
<li>
<p>社会/情感</p>
<ul>
<li>社会关系、情感连接也必须不断训练、持续积累</li>
<li>人脉怎么建立：给予价值，你能给予别人什么样的价值，就会认识什么样的人。</li>
<li>人脉不是那些能帮到你的人，而是那些你能帮到的人。</li>
<li>持续地给予价值，这是更新、积累人脉的唯一办法。</li>
</ul>
</li>
</ul>
<h2 id="开挂的人都坚持窄门思维">开挂的人都坚持窄门思维</h2>
<h3 id="为社会创造价值，路会越走越宽">为社会创造价值，路会越走越宽</h3>
<ul>
<li>产品势能不足，才需要营销补、渠道补，都补不了的，只好陪客户喝酒、吃饭、搞关系</li>
<li><strong>无论对于企业还是个人成长而言，最难的事，是需要从一点一滴的小事中慢慢积累起来，需要对用户持续稳定地创造独特的价值，构建很深的竞争壁垒。</strong></li>
<li>金杯银杯，不如用户的口碑</li>
<li>资源背景，不如自身能力过硬</li>
<li>积累自己的势能，从万仞之巅推下千钧之石</li>
<li>吃最累的苦，走最远的路，进最难的门</li>
<li>那些走“宽门”，靠权钱交易，依托背景、资源、关系的人，路只会越走越窄。<strong>那些走“窄门”，靠能力积累，产品打磨，为社会创造价值的人，路会越走越宽</strong></li>
</ul>
<h3 id="聪明人下笨功夫">聪明人下笨功夫</h3>
<ul>
<li>很多人想要的，只是小米和华为的成功，不是他们的能力，更不是和他们一样的付出</li>
<li>那些最后取得一些成绩的人，并不是说多么聪明，可能<strong>使用时间换空间</strong>，滴水石穿，聚沙成塔。</li>
</ul>
<h3 id="做“难而正确”的事">做“难而正确”的事</h3>
<ul>
<li>恰恰是难，你的竞争对手不是同行者，而是客户的需求。</li>
<li><img src="/img/probability_mind/37.jpg" alt=""></li>
<li>当你选择的路很艰难、很累、很难受的时候，说明你可能在成长，你再走上坡路；相反，但你觉得选择的路很容易、很爽、很舒服的时候，说明你可能在逃避，你在走下坡路。</li>
</ul>
<h3 id="结语-4">结语</h3>
<ul>
<li><strong>时间是用来打造你的核心竞争壁垒的</strong>，在核心价值以外赚的快感越多、越快，失去的也就越多、越快。</li>
<li>把梦想变为现实的，并不是某一刻的快感，<strong>而是每一步的积累和克制</strong>。</li>
<li>顶尖高手，都是窄门思维的践行者</li>
<li>顶尖高手，比的是慢，是笨，是扎实，是聪明人下笨功夫。</li>
<li>当你选择窄门，踏实做事，为社会、用户创造价值时，整个世界都会给你让路</li>
</ul>
<h2 id="认知层次与认知速率">认知层次与认知速率</h2>
<h3 id="思维框架的改变，才是真正的进阶">思维框架的改变，才是真正的进阶</h3>
<h3 id="认知不对称">认知不对称</h3>
<ul>
<li>互联网时代，信息高速传播，人跟人的信息差、认知差在疯狂拉大。</li>
<li>人与人之间最大的鸿沟，不再是信息不对称，而是认知不对称。</li>
<li><img src="/img/probability_mind/38.jpg" alt=""></li>
</ul>
<h3 id="本质规律决定认知速率">本质规律决定认知速率</h3>
<ul>
<li><img src="/img/probability_mind/39.jpg" alt=""></li>
<li><strong>成年人学习的目的，应该是追求更好的思维模型</strong>，而不是更多的知识。在一个落后的思维模型，认知不对称，增加再多的信息量，也是低水平重复。</li>
<li>认知，就是创业者的基础体能。</li>
</ul>
<h3 id="提升认知基础体能">提升认知基础体能</h3>
<ul>
<li>
<p>苦练基本功</p>
<ul>
<li>优秀的战略，需要的是在战略高度上，诸多环节的完美配合，而不是在某一个点上的创新。</li>
<li><img src="/img/probability_mind/40.jpg" alt=""></li>
<li>真正有效的学习，不是去听一些“高大上”的名词，迷恋一些工具和方法论，而是从高手的行为当中，摸索出一些底层的规律，然后按照客观格律实践，苦练基本功。</li>
<li>对于普通人而言，首先是打好基本功。<strong>提升认知基础体能是对客观规律的践行者有更深的理解</strong>。</li>
<li><img src="/img/probability_mind/41.jpg" alt=""></li>
<li><img src="/img/probability_mind/42.jpg" alt=""></li>
</ul>
</li>
<li>
<p>及时总结和复盘</p>
<ul>
<li>在产品、营销、渠道这三件事情上，你把一件做到极致，及可以获得巨大的成就。但怕就怕，做好了A，你却以为是B。因为归因错误、认知错误，导致战略导向错误。及时复盘，就是纠偏的关键一环。</li>
<li>对关键项目及时复盘，总结经验和教训，才能够有效避免在同一个坑里反复失败。</li>
<li>没有目标就没有战略，没有战略就没有计划，没有计划就没有行动。</li>
<li>没有复盘就难以洞察规律，获得真知，以至于光阴流逝，一事无成。</li>
</ul>
</li>
<li>
<p>碎片化学习，系统化学习</p>
<ul>
<li><img src="/img/probability_mind/43.jpg" alt=""></li>
</ul>
</li>
</ul>
<h2 id="人际关系的符号互动理论">人际关系的符号互动理论</h2>
<ul>
<li>
<p>人的底层动力：恐惧和欲望</p>
<ul>
<li><img src="/img/probability_mind/44.jpg" alt=""></li>
</ul>
</li>
<li>
<p>一个人的应对方式</p>
<ul>
<li><img src="/img/probability_mind/45.jpg" alt=""></li>
</ul>
</li>
<li>
<p>破除人们的掩饰</p>
<ul>
<li>
<p>被追问细节</p>
</li>
<li>
<p>身处复杂环境</p>
</li>
<li>
<p>感到压力</p>
<ul>
<li>
<p>比较淡定</p>
</li>
<li>
<p>比较自卑</p>
</li>
<li>
<p>脆弱的高自尊</p>
<ul>
<li>表现自信，什么事都真强好胜，但被质疑后，生气甚至愤怒</li>
<li>本质上是自卑的</li>
</ul>
</li>
</ul>
</li>
<li>
<p>情绪受到刺激</p>
</li>
</ul>
</li>
</ul>
<h2 id="复盘-3">复盘</h2>
<ul>
<li>多数人为了逃避真正的思考，愿意做任何事情</li>
<li>我很害怕所有的忙，都是瞎忙。<strong>没有方向的努力就像无头苍蝇，没有目标的勤奋会四处碰壁</strong>。</li>
<li>上帝视角，就是提炼一套抽象化的思维方式，理性看待这个世界的本质问题。</li>
<li>你和甲方的关系，本质是稀缺资源在那一方的关系。</li>
<li>在个人成长上，我们需要抓住事物的本质，心态要稳，判断要准，下手要狠。洞悉一件事物的本质，胜过走马观花万千牛皮。</li>
<li>想要实现跨越，就要懂得提高自己的能力，让人生过的效率，善于利用杠杆。</li>
<li>能力，是你人生最深的护城河</li>
<li>他们会主动学习所在领域之外的知识，了解和自己领域无关的业务。然后做好准备，在适当的时机，进入一个全新的行业。</li>
<li><strong>接受你不能改变的，然后去改变你能改变的，把所有的精力都放在那些你能够改变的事情上。</strong></li>
<li>你心中一点要有那个“终”，你才知道应该怎么“始”。做任何事情，都要以终为始。</li>
</ul>
<h1>part5 管理智慧，人和人之间就是相互成就</h1>
<h2 id="打造高效协作机制">打造高效协作机制</h2>
<h3 id="定目标">定目标</h3>
<ul>
<li>是为了形成一个基本的分布式协作网络</li>
<li><img src="/img/probability_mind/46.jpg" alt=""></li>
<li>所有的目标，都是为了更高层面的协作</li>
<li>一个大目标，是由无数个小目标聚合起来的。</li>
</ul>
<h3 id="抗目标">抗目标</h3>
<ul>
<li>
<p>目标必须完成</p>
</li>
<li>
<p>遇到困难怎么办</p>
<ul>
<li>接下目标的时候，要评估完不成的目标并及时表达，是换目标还是换人</li>
<li>完成目标的时候可以表达困难</li>
<li>在执行目标时发现困难应该最早意识到这些困难，然后主动去找资源，想办法解决。</li>
<li><img src="/img/probability_mind/47.jpg" alt=""></li>
</ul>
</li>
</ul>
<h3 id="盯过程">盯过程</h3>
<ul>
<li>凡事有交代，件件有着落，事事有回音</li>
<li>任何一件事只要被提出来，要么被完成，要么被取消</li>
<li>盯过程的本质就是给任何事情扣上闭环，有开始就有结束</li>
</ul>
<h3 id="守底线">守底线</h3>
<ul>
<li>一开始创业的时候，公司都是用价值观来驱动的。</li>
</ul>
<h3 id="奖结果">奖结果</h3>
<ul>
<li>结果是不可撼动的，只有完成了结果，才能获得相应的奖励。</li>
<li>只奖励功劳，不奖励苦劳。</li>
</ul>
<h2 id="人才是企业最重要的资产">人才是企业最重要的资产</h2>
<ul>
<li>
<p>优秀的公司，更关注人</p>
</li>
<li>
<p>老板，要亲自招聘</p>
</li>
<li>
<p>看能力，更要闻味道</p>
<ul>
<li>业务水平不行，其他都是扯。</li>
<li>一定要有自己的一套胜任力模型，测评工具，这样招聘才不是凭感觉。</li>
<li><img src="/img/probability_mind/48.jpg" alt=""></li>
</ul>
</li>
<li>
<p>一份问题清单</p>
</li>
</ul>
<h2 id="优秀的管理者要具备的七条素养">优秀的管理者要具备的七条素养</h2>
<ul>
<li>
<p>极限施压</p>
<ul>
<li><img src="/img/probability_mind/49.jpg" alt=""></li>
<li>人的性情总是喜欢调和折中的。</li>
</ul>
</li>
<li>
<p>低位的安全感、中位的公平感和高位的目标感</p>
<ul>
<li>作为管理者，低位员工，你要给安全感；中位员工，你要给公平感；高位员工，你要给目标感。</li>
<li></li>
</ul>
</li>
<li>
<p>只有平庸的人，才总是处于最佳状态</p>
</li>
<li>
<p>管理没有正确答案</p>
<ul>
<li>管理者更多的是抉择，考虑谁的利益，这才是真正的难题。</li>
<li>作为一个优秀的管理者，你的价值和责任就是来处理这种没有共识的难题；遇到问题，不断往前摸索，试错，调整。</li>
<li><img src="/img/probability_mind/52.jpg" alt=""></li>
</ul>
</li>
<li>
<p>自燃、可燃、阻燃、助燃</p>
<ul>
<li>
<p>自燃</p>
<ul>
<li>自我驱动，自我燃烧</li>
</ul>
</li>
<li>
<p>可燃</p>
<ul>
<li>适当激励，需要推一把</li>
</ul>
</li>
<li>
<p>阻燃</p>
<ul>
<li>完全燃烧不起来</li>
</ul>
</li>
<li>
<p>助燃</p>
<ul>
<li>作为管理者，应该是自燃型</li>
<li>作为管理者，合理分辨你的员工类型，更多地发掘自燃型员工，推一把可燃型员工</li>
<li>管理者应该把自己当作助燃剂，帮助自燃、可燃型两类员工燃烧，发光发热。</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/53.jpg" alt=""></p>
</li>
</ul>
</li>
<li>
<p>人在害怕时候的勇敢，才是真的勇敢</p>
<ul>
<li>作为管理者，你会面临各种压力，遇到突发情况。在害怕的情况下，你还能去战斗，去解决问题，而不是选择退缩或者逃避，这才是一位真正的管理者。</li>
<li>站在旁观者的角度指点江山，展现出来的勇敢，不是真正的勇敢</li>
<li>世界上只有一种英雄主义，就是认清生活真相后依然热爱生活。</li>
</ul>
</li>
<li>
<p>真正成熟的人，看谁都顺眼</p>
<ul>
<li>看谁都不顺眼是极度不成熟的表现，看一部分人不顺眼是中间成熟的表现，看谁都顺眼的人，才是真正成熟的表现</li>
<li>因为这样的人总是站在对方的角度，理解对方做事情的原因，理解对方的处境</li>
<li><strong>顺眼并不代表认同</strong>，不代表他认为对方就是完全正确的。<strong>而是站在对方的角度，思考对方的选择、对方的价值观、对方的逻辑</strong>。</li>
<li><strong>菲茨杰拉德：一个人同时保持两种相反的观念，还能正常行事，这是第一流智慧的标志。</strong></li>
<li><img src="/img/probability_mind/54.jpg" alt=""></li>
</ul>
</li>
</ul>
<h2 id="管理者的沟通心法">管理者的沟通心法</h2>
<ul>
<li>
<p>波特定律</p>
<ul>
<li>越批评，越火上浇油</li>
<li><img src="/img/probability_mind/55.jpg" alt=""></li>
</ul>
</li>
<li>
<p>对事不对人</p>
<ul>
<li>
<p>修炼同理心，做到“对事不对人”</p>
<ul>
<li>看似简单，当情绪场域处于紧绷状态的时候，却容易“对人不对事”</li>
<li><img src="/img/probability_mind/56.jpg" alt=""></li>
</ul>
</li>
<li>
<p>人品降维打击</p>
</li>
<li>
<p>“确认偏见”效应</p>
<ul>
<li>常常是先下结论，再去寻找对结论有利的证据</li>
<li>当你认定一个观点时，大脑会持续、有选择地去寻找证据来证明自己的观点是正确的，有选择地忽略和无视错误的证据</li>
</ul>
</li>
<li>
<p>你只能说，在某一件事上，他表现得还不够成熟</p>
</li>
<li>
<p><strong>你所能交流、接触人群的广度和深度，决定了你能在这个社会中获得的高度和深度</strong>。而同理心是这一切的基础。</p>
</li>
</ul>
</li>
<li>
<p>要反对，而不是批评</p>
<ul>
<li><img src="/img/probability_mind/58.jpg" alt=""></li>
<li><strong>德鲁克说：管理的本质，就是激发善意</strong></li>
</ul>
</li>
<li>
<p>认知协调</p>
<ul>
<li>
<p>人性有善恶一面，作为管理者，要理解人性的多样性，不要测试人性</p>
</li>
<li>
<p>成熟的管理者，懂得用制度抑制恶、惩罚没有抑制住的恶</p>
</li>
<li>
<p>能意识到并平静面对以下事实时，说明成熟了</p>
<ul>
<li>你的团队绝大多数都是好人</li>
<li><strong>抑恶扬善的根本，是制度设计</strong></li>
<li>也有坏人藏在你的团队里</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/59.jpg" alt=""></p>
</li>
<li>
<p><img src="/img/probability_mind/60.jpg" alt=""></p>
</li>
<li>
<p>通过认知协调的沟通心法，来激发员工的善意。</p>
</li>
</ul>
</li>
<li>
<p>多用建议，少用批评</p>
<ul>
<li>人对事业的热爱，发自内心想要成为更好的自己的激情和驱动力，对人的同理心，是根。</li>
<li>批评专注于缺陷，建议专注于如何弥补缺陷。</li>
</ul>
</li>
</ul>
<h2 id="员工心流是可以被管理的">员工心流是可以被管理的</h2>
<ul>
<li>
<p>心流，通常用来描述当一个人投入某一项任务时，感受到愉悦状态。心流状态是一种非常专注、高效的状态。</p>
</li>
<li>
<p>精神熵指人的意识也会自发变得无序和混乱，内心失去了秩序，会变得焦躁不安。</p>
</li>
<li>
<p><img src="/img/probability_mind/61.jpg" alt=""></p>
</li>
<li>
<p><img src="/img/probability_mind/62.jpg" alt=""></p>
</li>
<li>
<p>如何进入心流状态</p>
<ul>
<li>有清晰的目标，且难度适中，和能力相匹配</li>
<li>还需要及时反馈</li>
</ul>
</li>
<li>
<p>管理员工心流</p>
<ul>
<li><img src="/img/probability_mind/63.jpg" alt=""></li>
</ul>
</li>
</ul>
<h2 id="管理者的实践">管理者的实践</h2>
<ul>
<li>
<p>这个世界是公平的，只让员工承担更多的责任，没有相应多出来的利益，“让员工以老板的心态打工”，是管理者的自我麻醉剂。</p>
</li>
<li>
<p>管理就五个字</p>
<ul>
<li>
<p>责</p>
<ul>
<li>结构问题</li>
</ul>
</li>
<li>
<p>权</p>
<ul>
<li>授权问题</li>
</ul>
</li>
<li>
<p>利</p>
<ul>
<li>
<p>激励问题</p>
<ul>
<li>激发善意</li>
<li>改变行为</li>
<li>工资发给责任，奖金发给超额业绩，股权发给潜力。</li>
<li>要了解员工的需求，而不是自己以为</li>
</ul>
</li>
</ul>
</li>
<li>
<p>对</p>
</li>
<li>
<p>等</p>
</li>
</ul>
</li>
<li>
<p>发现盲点</p>
</li>
<li>
<p>拆解任务</p>
</li>
<li>
<p>造钟人</p>
<ul>
<li><img src="/img/probability_mind/65.jpg" alt=""></li>
</ul>
</li>
<li>
<p>激励相容</p>
<ul>
<li>指私利与公利是一致的。每个人都有自私的一面，如果能有一种制度安排，<strong>员工越自私，公司越赚钱</strong>，这种制度，就是激励相容。</li>
</ul>
</li>
<li>
<p>不要凡事都亲力亲为</p>
<ul>
<li>衡量一个管理者管理能力的高低，不在于其做出了多少业绩，是看其培养出一个什么样的队伍，带出了多少能够带兵打仗的人</li>
<li>不要凡事亲力亲为，要给员工一定的试错空间，并培养他成长。</li>
</ul>
</li>
<li>
<p>成大事者，不委屈</p>
<ul>
<li>你能扛多大的责任，承受多大的委屈，就能带多大的团队，做多大的事情。</li>
</ul>
</li>
<li>
<p>看淡生死，穿越周期</p>
</li>
<li>
<p>结语</p>
<ul>
<li>死去，就是新生</li>
<li>红白皆喜事，生死由周期</li>
</ul>
</li>
</ul>
<h2 id="复盘-4">复盘</h2>
<ul>
<li>什么叫抗目标？意思是目标必须完成</li>
<li>人才，是企业最重要的资产，甚至是唯一资产</li>
<li>作为管理者，低位员工，你要给安全感；中位员工，你要给公平感；高位员工，你要给目标感</li>
<li>再给自己的评估结果上打7折，在给别人的评估结果上翻一倍，这样可能会更客观</li>
<li>人唯有恐惧的时候方能勇敢</li>
<li>如果在害怕的情况下，你还能去战斗，去解决问题，而不是选择退缩或逃避，这才是勇敢</li>
<li>看谁都不顺眼是极度不成熟的表现，看一部分人不顺眼是中间成熟的表现。看谁都顺眼的人，才是真正成熟的人</li>
<li>一个人同时保有两种相反的观念，还能正常行事，这是第一流智慧的标志。</li>
<li>修炼同理心，做到“对事不对人”</li>
<li>如果你想要完成自己的目标和理想，会经历许许多多的周期，只“死”一回是不够的，你可能要“死”八百遍。</li>
</ul>
<h1>part6 商业逻辑，找到你的旋转飞轮</h1>
<h2 id="用结构模块搭建商业模型">用结构模块搭建商业模型</h2>
<ul>
<li>
<p>一切的复杂，都源于其固有的简单：变量、因果链、增强回路、调节回路、滞后效应</p>
</li>
<li>
<p>核心存量</p>
<ul>
<li>
<p>咨询行业有哪些核心存量是关键的</p>
<ul>
<li>麦肯锡朋友：成功案例</li>
<li>波士顿朋友：深刻的洞察</li>
<li>曹阳：咨询、培训、演讲、文章、写书</li>
<li>刘芹：声誉</li>
</ul>
</li>
</ul>
</li>
<li>
<p>关键因果链</p>
<ul>
<li>
<p>对于作者创业时代而言，最关键的因果链是通向收入的因果链</p>
</li>
<li>
<p>关键的“因”</p>
<ul>
<li>声誉</li>
<li><img src="/img/probability_mind/110.jpg" alt=""></li>
</ul>
</li>
<li>
<p>咨询公司需要承担一笔巨大的成本：交易成本。失败的咨询公司只有一条：客户不相信你的能力</p>
</li>
<li>
<p>找到“声誉-（+）&gt;收入”的关键因果链后，绝不去客户现场做售前</p>
</li>
<li>
<p>只要不是用“声誉”这个第一“因”赢来的客户，不是真正的客户。我还不够强大，我要用这个时间继续拼命提升自己。</p>
</li>
<li>
<p>这就是关键因果链给你的战略定力。</p>
</li>
</ul>
</li>
<li>
<p>增强回路</p>
<ul>
<li>
<p>ceo的核心职责，是“求之于势，不责于人“，不断增强”声誉“这个”势“</p>
</li>
<li>
<p>作品</p>
<ul>
<li>有好的作品，比如醍醐灌顶的文章、透彻有见地的书籍，才能提升声誉</li>
</ul>
</li>
<li>
<p>学识</p>
<ul>
<li>参与真实商业，解决具体问题，深处商业前言</li>
</ul>
</li>
<li>
<p>声誉</p>
<ul>
<li>具备极好的声誉</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/111.jpg" alt=""></p>
</li>
</ul>
</li>
<li>
<p>调节回路</p>
</li>
<li>
<p>滞后效应</p>
<ul>
<li>昨天的努力，通常今天看不到回报</li>
<li>滞后效应：原因通常不在结果附近</li>
<li>饱和式创业，把战略资源前置投入，让结果提前地、确定地出现。</li>
<li>为”作品“、”学识“、”声誉“三个”果“设计三个”因“，然后，等待时间</li>
<li><img src="/img/probability_mind/112.jpg" alt=""></li>
</ul>
</li>
</ul>
<h2 id="只要留在牌桌上，就有赢的机会">只要留在牌桌上，就有赢的机会</h2>
<h3 id="序-2">序</h3>
<ul>
<li>在市场好的时候，杠杆是赚钱的放大器；当市场出现问题的时候，杠杆就是风险的加速器</li>
<li>世界越来越不按照我们的计划发展了</li>
<li>我们的预测和总结，总是会很快过期的。</li>
<li>风险是非线性的，收益也是不对称的。赢的人，会拿走很多很多，甚至所有。</li>
<li><strong>赢家通吃性：马太效应、阶层固化、复利效应、指数级增长</strong></li>
</ul>
<h3 id="冗余，意味着选择权">冗余，意味着选择权</h3>
<ul>
<li>
<p>冗余，是健壮的成本。</p>
<ul>
<li><img src="/img/probability_mind/66.jpg" alt=""></li>
</ul>
</li>
<li>
<p>冗余，意味着选择权。</p>
</li>
<li>
<p>学习逻辑和概率</p>
<ul>
<li>如果你知道自己会死在什么地方，那么一辈子都别去那里</li>
<li><img src="/img/probability_mind/67.jpg" alt=""></li>
</ul>
</li>
<li>
<p>选择适合自己的市场</p>
<ul>
<li>
<p>每个人的天赋、野心、勤奋程度不同，根据自己的情况，选择合适的市场。</p>
</li>
<li>
<p>这个世界上，存在着两个市场：分散市场和头部市场</p>
</li>
<li>
<p>分散市场</p>
<ul>
<li>做的好可以很优秀，但是不可能占据很大的市场份额</li>
<li>例如：绘画</li>
</ul>
</li>
<li>
<p>头部市场</p>
<ul>
<li>容易垄断，赢家通吃</li>
<li>比如：音乐、互联网</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="商业模式的本质，是利益相关者的交易结构">商业模式的本质，是利益相关者的交易结构</h2>
<ul>
<li>
<p>这个世界上有很多公司，是靠商业模式赚钱的</p>
</li>
<li>
<p>2要素模型</p>
<ul>
<li>商业模式最基本的表述，要发明一种交易结构，<strong>首先让顾客获得价值，其次企业也要获得价值</strong></li>
<li><img src="/img/probability_mind/68.jpg" alt=""></li>
</ul>
</li>
<li>
<p>3要素模型</p>
<ul>
<li>你为什么人提供价值</li>
<li>凭什么是你</li>
<li>你的钱从哪里来？或者说，你的利润从哪里来</li>
<li><img src="/img/probability_mind/69.jpg" alt=""></li>
</ul>
</li>
<li>
<p>4要素模型</p>
<ul>
<li>
<p>顾客</p>
<ul>
<li>你的客户是谁</li>
</ul>
</li>
<li>
<p>价值提供</p>
<ul>
<li>你给客户提供什么价值</li>
</ul>
</li>
<li>
<p>盈利模式</p>
<ul>
<li>你是怎么盈利的</li>
</ul>
</li>
<li>
<p>战略/资源</p>
<ul>
<li>你的核心竞争力是什么</li>
</ul>
</li>
<li>
<p><img src="/img/probability_mind/70.jpg" alt=""></p>
</li>
<li>
<p>总价值创造（全局性增量）</p>
<ul>
<li>不应该只关注客户，还应该关注供应商、渠道、门店，让利益相关者都能获得价值</li>
<li><img src="/img/probability_mind/71.jpg" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>6要素模型</p>
<ul>
<li><img src="/img/probability_mind/72.jpg" alt=""></li>
</ul>
</li>
<li>
<p>9要素模型</p>
<ul>
<li><img src="/img/probability_mind/73.jpg" alt=""></li>
</ul>
</li>
</ul>
<h2 id="商业模式创新，就是交易结构的创新">商业模式创新，就是交易结构的创新</h2>
<ul>
<li>
<p>什么是商业模式</p>
<ul>
<li>商业的本质，是交易，交易的本质，是利益交换</li>
<li>模式的本质，是结构</li>
<li>商业模式，就是利益相关者（所有和生意相关的人）的交易结构</li>
</ul>
</li>
<li>
<p>改变交易结构，创造效率空间，这就是商业模式的创新。判断商业模式好坏、有效，就是新的交易结构，是不是每个人都比之前赚到了更多。</p>
</li>
<li>
<p>如何设计有效的商业模式</p>
<ul>
<li>
<p>先把自己和客户摆在交易结构里面</p>
<ul>
<li>先找到你的客户，找对你的客户</li>
<li>看看客户有什么需求，客户是终端，是最终给你付钱的人</li>
</ul>
</li>
<li>
<p>拉入更多的利益相关者</p>
</li>
<li>
<p>思考这些利益相关者都要什么，把他们连起来</p>
</li>
<li>
<p><img src="/img/probability_mind/74.jpg" alt=""></p>
</li>
</ul>
</li>
</ul>
<h2 id="处理信息方式的不同，决定了赚钱方式的不同">处理信息方式的不同，决定了赚钱方式的不同</h2>
<ul>
<li>
<p>精明的商人通过信息不对称赚钱</p>
</li>
<li>
<p>伟大的商人通过消灭信息不对称赚钱</p>
<ul>
<li>电商本质上也是帮助你消灭信息不对称</li>
<li><img src="/img/probability_mind/75.jpg" alt=""></li>
<li>随着大数据、5G、万物互联、区块链等技术的推进，连接效率将会大幅提升，信息将越来越透明。想靠信息不对称赚钱就越难。</li>
<li>反而那些顺应大势，懂得利用这些新技术，去降低信息不对称的商人，会得到市场奖励。</li>
</ul>
</li>
<li>
<p>消灭信息不对称，让更多人去创造价值的事</p>
<ul>
<li>商业的发展，就是信息越来越透明、越来越对称的过程</li>
<li>随着科技发展、商业进步，确实靠信息不对称赚钱的中间商越来越少，与此同时，也会带来新岗位，或者说，让人们不得不去做创造价值的事。</li>
</ul>
</li>
</ul>
<h2 id="十大战略模型">十大战略模型</h2>
<h2 id="复盘-5">复盘</h2>
<ul>
<li>华为说：不在非战略机会点上消耗战略性资源</li>
<li>所有你以为的”突然式“的成功，背后都有其环环相扣的”增强回路“</li>
<li>真实世界到底是什么样子？语法预测的不确定性，风险的可累积性，结果的赢家通吃</li>
<li>如果你知道自己会死在哪里，那么一辈子都别去那里。成功的人各有各的路径，但是失败的人死法都大致相同</li>
<li>什么是定位？你为什么客户提供价值，这就是定位</li>
<li>商业的本质是交易，模式的本质是结构，商业模式，就是利益相关者的交易结构</li>
<li>当下做到极致，美好自然发生</li>
<li>关键不是预想战略，而是识别战略，然后不断反思，拔除有害的种子，让好的种子涌现、繁衍、蔓延</li>
<li>在每一个时间点，都应该有不同的战略，把时间轴加入思考当中</li>
</ul>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>二课</tag>
        <tag>阅读</tag>
      </tags>
  </entry>
  <entry>
    <title>信息泄露</title>
    <url>/posts/76189c5e.html</url>
    <content><![CDATA[<h1>超详细敏感信息泄露漏洞总结</h1>
<p><strong>发布日期：2022-03-30 21:42:41</strong></p>
<h2 id="免责声明">免责声明</h2>
<p>本文提供的工具、教程、学习路线、精品文章均为原创或互联网收集，旨在提高网络安全技术水平为目的，只做技术研究，谨遵守国家相关法律法规，请勿用于违法用途。</p>
<h2 id="内容速览">内容速览</h2>
<ul>
<li>0x01 漏洞简介</li>
<li>0x02 漏洞是怎么发生的</li>
<li>0x03 漏洞危害</li>
<li>0x04 测试方法</li>
</ul>
<h2 id="漏洞简介">漏洞简介</h2>
<p>敏感数据包括但不限于：口令、密钥、证书、会话标识、License、隐私数据(如短消息的内容)、授权凭据、个人数据(如姓名、住址、电话等)等。</p>
<p>在程序文件、配置文件、日志文件、备份文件及数据库中都有可能包含敏感数据。主要分为由版本管理软件导致的泄露, 文件包含导致的泄露和配置错误导致的泄露.</p>
<h2 id="漏洞是怎么发生的">漏洞是怎么发生的</h2>
<ul>
<li>未能从公共内容中删除内部内容。例如，在生产环境中，用户有时可以看到开发人员在加价中的评论。</li>
<li>网站及相关技术配置不安全。例如，如果无法禁用调试和诊断功能，有时可能会为攻击者提供有用的工具，帮助他们获取敏感信息。默认配置也会使网站变得脆弱，例如，通过显示过于冗长的错误消息。</li>
<li>应用程序的设计和行为缺陷。例如，如果网站在出现不同错误状态时返回不同的响应，这也可以允许攻击者列举敏感数据，例如有效的用户凭据。</li>
</ul>
<h2 id="漏洞危害">漏洞危害</h2>
<ul>
<li>扫描内网开放服务</li>
<li>向内部任意主机的任意端口发送payload来攻击内网服务</li>
<li>DOS攻击（请求大文件，始终保持连接Keep-Alive Always）</li>
<li>攻击内网的web应用，例如直接SQL注入、XSS攻击等</li>
<li>利用file、gopher、dict协议读取本地文件、执行命令等</li>
</ul>
<h2 id="测试方法">测试方法</h2>
<h3 id="检测形式多样">检测形式多样</h3>
<p>工具爬虫扫描得到敏感文件的路径，从而找到敏感数据，主要是还是通过关键词爆破。</p>
<h3 id="手工挖掘">手工挖掘</h3>
<p>根据web容器或者网页源代码的查看,Github，找到敏感信息。</p>
<h3 id="操作系统版本">操作系统版本</h3>
<p>可用nmap扫描得知</p>
<h3 id="中间件的类型、版本">中间件的类型、版本</h3>
<p>http返回头, 404报错页面, 使用工具（如whatweb）</p>
<h3 id="Web敏感信息">Web敏感信息</h3>
<ul>
<li>phpinfo()信息泄露: <code>http://[ip]/test.php</code>，<code>http://[ip]/phpinfo.php</code></li>
<li>测试网页泄露在外网: <code>test.cgi</code>、<code>phpinfo.php</code>、<code>info.php</code>等</li>
<li>编辑器备份文件泄漏在外网: <code>http://[ip]/test.php.swp</code>、<code>http://[ip]/test.php.bak</code>、<code>http://[ip]/test.jsp.old</code>、<code>http://[ip]/cgi~</code></li>
<li>版本管理工具（如git）文件信息泄露: <code>http://[ip]/.git/config</code>、<code>http://[ip]/CVS/Entriesp</code>、<code>http://[ip]/.svn/entriesp</code></li>
<li>HTTP认证信息泄露: <code>http://[ip]/basic/index.php</code></li>
<li>管理后台地址泄露: <code>http://[ip]/login.php</code>、<code>http://[ip]/admin.php</code>、<code>http://[ip]/manager.php</code>、 <code>http://[ip]/admin_login.php</code></li>
</ul>
<h2 id="防止敏感信息泄露">防止敏感信息泄露</h2>
<p>在进行网站和系统维护时，请务必注意以下潜在风险和防范措施：</p>
<h3 id="员工信息泄露">员工信息泄露</h3>
<p>避免泄露员工邮箱和分机号码，这可能被恶意利用，例如社交工程攻击或生成字典攻击。</p>
<h3 id="错误页面暴露信息">错误页面暴露信息</h3>
<p>确保错误页面不暴露敏感信息，包括但不限于 MySQL 错误、PHP 错误、以及 CMS 版本等。</p>
<h3 id="探针文件">探针文件</h3>
<p>谨慎处理探针文件，如 robots.txt 和 phpMyAdmin，防止未授权访问。</p>
<h3 id="网站源码备份文件">网站源码备份文件</h3>
<p>避免将网站源码备份文件（如 .rar、.tar.gz、.zip）存放在可公开访问的位置，以免泄露敏感信息。</p>
<h3 id="网络信息泄露">网络信息泄露</h3>
<p>定期检查网络配置，防止 DNS 域传送漏洞、运维监控系统弱口令、网络拓扑泄露等问题。</p>
<h3 id="第三方软件应用">第三方软件应用</h3>
<p>审查 GitHub 上的源码，确保其中不包含敏感信息，防止数据库、邮箱密码泄露。</p>
<h3 id="敏感信息搜集工具">敏感信息搜集工具</h3>
<p>避免使用或谨慎使用搜集敏感信息的工具，包括但不限于 weakfilescan、BBScan、whatweb、dnsenum 等。</p>
<h2 id="安全工具推荐">安全工具推荐</h2>
<ul>
<li><a href="https://github.com/ring04h/weakfilescan">weakfilescan</a></li>
<li><a href="https://github.com/lijiejie/BBScan">BBScan</a></li>
<li><a href="https://github.com/urbanadventurer/WhatWeb">whatweb</a></li>
<li><a href="https://github.com/fwaeytens/dnsenum">dnsenum</a></li>
<li><a href="https://github.com/">github</a></li>
</ul>
<p><strong>注意：在进行任何安全检查和调整时，请确保遵循合法合规的道德准则，以保护系统和用户的利益。</strong></p>
<blockquote>
<p>转载自<a href="https://cloud.tencent.com/developer/article/1969038">超详细敏感信息泄露漏洞总结</a></p>
</blockquote>
]]></content>
      <categories>
        <category>web安全</category>
      </categories>
      <tags>
        <tag>web安全</tag>
        <tag>信息泄露</tag>
      </tags>
  </entry>
  <entry>
    <title>优化日记</title>
    <url>/posts/ca1c84cd.html</url>
    <content><![CDATA[<h3 id="准备优化下">准备优化下</h3>
<blockquote>
<p>2023-11-23 14:27今天先优化一点点</p>
</blockquote>
]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>小记</tag>
        <tag>优化</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建小记</title>
    <url>/posts/53191.html</url>
    <content><![CDATA[<h3 id="前言">前言</h3>
<blockquote>
<p>其实之前一直想用github搭一个了，无奈磕磕碰碰，遇点小困难就却难而退了，这几天在其他事情上也是这样，就换个地折腾一下。</p>
</blockquote>
<h3 id="感谢的大佬">感谢的大佬</h3>
<ol>
<li><a href="https://lin64850.github.io/">Eureka</a></li>
<li><a href="https://space.bilibili.com/13282871">卷二兔</a></li>
</ol>
<h3 id="参考文档">参考文档</h3>
<ol>
<li><a href="https://hexo.io/zh-cn/docs/">Hexo</a></li>
<li><a href="https://butterfly.js.org/posts/21cfbf15/">butterfly</a></li>
</ol>
<h3 id="安装过程">安装过程</h3>
<ol>
<li>安装Node.js</li>
<li>安装Git <!--这个没想清楚作用--></li>
<li>安装Hexo</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>安装Hexo-theme-butterfly</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-theme-butterfly</span><br><span class="line">npm update hexo-theme-butterfly</span><br><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>配置_config.yml和_config.butterfly.yml文件</li>
<li>实施部署</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面少了一块github的配置，就不说了哈哈</p>
</blockquote>
<h3 id="感想">感想</h3>
<blockquote>
<p>昨天一整天都不在状态(或许以后很长一段时间都这样哈哈，也没关系吧，速度调节，欧力给！)，晚上临时想着也不想做那件事(正在发愁的一件事，搭完之后还是要回归那件事的)，也就想折腾一下个人博客，看看视频，跟着上面两位大哥引荐与教学，很快可以搞定的，出版就这样，其实我还有一个其他博客的，但是要买服务器、域名啥的，之后过期就丢了哈哈！</p>
</blockquote>
<h3 id="后记">后记</h3>
<blockquote>
<p>之后有空就玩玩这个，看看有没啥需要记录的。</p>
</blockquote>
]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>小记</tag>
        <tag>搭建</tag>
      </tags>
  </entry>
  <entry>
    <title>隐私保护相关</title>
    <url>/posts/776f3c45.html</url>
    <content><![CDATA[<h2 id="群签名">群签名</h2>
<p>群签名（group signature）方案是一种类似于数字签名的密码原语，其目的在于允许用户代表群签名消息，并在该群内保持匿名。看到签名的人可以用公钥验证消息是由群成员发送的，但不知道是哪一个。用户不能滥用匿名行为，因为群管理员可以通过使用秘密信息（密钥）来消除用户的匿名性。在电子商务、电子政务、企业管理等场景中可以应用。</p>
<p>群签名的安全性和效率成为应用的瓶颈。许多安全的群签名效率较低，许多已有的群签名不支持成员撤销或成员撤销效率很低，不适合大群组应用。经典的群签名方案有 ACJT 2000、BBS04 等，但它们存在无法撤销、效率低下等问题。</p>
<p>详细流程参考 <a href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/design/privacy.html#id20">FISCO BCOS隐私特性：群/环签名技术实现</a></p>
<h2 id="环签名">环签名</h2>
<p>环签名（ring signature）是一种数字签名方案，最初由Rivest等人提出。环签名是一种简化的群签名，其中只有环成员没有管理者，不需要环成员间的合作。与群签名关键区别在于环签名没有 ”群管理员“，没有可信中心，没有群的建立过程。对验证者来说，签名人是完全正确匿名的。提供了一种匿名泄露秘密的巧妙方法，无条件匿名性在需要长期保护信息的特殊环境中非常有用。</p>
<h2 id="聚合签名">聚合签名</h2>
<p>聚合签名是一种将任意多个签名聚合成一个签名的变体签名方案。可以将一笔多签交易的各个参与方的公钥和签名合并为一个公钥与签名，整个合并过程是不可见的，无法从合并后的公钥与签名推导出合并前的信息。当前通常使用 Schnorr 签名算法实现签名聚合。私钥签名，公钥验证签名。</p>
<h2 id="假名技术">假名技术</h2>
<p>假名技术允许用户使用临时的、不相关的身份信息进行通信。用户可以使用伪造的身份或随机生成的身份发送消息，从而保护其真实身份的隐私。常用于保护用户的隐私和匿名通信。</p>
<h3 id="补充：在车联网中的应用">补充：在车联网中的应用</h3>
<p>在车辆通信中，假名通常指匿名身份或伪装身份，以保护车辆和驾驶员的隐私。假名的使用旨在防止对车辆的跟踪或识别。可以通过使用假名证书代替用户的真实身份，确保车辆在交流信息时可以保持一定的匿名性。</p>
<p>详细信息可参考 <a href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/design/privacy.html#id20">FISCO BCOS隐私特性：群/环签名技术实现</a>。</p>
<h2 id="匿名技术">匿名技术</h2>
<p>匿名技术是一组方法和协议，旨在隐藏个人的真实身份信息。在匿名技术中，参与者可以通过使用伪装身份或通过特定的协议来隐藏自己的身份，从而保护隐私。匿名技术广泛应用于匿名通信、网络隐私保护、数字货币等领域。</p>
<h2 id="群签名、假名、匿名关系">群签名、假名、匿名关系</h2>
<ol>
<li>
<p><strong>群签名技术和假名技术的应用</strong></p>
<ul>
<li>群签名技术通过将签名与群体相关联来实现匿名性。</li>
<li>假名技术允许用户使用伪装的身份进行通信，从而实现匿名性。</li>
</ul>
</li>
<li>
<p><strong>不同的应用场景</strong></p>
<ul>
<li>群签名技术通常用于在群体中实现对消息的匿名签名。</li>
<li>假名技术通常用于在一对一通信或多对多通信中隐藏个人的真实身份。</li>
</ul>
</li>
<li>
<p><strong>匿名技术的广泛概念</strong></p>
<ul>
<li>匿名技术是一个更广泛的概念，包括群签名技术和假名技术，以及其他一些实现匿名性和隐私保护的密码学方法和协议。</li>
</ul>
</li>
</ol>
<h2 id="身份基签名（IBS）">身份基签名（IBS）</h2>
<p>身份基签名具备如下特征：</p>
<ol>
<li>用户的公钥可以是其公开身份，相应的私钥由系统主私钥盲化身份生成。</li>
<li>系统主私钥用于生成用户私钥，用户可利用私钥进行签名。</li>
<li>具体算法包括初始化算法、私钥提取算法、签名算法和验证算法。</li>
</ol>
<p>在基于身份的数字签名方案中，密钥生成中心（PKG）起到关键作用，验证者只需验证用户身份的真实性。关于基于身份的数字签名的安全性证明，不同方案存在多种方法，如基于椭圆曲线上的双线性配对、二次剩余理论等。</p>
<h3 id="补充">补充</h3>
<p>在具有特殊功能的数字签名领域，如群签名、代理签名、盲签名、聚合签名、多签名等，也有相应的基于身份的签名方案研究。</p>
<h2 id="变色龙函数">变色龙函数</h2>
<p>变色龙哈希函数具有四个主要的算法：</p>
<ol>
<li>
<p><strong>密钥生成算法：</strong> 给定安全常数，输出变色龙哈希的公钥和私钥（陷门）。</p>
</li>
<li>
<p><strong>哈希生成算法：</strong> 输入公钥、随机数和任意消息，生成哈希值和随机数。</p>
</li>
<li>
<p><strong>哈希验证算法：</strong> 输入公钥、任意消息和哈希值、随机数，若是正确的哈希值，则输出1，否则输出0。</p>
</li>
<li>
<p><strong>哈希碰撞算法：</strong> 输入私钥（陷门）、消息、新消息和哈希值、随机数，输出新随机数，使得两个哈希值相等。</p>
</li>
</ol>
<p><strong>举例</strong>（基于离散对数的变色龙哈希函数）：</p>
<ol>
<li>密钥生成：$p、q$为素数，公钥$pk$为 $y=g^x\ \mod\ p$</li>
<li>哈希生成：$\text{Hash}(m1, r1) = g^{m1} * y^{r1}\ \mod\ p$</li>
<li>哈希碰撞：$r_2 = x*m_1 - m_2 + r_1\ \mod\ p$</li>
</ol>
<p><strong>来源：</strong></p>
<ol>
<li><a href="%E9%93%BE%E6%8E%A51">CSDN博客</a></li>
<li><a href="%E9%93%BE%E6%8E%A52">CSDN博客</a></li>
<li><a href="%E9%93%BE%E6%8E%A53">知乎专栏</a></li>
<li><a href="%E9%93%BE%E6%8E%A54">CodeAntenna</a></li>
<li><a href="%E9%93%BE%E6%8E%A55">简书</a></li>
</ol>
<h2 id="K-匿名性">K-匿名性</h2>
<p>K-匿名性是一种匿名化数据的性质。如果一组公开的数据中，任何一个人的信息都不能和其他至少 k-1 人区分开，则称该数据满足 k-匿名性。</p>
<p><strong>实现方法：</strong></p>
<ol>
<li><strong>数据抑制：</strong> 用星号“*”取代一些属性的值，可以是整列或部分值。</li>
<li><strong>数据泛化：</strong> 用更宽泛的类别取代一些属性的精确值，如将具体年龄改写为年龄范围。</li>
</ol>
<p><strong>攻击方式：</strong></p>
<ol>
<li><strong>同质性攻击：</strong> 如果目标属性在 k 个条目中的取值都相同，即使数据已经被 k-匿名化，目标属性在 k 条记录中的取值仍然可以被获取。</li>
<li><strong>背景知识攻击：</strong> 利用目标属性与准标识符属性之间的联系来减少目标属性里可能值的数量。</li>
</ol>
]]></content>
      <categories>
        <category>隐私保护</category>
      </categories>
      <tags>
        <tag>学习记录</tag>
        <tag>隐私保护</tag>
        <tag>身份认证</tag>
      </tags>
  </entry>
  <entry>
    <title>数学符号参考</title>
    <url>/posts/79b9413.html</url>
    <content><![CDATA[<h3 id="几何符号">几何符号</h3>
<p>⊥   ∥   ∠   ⌒   ⊙   ≡   ≌    △</p>
<h3 id="代数符号">代数符号</h3>
<p>∝   ∧   ∨   ～   ∫   ≠    ≤   ≥   ≈   ∞   ∶</p>
<h3 id="运算符号">运算符号</h3>
<p>如加号（＋），减号（－），乘号（×或·），除号（÷或／），两个集合的并集（∪），交集（∩），根号（√），对数（log，lg，ln），比（：），微分（dx），积分（∫），曲线积分（∮）等。</p>
<h3 id="集合符号">集合符号</h3>
<p>∪   ∩   ∈</p>
<h3 id="特殊符号">特殊符号</h3>
<p>∑    π（圆周率）</p>
<h3 id="推理符号">推理符号</h3>
<p>|a|    ⊥    ∽    △    ∠    ∩    ∪    ≠    ≡    ±    ≥    ≤    ∈    ←<br>
　　↑    →    ↓    ↖    ↗    ↘    ↙    ∥    ∧    ∨<br>
　　&amp;;   §<br>
　　①   ②   ③   ④   ⑤   ⑥   ⑦   ⑧   ⑨   ⑩<br>
　　Γ    Δ    Θ     Λ    Ξ    Ο    Π     Σ    Φ     Χ    Ψ    Ω<br>
　　α    β    γ    δ    ε    ζ    η    θ    ι    κ    λ    μ     ν<br>
　　ξ    ο    π    ρ    σ    τ    υ    φ    χ    ψ    ω<br>
　　Ⅰ Ⅱ Ⅲ Ⅳ Ⅴ Ⅵ Ⅶ Ⅷ Ⅸ Ⅹ Ⅺ Ⅻ<br>
　　ⅰ ⅱ ⅲ ⅳ ⅴ ⅵ ⅶ ⅷ ⅸ ⅹ<br>
　　∈   ∏   ∑   ∕   √   ∝   ∞   ∟ ∠    ∣   ∥   ∧   ∨   ∩   ∪   ∫   ∮<br>
　　∴   ∵   ∶   ∷   ∽   ≈   ≌   ≒   ≠   ≡   ≤   ≥   ≦   ≧    ≮   ≯   ⊕   ⊙    ⊥<br>
　　⊿   ⌒     ℃<br>
　　指数0123：o123</p>
<h3 id="数量符号">数量符号</h3>
<p>如：i，2+i，a，x，自然对数底e，圆周率π。</p>
<h3 id="关系符号">关系符号</h3>
<p>如“＝”是等号，“≈”是近似符号，“≠”是不等号，“＞”是大于符号，“＜”是小于符号，“≥”是大于或等于符号（也可写作“≮”），“≤”是小于或等于符号（也可写作“≯”），。“→ ”表示变量变化的趋势，“∽”是相似符号，“≌”是全等号，“∥”是平行符号，“⊥”是垂直符号，“∝”是成正比符号，（没有成反比符号，但可以用成正比符号配倒数当作成反比）“∈”是属于符号，“⊆ ⊂ ⊇ ⊃”是“包含”符号等。</p>
<h3 id="结合符号">结合符号</h3>
<p>如小括号“（）”中括号“［］”，大括号“｛｝”横线“—”</p>
<h3 id="性质符号">性质符号</h3>
<p>如正号“＋”，负号“－”，绝对值符号“| |”正负号“±”</p>
<h3 id="省略符号">省略符号</h3>
<p>如三角形（△），直角三角形（Rt△），正弦（sin），余弦（cos），x的函数（f(x)），极限（lim），角（∠），<br>
　　∵因为，（一个脚站着的，站不住）<br>
　　∴所以，（两个脚站着的，能站住） 总和（∑），连乘（∏），从n个元素中每次取出r个元素所有不同的组合数（C®(n) ），幂（A，Ac，Aq，x^n）等。</p>
<h3 id="排列组合符号">排列组合符号</h3>
<p>C-组合数<br>
　　A-排列数<br>
　　N-元素的总个数<br>
　　R-参与选择的元素个数<br>
　　!-阶乘 ，如5！=5×4×3×2×1=120<br>
　　C-Combination- 组合<br>
　　A-Arrangement-排列</p>
<h3 id="离散数学符号">离散数学符号</h3>
<p>├ 断定符（公式在L中可证）<br>
　　╞ 满足符（公式在E上有效，公式在E上可满足）<br>
　　┐ 命题的“非”运算<br>
　　∧ 命题的“合取”（“与”）运算<br>
　　∨ 命题的“析取”（“或”，“可兼或”）运算<br>
　　→ 命题的“条件”运算<br>
　　A&lt;=&gt;B 命题A 与B 等价关系<br>
　　A=&gt;B 命题 A与 B的蕴涵关系<br>
　　A* 公式A 的对偶公式<br>
　　wff 合式公式<br>
　　iff 当且仅当<br>
　　↑ 命题的“与非” 运算（ “与非门” ）<br>
　　↓ 命题的“或非”运算（ “或非门” ）<br>
　　□ 模态词“必然”<br>
　　◇ 模态词“可能”<br>
　　φ 空集<br>
　　∈ 属于（??不属于）<br>
　　P（A） 集合A的幂集<br>
　　|A| 集合A的点数<br>
　　R^2=R○R [R^n=R^(n-1)○R] 关系R的“复合”<br>
　　（或下面加 ≠） 真包含<br>
　　∪ 集合的并运算<br>
　　∩ 集合的交运算<br>
　　- （～） 集合的差运算<br>
　　〡 限制<br>
　　<a href="%E5%8F%B3%E4%B8%8B%E8%A7%92R">X</a> 集合关于关系R的等价类<br>
　　A/ R 集合A上关于R的商集<br>
　　[a] 元素a 产生的循环群<br>
　　I (i大写) 环，理想<br>
　　Z/(n) 模n的同余类集合<br>
　　r® 关系 R的自反闭包<br>
　　s® 关系 的对称闭包<br>
　　CP 命题演绎的定理（CP 规则）<br>
　　EG 存在推广规则（存在量词引入规则）<br>
　　ES 存在量词特指规则（存在量词消去规则）<br>
　　UG 全称推广规则（全称量词引入规则）<br>
　　US 全称特指规则（全称量词消去规则）<br>
　　R 关系<br>
　　r 相容关系<br>
　　R○S 关系 与关系 的复合<br>
　　domf 函数 的定义域（前域）<br>
　　ranf 函数 的值域<br>
　　f:X→Y f是X到Y的函数<br>
　　GCD(x,y) x,y最大公约数<br>
　　LCM(x,y) x,y最小公倍数<br>
　　aH(Ha) H 关于a的左（右）陪集<br>
　　Ker(f) 同态映射f的核（或称 f同态核）<br>
　　[1，n] 1到n的整数集合<br>
　　d(u,v) 点u与点v间的距离<br>
　　d(v) 点v的度数<br>
　　G=(V,E) 点集为V，边集为E的图<br>
　　W(G) 图G的连通分支数<br>
　　k(G) 图G的点连通度<br>
　　△（G) 图G的最大点度<br>
　　A(G) 图G的邻接矩阵<br>
　　P(G) 图G的可达矩阵<br>
　　M(G) 图G的关联矩阵<br>
　　C 复数集<br>
　　N 自然数集（包含0在内）<br>
　　N* 正自然数集<br>
　　P 素数集<br>
　　Q 有理数集<br>
　　R 实数集<br>
　　Z 整数集<br>
　　Set 集范畴<br>
　　Top 拓扑空间范畴<br>
　　Ab 交换群范畴<br>
　　Grp 群范畴<br>
　　Mon 单元半群范畴<br>
　　Ring 有单位元的（结合）环范畴<br>
　　Rng 环范畴<br>
　　CRng 交换环范畴<br>
　　R-mod 环R的左模范畴<br>
　　mod-R 环R的右模范畴<br>
　　Field 域范畴<br>
　　Poset 偏序集范畴</p>
<h3 id="集合符号-2">集合符号</h3>
<p>∪ ∩ ∈ ⊆ ⊂ ⊇ ⊃ ∨ ∧ ∞ Φ<br>
　∪ 　并<br>
　∩　 交<br>
　⊂ 　A属于B<br>
　⊃ 　A包括B<br>
　∈　 a∈A,a是A的元素<br>
　⊆　 A⊆B,A不大于B<br>
　⊇　 A⊇B,A不小于B<br>
　Φ　 空集<br>
　R　 实数<br>
　N　 自然数<br>
　Z　 整数<br>
　Z+　正整数<br>
　Z-　 负整数</p>
]]></content>
      <categories>
        <category>手册</category>
      </categories>
      <tags>
        <tag>工具</tag>
        <tag>手册</tag>
        <tag>指南</tag>
        <tag>学习记录</tag>
      </tags>
  </entry>
  <entry>
    <title>《区块链安全》_翁健</title>
    <url>/posts/665ba237.html</url>
    <content><![CDATA[<!-- # 《区块链安全》-翁健主编 -->
<p><strong>网络空间安全专业核心教材体系建设一一建议使用时间</strong><br>
<img src="/img/blockchain_sec/0_1.jpg" alt="教材体系建设"></p>
<h2 id="第1章-绪论">第1章 绪论</h2>
<h3 id="区块链产生背景">区块链产生背景</h3>
<p>区块链本质上作为一种分布式的公共记账本(Distributed Ledger),由于密码学、点对点等技术的引入,相比传统的数据库在<strong>数据验证和数据存储</strong>方面有着不同的机制。在<strong>数据验证</strong>方面,区块链中的每个区块都包含了生成时所带的时间戳,系统中的很多节点会对该时间戳以及记录的时间进行验证和记录。在得到大多数节点承认的前提下,其上的数据记录是不可以被更改的,正是由于此特性,使得区块链技术可以被广泛应用于金融公证、审计等场景。以金融市场为例,传统的金融证券交易由于需要涉及不同机构之间的确认和协调,会存在处理流程复杂、周期长等问题,区块链技术通过引入智能合约、多方共识机制,让相互之间并不信任的个体能够准确地按照智能合约所约定的流程自动完成某项具体操作,建立一种自组织、无中心化信用机构的金融生态体系，这不仅与金融场景中缺乏个体之间信任的需求密切契合,也是对传统的金融商业模式的巨大变革。通过引入区块链技术,极大地提升工作效率,节约成本，避免各机构之间烦琐的清算和交易过程，进而实现方便快捷的金融产品交易。此外,对于其他数字资产的交易管理而言，区块链技术基于准确的时间戳服务器,为数字资产的版权登记提供有力保障,同时区块链上不可篡改的数字记录可以作为数字资产的唯一标识,从而实现完全分布式的数字资产登记、交易授权和溯源等功能。</p>
<p>在<strong>数据存储</strong>方面,区块链是一种<strong>多备份、高冗余</strong>的数据存储机制,网络中的每个节点都存储了完整的数据记录,相当于每个节点都可以作为服务端对客户端提供区块链交易服务,这种完全去中心化的安全特性,使其适合对数据保护要求非常高的场景,避免了由于单点故障或操作员权限使用不当而导致的数据丢失或泄露问题。此外,区块链中可以支持灵活的数据访问策略,通过结合密码学中的多重签名技术、基于身份的加密技术，通过指定人数的密钥授权或特定身份的人才能够获取对应数据的访问权限,从而实现对数据的安全访问控制。目前,一些研究学者通过采用区块链技术来管理和存储个人医疗数据,通过可编程的智能合约来实现对个人健康数据的安全访问控制,促进医疗数据的安全共享,基于大数据来完善病情的分析与诊断。</p>
<h3 id="区块链本质">区块链本质</h3>
<ul>
<li>一份分布式的公共记账本</li>
<li>共享、可信的公共记账本</li>
</ul>
<h3 id="区块链技术是什么">区块链技术是什么</h3>
<ul>
<li>从<strong>狭义</strong>角度来讲，区块链技术是一种基于时间顺序的分布式账本，它将数据区块通过首尾相连的方式组合而成一种链式数据结构，以密码学为基础来保障数据的不可篡改、不可伪造等特性。</li>
<li>从<strong>广义</strong>角度来讲，区块链技术是基于密码学、时间戳等技术来传输和验证数据，通过链式数据结构来存储数据利用共识机制来生成和更新数据，并通过设计可编程智能合约来实现的一种全新去中心基础架构与分布式计算范式。</li>
</ul>
<h3 id="区块链技术发展阶段">区块链技术发展阶段</h3>
<p><img src="/img/blockchain_sec/1_1.jpg" alt="区块链技术发展阶段"></p>
<p><strong>1.区块链1.0</strong><br>
区块链 1.0主要指包括比特币、莱特币等在内的数字加密货币项目，其可编程的数字货币应用涵盖了支付、流通等货币职能。区块链 1.0时代首次通过区块链技术,基于时间戳、数字签名、哈希算法等密码学技术解决电子现金中点对点支付的安全和信任问题，实现了数字货币公开透明和不可篡改的特性。值得注意的是,在这种点对点分布式架构支撑的数字货币场景下,无须可信的第三方机构来管理货币的发行、流通等步骤,实现多方的安全转账交易。区块链1.0中的数字加密货币仅能够支持非图灵完备的脚本语言，这也是其应用受限的最主要原因之一。</p>
<p><strong>2.区块链2.0</strong></p>
<p>区块链2.0在数字加密货币基础之上引入了智能合约，其典型代表为以太坊(Ethereum),它是一种开源的支持图灵完备智能合约的公有区块链平台，支持用户在分布式平台上搭建去中心化应用(Decentralized Application，DApp)，它是由VitalilButerin在2014 年设计发布的。以太坊设计最初是为了解决比特币在可扩展性方面存在的不足,用户可以利用图灵完备的智能合约去开发满足各类应用场景的 DApp。实际而言,以太坊是在区块链 1.0金融领域基础之上，对区块链技术的更为深刻的优化和改进。因此,在区块链2.0时代,区块链技术的应用不再单纯地指数字货币，而是扩展到去中心化、满足复杂应用场景的区块链平台。然而,区块链 2.0支持的公有区块链虽然相比区块链 1.0有所改进,但是在交易过程中吞吐量仍然比较低，只能达到每秒千次量级，而且交易确认的延时非常高,无法支持更大规模的实时交易场景。</p>
<p><strong>3.区块链3.0</strong><br>
区块链 3.0是指除数字加密货币、金融证券之外的其他领域应用,包括政务、智慧医疗、数字知识产权等。随着区块链技术给数字货币、金融等领域带来的巨大优势,其他领域认识到了区块链技术的潜在价值，因此对区块链技术能在所处领域被应用有着迫切的需求。区块链技术成为一种能够为多个行业提供去信任、分布式共识和透明化的解决方案。也可以说,区块链 3.0是针对数字资产保护技术的集合,它的目标是实现各种数字资产权益在“真实世界”与“数字世界”两个平行时空之间映射和转移,从而推动全球数字经济的进一步发展。另一方面,从性能上来看,区块链 3.0 技术的目标是实现高并发、低能耗的并行分布式数据账本,使交易确认效率大幅度提升且无需挖矿操作,从而减少能源浪费,同时兼容物联网、人工智能、云计算、大数据等信息技术,实现标准化、智能、安全、可大规模实施的商业化应用。</p>
<p><strong>4.区块链4.0</strong><br>
区块链 4.0是以提供全球价值互联网信息基础设施为目标,形成基于区块链技术的可信任生态体系,把区块链应用到各个行业以及人们日常生活的基础设施之中,如物联网、社会管理、通信设施、文化娱乐等多方面,广泛地变革人们的生活方式。区块链 4.0除了吸纳现有区块链1.0到区块链 3.0项目的优势特性之外主要聚焦在区块链基础设施和平台层核心技术的完善,包括支持新型抗量子计算攻击的密码学算法。与此同时,随着越来越多的区块链诞生,区块链之间的互联互通成为必然的发展趋势。因此,区块链 4.0除了在可扩展性、安全性等方面的改进之外,在功能扩展上还致力于打破链与链之间的信息孤岛,实现跨链通信和多链融合。</p>
<p>总体而言,区块链1.0到区块链4.0是从底层技术不断完善、效率不断提升、安全性不断增强和应用场景不断丰富的过程，随之而来的是其本身的技术和协议在应用过程中被不断地完善和提升。</p>
<h3 id="区块链基础特性">区块链基础特性</h3>
<p>基于区块链的链式数据结构、分布式网络以及底层的密码学原理，使区块链具有去中心化性（$Decentralization$ ）、公开透明性（$Transparency$）、集体维护性（$Collective\ Maintenance$） 、一致性（$Consistency$）、不可篡改性（$Tamper-Resistance$）和匿名性（$Anonymity$）的安全特点。</p>
<p><strong>1.去中心化性（Decentralization）：</strong>  去中心化性是区块链技术的最基本特征。区块链是一个点对点($Peer-to-Peer$)的分布式网络架构,又称对等式网络,是无中心服务器、依靠对等用户之间进行信息交互的互联网体系。区块链不依赖于中心化节点的管理,实现了数据的分布式记录和存储。在传统的中心化网络中,对单个节点(或备份节点)实行攻击即可破坏整个系统,但是在区块链系统中,只要大多数节点能正常运行,少数节点被攻击或者失效都不会影响整个系统的运作。</p>
<p>如图 1.4 所示为区块链所采用的分布式点对点网络模型,节点之间采取相互连接、协同工作的方式，每个节点既作为服务端提供服务,也作为客户端使用服务。在网络层面上来看,每个节点之间的角色都是平等的，不存在特殊的中心节点,全网节点都具有均等的权利和义务。</p>
<p><strong>2.公开透明性（Transparency）：</strong> 早期设计区块链系统是开放式的，也就意味着其上的数据对任何人都是公开透明的,任何用户都可以通过公开接口查看链上的数据信息。同样地,数据的更新操作对全网用户也是透明的，因此用户可以自行地验证数据的真实性,这是区块链系统被信任的基础。</p>
<p><strong>3.集体维护性（Collective Maintenance）：</strong> 区块链系统中参与共识并存储所有最长链数据的节点称为全节点，区块链数据的安全性实际上是由这些全节点来维护的,其他具备计算和存储资源的节点也都可以参与进来,这样通过全节点来共同维护区块链账本的可靠性。</p>
<p><strong>4.一致性（Consistency）：</strong> 区块链中新产生的区块会被节点广播到网络中,实现全网数据同步。在等待一定周期之后,所有全节点都会存储包含该区块在内的最长链信息,即全网诚实节点具有关于记录数据的一致性视图。</p>
<p><strong>5.不可篡改性（Tamper-Resistance）：</strong> 区块链中的每个区块交易记录是在上一个区块生成之后,在该区块被生成之前所产生的记录,按照时间顺序逐步地写入账本中,这也保证了数据写入的有序性。同时，区块链中每个区块头中都记录着前一区块的哈希值,一旦某一区块的内容被更改,那么其后所有区块的记录都需要跟着变更,这将耗费巨大算力。因此,区块链数据库中不包含对被记录数据在已产生区块的更新、删除操作,只能创建新的交易并将其加入新的区块,即系统一旦经过验证并添加至区块链后,其中的数据信息就会得到永久的存储、无法更改。另一方面,区块链系统中的全节点都保存了一份区块链的完整账本,因此分布式账本使得少数用户持有了被更改过信息的假账本也不会对区块链整个系统的安全性有任何影响。在大部分节点保持诚实可信的前提下,整个系统以数量最多的账本作为最终的账本。该特点保证了基于区块链数据的有效性,即无法被篡改。</p>
<p><strong>6.匿名性（Anonymity）：</strong> 区块链系统中用户使用的是与真实身份信息无关的一串数字作为转账地址，虽然任何用户都可以从链中查到与该地址相关的交易信息,但是很难追溯到该地址所对应的实际操作人,这也就保证了区块链的匿名性。<strong>在比特币网络中,由于交易可以被链接,因此其匿名被称为伪匿名(Pseudo-anonymity)</strong>。在其后发展的区块链技术中，如 Zcash、门罗币,利用<strong>零知识证明</strong>的技术可以实现完全匿名的数字货币。</p>
<p>需要注意的是,虽然节点与节点之间无须公开身份,但区块链基于一套共识协议和签名、哈希算法实现了节点间的互信问题。这使得区块链节点间无须公开身份,利用一个与身份无关的交易地址在保证一定匿名情况下完成数据交换或交易操作。</p>
<p>区块链技术凭借公开透明、不可篡改及可追溯等特性,解决了数据共享开放与交易过程中存在的安全问题,为实现去中心化场景下的数据流通和价值交换提供了一套解决方案。</p>
<h3 id="区块链引发的深刻变革">区块链引发的深刻变革</h3>
<p><strong>1.金融领域</strong><br>
区块链的初始实现方式是比特币,数字货币也因此成了其最早且最有影响力的应用场景之一,其后有以太币、莱特币等各具特色的数字货币。比特币目前已经被广泛接受人们针对不同场景下的实践所带来的特殊需求,设计了相应的形式多样的数字支付系统，如果要问区块链的第一个使用层级是什么,这个答案一定不会引起过多的争议一一数学密码货币。这同样也是各国发行数宇密码货币的主要模式。对一般的数字货币而言,每种数字货币通常有自己独立的区块链网络。例如，莱特币的货币是基于莱特币协议运的。比特币和众多数字货币为互联网上的贸易和商业运行开辟了一个全新的模式。在所召开的数字货币研讨会中,央行表示,中国的数字货币研发亦要抢占先机，争取尽早与公众见面。2014 年以来，多家国际顶尖银行巨头都陆续加入了由金融技术公司 R3 牵头的组织,共同为区块链技术在银行业中的推行确立行业规范和准则。</p>
<p>金融领域与区块链恰似一对挛生兄弟,有着诸多耦合性。传统金融机构由于相互竞争或对安全性的考虑,往往是封闭的生态系统。各种新兴科学技术与金融行业相结合诞生的各种新兴技术和金融服务对金融传统业务模式产生巨大冲击。另外，许多金融机构在监管方面存在着或多或少的问题,如何全面、客观地收集信息，并进行安全分享是有效进行金融监管的重要前提。目前国内外面临着监管信息不公开透明的问题，这使得金融监管工作效率不高,还可能受到质疑。把区块链新技术应用到金融领域能够降低传统金融体系面临的系统风险,有助于提升交易透明度、减少洗钱和逃漏税、创新监管与审计工作、提升交易效率、降低市场交易成本等。</p>
<p>在金融领域,除去数字货币,区块链也逐渐受到泛金融领域的广泛关注，国际汇兑、供应链金融、股权登记、数字票据、资产证券化、银行征信等领域都先后开始尝试在传统的商业模式中,引入区块链的架构与属性。传统的金融企业陆续布局了区块链技术。例如2015年纳斯达克针对股票的记录交易与发行中存在的弊端,推出了基于区块链的数字分类账技术 Linq。同年,首张比特币借记卡由国际金融服务公司 Visa与 Coinbase联合推出,同时和电子签名初创公司 DocuSign 合作推出利用区块链技术打造的汽车交易和租赁平台,将汽车买卖和租赁平台的流程简化,在区块链上,顾客以一种更加安全可靠的方式完成记录和更新车辆和保险、合约签署和支付等相关信息的过程。这样的一种模式使得所有的交易信息是完全透明化的,可以为一般公众获取及验证。把原来由中介机构完成的复杂交易逻辑进行完全数字化的重构后,客户只需要在手机、平板计算机等移动设备端动动手指,就能完成原有的复杂业务流程,这有效地降低了原有的业务成本。</p>
<p><strong>2.数据管理</strong></p>
<p>在大数据时代,数据流动和交易是大势所趋,如果能让有价值的数据有效流通起来对社会和个人都将产生更大价值。区块链以其独有的特性在大数据时代带来了重要的意义。区块链作为集体维护的一个可靠数据库,其去中心化与去信任的协作方式,注定了区块链与大数据有着密切联系,可以在完善数据的安全管理方面发挥重要的作用。</p>
<p>目前基于区块链的存储系统在文件系统中采用点对点的分布式架构,在激励层中采用了基于共识协议的区块链技术,用户能像使用传统的云盘一样进行文件的存储。不同于传统的分布式数据库,共识协议成为这一机制的核心,全网所有节点通过共识来达成数据的一致性视图。其次,它使用的分块技术和密码学等技术保证了数据的安全性和不可篡改等特性。例如，星际文件系统$(InterPlanetary\ File\ System,IPFS)$是基于区块链技术以及网络基础设施构建的一种网络传输协议,它希望借助分布式的模式实现持久存储、共享文件的愿景。Storj 是另一种开源的分布式文件存储系统,它基于区块链的哈希表、文件加密以及分片技术在分布式网络中实现文件的安全存储。</p>
<p>此外,区块链也可以被用来解决数据交换领域中存在的问题。在此之前,互联网数据往往是由大型机构存储管理的，这些机构通常情况都是诚实可信的,但仍然会存在内部人员的误操作或恶意操作的潜在风险,以及外部恶意组织的攻击威胁,因此个人数据的安全性并未得到充分的保证,用户针对自已数据的管理也没有话语权。例如,人们每天使用的社交软件,汇聚了大量的数据,但个人并无法掌控这些数据的流向和使用情况。同时,出于对数据隐私安全的考虑，不同个体和机构之间经常进行数据隔离,不愿意将数据共享出来。然而,在经济全球化、数据全球化时代,如果大数据仅仅掌握在企业内部,它们只能形成自己数据价值的封闭转化,无法充分地将大数据的真正价值利用起来。</p>
<p>区块链以其公开性、安全性和唯一性,给大数据有效共享带来了真正的可能。当前互联网时代虽然是数据爆炸时代,但仍然存在许多研究是缺乏数据的,如医疗研究,以其特殊的性质,数据共享更是难上加难。另外,在数据共享中,传统的数据共享由人工操作、决策,控制数据流通,事实上,这种方式不具备很高的效率,且存在一定的主观性,使数据无法得到充分利用,在信息管理的过程中,大数据存在着丢失、被窃取的可能,从而导致大数据价值贬损。主要的问题包括以下3方面。</p>
<p>(1)数据的中心化和垄断式管理,大量存储在数据库里的数据很少被使用。这些数据都被浪费了。但受制于可复制性和易传播性,数据一经分享无法追踪使用状况,这严重制约了数据资产的协同共享,大量孤立化数据处于碎片化的状态。<br>
(2)数据易被复制,进行数据交易方担心数据被第三方复制、留存、非法转卖等。<br>
(3)第三方中心化交易平台可能面临着网络攻击的风险，容易导致数据丢失、泄露等问题。</p>
<p>而区块链的出现正好能冲破这些问题的阻碍。如果能够有效地利用区块链,其将会极大促进大数据应用。</p>
<p><strong>首先</strong>,区块链为数据的安全性提供了更高程度的保障。数据安全性是影响数据共享、造成数据孤岛化的重要原因之一,这使得数据拥有者倾向中心化和垄断式管理自己的数据。区块链技术的特点能够存储数据而无须担心数据丢失,存储于区块链之中的数据将始终存在,并且无法以任何方式进行编辑或篡改。即使某些节点损坏也不会导致数据的丢失,因为区块链数据在所有节点都得到了完整的备份,这样避免了原来中心化服务器可能遭受的单点故障问题。</p>
<p><strong>其次</strong>,区块链提供了可追溯的过程记录,所有人都能验证数据的来源是否可靠。区块链技术依赖于网络中多个节点的共同计算,验证信息的真伪以达成全网共识,区块链上的数据一旦“上链”成为一种共识,则无法被篡改,这赋予了数据以分布式存储和全历史追溯的新特质。可追溯的数据资产对数据资产共享的重大价值就在于使其源头明晰、所有权明确、交易路径可查。</p>
<p>如果是使用区块链进行数据交易,可以以数据使用权交易的概念来重新定义大数据交易,数据以加密的方式在区块链上产生并固定,买方对于数据的购买将被作为特定数据计算的触发条件,而这个计算的过程将以代币为“燃料”,而计算的结果将以买方提供的公钥进行加密,并最终交给买方。区块链通过明确数据交易历史，记录各方的贡献度,促进数据价值的评估。数据计算过程当中的每一个环节,输入与输出都被区块链以不可篡的方式记录在链,未来如果各方对数据的源头产生了质疑，或是追责买方的私自复制行为,区块链所提供的可追溯路径都会成为解决纠纷的利器。区块链甚至可以提供快速、便捷的即付即用式的数据使用与流通。基于智能合约,区块链可以实现如条目交易、后付款的信用交易、充值交易、授权场景交易、数据交换交易等更小粒度、更定制化与智能化的教据交易模式,这将重塑当前大数据交易的商业模式,为大数据产业的蓬勃发展提供更加稳健的根基。</p>
<p><strong>3.物联网应用</strong><br>
当前,物联网技术正在蓬勃发展,以智能音箱为代表的智能家居开始进入寻常百姓家,然而,这些与人们日常生活紧密相关的领域,其安全问题一直是研发者关心的热点。将区块链技术应用到物联网中,将可能为相关的困难带来一个突破口,从而引领整个现代社会进入智能物联网的新纪元。同时,基于区块链技术来塑造更加完备的互联网最底层协议,更能形成一个可编程的价值互联社会。例如,针对设备消耗品的自动购买,如洗衣机、洗衣粉的购买等场景,IBM公司和三星公司合作开发了物联网基础设施的区块链项目$Adept(Autonomous Decentralized Peer-to-Peer Telemetry)$。这种设计使智能设备成为自我维护、自我调节的独立个体,能够按照事先制定的规则,安全、自动地执行相应的动作,还可以完成与其他设备的信息交换。</p>
<p><strong>4.产品防伪</strong></p>
<p>假冒伪劣问题自从交易行为诞生之日起,就是困扰消费者的持久性问题,在某些行业,产品的质量问题层出不穷,用户的维权意愿也日益增强,这使得用户对产品溯源的需求日益提高。基于区块链的产品溯源是指利用区块链技术,通过其独特的不可篡改、可追溯的分布式账本记录特性,对商品实现从源头的信息采集登记、原料来源追溯、生产过程加工环节,仓储信息、检验批次、物流周转到第三方质检、海关出入境、防伪鉴证的完整可追溯。例如,Linfinity 是一个分布式供应链平台,它集区块链、物联网和大数据于一体,旨在为用户提供包括供应链追溯、防伪、电子签约、物联网监控、设备管理以及预测性维护等在内的一整套供应链场景解决方案,无论是商品的物料采购、生产、制作,或是物流、销售等各类环节,Linfinity 都做到了及时可靠的防伪追溯。通过区块链技术,与产品生命周期相关的上下游企业都可以建立起关联性,实现一种共同维护、可信式的产品管理。</p>
<p><strong>5.知识产权</strong></p>
<p>近年来,随着数字知识经济的规模日益壮大,知识产权已成为企业的竞争优势的新代名词。传统的文字、美术,摄影、音响等艺术作品,都可以转换成用二进制数字编码表达的形式,在互联网上进行交易和传播,而且移动互联网的飞速发展,电子书、音乐等数字内容产品越来越丰富、多样化,传统的作品出版进行数字化不可避免。然而在利益驱动之下，文化产业也成了侵权盗版的重灾区。传统的数字版权保护方法都是集中登记式的,本质上是一种权威管理机构授权的中心化的版权管理机制,存在版权交易方式过程复杂、交易成本高、交易效率低,且无法满足对大量小视频、图片、网络文章等提供版权保护的问题。区块链技术的可溯源机制在数字知识产权保护领域有着广阔的应用前景。2018 年,百度公司创立百度图腾,旨在通过区块链技术将图片版权信息永久写入区块链,基于区块链不可篡改性形成的权威与公信力,结合其人工智能识图技术,让数字作品的传播实现可溯源、可转载、可监控,革新了传统的数字版权保护模式,将数字版权管理过程中需要的登记确权、维权线索、交易信息等与区块链交易、自动执行的智能合约相结合,实现一种新的数字版权保护模式。</p>
<p><strong>6.智能合约</strong></p>
<ol>
<li><strong>定义：</strong> 一套以数字形式定义的承诺，包括合约参与者可以在上面执行这些承诺的协议。</li>
<li><strong>特征</strong></li>
</ol>
<ul>
<li><strong>承诺（Commitment）：</strong> 承诺在这里指的是合约参与者协商后同意的各自的权利和义务，承诺的各项内容共同定义了某个特定的合约的本质与目的。</li>
<li><strong>数字形式（Digitally）：</strong> 数字形式是指合约必须以机器语言而非自然语来进行具体的实现，由计算机程序自动执行，且一般合约以代码形式执行后就不可更改。</li>
<li><strong>计算机协议（Computer Protocol）：</strong> 协议是技术实现，在选择的协议基础之上，合约承诺被最终实现，并且其执行的全过程被记录下来。</li>
</ul>
<h3 id="公有链、私有链、联盟链对比">公有链、私有链、联盟链对比</h3>
<table>
<thead>
<tr>
<th>特性</th>
<th>公有链</th>
<th>私有链</th>
<th>联盟链</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>参与者</strong></td>
<td>公众可加入，去中心化</td>
<td>受限制的参与者，通常由单一组织或实体控制</td>
<td>多个组织或实体共同控制</td>
</tr>
<tr>
<td><strong>权限控制</strong></td>
<td>完全去中心化，任何人都可以参与和验证交易</td>
<td>高度集中化，由单一组织或实体掌控</td>
<td>中度去中心化，由多个组织或实体共同控制</td>
</tr>
<tr>
<td><strong>共识机制</strong></td>
<td>公开的共识机制（例如工作量证明、权益证明）</td>
<td>通常由中心化的共识机制（例如拜占庭容错）控制</td>
<td>多方共同控制的共识机制（例如拜占庭容错或权益证明）</td>
</tr>
<tr>
<td><strong>隐私性</strong></td>
<td>相对较低，所有交易对公众可见</td>
<td>高，仅授权的参与者能够查看和验证交易</td>
<td>中，由参与方确定信息的共享程度</td>
</tr>
<tr>
<td><strong>效率</strong></td>
<td>相对较低，因为需要通过共识达成一致</td>
<td>相对高，因为参与者较少，交易速度更快</td>
<td>取决于联盟链的具体设计，通常在公有链和私有链之间</td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>高，由去中心化的共识机制保障</td>
<td>由集中化的参与者和权限控制提供较高的安全性</td>
<td>中，取决于共识机制和参与者的信任度</td>
</tr>
<tr>
<td><strong>特性记账权</strong></td>
<td>所有参与者均具有相同的记账权</td>
<td>由中心化的参与者拥有记账权</td>
<td>由多个共同控制的参与者共享记账权</td>
</tr>
<tr>
<td><strong>激励机制</strong></td>
<td>通常通过代币激励，如比特币和以太坊</td>
<td>可以由中心化机构提供激励，也可以采用其他机制</td>
<td>取决于具体设计，可能结合公有链和私有链的激励机制</td>
</tr>
<tr>
<td><strong>中心化程度</strong></td>
<td>完全去中心化</td>
<td>高度中心化</td>
<td>中度去中心化</td>
</tr>
<tr>
<td><strong>突出特点</strong></td>
<td>匿名性、公开性</td>
<td>高度隐私、集中化控制</td>
<td>多方参与、中度隐私、共同控制</td>
</tr>
<tr>
<td><strong>承载能力</strong></td>
<td>通常较低，因为要处理大量的公开交易</td>
<td>相对较高，因为面向特定组织或实体</td>
<td>取决于联盟链的设计和规模，通常介于公有链和私有链之间</td>
</tr>
</tbody>
</table>
<h3 id="区块链技术演进">区块链技术演进</h3>
<p><strong>1.侧链技术（Sidechain）</strong><br>
2012 年,侧链的概念首次出现在比特币聊天室中,<strong>它是为了解决如何改进比特币协议、增加新的功能模式</strong>。2014 年以来,已经出现了很多具有新功能的区块链,许多与比特币竞争的数字货币,如莱特币、狗狗币等竞相迅猛发展。比特币的开发团队为了减少这些竞争币给比特币带来的影响,开始计划升级比特币的功能。他们考虑到直接在比特币链上进行功能添加有一定的风险,因为一旦新功能在实践中发生软件故障,已运行的比特币网络将会面临不可预测的潜在安全问题。此外,由于比特币本身的特性,如果要对其进行较大规模的改动,需要获得多数比特币矿工的支持。但是,在全球范围内获得多数比特币矿工的同意显然十分困难,出于对这些现实因素的考虑,比特币核心开发者便提出了侧链技术。</p>
<p>一方面,<strong>侧链技术最重要的作用就是支持用户去访问和使用新的服务</strong>。基于侧链技术,比特币可以作为一种存储货币,在侧链上开发和设计新的功能,以此来提升比特币的竞争力。例如,用户可以通过比特币从本区块链网络转移到另外的区块链网络进行使用，利用其他区块链网络的隐私特性、智能合约以及高效的交易处理功能来弥补比特币网络的不足。另一方面,<strong>新功能的添加通过侧链技术完成以后,即使由于安全升级导致侧链异常,主链也不会受到任何的影响</strong>,仍然可以正常运行,这也是侧链技术所带来的突出优势。</p>
<p>从本质上来看,侧链技术是一种跨区块链网络的解决方案,能够实现将数字资产从第一个区块链网络转移到第二个区块链网络,之后又可以在某个时间节点将该数字资产从第二个区块链网络安全地转回第一个区块链网络,如图 1.6 所示。通常来说，第一个区块链被称为主区块链或者主链,第二个区块链就被称为侧链。这种数字资产在不同区块链之间进行安全转移的技术为区块链应用提供了新的发展空间。</p>
<p><img src="/img/blockchain_sec/1_2.jpg" alt="主链和侧链"></p>
<p>为了实现侧链技术,几位比特币的核心开发者,Adam Back、Matt Corallo 等人共同发起创立了Blockstream公司,明确了侧链技术的协议实现及方案细节。最初开发设计的侧链技术,一般主链专指比特币区块链网络，随着技术的更新发展,主链同样也可以是任何正式上线运行的区块链网络。</p>
<p>严格来说,侧链并非区块链的一种类型,它只是在区块链的现实应用过程中,开发者对区块链的一种功能扩展,因此也不能特指某一个区块链,而是所有遵守侧链技术的区块链网络的通称。侧链可以被理解成一个独立的区块链网络,侧链上的数据及运行程序也是与主链相互独立的。因此,它在运行过程中并不会增加主链的负担,在解决数据过度膨胀的问题上,不失为一种有效的手段。</p>
<p>侧链的实现主要基于双向锚定($Two-Way\ Peg,2WP$)方式。基于$2WP$ 技术,数字资产在主链中将被锁定起来,同时等价的数字资产将会在侧链中得到释放。相应地，当需要对侧链中的数字资产进行锁定的时候,主链中等价的数字资产也会被释放出来。$2WP$ 实现过程中的主要挑战在于如何兼容主链,保证侧链协议的运行不会对主链的正常运行流程产生影响。</p>
<table>
<thead>
<tr>
<th>作用</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>扩展性</strong></td>
<td>通过使用侧链，在不影响主链的情况下扩展区块链网络的处理能力。</td>
</tr>
<tr>
<td><strong>定制化应用</strong></td>
<td>允许创建适用于特定用途的自定义区块链，满足特定企业或组织的需求。</td>
</tr>
<tr>
<td><strong>隐私保护</strong></td>
<td>提供更高级别的隐私保护，通过侧链实现特定的隐私功能，避免直接影响主链。</td>
</tr>
<tr>
<td><strong>交互操作性</strong></td>
<td>有助于不同区块链网络之间的互操作性，通过创建支持跨链通信的侧链。</td>
</tr>
<tr>
<td><strong>新型协议和功能实验</strong></td>
<td>用于测试和实验新的区块链协议和功能，而不会影响主链的稳定性。</td>
</tr>
<tr>
<td><strong>资产跨链转移</strong></td>
<td>允许在不同的链上传输和交换资产，解决数字资产互通性的问题。</td>
</tr>
</tbody>
</table>
<p>侧链技术则是将交易处理转移到一个与主链并行的区块链上。侧链与主链之间可以通过桥接技术进行连接，以实现资产的转移。侧链可以根据需要设计不同的参数，以满足不同的扩容需求。</p>
<p><strong>2.闪电网络（Lightning Network）</strong><br>
比特币作为最大的数字货币体系,每秒处理交易的数量为 $7$笔,每笔交易最终确认需要等待至少$6$ 个块的时间，这样的处理效率显然无法满足现实应用的需求,与金融系统的交易速率更无法相比。为了解决比特币中存在的交易处理慢问题，闪电网络应运而生，<strong>它实际上也属于侧链技术的一种</strong>,通过在不同交易方之间建立一条链下可扩展的微支付通道,多方之间在链下完成频繁的双向交易操作,无须链上交易全网确认,显然会提升比特币交易处理的效率。</p>
<p>闪电网络模型如图 $1.7 $所示,假设 $Alice$ 和$ Bob $两人之间需要频繁地进行交易，显然这将会产生高昂的交易费用,并且,其交易效率也难以满足一般的商业场景的要求。基于以上困难,两人通过闪电网络开启一条微支付通道。在开启支付通道中,$Alice $和 $Bob $各自将$ 10 $个比特币转给一个由双方共同控制的地址账户,该地址账户的共同管理可以通过多重签名技术来实现。开启支付通道的过程是一笔普通的交易上传到比特币网络当中，一旦交易最终确认,则双方可以在链下的支付通道里进行频繁的交易操作。直至双方确认不会再发生交易，想通过类似提现的方式来获取最后的金额,则可共同约定关闭该通道。</p>
<p><img src="/img/blockchain_sec/1_3.jpg" alt="闪电网络模型"></p>
<p>在闪电网络中,主要通过 $RSMC(Recoverable\ Sequence\ Maturity\ Contract)和HTLC(Hashed\ TimeLock\ Contract)$两种方法来解决链下交易中面临的一些安全问题，$RSMC $称为可撤销的顺序成熟度合同,支持了双向的支付通道,开始时两方都向共同地址中发送一笔资金进行锁定。通过设定惩罚机制,假定某一方中途退出,则需要等待一段确认时间。而另一方确认对方有非法操作,可无须等待立即拿走所有的资金,以此来保证交易的双方不出现抵赖或者反悔行为。在微支付通道中的每一步交易操作都由密码学技术来保证执行的有效性。</p>
<p>$RSMC$实现了两方之间的双向支付通道($Alice $和$ Bob$),但存在的一个问题是,如果任意的两人之间进行交易都需要相互协商来建立一条支付通道，显然不是很高效的。为了支持不同用户在无须建立支付通道的前提下实现链下的安全交易,就产生了 $HTLC$。$HTLC$称为哈希时间锁合约,它是为了支持在不同节点之间在微支付通道交易而产生的。假设 $Alice $和 $Bob$ 之间存在一条支付通道,$Bob$ 和 $Carl$之间也存在这样一条支付通道。当$Alice$和 $Carl$之间需要进行交易时,可以无须再建立一条新的通道,基于 $HTLC$就可以实现 $Alice $和$Carl$之间的交易操作:$Alice $通过$ HTLC$ 锁定一定金额的资金$ y$,同时选取一个秘密参数值$x$,通过设定一定的时间期限 $T$,如果 $Bob$ 能够在$ T $时间内向$Alice$ 出示$ H(x)$,$Bob$ 就能获得这笔资金;如果在约定 $T$时间内无法提供 $H(x)$,则这笔金额将被自动解锁并返还给 $Alice$。同理,$Bob$和 $Carl$之间的交易操作也可以按照此过程执行,这样$Alice$和$Carl$ 两方之间完成链下的 $HTLC$交易操作,如图 $1.8$ 所示。</p>
<p><img src="/img/blockchain_sec/1_4.jpg" alt="闪电网络模型"></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>RSMC（Recoverable Sequence Maturity Contract）</th>
<th>HTLC（Hashed Time-Locked Contract）</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>用途</strong></td>
<td>主要用于支付通道内部的资金管理和通道的关闭。</td>
<td>用于实现闪电网络中的跨支付通道的支付。</td>
</tr>
<tr>
<td><strong>合约类型</strong></td>
<td>二者间有共同点，是比特币脚本合约的一种。</td>
<td>具体实现了HTLC概念，是跨通道支付的基础。</td>
</tr>
<tr>
<td><strong>交易延迟</strong></td>
<td>RSMC具有相对较短的交易延迟，支持快速的资金锁定和解锁。</td>
<td>HTLC引入了时间锁，支付可能需要一些时间来完成。</td>
</tr>
<tr>
<td><strong>资金锁定和解锁</strong></td>
<td>RSMC允许通道内的资金被快速、灵活地锁定和解锁。</td>
<td>HTLC在支付开始前会锁定资金，支付完成后解锁资金。</td>
</tr>
<tr>
<td><strong>可撤销性</strong></td>
<td>RSMC支持支付通道的双方都能主动撤销未广播的交易，提供较强的可撤销性。</td>
<td>HTLC本质上支持原子交换，具有更强的可撤销性。</td>
</tr>
<tr>
<td><strong>冗余交易</strong></td>
<td>RSMC的撤销交易较为冗余，因为每次更新通道状态都需要新的撤销交易。</td>
<td>HTLC引入的Revocable Sequence Maturity Contract（Revocable RSMC）减少了冗余。</td>
</tr>
<tr>
<td><strong>支付追踪和解密</strong></td>
<td>RSMC的支付更易于追踪，因为没有对支付金额进行加密。</td>
<td>HTLC的支付通过哈希锁定，对支付金额进行了加密。</td>
</tr>
<tr>
<td><strong>隐私性</strong></td>
<td>相对较低，因为支付金额是公开的，可能泄露用户的交易信息。</td>
<td>相对较高，支付金额是加密的，提高了用户的交易隐私。</td>
</tr>
<tr>
<td><strong>典型应用场景</strong></td>
<td>通道内部的资金管理，通道的开启和关闭。</td>
<td>实现闪电网络中的跨支付通道的支付。</td>
</tr>
</tbody>
</table>
<p><strong>3.zk-SNARK（Zero-Knowledge Succinct Non-Interactive Argument of Knowledge）</strong></p>
<p>区块链技术实现了一套无须依赖可信机构的去中心化应用,所有的交易信息都需通过广播、验证和确认的方式最终被写入区块链,且生成的交易信息无法抵赖，也无法否定。然而,这些交易详情是在众目睽睽之下完成验证和确认的，这也意味着，交易的发起者、接收者、接收时间、金额数量等信息都是公开的。然而,在很多的应用场景里，这些交易信息属于敏感信息,用户不愿对外公布,包括对区块链平台的维护者。那么，如何在即保证数据是真实、准确的情况下,又能同时保证对数据进行可验证呢? 基于零知识证明技术就可以被用来解决此问题。</p>
<p>20 世纪 80 年代初,S.Goldwasser,S, Micali 及 c.Rackoff 等人提出了零知识证明的概念,他们设想在一些特殊场景之下,证明者需要让验证者相信某个论断是正确的，但是出于隐私性的考虑,却又无法将证明的对象直接呈现给验证者,而零知识证明旨在使得证明者在不向验证者提供任何隐私信息的情况下,达到证明者的目的。在零知识证明协议过程中,可能涉及两方或更多方完成一项任务所需采取的一系列步骤。证明过程中证明者在不向验证者泄露任何关于被证明消息的信息的情况下,向验证者证明并使其相信自己知道或拥有被证明消息。交互式零知识证明是指在证明过程中,证明者和验证者之间必须经过交互才能完成的零知识证明,与此相反,在定理证明过程中证明者和验证者不需要交互的零知识证明被称为非交互零知识证明。零知识证明是密码学为我们提供的强大利器之一。如果将零知识证明用于安全验证,许多场景下的数据安全问题可以得到有效解决。</p>
<p>零知识证明是一种密码学技术，它可以让一个人向另一个人证明自己知道某个秘密，而不需要透露这个秘密本身。零知识证明具备以下三个特性：</p>
<ul>
<li><strong>完备性</strong>：如果证明方和验证方都是诚实的,并且它们都遵循证明过程的每一步来进行正确的计算,那么这个证明一定会是成功的,验证方一定会接受证明方。</li>
<li><strong>可靠性</strong>：任何其他人都无法假冒证明方身份使得一个伪造的证明成功被验证方接受。</li>
<li><strong>零知识性</strong>：证明过程执行完之后,验证方只获得了“证明方拥有这个知识”的信息,而没有获得关于这个知识本身的任何信息。</li>
</ul>
<p>在零知识证明过程中,存在两方角色: 证明者($Prover$)、验证者($Verifier$)。下面以一个例子来说明零知识证明技术。图 1.9 所示的是一个山洞示意图,在山洞深处有一扇门。</p>
<p><img src="/img/blockchain_sec/1_5.jpg" alt="零知识证明示例"></p>
<p>只有知道咒语的人才能将其打开。证明者想向验证者证明,他知道打开这扇门的咒语,但是不想当着验证者的面将门打开,否则咒语就会被验证者知道。那证明者如何实现这个过程呢? 证明者进入山洞里面,验证者随机地喊出从右边进入,证明者随即从右边进入从左边出来。无论验证者选择让证明者从左还是从右，只要证明者能从相对应的门走出来,则说明证明者确实知道打开门的咒语。而在这个过程中,证明者没有向验证者透露任何关于咒语的信息,在确保咒语隐私的情况下,向验证者证明了“我知道咒语”这个事实。</p>
<p>另一个例子,有一个盲人手中拿了两个颜色不一样的圆球,一个正常人如何向这个盲人证明这两个圆球的颜色不一样? 并且这个正常人不能够向盲人透露球的颜色,也不能够找第三个人来参与。证明者(即正常人)要向验证者(即盲人)证明他知道球的颜色不一样,但盲人不能够知道其他任何信息包括球的颜色,以及不能够加入第三个人来帮助证明者证明球的颜色。那应该如何完成呢? 首先盲人每只手拿一个球,给正常人看过之后让他闭上眼睛,盲人可以选择交换两只手中的球或者不交换,然后让正常人睁开眼睛并说出盲人手中的圆球是否交换。经过多轮测试之后,如果盲人手中的球颜色不一样,那么正常人每轮都可以回答正确,这样就完成了零知识证明的过程。</p>
<p>这两个是零知识证明中的典型例子。在区块链中将零知识证明引入,可以实现在不需要泄露交易敏感信息的前提下实现对交易的有效性验证,这就是 $zk-SNARK$。$zk-SNARK$ 的全称是 $Zero-Knowledge Succinct Non-interactive Argument of Knowledge$。即零知识-简洁的非交互式知识证明。系统要求证明者在不透露自己敏感信息的前提下,向验证者($Verifier$)证明其确实知道某个信息，而且是真实的。$zk-SNARK$ 是一种简洁且非交互式的零知识证明,首先 $zk-SNARK$ 的构造必须简洁,简洁的零知识证明只需要毫秒就可以完成验证,证据($Proof$)长度只有几百字节。在传统的交互式零知识证明构造中,证明者和验证者需要来回发送几轮消息才能完成验证,而非交互式零知识证明只需要证明者向验证者发送一次证据即可让验证者相信证明人的论断($Statement$)是可信的。</p>
<p><strong>4.有向无环图（Directed Acyclic Graph，DAG）</strong><br>
为了解决区块链交易确认速率慢、资源消耗大的问题,有向无环图($Directed AcyclicGraph,DAG$)技术被提出来。$DAG$ 本质上是一种数据结构,同样属于分布式账本技术。与原有由区块组成的单链区块链不同,$DAG$ 是由交易所组成的网络。$DAG$ 中的交易在角色上类似于区块链的区块,这些交易被当作网络节点,共同组成了复杂的网络拓扑结构,如图1.10 所示。</p>
<p>$DAG$ 是异步共识的,基于图的方式以交易本身作为基础单元进行数据存储,有效提升了区块链在存储和效率方面的性能,包括 DagCoin,IOTA,ByteBall 等在内的系统采用的是基于 $DAG$结构的区块链技术</p>
<p><img src="/img/blockchain_sec/1_6.jpg" alt="区块链结构与有向无环图"></p>
<h2 id="第2章-区块链构造">第2章 区块链构造</h2>
<h3 id="比特币网络概览">比特币网络概览</h3>
<p><img src="/img/blockchain_sec/2_1.jpg" alt="比特币网络概览"></p>
<h3 id="区块的具体结构">区块的具体结构</h3>
<p><img src="/img/blockchain_sec/2_2.jpg" alt="区块的具体结构"></p>
<h3 id="区块难度-目标值">区块难度/目标值</h3>
<ol>
<li><strong>区块计算公式</strong></li>
</ol>
<p>比特币的新目标值是由难度值决定的，难度值是一个指数形式的十六进制数。难度值的计算公式如下：</p>
<p>$$<br>
\text{target} = \text{coefficient} \times 2^{8 \times (\text{exponent} - 3)}<br>
$$</p>
<p>其中，<code>coefficient</code> 是一个十六进制数，<code>exponent</code> 是一个整数。</p>
<p>比特币的新目标值会根据系统的平均出块时间来动态调整，以保证每10分钟出一个区块。调整的规则如下：</p>
<ul>
<li>每2016个区块产生后会调整一次（大约2周14天）</li>
<li>调整的计算公式是：</li>
</ul>
<p>$$<br>
\text{新目标值} = \text{旧目标值} \times \frac{\text{前2016个块生成所用实际时长}}{2016 \times 10分钟}<br>
$$</p>
<ul>
<li>最近2016个区块的预期时间，当然是：$2016 * 10min$。即：</li>
</ul>
<p>$$<br>
\text{预期时间} = 2016 \times 10 \text{分钟}<br>
$$</p>
<ol start="2">
<li><strong>哈希目标值</strong><br>
<img src="/img/blockchain_sec/2_3.jpg" alt="哈希目标值"></li>
</ol>
<h3 id="交易">交易</h3>
<ol>
<li>交易过程</li>
</ol>
<blockquote>
<p>一个地址的$UTXO（Unspent\ Transaction\ Output）$数值不能被分割花费，除非通过交易由该$UTXO$生成多个新地址的$UTXO$。</p>
</blockquote>
<p>交易(Transaction)是区块链中的重要组成部分,也是构成区块体的最基本单元。如图2.6所示,交易主要包含了如下5个数据域。</p>
<p><img src="/img/blockchain_sec/2_8.jpg" alt=""></p>
<p>(1)版本号($Version$):标识该笔交易所遵循的交易验证原则。</p>
<p>(2)时间戳($Timestamp$):指该笔交易生成的UNIX 时间，标识交易有效生成的时间。</p>
<p>(3)交易哈希值($Transaction\ Hash\ Value$):指该笔交易所有内容的哈希值,唯一标识该笔交易，也是存储在默克尔树叶节点的哈希值。</p>
<p>(4)输入($Input$):表示上一笔交易未被花费的输出，记为$UTXO(Unspent\ Transaction\ Output)$,它可以看作是现实世界中标识一定面额的纸币。</p>
<p>(5)输出($Output$):标识一笔转到新地址的 $UTXO$。一笔交易可以包含多个输入和多个输出,交易的所有输入必须是前面区块里未被花费的上一笔交易的输出。因此,类比于区块,所有交易根据$UTXO$链接成了有序可追踪的交易历史。</p>
<p>一个地址的$UTXO$数值不能被分制花费，除非通过交易由该$UTXO$生成多个新地址的$UTXO$。因此，在交易过程中,一个$UTXO$将被完全花费。当用户所需花费的数值大于他所拥有的一个$UTXO$所表示的数值时，需要花费另一个(或多个)地址的$UTXO$使得多个$UTXO$的数值总和大于所需花费的数值。简而言之,一笔交易的所有输出$UTXO$数值总和必须等于所有输入$UTXO$数值的总和。例如如图2.7所示，$Alice$使用比特币向$Bob$购买价值$3.0BTC$的商品，她发起交易(交易3)转给 $Bob$一个数值$3.0BTC$的$UTXO$由于$Alice$没有一个金额为$3.0BTC$的$UTXO$,只有两笔各为$2.5BTC$的$UTXO$(来自交易1和交易2)。因此,$Alice$只能将两个数值为$2.5BTC$的$UTXO$作为输入与$Bob$进行交易。交易除了生成数值为$3.0BTC$的输出外还生成了$2.0BT$C的输出(找零),这个输出会转到$Alice$的另一个地址(为了方便描述该例子中没有涉及交易费)。</p>
<p><img src="/img/blockchain_sec/2_4.jpg" alt="哈希目标值"></p>
<p>每个区块中都包含一笔特殊的交易,该笔交易被称为创世交易(或称为Coinbase交易),这笔交易用于把块奖励发放给对挖矿做出贡献的矿工,这也就说明了为什么区块的奖励都会转人矿工自己的账户。和其他普通的交易不同,创世交易没有输入,不需要消耗$UTXO$,只有一个称为$Coinbase$的值作为输入。</p>
<p>每笔交易还可以有另一个输出,用于支付交易费$(Transaction\ Fee)$。某笔交易的交易费可作为矿工确认该笔交易的挖矿奖励,它用于激励矿工验证该笔交易并将其放置在区块中,交易的交易费越高,越容易被确认处理。这是因为矿工为争取获得更多的收益会去选择交易费高的交易放进区块中，进而使得该笔交易越快被矿工验证确认。一般地交易费的数值通常被设置为$0.1mBTC/KB$,表示为每千字节的交易大小需要花费$0.1\times 10^{-3}BTC$。</p>
<p>在比特币中,矿工只把验证有效的交易放入新的区块,同时,其他矿工在验证区块有效性时,也会验证交易的有效性,若该交易不是有效的,则该区块不会被接受。参与节点在验证交易过程中,除了需要验证交易数据结构的正确性外,还需要验证交易输入的所有权(见2.4节),以及检查输入的$UTXO$是否已经被花费过。之所以检查$UTXO$是否被花费是为了防止双重支付攻击。在现实世界中,1 元钱一旦花出去,不可能被重复花费然而数字形式的货币花费出去之后,很有可能再次被用来与其他人进行交易。区块链技术可以抵御双重支付攻击,这是由于区块链的每个全节点存有一个 $UTXO$ 数据库，可以通过该数据库来检查交易输入是否为未被花费的 $UTXO$。此外,区块链还提供了简单支付验证机制$(Simple\ Payment\ Verification,SPV)$,其他参与节点(如轻量级节点)也可以借助该机制对交易进行快速验证。具体方法是计算交易的哈希值和默克尔树根节点值并在必要时向全区块链参与节点请求构造默克尔树的中间节点的哈希值,即可验证该笔交易是否存在于历史区块中。</p>
<h3 id="密钥和地址">密钥和地址</h3>
<p>比特币地址的生成是通过对公钥进行双重哈希,它可以被公开用来接收 $UTXO$。公钥相对应的私钥则由用户秘密保存,它是有权花费对应地址 $UTXO$ 的证明。目前，比特币地址的格式被分为两种:发送到公钥地址的格式$(Pay-to-Pubic-Key-Hash,P2PKH)$和发送到脚本地址的格式$(Pay-to-Script-Hash,P2SH)$。下面主要介绍 $P2PKH$ 的生成方式,后一种格式与其类似。</p>
<p>比特币地址采取了基于 $Base58 $编码的方式来生成地址,主要是为了消除一些易混淆的字符。实现过程相比于其他的 $Base64$ 编码,在字符的选择上有一些细微的差别,它不包含字符$0、O、I$和$l$,以及$+$和$/$。如图 2.8 所示,首先,使用 $RIPEMD-160$ 哈希算法和$SHA-256$ 哈希算法计算版本号加上公钥的双重哈希结果。版本号指明了格式的类别，使用$0x00$ 表示前一种格式,$0x05$ 表示后一种格式,$P2PKH$的版本号为$3$。然后,将 $20$字节的双重哈希结果加上版本号通过两次 $SHA-256$ 哈希计算得到 $36$ 字节的校验码，用来检验地址的正确性。最后,只取校验码的前$ 4 $字节加上 $1$字节的版本号和 $20$ 字节的双重哈希结果通过$ Base58$ 编码得到 $26-35$ 个字符不等的地址。可以看出，经过如图 2.8 所示的计算步骤之后,生成的地址相比于公钥长度要短。</p>
<p><img src="/img/blockchain_sec/2_5.jpg" alt="比特币网络地址产生过程"></p>
<h3 id="脚本">脚本</h3>
<p>2.3节介绍了交易的基本概念，交易的输入和输出也都包含相应的交易数据和脚本。其中,脚本是指在验证交易数据有效性过程中的逻辑指令,它实际上是基于堆栈操作编程语言的执行脚本,线性地执行所设计的指令。另外,比特币不支持图灵完备程序语言的交易脚本,例如,不支持跳转循环等复杂指令,该特性也使得节点在验证交易过程中避免遭受拒绝服务$(Deny-of-Service,DoS)$攻击。执行时间是指针执行到脚本最后一个指令所用的时间。为了保证简洁的脚本运行,减少执行时间,比特币只定义了几种比较通用的脚本执行规则:$P2PKH$、$P2SH$和多签名交易类型。最常见的执行脚本是 $P2PKH$类型的脚本它允许多个输入$UTXO$转给多个输出的$UTXO$以下将重点个绍这种类型的执行规则。</p>
<p>$P2PKH$类型的执行脚本包含了解锁脚本$(ScriptSig)$和锁定脚本$(SriptPubKey)$具体来说,解锁脚本包含在输入中,它包含一个公钥和签名,是作为交易发起者有权花费相应$UTXO$的证明。相应地，锁定脚本包含在输出中,它指定了一些与解锁脚本做运算的堆栈指令和基于公钥生成的双重哈希值。</p>
<p>为了便于理解,本节以$2.3$ 节中的图 $2.7$ 为例,进一步解释如何验证交易3输入的有效性,即 $Alice$ 如何证明其具有花费交易 $3$输入的所有权。具体地说,$Alice$ 通过上一笔交易得到发送到其公钥的 $Base58$ 地址的 $UTXO$,并利用私有的解锁脚本发起交易 $3$，其中解锁脚本包括了 $Alice$ 的公钥以及使用相应私钥生成的签名。交易$ 3 $的输入要被验证有效需要执行 $P2PKH$类型的脚本规则，$Alice$的解锁脚本和上一笔交易输出的锁定脚本一起执行一系列堆栈操作。堆栈操作指令是在上一笔交易输出锁定脚本中定义的,它指定了关于 $Alice$公钥的双重哈希值，即 <code>&lt;pubKeyHash&gt;</code> 和与解锁脚本进行运算的堆栈指令,其中,$OP_DUP$操作表示复制栈顶元素,$OP_HASH160$操作表示对栈顶元素执行双重哈希运算，$OP_EQUALVERIFY$操作表示验证<code>&lt;pubKeyHash&gt;</code>和栈顶元素是否相等,$OP_CHECKSIG$ 操作表示用公钥验证签名是否有效。如图 $2.9$ 所示，如果 $OPEQUALVERIFY$操作的结果为 $TRUE$,则 $OP_CHECKSIG$ 指令被执行;如果$OP_CHECKSIG$ 指令执行后结果为 $TRUE$,则表明交易$3$ 的输入是有效的，也就是说，$Alice$是此$UTXO$的所有者,可以花费此 $UTXO$。上述过程中只提到交易$3$的一个输入，它的另一个输入验证也是同样按类似的过程完成。对于交易 $3$ 的输出，$Alice$ 发起交易时，将输入$UTXO$中的锁定脚本的<code>&lt;pubKeyHash&gt;</code>替换为 $Bob$公的双重哈希值，当$ Bob$想花费这笔交易的输出$UTXO$时,他只需要提供公钥和对应私钥生成的签名即可。</p>
<p><img src="/img/blockchain_sec/2_9.jpg" alt="比特币网络地址产生过程"></p>
<p>为了保证安全性，比特币脚本只支持有限个数的指令操作(最多 $201$ 种指令)和有限长度的脚本(最多$10 000$ 字节),不支持跳转、循环等复杂指令,被认为不是图灵完备的,这也使得比特币区块链无法完成除验证数字交易之外更复杂的逻辑操作。针对比特币这方面的不足,以太坊平台开发了具备图灵完备性的复杂脚本智能合约$(Smart\ Contract)$。支持跳转和循环调用等操作。以太坊智能合约是一种基于虚拟机执行环境下的汇编语言,支持用户开发各种各样去中心化的区块链应用。为了限定脚本执行的时间,抵抗 $DoS$攻击,以太坊规定脚本在执行前需预估脚本执行的计算开销(称为 $Gas$,也是脚本被执行需要支付的费用)。然而,$Gas$ 的规定可能对以太坊的用户带来损失，因为当预估的 $Gas$不足以支持脚本实际执行所消耗的开销时,以太坊虚拟机将完全回滚脚本的执行状态,而$Gas$ 已经支付给以太坊的矿工。没有实际执行脚本并不能知道执行的准确开销，这通常被称为不能支持代码静态分析。基于此,区块链研究者们又提出了既具有图灵完备性又能支持代码静态分析的抗$ DoS $攻击的区块链脚本语言,如 $Simplicity、Spedn$。</p>
<h3 id="区块链网络拓扑">区块链网络拓扑</h3>
<p>与比特币网络类似,大多数公有链采用了基于点对点$(Peer-to-Peer,P2P)$非结构化的网络拓扑结构来构建区块链网络。在该拓扑结构中,网络的各个参与节点被认为是资源对等的,共同提供网络服务。这种网络结构能够使一个区块链系统快速、随机化地组织网络,支持网络参与节点的频繁接入和断开,具有较高的容错性。对于联盟链和私有链它们的区块链网络的规模通常比公有链网络小,所以倾向采用全连接的网络拓扑结构总体而言,根据通信目的的不同,区块链节点之间的通信可以分为以下两种方式。</p>
<p>(1)为了维持节点与区块链网络之间连接的通信。通信内容包括索取其他节点的地址信息和广播自己的地址信息。当有新的节点加入区块链网络时,该新节点首先会读取种子节点的地址信息，然后向这些种子节点请求其相邻节点的地址信息,当新节点连接上这些相邻节点后,它继续向这些相邻节点请求更多的相邻节点地址信息并与其建立连接，直到节点的相邻节点数量达到稳定。节点加入区块链网络以后,各个节点会定期以 ping的方式确认其相邻节点是否可达,如果存在不可达节点,就使用新节点替代这些不可达节点。另外,节点也会定期向其相邻节点广播自己的地址信息,以确保新节点的信息被更多节点接收。</p>
<p>(2)为了完成区块链上层业务的通信。通常来说,通信的内容包括转发交易信息和同步区块信息(在这里,交易和区块是区块链中的数据结构,将在交易层介绍)。在转发交易信息方面,节点采用的是中继转发模式。具体来说,发送节点先向其相邻节点转发此交易,待相邻节点收到交易后,它们再转发给自己的相邻节点,并以这样的方式进行下去,直到将交易传输到整个区块链网络。在同步区块信息方面,节点采用的是请求-响应模式。具体来说，一个节点可以向其相邻节点发送自己本地所保存的区块链高度,若该高度小于其相邻节点所保存的区块链高度,该节点就请求自己欠缺的区块;若大于其相邻节点所保存的区块链高度,则其相邻节点反向请求区块信息。在这种模式下,每个节点不断地和各自的相邻节点交换本地保存的区块信息,从而使整个网络中所有参与节点都同步存储一致的区块链信息。</p>
<h3 id="区块链网络协议">区块链网络协议</h3>
<p>一般来说,随机组织网络的网络协议主要有两种:<strong>基于 DNS 服务器协议和基于Kademlia 协议</strong>。本节就以一个新节点准备加入比特币网络时随机发现网络节点的例子来介绍这两种网络协议。对于基于 DNS 服务器协议的区块链网络来说,一个节点新加入时会首先去询问区块链系统中已经编好码的 DNS 服务器,得到一组随机化的已经存在于区块链网络的节点的 IP 地址,然后节点会将这些地址填充到它的对等节点连接列表中。对于基于 Kademlia 协议的区块链网络来说,由于网络中的每个节点都维护了$160$个存有网络信息的哈希列表,一个新加入的节点可以获取任意网络节点中存储的节点信息,它通过向网络节点发送查询命令来填充自己的列表。由于随机化连接节点的方式可能存在某些对等节点的连接路径不是最优路径的问题，一些研究者提出了以连接最近节点来组成区块链网络架构的方法。</p>
<p>在比特币中,大多数的参与节点基于DNS服务器协议加入网络。通常情况下，参与区块链网络架构的方法。节点通过监听 $8333$端口来接收外来连接,每个节点最多同时可以向其他节点发起$8$条连接,且同时接收不超过$125$ 条的连接。比特币网络为了检测参与节点的加入和离开状态，它要求参与节点每隔$24$小时发送 $addr $消息向全网广播自己的$IP$ 地址，得到$addr$消息的节点可以向相邻节点转发该消息。参与节点除了通过 $addr$ 消息发现其他节点之外,也可以发送 $getaddr$ 消息请求以获得其他节点的$IP $地址,从而获得网络中大多数节点的$IP$地址。</p>
<h3 id="区块链数据传播">区块链数据传播</h3>
<p>如图2.10所示,在数据传播方面,参与节点通过发送$inv$ 消息向所有邻居节点发送区块或者交易的哈希数据,邻居节点首先判断接收到的哈希数据是否为新的数据,如果是新的数据，则向节点发送$getdata$ 消息获取哈希数据所对应的区块或者交易的实际数据,然后验证数据的有效性,并以同样的方式向它们的所有邻居节点传播数据。由接收者主动发送$getdata $请求数据的方式避免了不必要的网络流量。另一方面，比特币网络会每隔$100$毫秒随机地中转部分$inv$消息以实现将交易传播给网络的大多数节点。对于主动发送$inv$ 消息的参与者来说,如果它们的交易没有被处理,可以多次重发交易数据。</p>
<p><img src="/img/blockchain_sec/2_6.png" alt="比特币交易传播"></p>
<p>在$P2P$的网络架构下,对等节点之间是通过洪泛的方法发送消息的，这使得区块链网络很容易随着网络节点的增多而加大负载.甚至有些网络连接因网络资源有限而断开进而造成网络分片现象。例如,针对比特币区块链提出的网络 $BlockNDN $无法防止网络分片现象发生。同时,采用基于$ P2P $的网络结构也是导致区块链系统延展性受限的影响因素之一，目前一些试图提高比特币区块链延展性的工作没有考虑这种因素,因此这些方案的有效性还有待分析。例如,试图增加区块大小容纳更多的交易数据来提高区块链的交易吞吐量,但是由于网络带宽的限制,这反而增加了块传播时间。此外,还有试图增加节点连接度来使区块尽快传播到更多的网络节点,然而这进一步加大了网络负载,容易导致网络分片。为了应对 $P2P$应用层网络的局限性,研究者陆续提出了优化后的区块链网络协议,如$BCXP$。</p>
<h3 id="区块链节点">区块链节点</h3>
<p>一般来说,根据一个区块链系统的身份管理机制的不同,节点加入网络的限制也不同。对于公开链,节点可以任意地加入或者离开区块链网络,而对于联盟链或者私有链系统对节点的加入有严格的身份验证机制。区块链中长期参与的节点彼此之间并没有功能和角色上的区分,每个节点的作用是对等的,一个节点既可以作为客户端同时也可以作为服务器。如图2.11所示,区块链中的节点通常是路由、共识、钱包、区块链数据库多个功能的集合。路由功能是指节点在全网络中提供路由转发功能。钱包包括以下两种:冷钱包(Cold Wallet)和热钱包(Hot Wallet)。冷钱包指的是脱离了网络连接的离线钱包利用离线存储的方式对数字货币进行管理。相反地,热钱包需要连接网络来进行交易，因此也是极易遭受攻击的一种钱包类型。</p>
<p><img src="/img/blockchain_sec/2_7.jpg" alt="区块链节点功能"></p>
<p>在某个特定时间段内,依据区块链节点执行操作的不同,节点可以被分为3种:全节点、轻量级节点和共识节点。具体来说,全节点存储了整个区块链数据的完整备份,因此可以独立地验证任意一笔交易数据的有效性。轻量级节点只备份了区块头数据,因此在验证某笔具体交易时,需要向全节点请求相应的区块数据协助验证。对于共识节点,它可以是全节点也可以是轻量级节点,主要参与运行区块链的共识协议,同时与其他节点通信并交换信息来保证区块链数据的一致性,它也被称为矿工。</p>
<p>本质上讲,整个区块链系统的安全性取决于所使用的共识协议。通常情况下,区块链系统所采用的共识协议决定了系统中所能容忍的恶意节点数量。为了保证系统的安全性,恶意节点在全节点中所占的比重不能超过一定的阈值。假定全节点数量为$ n$,对于比特币来说,恶意节点数不能超过 $50%$,即$n/2$。其他基于拜占庭共识协议的区块链容忍较低的恶意攻击者数量为 $n/3$,这部分内容将在第 $4$ 章进行阐述。</p>
<h2 id="第3章-区块链密码学基础">第3章 区块链密码学基础</h2>
<h3 id="群的基本定义及性质">群的基本定义及性质</h3>
<h4 id="群的定义">群的定义</h4>
<p>在非空集合$G$上定义一个二元运算符“$·$”,并且该集合满足下面4个属性。</p>
<ol>
<li>封闭性:对于任意$a,b∈G$,有$a·b∈G$.</li>
<li>结合律:对于任意$a,b,c∈G$,有$a·b·c=(a·b)·c=a·(b·c)$。</li>
<li>存在单位元: $∃i∈G$,对于元素$a∈G$,都可以得到$a·i=i·a=a$。</li>
<li>存在逆元:对于任意$a∈G$,存在一个元素$a^{-1}∈G$,使得$a·a^{-1}=a^{-1}·a=i$。</li>
</ol>
<p>$a^{-1}$则为元素$a$在集合$G$上的逆元。</p>
<p>如果某个代数系统满足上述所有性质，则称其为群$(Group)$,记为$(G,·)$。</p>
<p>交换律:对任意的$a,b∈G$,有$a·b=b·a$。</p>
<p>如果某个群除了满足以上封闭性、结合律、存在单位元、存在逆元4 个属性之外,还满足交换律,则称该群为交换群或者阿贝尔群。</p>
<h4 id="群的性质">群的性质</h4>
<ol>
<li>群中的单位元是唯一的。</li>
<li>群中任一元素的逆元是唯一的。</li>
<li>对于任意的$a,b,c∈G$,如果有$a·b=a·c$,则有$b=c$。</li>
<li>对于任意的$a,b∈G$,有$(a·b)^{-1}=b^{-1}·a^{-1}$。</li>
<li>对于任意的$a∈G$,元素$a$与自身的$n$次运算,其中$n∈N$,可以表示为<br>
$a^n=a·a·…·a$</li>
</ol>
<p>这里需要注意$n=0$的情况,定义$a^0=i$,其中元素$i$是$G$中的单位元。</p>
<p>如果分别使用普通乘法和普通加法的符号来定义$G$ 中的二元运算“$+$”和“$·$”,则对于乘法运算,$a^n$表示$a$ 的$n$ 次幂,加法运算 $na=a+a+…十a$,可以得到如表 3.1所示的性质。</p>
<p>如果群$G$中包含的所有元素个数是一个有限整数,则称$G$为有限群,否则称为无限群。<strong>有限群$G$ 中元素的个数,称为这个有限群的阶</strong>。若$G$ 是一个有限群,它的阶表示为 $|G|$ 。</p>
<p>特别地，如果一个集合在某种运算上是一个群,但其在其他运算上未必是一个群。</p>
<h4 id="有限域">有限域</h4>
<p>有限域指的是包含有限个元素的域。显然，$Z_q$（$q$为素数）就是一个有限域。可以得到关于<strong>有限域的性质为有限域的阶必为素数的幂</strong>。举例而言，假设 $F$ 是一个有限域，则存在素数 $p$ 和正整数 $n$，使得 $|F| = p^n$，将这个有限域记为 $F^n_p$ 或 $GF(p^n)$。反之，对于每一个这样的素数幂 $p^n$，都存在这样唯一的阶为 $p^n$ 的有限域。当 $n=1$ 时，把有限域 $GF(p)$ 称为素数域。密码学中普遍采用的域是阶为 $p$ 的素数域 $GF(p)$ 和特征为 $2$ 的 $GF(2^m)$ 域。</p>
<h3 id="整数群、椭圆曲线群和双线性映射群">整数群、椭圆曲线群和双线性映射群</h3>
<h4 id="整数群">整数群</h4>
<p>由整数集合$Z$构成的群,即为整数群。整数群有如下的一些性质。</p>
<ol>
<li>整数集合$Z$在加法运算上可以构成阿贝尔群,写作$(Z,+)$,它的全部元素都是$1$生成的,$0 $是这个群的单位元,每一个元素的逆元是自身的相反数。</li>
<li>整数集合$Z$在乘法运算上不能够构成群,因为除了元素 $1$和$-1$外，其他所有素的乘法逆元都不存在。</li>
</ol>
<p>特别地,$(Z_p,+)$称为模 $p$ 的整数群,它包含的元素是模$p$的$p$ 个剩余类$([0],[1],[2],…,[p-1])$。显然,$Z_p$是一个加法循环群,$Z_p=&lt;[1]&gt;$,其中$[1]$就是它的一个生成元。对于任何与$p$互素的整数$r,[r]$都是$Z$的生成元。</p>
<h4 id="椭圆曲线群">椭圆曲线群</h4>
<p>椭圆曲线密码$(Elliptic\ Curves\ Cryptography,ECC)$是基于圆曲线数学理论的算法,属于公钥加密算法,是迄今为止被实践证明安全有效的三类公钥密码体制之一,其以高效性能在实际系统中被广泛应用。椭圆曲线离散对数问题的困难性决定了 $ECC$ 算法的安全性。椭圆曲线离散对数问题是一个比大整数因子分解问题($RSA$ 算法基础)以及离散对数问题($DSA $算法基础)更困难的问题。相比于 $RSA $算法,$ECC$算法的优势在其能够用更少的位长度获得与 $RSA $同等强度的安全性，因此$ ECC$ 算法可以节约计算开销、密钥管理存储开销以及通信带宽,使得$ECC$算法可以适用于一些计算能力较弱或者对移动性要求较高的设备,例如手机、智能卡等小型或移动型设备。</p>
<p>所有满足椭圆曲线方程点的集合就构成了椭圆曲线群下面将介绍 $3 $种基于不同域的椭圆曲线。</p>
<ol>
<li>实数域上的椭圆曲线</li>
</ol>
<p>椭圆曲线并非字面上理解的椭圆,只是它的曲线方程与计算椭圆的周长方程类似(见图 3.2)。一般来说,椭圆曲线指的就是维尔斯特拉斯(Weierstrass)方程，即<br>
$y^2+axy+by=x^3+cx^2+dx+e$</p>
<p>椭圆曲线是由满足方程的全体解集$(x,y)$再加上一个无穷远点$O$  构成的集合,该方程中的参数 $a,b,c,d$ 是满足某些定条件的实数。上述曲线方程通过坐标转化为以下的简化式,即<br>
$y^2=x^3+ax+b$</p>
<p>由这个方程确定的椭圆曲线记为 $E(a,b)$或$E$。椭圆曲线是关于 $x$轴对称的。椭圆曲线的加法运算可以定义为:如果椭圆曲线上 $3 $个点位于同一直线,那么它们的和为$O$。椭圆曲线上的加法也具有加法运算的一般性质,如交换律、结合律等。</p>
<ol start="2">
<li>有限域$GF(p)$上的椭圆曲线<br>
有限城$GF(p)$上的椭圆曲线定义为满足式(3.3)同余式的所有几何解$(x，y)∈GF(p)$和一个无穷远点$O=(x,\infty)$构成的集合:<br>
$$y^2=x^3+ax+b(mod\ p)$$<br>
式中$p$是一个大于$2^{100}$的素数;$a,b∈GF(p)$是满足$4a^3+27b^2\neq0(mod\  p)$的常数。这类椭圆曲线通常用$E_p(a,b)$来表示,即</li>
</ol>
<p>$$E_p(a,b)=\{(x,y)∪Ο | y^2≡x^3+ax+b(mod\ p)\}$$</p>
<p>该椭圆曲线上只有有限个点数 $N$(称为椭圆曲线的阶,包含有无穷远点)。$N$ 越大,安全性越高,即群中元素越多,越能抵抗穷举搜索攻击。</p>
<p>比特币系统的区块链实现采用的是椭圆曲线 $sep256k1$,$secp256k1$ 是基于有限域$GF(p)$上的椭圆曲线,其中$p=2^{256}-2^{32}-2^9-2^7-2^4-1$。</p>
<ol start="3">
<li>有限域$GF(2^m)$上的椭圆曲线<br>
有限域 $GF(2^m)$中的元素是$ m $位的字符串,这些字符串可以表示为系数在 $GF(2)$上<br>
的多项式:</li>
</ol>
<p>$$\lbrace a_{m-1}x^{m-1}+a_{m-2}x^{m-2}+···+a_1x+a_0:a_i∈\lbrace 0,1\rbrace\rbrace$$</p>
<p>$GF(2^m)$上的椭圆曲线是定义为满足同余式(3.6)的所有几何解$(x，y)∈GF(2^m)$和一个无穷远点 $O=(x,\infty)$构成的集合。</p>
<p>$$y^2+xy=x^3+ax^2+b$$</p>
<p>其中,$m&gt;160,a,b∈GF(2^m)$且$b\neq0$。这类椭圆曲线通常可以用 $E_2(a,b)$来表示,即$$E_2(a,b)=\lbrace(x,y)∪O | y^2+xy=x^3+ax^2+b\rbrace$$</p>
<h4 id="双线性映射群">双线性映射群</h4>
<p>双线性映射也称双线性配对,一个双线性映射是由两个向量空间中的元素,一起生成第三个向量空间中的一个元素的函数,并且该函数对每个参数都是线性的。总而言之,给出一个双线性群组的定义$(G_1,G_2,G_T,p,g_1,g_2;e)$,其中 $G_1,G_2和G_T$是阶为素数 $p$$的乘法循环群,$g_1和g_2$分别是$G_1和G_2$的一个生成元。一个映射 $e:G_1×G_2→G_T$称为双线性映射,当它满足如下3个性质。</p>
<ol>
<li>双线性:对于$∀a,b∈Z_p,均有e(g_1^a,g_2^b)=e(g_1,g_2)^{ab}$</li>
<li>非退化性:$∃g_1∈G_1,g_2∈G_2,使得e(g_1,g_2)≠1$。</li>
<li>可计算性:对于$∀u∈G_1,v∈G_2$,存在有效的算法计算 $e(u,v)$。<br>
若$G_1=G_2$,则称这个双线性映射是对称的,否则是非对称的。</li>
</ol>
<h3 id="密码学困难问题">密码学困难问题</h3>
<h4 id="离散对数问题">离散对数问题</h4>
<p>基于离散对数的公钥加密算法作为常用的公钥加密算法之一,其加密算法的安全性要远远高于基于大整数分解的 $RSA $加密算法，而且离散对数问题$(Discrete\ Logarithm\ Problem,DLP)$的计算复杂度要比大整数分解问题更高。经过多年研究，人们无法构造出一个概率多项式时间来解决离散对数问题的方案。</p>
<h5 id="离散对数问题定义">离散对数问题定义</h5>
<p>离散对数问题的定义为:当给定一个素数 $p$,以及有限域$Z_p$上的一个本原元$a$时，对$Z_p$上的任意正整数$b$,都可以找到唯一的整数$c,0&lt;c&lt;p-2$,使得$a^c≡b(mod\ p)$,通常用$log_a^b$来表示$c$。一般而言,如果仔细选择$p$,则可以认为该问题是难解的,目前还没有找到可以在多项式时间内计算离散对数问题的算法。为了抵抗已知的攻击，选择的素数$p$需要满足以下两个条件:一是为至少 $150 $位的十进制整数;二是$p-1$至少有一个大的素数因子。</p>
<h5 id="离散对数问题性质">离散对数问题性质</h5>
<p>离散对数问题的困难性与有限域上的生成元无关,任何可以计算$log_a^b$ 的离散对数算法同样可以用来计算任意其他底数的离散对数问题。</p>
<h4 id="大整数分解问题">大整数分解问题</h4>
<p>大整数分解问题$(Integer\ Factorization\ Problem,IFP)$指的是对于任意给定的两个大素数的乘积,找出该乘积的因子,这个问题是困难的。大整数分解问题是数论中的一个基本问题,普遍认为不存在高效的概率多项式时间算法能够分解一个大整数，因此它是一个非常重要的研究问题。</p>
<p>将大整数分解问题具体定义为:任意选定两个长度为$λ$的大素数$p$ 和$g$,并计算 $n=pq$。对于给定 $n$,若存在一个可忽略的函数$negl(λ)$,使得n能够被分解为 $p$ 乘以 $g $的概率不大于 $negl(λ)$,则可以称该大整数 $n$ 的分解问题是一个困难问题。</p>
<h4 id="CDH-DDH-问题">CDH/DDH 问题</h4>
<p>计算$ Diffie-Hellman(Computational\ Diffie-Hellman,CDH)$假设是 Whitfield Diffi和 Martin Hellmn 两位教授在构造密协议协商的时候提出来的。一般把任意群 $G$的三元素组$(g^x,g^y,g^{xy})$称为$DH$组。对于任意为素数$q$的循环群$G$,$g∈G$ 是一个生成元，二元函数$dh_g:G^2→G$的定义为:随机选择两个元素$X,Y∈G$,令$X=g^x,Y=g^y$,计算函数$dh_g(X,Y)=g^{xy}$。CDH同题的困难性指的是在已知$G,g,g^x,g^y$的情况下,计算二元函数$dh_g$是困难的,即存在一个可忽略的函数 $negl(λ)$,使得计算出二元函数 $dh_g$ 的概率不大于 $negl(λ)$。</p>
<p>判定 $Difie-Hedlman(Decisional\ Difie\ Helman,DDH)$假设是 $CDH $假设的判定形式,也就是计算问题对应的判定问题,用来判断不可分辨性。$DDH$ 假设具体定义如下:对于任意阶为素数$ g$ 的循环群$G$，$g∈G$ 是一个生成元,随机选取$3$个元素 $X,Y,Z∈G$，其中$X=g^x,Y=g^y,且有 dh_g=g^{xy}$。存在一个可忽略的函数$negl(λ)$,使得区分 $Z=dh_g$;或者$Z$是随机选取的概率不大于$negl(λ)$。</p>
<h3 id="BDH-DBDH-问题">BDH/DBDH 问题</h3>
<p>双线性 $Diffie-Hellman( Bilinear\ Diffie-Hellman,BDH)$问题是对给定的 $3$ 个元素$g^a,g^b,g^c$,计算$e(g,g)^{abc}$。具体定义如下。</p>
<p>计算$ BDH $假设是对于任意阶为素数$ q$ 的循环群$G_1,G_2,G_3$,其中 $g∈G_1,h∈G_2$是两个生成元,存在一个可高效计算的同构 $\phi:G_1→G_2$,使得对于生成元$g,h$,有$\phi(g)=h$。随机选择$a,b,c∈Z_q$,有 $g^a,g^c,h^a,h^b$,BDH 问题的难解性在于计算 $e(g,h)^{abc}$是困难的,即存在一个可忽略的函数 $negl(λ)$,使得计算出 $e(g,h)^{abc}$的概率不大于 $negl(λ)$。</p>
<p>同样地,$BDH $假设的判定形式是 $DBDH(Decisional\ Bilinear\ Diffie-Hellman)$假设。对于任意阶为素数 $q$ 的循环群$G_1,G_2,G_3$,其中 $g∈G_1,h∈G_2$是两个生成元,存在一个可高效计算的同构 $\phi:G_1→G_2$,使得对于生成元 g,h,有 $\phi(g)=h$。随机选择$a,b,c∈Z_q,W∈G_3$,已知 $g^a,g^c,h^a,h^b,e(g,h)^{abc}$,存在一个可忽略的函数 $negl(λ)$,使得区分$W=e(g,h)^{abc}$或者 $W $是随机选取的概率不大于$negl(λ)$。</p>
<h3 id="哈希函数">哈希函数</h3>
<h4 id="哈希函数定义">哈希函数定义</h4>
<p>密码学上的哈希函数$(Hash Funtion)$,也称杂凑函数。其目的是将任意长度的消息$m$ 压缩或者映射为某一固定长度的消息摘要,表示为 $H(m)$,该映射是一个多对一的映射。$H(m)$也可以当作消息 $m$ 的指纹,一旦 $m$ 发生变化,$H(m)$也会随之改变。</p>
<p>根据是否需要密钥,哈希函数可分为以下两类。</p>
<ol>
<li>带密钥的哈希函数:有两个不同的输入,分别为消息和密钥。一个带密钥的哈希函数通常用来作为消息认证码,即消息验证码$(Message\ Authentication\ Code,MAC)$。</li>
<li>不带密钥的哈希函数:只有一个消息输入,这样产生的消息摘要必须被安全存放,不能被篡改。</li>
</ol>
<p>根据设计结构,哈希函数可以分为$ 3$类。</p>
<ol>
<li>标准哈希函数。</li>
<li>基于分组加密的哈希函数。</li>
<li>基于模数运算的哈希函数等。</li>
</ol>
<p>目前,主要的标准哈希函数可以分为两类。</p>
<ol>
<li>$MD$系列的哈希函数,例如 $MD4、MD5、MDS、HAVAL、RIPEMD$等</li>
<li>$SHA$系列的哈希函数,例如 $SHA-1,SHA-256、SHA-384、SHA-512$等</li>
</ol>
<h4 id="哈希函数主要性质">哈希函数主要性质</h4>
<p>哈希函数H必须满足以下$6 $种性质。</p>
<p>(1) $H$的输入可以是任何大小的数据块,即 $H$ 的输入可以是任意长度的。<br>
(2) $H$的输出是固定大小的数据块。<br>
(3) 对任意消息$x$,求 $H(x)$是可行的,并可用软件或硬件实现。<br>
(4) 对任意给定的哈希值 $h$,找到 $x$ 且满足 $H(x)=h$,计算上是不可行的。<br>
(5) 对任意给定的值$x$,找到 $y$,满足 $H(x)=H(y)$并且$x\neq y$,计算上是不可行的。<br>
(6) 找到任意的 $x,y$ 且$x\neq y$,使得 $H(x)=H(y)$,计算上是不可行的。<br>
基于以上性质,可以将哈希函数分为两大类:弱碰撞哈希函数和强碰撞哈希函数。弱碰撞哈希函数与强碰撞哈希函数必须同时满足前 $3$ 个条件,主要区别在于后 $3$ 方面。</p>
<p><strong>弱碰撞哈希函数</strong><br>
满足上面性质$(4)$和$(5)$的哈希函数,称这个哈希函 $H(x)$是碰撞的。</p>
<p><strong>强碰撞哈希函数</strong></p>
<p>满足上面性质$(4),(5)和(6)$的哈希函数,称这个哈希函数 $H(x)$是强碰撞的在以上的性质中,性质$(4)$的意义是指哈希函数是单向性的,通常也称抗原像性,那么$H(x)$也是单向杂凑函数;性质$(5)$代表弱碰撞性,可以称为抗第二原像性;性质$(6)$代表强碰撞性，也可以称为抗碰撞性,用来防止攻击者对哈希函数实施自由起始碰撞攻击，即生日攻击。</p>
<h4 id="哈希函数安全性">哈希函数安全性</h4>
<p>哈希函数在密码系统中使用十分广泛，包括加密方案、签名方案等都有哈希函数的存在,因此哈希函数也已经成为很多黑客攻击的目标。对哈希函数的攻击主要在于破坏其某些特性。例如,可以根据其输出求得输入,找到某条消息使得它的输出与原消息的输出相同,或者找到不同的两条消息,使它们的输出相同。最具有代表性的对哈希函数的攻击为以下两种。</p>
<ol>
<li>
<p><strong>字典攻击</strong><br>
字典攻击$(Dictionary Attack)$的定义是,在破解密码或密钥过程中,通过逐一尝试用户自定义词典中所有可能的密码(单词或短语),这种攻击方式称为字典攻击。字典攻击与暴力破解相似,区别在于,暴力破解会逐一尝试所有可能的组合密码,没有预先预定好的单词列表,而字典攻击会使用一个预先定义好的单词列表(可能的密码)进行逐一尝试因此,字典攻击对用单向哈希函数加密的口令文件特别有效。攻击者通过编制含有多达几十万个常用口令的表,然后用单向哈希函数对所有口令进行运算,并将结果存储到文件中,攻击者通过非法途径获得加密的口令文件后,比较这两个文件,观察是否有匹配的口令密文,这种攻击方式的成功率非常高。</p>
</li>
<li>
<p>生日攻击<br>
生日攻击$(Birthday Attack)$的原理是一个统计问题。一个房间里有多少人才能够使得最少有一人与你的生日相同的概率大于 $1/2$ 呢?答案是 $253$。那么应该有多少人才能够使得他们中至少有两人的生日相同的概率大于 $1/2 $呢?$23$ 人即可。寻找特定生日的某人,或者是寻找两个随机的具有相同生日的两个人,与对单向哈希函数进行穷举攻击的方法是相同的原理:前者对应了给定消息$m$的哈希值$H(m)$,攻击者不断生成其他消息$m’$,以使得 $H(m)=H(m’)$;后者对应的场景是,攻击者寻找两个随机的消息 $m$和$m$并使得 $H(m)=H(m’)$,而后者称为生日攻击,这种攻击方式没有利用哈希函数的结构和任何代数弱性质,只依赖于消息摘要的长度,即哈希值的长度。为了抵抗生日攻击,哈希函数安全性的一个必要条件就是消息摘要必须足够长。</p>
</li>
</ol>
<h4 id="哈希函数主要应用">哈希函数主要应用</h4>
<p>在密码学中,哈希函数有非常多的应用场景,包含数据认证、数字签名、伪随机数生成和密钥生成等。</p>
<ol>
<li>
<p><strong>数据认证</strong><br>
哈希函数的重要应用之一就是生成文件或者消息 $m$ 的摘要值 $H(m)$,该值被安全地存储,对消息$m$的任意改动都可以通过对改动后的 $m $进行相同的哈希运算而被检测出来,这样的操作保证了数据的完整性,也可以实现对消息的安全认证。对于哈希函数的不同应用,包括 HMAC,即基于哈希函数的消息验证码,其基本思想就是用密钥和消息一起进行哈希操作,确保消息的完整性,使得在传输过程中对消息的任何修改都能够被接收者检测到。</p>
</li>
<li>
<p><strong>数字签名</strong><br>
哈希函数经常被应用在数字签名算法中。在现实应用中,需要签名认证的消息$ m $本身非常大,如果直接在消息 $m$ 上做数字签名效率会非常低。通常情况下,为实现对消息$m$ 的高效数字签名,首先计算出 $m$ 的哈希值 $H(m)$,然后采用私对 $H(m)$进行签名操作,所得到的 $Sig(H(m))$就是用户对消息 $m$ 的签名。利用哈希函数进行数字签名的优势是,可以实现对于消息的不可否认性,消息发布者只能用自己的私钥对哈希值进行签名,接收者使用发布者的公钥进行解密,从而确认消息确实由该消息发布者发出。</p>
</li>
<li>
<p><strong>伪随机数生成</strong><br>
从哈希函数的定义来看,哈希函数具有生成随机性质的数据序列的特征。通过选择一个随机函数,把消息的随机函数值作为它的哈希值来产生,从而得到伪随机数。因此，哈希函数也可以用作伪随机数的生成器。</p>
</li>
<li>
<p><strong>密钥生成</strong><br>
利用哈希函数的单向性,用旧的密钥计算出新的密钥序列,从而使得现有密钥具有泄露后不危及先前所用的密钥的性质,也就是使用哈希函数能够产生具有前向安全的密钥总体而言,哈希函数在密码学的应用中一直发挥着重要的作用,在区块链中也有着十分广泛的应用,如区块链中的链式结构就是通过让每一个区块包含上一个区块的区块头哈希值来实现的。此外,区块链中的默克尔树构造、工作量证明算法、钱包地址等都用到了哈希算法。</p>
</li>
</ol>
<h3 id="默克尔树">默克尔树</h3>
<ol>
<li><strong>基本概念</strong><br>
默克尔树$(Merkle\ Tree)$,也称 $Hash\ Tree$,是用于存储哈希值的二叉树。默克尔树<br>
包含叶节点和非叶节点,其中叶节点用于存放数据块(例如,文件或者文件的集合)的哈希值,所有非叶节点是其对应所有子节点的组合结果的哈希值。<br>
图3.5为一个默克尔树的结构。在树的最底层,也就是叶节点,类似于哈希列表，需要计算的数据被分制成不同的数据块,将数据块的哈希值存放于叶节点。接着计算时并不是直接计算叶节点的哈希值,而是把相邻的两个叶节点的哈希值合并成一个字符串，然后运算这个合并字符串的哈希值。例如,图 3.5 中 $H_6= H(H_2,H_3)= H(H(L_1),H(L_2))$，从而得到一个“子哈希值”。如果最底层的叶节点总数不是双数,那么必然出现一个无法配对的单身哈希数据块，这种情况就直接对它进行哈希运算,也能得到它的子哈希值。以此类推,就可以得到数目更少的新一层的哈希值,最终必然形成一个哈希树结构,直到树根的位置,就只剩一个根哈希值,称为默克尔树根节点值$(Merkle\ Tree\ Root)$。</li>
</ol>
<p><img src="/img/blockchain_sec/3_1.jpg" alt="默克尔树示意图"></p>
<ol start="2">
<li>
<p><strong>主要特点</strong><br>
默克尔树相比其他数据结构,具有一些特殊的性质。</p>
<ol>
<li>默克尔树是一种树状结构,大多数是二叉树，也有可能是多叉树,但无论是几叉<br>
树,它都具有树状结构的所有特点。</li>
<li>默克尔树的所有叶节点的值是数据集合的单元数据的哈希值。</li>
<li>默克尔树非叶节点的值是根据它左右子节点的值,按照特定的哈希算法计算<br>
得出。</li>
</ol>
</li>
</ol>
<p>一般而言,通常采用$SHA-2 $和 $MD5 $作为加密的哈希算法。但如果仅仅防止数据不是蓄意的损坏或篡改,可以改用一些安全性较低但效率较高的校验和算法,如循环冗余校验$(Cyclic\ Redundancy\ Check,CRC)$。</p>
<p>在区块链中,假设一个默克尔树包含 $N $笔交易数据当需要验证一笔指定的交易是否存在于某一区块中时，参与者至多花费 $2log_2(N)$次的计算就可以得到结果。这主要是由$Merkle $树的构建方式来决定的,它的叶节点值由交易数据的哈希计算得到,并自底向上计算哈希值构建更新上一层节点的数值,直到计算得到默克尔树根节点值,并验证其是否发生变化。假设区块中的交易数量为奇数,则可以重复某笔交易来获得偶数笔交易,避免叶节点无法配对的现象出现,并实现默克尔树的构建。</p>
<h3 id="布隆过滤器">布隆过滤器</h3>
<ol>
<li>
<p><strong>基本概念</strong><br>
20世纪70 年代,Burton Howard Bloom 教授提出了布隆过滤器(Bloom Filter)的概念,它的核心包含一系列哈希映射函数和一个很长的二进制向量,用于快速检索判断一个元素是否存在于某个集合中。布隆过滤器的优点在于空间效率和查询效率非常高,远远超过一般的算法,因为它在进行查询时,采用位数组表示一个集合,这样的算法结构大大节省了存储空间,提高了效率,但它也有不足之处:删除困难,以及存在一定概率的误识别,也就是假正例$(False\ Positives)$的现象，即当布隆过滤器经过运算向系统报告某一元素在集合中时,事实上它判断错误,该元素并不在集合中,布隆过滤器将一个不属于集合的元素误检测为集合中的元素。相对于假正例现象,布隆过滤器不会发生假反例$(False\ Negatives)$,也就是如果一个元素不在查询集合中,那么布隆过滤器是不会向系统报告该元素属于集合。换句话说,布隆过滤器判断一个元素不在集合中,就一定不在，但当它判断一个元素在集合中,就存在一定的判断误差,可能导致结果不准确。布隆过滤器的优缺点反映了它是用较小的错误率来换取较高的运算效率,适用能容忍容错率的应用场景，而无法适用“零错误”的场景。</p>
<p>布隆过滤器的常用的应用场景包含:判别某个元素是否存在于一个集合中,为实现这个目标,通常的做法是采用哈希表$(Hash\ Table)$数据结构,它可以通过一个哈希函数将一个元素映射成一个位阵列中的某个点,并且这些位阵列的初始值都为 $0$,当有元素映射到位阵列中的某一点时,就将这一点的值设置为$ 1$。因此,要知道某个集合中是否有该元素,只需要判断这个点在哈希表中对应的位置是否为$ 1$,就可以知道集合中有没有该元素。这就是布隆过滤器的基本思想,算法的具体过程如图 3.6 所示。将所有元素通过布隆过滤器保存至集合中,然后通过比较确定该元素是否存在于该集合。链表、树等结构也采用同样的方式进行判断。</p>
<p><img src="/img/blockchain_sec/3_2.jpg" alt="默克尔树示意图"></p>
<p>但采用这样的方式进行数据存储和查询,存在着一些难以避免的问题:首先，随着集合中元素的增加,哈希表所需要的存储空间越来越大,检索速度也会变得越来越慢。其次,这样的结构面临的另一个问题就是冲突,假设哈希函数是合适并且良好的，如果位阵列长度为 $m $个点,那么若想将冲突率降低到 $1%$,这个哈希表就只能容纳$ m/100 $个元素显然就无法实现所有空间有效的要求:为解决无法实现所有空间有效的问题，解决方法是可以使用多个哈希函数,数据可以采用多个哈希函数进行映射存储,便可以实现空间有效,正确判断某个元素是否在集合中。</p>
</li>
<li>
<p><strong>布隆过滤器的算法过程</strong></p>
<ol>
<li>选取$ k$个哈希函数,每个函数可以把目标数据 $d $哈希为 $1$个整数</li>
<li>初始化一个长度为$n $位的数组,每位初始化为 $0$。</li>
<li>在某个数据$d$ 加入集合时,用$k$个哈希函数计算出$k$ 个哈希值，并把数组中对应的位置为 $1$。</li>
<li>在判断数据 $d$ 是否存在于该集合时,用$k$个哈希函数计算出 个哈希值,并查询数组中对应的位,如果所有的位都是 $1$,则认为该$ key$ 在集合中;反之,则不存在。</li>
</ol>
</li>
<li>
<p><strong>布隆过滤器的主要特点</strong><br>
<strong>布隆过滤器的优势有以下 5 点:</strong></p>
<ol>
<li>空间上的低存储量和时间上的高效性,布隆过滤器的存储空间、插人和查询时间都是常数,相比于其他的数据结构,布隆过滤器有着天然具备的高效性;</li>
<li>布隆过滤器中采用的哈希函数相互之间没有关系,具有硬件并行实现的编辑性;</li>
<li>布隆过滤器不需要存储元素本身,因此对于某些保密要求非常严格的数据和场合,在安全性上相比其他数据结构具有绝对优势；</li>
<li>布隆过滤器可以用于表示全集数据,实现数据的完备性;</li>
<li>布隆过滤器还具备的特点是,当哈希函数的数量$k$和阵列数量 $m$ 相同时,使用同一组哈希函数的两个布隆过滤器的交并差运算可以使用位操作进行。</li>
</ol>
<p><strong>布隆过滤器也存在一定劣势:</strong></p>
<ol>
<li>随着存人的元素数量增加,数据查询的误算率也会随之增加。</li>
<li>从布隆过滤器中安全地删除元素信息较为困难,通常采用的方法是把位列阵变成整数数组,对插人元素进行计数,每插人一个元素相应的计数器加$ 1$,这样删除元素时将计数器减$ 1$。然而,这样的操作可能导致信息的泄露,因为首先必须保证删除的元素的确在布隆过滤器里面,而这一点单凭过滤器是无法保证的。</li>
</ol>
</li>
</ol>
<h3 id="数字签名">数字签名</h3>
<h4 id="基本概念">基本概念</h4>
<ol>
<li>
<p><strong>数字签名性质</strong></p>
<ol>
<li><strong>唯一性</strong>。对一个文档的签名,是指对文档的哈希结果进行签名,从函数的角度来说,文档和签名之间存在一一对应的映射关系,不同文档的哈希值不同,对它的签名结果也是不同的。</li>
<li><strong>不可否认性</strong>。签名者采用自己的私钥对某个文档进行签名,一旦签名完成,签名者不能否认该签名，同时其他人在不知道签名者私钥的情况下,不能够伪造该签名者的签名。</li>
<li><strong>时效性</strong>。为了避免一个签名被重复使用,文档的签名需要具备时间属性,保证签名的时效性。</li>
</ol>
</li>
<li>
<p><strong>数字签名分类</strong></p>
<ol>
<li><strong>按照签名用户分类</strong>。依照用户的个数分类,数字签名方案包括单个用户或多个用户的签名,通常情况下数字签名都是单个用户的操作,当有特别需求时会用到多个用户共同计算的数字签名,它被称为多重数字签名,依照签名的步骤中是不是有序,多重签名分为有序多重数字签名和广播多重数字签名。</li>
<li><strong>按照数字签名的特性分类</strong>。根据签名的特性分类,数字签名包括自动回复和不自动回复的签名方案。</li>
<li><strong>按照数学难题分类</strong>。依照签名方案根据的问题难解程度分类，数字签名包括基于离散对数问题的数字签名方案和基于大整数分解问题的数字签名方案。更进一步,著名的 EIGamal,DSS 签名方案便是基于离散对数问题的数字签名方案,RSA 签名方案是最突出的基于大整数分解问题的数字签名方案。离散对数问题中还包括一类椭圆曲线离散对数,椭圆曲线签名方案的安全性便是基于椭圆曲线离散对数问题的难以解决特性。</li>
<li><strong>按照数字签名的实现分类</strong>。按照数字签名的实现分类,数字签名包括仲裁数字签名和直接数字签名。仲裁数字签名涉及三方:签名者、接收者和仲裁者。完整的签名过程需要三方协作完成,其中仲裁者是一个可信第三方。直接数字签名的操作是在数据签名者和数据接收者之间完成的。</li>
</ol>
</li>
</ol>
<h4 id="椭圆曲线数字签名">椭圆曲线数字签名</h4>
<p>1985 年,Neal Koblitz 和 Victor Miller 提出了椭圆曲线密码$(ECC)$系统,它可以看作是离散对数密码系统的演化,只是元素的选取变换为椭圆曲线上的一个点。椭圆曲线密码系统的优势在于可以达到和离散对数密码系统同等安全性的同时,具有更小的参数、钥长度和更快的运算速率,因此能够适用存储、计算环境受限的场景。在椭圆曲线密码系统中,基于椭圆曲线离散对数问题$(Elliptic\ Curve\ Discrete\ Logarithm\ Problem,ECDLP)$的难解性,可以构造数字签名方案,也就是椭圆曲线数字签名算法$(Elliptic\ Curve\ DigiSignature\ Algorithm,ECDSA)$,下面重点介绍算法的执行步骤。</p>
<ol>
<li>
<p><strong>数字签名算法</strong><br>
$Alice$ 要将一份签名的消息发送给 $Bob$,为了保证通信的安全性,双方首先需要定义一组如下的椭圆曲线签名算法的参数:$(CURVE,G,n)$</p>
<p>具体来说,$CURVE$是选取的椭圆曲线的几何方程和点域,$G $是圆曲线上的基点表示可倍积阶数$(Multiplicative\ Order)$,它是一个很大的质数,几何意义在于满足 $nG=0$,即点倍积 $nG$ 的结果是没有意义的,而任何一个小于$n$的正整数$m=[1,n-1]$,点倍积$mG$ 都可以映射为该椭圆曲线上的一个点。</p>
<p>然后,$Alice$ 生成一对公钥和私钥。私钥是从$[1,n-1]$随机选取的,即$d_A=rand(1,n-1)$<br>
公钥计算如式(3.17)所示:$Q_A=d_A×G$</p>
<p>$Alice$ 通过以下步骤对消息$ m $进行签名。</p>
<ol>
<li>采用哈希函数$(MD5或 SHA-1)$计算消息$m$的哈希值,得到$e=H(m)$。</li>
<li>对$e$进行二进制分解，将最高位$L_n$个位记为$z$,其中$L_n$表示$n$的二进制长度。<br>
需要注意的一点是,$z $的取值可能大于 $n$,但长度不会比 $n$ 更长。</li>
<li>选择一个随机整数$ k ∈[1,n-1]$。</li>
<li>计算椭圆曲线上的点$(x_1,y_1)=kG$。</li>
<li>计算$r=x_1mod\ n$,若$r=0$,返回3。</li>
<li>计算$s=k^{-1}(z十rd_A)mod\ n$,若$s=0$,返回3。</li>
<li>$Alice$ 生成的数字签名为 $ρ=(r,s)$。</li>
</ol>
</li>
<li>
<p><strong>数字签名的验证</strong><br>
消息接收者 $Bob$ 收到的文件包含两部分内容:一个是签名文件 $ρ$,另一个是发送者的公钥,因此 $Bob $需要分别验证这两部分的真实性、有效性和正确性。</p>
<ul>
<li>验证公钥
<ol>
<li>公钥的坐标$Q_A$应该是有效的,不会等于一个极限值空点。</li>
<li>对公钥 $Q_A$的坐标进行验证,它必须是圆曲线上的一点。</li>
<li>公钥$Q_A$与$n$的关系必须满足条件:$ n×Q_A = O$</li>
</ol>
</li>
<li>验证签名文件
<ol>
<li>验证$ρ=(r,s)$均是处于$[1,n-1]$范围内的整数,否则验证失败。</li>
<li>计算$e=H(n)$。</li>
<li>计算$e$的二进制分解,并取最高位$L_n$个位，记为$z$。</li>
<li>计算$w,w=s^{-1}mod\ n$。</li>
<li>计算参数$u_1,u_2$,其中$u_1=zw\ mod\ n,u_2=rw\ mod\ n$。</li>
<li>计算$(x_1，y_1)$,判断$(x_1，y_1)$这个点是否属于椭圆曲线，若不是则验证无效,具体的验证方法是计算式(3.19),判断左右两边是否相等:$(x_1,y_1)=u_1×G+u_2×Q_A$；如果不成立,那么对消息$ m $的签名验证失败。</li>
</ol>
</li>
</ul>
</li>
</ol>
<h4 id="EIGamal签名">EIGamal签名</h4>
<p>基于有限域上离散对数问题难以解决的特性,1985年,有名的EIGamal数字签名方案得以提出。下面是获得签名结果所需要完成的具体步骤。</p>
<ol>
<li>任选一个大素数 $p$,群$G$上的一个本原元$α$和一个随机整数$d,d∈[1,p-2]$。</li>
<li>计算$β,β=a^d\ mod\ p$。</li>
<li>令$p,α,β$作为公钥，$d$ 作为私钥。</li>
<li>签名过程:计算消息的哈希值$x=H(m)$,任选整数$k,k∈[1,p-2]$,且$(k,p-1)=1$,然后令$r=α^k\ mod\ p,s=(x-dr)k^{-1}\ mod\ (p-1)$,则最终的数字签名结果是$(r,s)$。</li>
<li>对数据完成签名后,将最终的数据签名结果和明文数据共同传输给数据接收者</li>
<li>接收者收到消息后,计算$t=β^rα^s\ mod\ p$。</li>
<li>当满足:$t=α^x\ mod\ p$时,说明签名结果有效,消息在传输过程中是完整的,没有被篡改,否则表明签名无效。</li>
</ol>
<p>由于有限域上的离散对数问题是难解的,攻击者不能根据已知信息推测出私钥，保证了 EIGamal 数字签名方案的安全性。一般地,素数 $p$ 的长度不得少于 $1024 $位,签名方案由$(r,s)$数对组成,其中$r$和$s$的位长度都与$p $相同。</p>
<h4 id="多重签名">多重签名</h4>
<p>在数字签名领域,除了一个人对一份文件进行签名的情况,有时还需要多个人同时对一份文件进行签名,这种需求常常发生在电子商务、资金监管等场景。简单来说,就是多个用户对一份文件具有签名权,共同来产生文件的签名,这就是多重数字签名的含义。具体地,假定有 $N $个用户${1,2,…,N}$,每个用户都拥有一对公钥和私钥，用户用各自的私钥签署文件 $m$,最后得到关于文件 $m$ 的多重签名。</p>
<p>在多重签名的场景中,按照要不要提前约定签名者的签名序列,可以将多重签名分为有序多重数字签名和广播多重数字签名。顾名思义,有序多重数字签名就是将数据依照既定的排列顺序发送给签名者完成签名。与有序多重数字签名相反的广播多重数字签名方案中,每个签名成员各自完成单个签名数据,发给数据收集者,由收集者最终合成多重签名的数据,然后发给验证者来完成验证操作。多重签名主要包含 3 个参与方:消息发送者、消息签名者以及签名验证者。但需要注意的一点是广播多重数字签名中还需要引入消息收集者。常规地,多重签名包括 3 个算法:系统建立、获得签名和签名验证。</p>
<p>下面通过一个基于椭圆曲线的广播多重数字签名算法的例子来展示多重数字签名的<br>
过程。</p>
<ol>
<li>
<p><strong>系统建立</strong><br>
令$GF(q)$代表一个包括$q$个元素的有限域,这里 $q$ 是一个大于$2^{160}$的大素数,抽取$GF(q)$上一条安全的椭圆曲线 $E: y^2=x^3+ax十b(a,b∈GF(q))$,$G$ 是$E$ 的基点(即$nG=0$),$M$ 是需要签名的数据。设有 $m$ 个数据签名者 $U_1,U_2,…,U_m$,对每个签名者$U_i(i=1,2,…,m)$随机抽取一个隐藏值 $d_i(d_i∈Z_q)$作为自身的私钥,设置公钥 $Q_i=d_iG$并公布出去。$P$ 是一个预设的正整数。</p>
</li>
<li>
<p><strong>获得签名</strong><br>
对于每个签名者 $U_i(i=1,2,…,m)$和签名验证者$U_v$消息拥有者发送消息$(M,T)$，其中$T$是签名时间标志,要求签名者在给定时间 $△T$ 内完成签名。对消息 $M$，消息拥有者计算$e=H(M,T)$,并发送给$U_i$,和$U_v$,然后$U_i$和$U_v$进行如下操作。</p>
<ol>
<li>每一个签名者$U_i(i=1,2,…,m)$选取一个随机整数 $k_i$,其中$k_i∈[1,m-1]$。</li>
<li>计算$R_i=k_iG=(x_i,y_i)$,若$x_i=0$ 转回1;否则计算 $r_i=x_i\ mod\ m$。</li>
<li>签名者$U_i$计算$s_i=k_ie+d_ir_i\ mod\ m$,若$s_i=0$转1;反之将数据签名$(M,(r_i,s_i))$发送给数据收集者 $U_c$。</li>
<li>数据收集者 $U_c$收到签名数据后,依次对单个的签名完成验证,若验证不正确则要求该签名者重发,但重发次数不能超过$ P$。</li>
<li>若是全部签名者的签名所得 $s_i$ 验证都是有用且正确的,数据收集者 $U_c$ 设置$s=\sum_{i=1}^m s_i$，则$s$ 作为最后的广播签名,$U_v$将 $sig(M)=(M,(r_1,r_2…r_m,s))$ 发送给签名验证者$U_v$。</li>
</ol>
</li>
<li>
<p><strong>签名验证</strong></p>
<p>签名验证者$U_v$首先查看签名结果是否都在有效的时间范围内,即计算$\mathbb{T}=T+△T$然后运行以下步骤。</p>
<ol>
<li>若在$\mathbb{T}$时刻之前收集到所有签名者 $U_i(i=1,2,…,m)$的签名,则继续下一步。</li>
<li>判断$r_i(i=1,2,···,m)$和$s$是否属于$[1,m-1]$,若不是则签名无效。</li>
<li>令$I=sG- \sum_{i=1}^m r_{i}Q_{i}$,若$I= 0$,表明签名无效。否则令$I=(x,y)$,计算$u=x\ mod\ m,v=\sum_{i=1}^m r_{i}e\ mod\ m$。如果满足 $u=v$,那么说明签名有效,否则签名失败。</li>
<li>若某个数据签名者的签名在$\mathbb{T}$的截止时刻还没有符合数据收集者$U_c$对单个签名的验证,则签名失败。</li>
</ol>
</li>
</ol>
<h4 id="群签名">群签名</h4>
<ol>
<li>
<p><strong>群签名的定义</strong><br>
群签名概念的提出首次出现在 1991 年的欧密会上。从字面上理解,群签名首先包含系列合法的群成员，在一个群签名方案中,群组中任意一个群成员都能够以匿名的形式代表整个群组对一个消息进行签名,与普通的数字签名方案类似,群签名结果也是可以公开验证的，系统中的验证者可以采用群公钥对签名进行验证,确认该签名确实来自群组，证明签名由群组里的合法成员生成,但并不能确定群组里签名者的身份,只有当签名结果发生争议时,群管理员利用系统权限可以追踪到群组里签名成员的真实身份。</p>
<p>一般情况下，群签名方案涉及3个实体:群中心群管理员和群成员。其中,群中心负责方案的初始化建立;群管理员负责在签名发生争议时,追踪群组里签名者的真实身份信息;群成员构成一个完整的群组,可以以群组的名义对数据签名。另外,群签名方案还包括以下5个算法。</p>
<ol>
<li>系统建立<br>
系统建立算法由群组中的权威机构群管理中心执行,输入系统的安全参数入,输出方案中群组的公钥和私钥对。</li>
<li>成员加入<br>
成员加入算法由权威机构群中心与群成员交互履行,获得群成员的公钥$k_P$和私钥$k$,群管理中心获得公钥$k_P$信息,私钥$k$ 由群成员保存。</li>
<li>签名<br>
签名算法由群组里的一个合法成员执行,输入消息 $m$ 和自己的私钥$k$,输出消息m的群签名$SIG$</li>
<li>验证<br>
验证算法由验证者履行,输入消息 $m$、群签名 $SIG$ 以及群公，作出关于该群签名是 否正确的判定。</li>
<li>打开签名<br>
打开签名算法由群管理员履行,输入消息 $m$、群签名 $SIG$以及群管理员的私钥,可以追踪到群组里签名成员的真实身份。</li>
</ol>
</li>
<li>
<p><strong>群签名的特性</strong></p>
<ol>
<li>代表群组对消息进行签名的只能是群组里的合法群成员。</li>
<li>方案中的验证者只能作出签名是否正确的判定,而他不可以获得签名成员的身份信息。</li>
<li>当签名得到的结果出现争议时,只有群管理员可以打开签名，追踪到签名者的身份信息。</li>
</ol>
</li>
<li>
<p><strong>群签名的安全性</strong><br>
一个好的群签名方案除了具有优质的算法,还需要满足如下的安全要求。</p>
<ol>
<li>正确性<br>
群组里的每一位合法群成员只有按照正确的步骤进行签名,得到的签名结果才能被验证者验证通过。</li>
<li>匿名性<br>
在群签名系统中,除了群管理员和其他权威机构,任何人都不能从签名中获得签名者的身份信息。</li>
<li>防伪造性<br>
群组里的合法成员用自己的私钥能够产生消息的合法签名,其他人不能盗用合法成员的私钥,伪造其签名结果。</li>
<li>非关联性<br>
除权威机构外,任何人想通过多个签名信息获得签名成员更多的身份信息,在计算上是不可行的。</li>
<li>可追踪性<br>
在签名结果产生争议时,群管理员或权威机构利用系统权限能够打开签名,查找到签名者的身份,即每一个群签名都是可被跟踪的。</li>
<li>不可否认性如果群组中任意一位合法成员用自己的私钥代表群组对消息进行签名,那么对于该群签名，他不能否认和抵赖。</li>
</ol>
</li>
</ol>
<h4 id="环签名">环签名</h4>
<ol>
<li>
<p><strong>环签名的定义</strong></p>
<p>环签名的概念首次由 3 位著名的密码学家于 2001 年提出，是指签名者在签名的过程中,通过引入其他人的公钥来隐藏自己私钥的一种签名方案。环签名的提出晚于群签名，一者有相似也有不同,可以把环签名看作是群签名的一种特殊形式或者是简化版的群答名。在环签名方案中,没有管理中心，没有环的创建,只有环成员,而且环成员之间不需要协同互助。当某个合法的环成员要对消息进行签名时,他首先创建一个临时群组，然后用自己的私钥和其他环成员的公钥独立地对一个消息进行签名，这样就能将自己的私钥信息隐藏在多个公钥中,不需要群组中其他环成员的帮助,同时这些环成员也不一定知道自己包含在某个群组中。</p>
<p>假设签名集合中有 $n$个环成员，一个完整的环签名方案主要由以下3个步骤组成。</p>
<ol>
<li>密钥产生<br>
输入安全参数$ λ$,对于系统中的每一位环成员,产生相应的公钥和私钥对$(k_{p_i},k_{s_i})(i=1,2,…,n)$,需要注意的一点是，这些公钥和私钥对可能来自不同的公钥密码体制。</li>
<li>签名<br>
输入数据$m$、签名者的私钥$k_{s_j}$和其他环成员的公钥$k_p={k_{p_i}|i=1,2,··,n,i\neq j}$,得到数据$m$的环签名$r$。</li>
<li>验证<br>
输入数据 $m$ 和环签名$r$,验证者作出该签名是否正确的判定,即签名者是不是群组中有效的环成员。</li>
</ol>
</li>
<li>
<p><strong>环签名的特性</strong></p>
<p>环签名具有良好的特性:可以实现签名者的无条件匿名,环签名是特殊的群签名,没有权威机构和初始建立阶段,签名者的身份信息对于验证者来说是完全匿名的;签名者对需要匿名的匿名区域和跨度具备决议权,即环成员的个数 是由签名者决议的;显而易见,对于群签名能够实现的功能,环签名也可以完成,并且参与方更少,不需要权威机构和管理员。</p>
</li>
<li>
<p><strong>环签名的安全性</strong></p>
<ol>
<li>正确性<br>
环成员依照既定的算法执行得到环签名结果,并且在传输过程中不存在篡改的情况那么签名结果就可以被验证通过。</li>
<li>无条件匿名性<br>
攻击者根据环签名,无法确定是哪个环成员生成了这个签名，即使他采用非法途径获得了所有可能的环签名者的私钥,攻击者确认真实签名者身份信息的概率不高于 1/n,n是可能的签名者的个数。</li>
<li>不可伪造性<br>
非签名者的环成员不能够捏造真实数据签名者的签名,对外部攻击者即便他截获了一个正确的环签名,可是他不知道任何环成员的私钥,不能够形成对该签名的捏造，捏造正确的概率是可以忽略不计的。</li>
</ol>
</li>
<li>
<p><strong>环签名与群签名的比较</strong></p>
<ol>
<li>相同点<br>
环签名和群签名都是某个成员代表整个群组对消息进行签名,对于验证者来说，他能够验证这个签名是否来自群体中的成员,而无法知道这个签名者到底是群体中的哪一个.即验证者只能验证签名的有效性,不能获得签名者的身份信息，以此来实现签名者的匿名性。</li>
<li>不同点</li>
</ol>
<ul>
<li>在群签名中,每一个签名都是可被跟踪的,只有群管理员具有系统权限，必要的时候可以追踪到签名者的真实身份信息;而环签名中没有管理员，因此签名无法做到可追踪性,除非签名者主动暴露自己的身份信息。</li>
<li>群签名中的群管理员负责系统的维护,环签名没有环的建立,签名者只是选取临时群组中环成员的公钥,每一个环成员的身份都是平等的。</li>
</ul>
</li>
</ol>
<h2 id="第4章-区块链共识协议">第4章 区块链共识协议</h2>
<h3 id="CAP原理">CAP原理</h3>
<p>CAP 原理是用于设计分布式系统的基本原理,由计算机科学家 Eric Brewer 所提出。CAP 原理定义一个分布式系统不可能同时满足一致性、可用性和分区容错性。CAP 原理阐述了这 3 个特性不能在异步通信网络环境中同时满足,只能满足其中任意两个特性，即满足一致性和可用性、一致性和分区容错性,或者可用性和分区容错性,如图 4.1 所示。具体来说,3 个特性的定义如下。</p>
<ol>
<li>一致性($Consistency$):指分布式系统中节点对事务操作具有原子性,每个操作都可以及时被完成,以至于所有的事务都是有序的。</li>
<li>可用性($Availability$): 指分布式系统必须响应正确节点发出的每个事务请求。</li>
<li>分区容错性($Partition-Tolerance$): 允许分布式系统中的部分节点接收不到其他节点发送的事务信息。例如,当分布式系统分区以后,一个分区的节点接收不到另一个分区的节点发送的事务信息。</li>
</ol>
<p>其中,一致性和可用性是依据一个分布式系统是否满足分区容错性的需要来定义的。换句话说,如果一个分布式系统必须具备一致性,那么即使有些节点没有接收到其他节点的信息,系统也要维持一致性这一特性。类似地,如果可用性是必需的,那么即使存在分区现象,系统也必须响应每一个正确节点的请求。因此,CAP 问题可描述为这样的问题:异步网络中的分布式系统在满足分区容错的情况下,可用性和一致性二者取其一。</p>
<p>用一个通俗的例子来理解 $CAP$ 问题:假设现在存在一个 A 地和 B 地共同维护的分布式数据库,用户 Alice 在 A 地的数据库修改了一项数据。在 A 地的数据跟 B 地的数据库同步该用户事务操作结果的时间内,B 地的用户 Bob 请求读取 B 地数据库的数据由于是在异步的网络环境下,存在网络延迟问题,A 地所发生的事务操作结果还没同到B地。如果要保证可用性,B 地的数据库必须对用户的读请求进行及时响应，而 Bol得到的数据肯定和 Alice 的数据不一样,这样显然不满足一致性。而如果要保证一致性那么B地数据库这时应该要锁定数据库且与 A 地数据库同步事务操作结果，然而,这个时候 B地的用户不能访问到 B 地的数据库,这样就失去了可用性。</p>
<p><img src="/img/blockchain_sec/4_1.png" alt="区块链扩展“不可能三角”"></p>
<p>区别于上述的 CAP原理,以太坊创始人 Vitalik Buterin 将区块链的可扩展性问题描述为“扩展不可能三角”问题。该问题在要求每个参与者验证每一笔交易的情况下,区块链最多只能满足如下 3 个特性中的两个特性:区块生成的去中心化性、安全性和可扩展性,如图 4.3 所示。实际上,区块链为了达到安全性和去中心化的特性,牺牲了可扩展性(可用性),因而无法满足很多实时应用场景的需求。然而,如果区块链系统要达到较好的可扩展性，同时满足较高的安全性,那么系统就不得不牺牲去中心化特性。同样地，既要实现高可扩展性以及完全的去中心化特性,安全性又会被削弱。实际上,如果要量化这3个特性，区块生成的去中心化性根据块生成者的数量来评估,安全性指攻击者发起拜占庭攻击成功的开销,而可扩展性可以通过区块链单位时间内处理的交易数量来评估。</p>
<h3 id="Paxos-算法">Paxos 算法</h3>
<p>Paxos 算法由著名计算机科学家 Leslie Lamport 提出，它是实现异步通信环境下容<br>
错分布式系统中共识问题的经典算法之一。值得注意的是,这里所说的容错是指容忍计算机崩溃而引发的错误$(Cash\ Fault\ Tolerance,CFT)$,如硬件错误、软件错误或内存错误,并非指容忍拜占庭错误。</p>
<p>首先，让我们来先回顾一下分布式共识问题。假设存在多个参与者,每个参与者都可以发出提议,每个提议中包含一个值,这里的共识问题是指有且仅有一个提议的值被选中。如果没有一个参与者提议值,则没有任何提议值被选中。如果一个提议的值已经被选中,那么所有参与者都会承认已选中的这个值。Lamport 将这个共识问题中的一致性描述成 3 个必须满足的条件。</p>
<p>(1)只有提议的值被选中。<br>
(2)有且只有一个值被选中。<br>
(3)每一个参与者仅承认被选中的值。</p>
<p>接着,Lamport 教授提出了支持容错的 Paxos 算法，以实现在异步网络环境下满足上述3个条件的共识算法。Paxos 算法主要解决用户在低可靠的服务器环境中,满足一定条件下即可实现可靠、确定的共识一致性。即使在不满足条件的情况下,也可以保证服务器实现一致性。</p>
<p>在介绍 Paxos 算法之前,首先先介绍该算法对参与者角色的定义和每个角色的职能具体来说,参与者被定义为三种角色:提议者、接受者和承认者。其中,提议者负责给出提议值,接受者接受和选中提议者提议过的值,承认者则是承认接受者选中的提议值。初步分析来看,只有一个接受者时是选中一个提议值最简单的情况,接受者接受并选中第一个由提议者发送给它的提议值就可以了。然而在这种单个接受者情况下,如果出现因机器导致的单点故障问题,就会直接导致接受者失败处理,共识问题就进行不下去了。因此,本节主要讨论存在多个接受者的情况,并且规定只有那个被大多数接受者接受并选中的提议者才被最终选中和被承认者承认(任意两个大多数接受者集合中都至少有一个相同的接受者)。为了更好地理解 Paxos 算法,需要了解描述算法应该满足什么样的要求才能解决共识问题。</p>
<p>首先,考虑实现即使只有一个提议者提议出一个值,也要选中一个提议值的情况。假定一个接受者必须接受它收到的第一个提议值(记为 P1),是否可以呢?答案是否定的。因为当多个提议者提议出不同的值且每个接受者只接受了一个提议值时,不存在一个提议值被大多数接受者接受的情况。以只有两个不同提议值的简单情况为例,假设各有一半的接受者分别接受了一个提议,任何同时在两个大多数接受者集合的接受者如果出现失败的情况,都会导致没有一个提议者被选中。</p>
<p>P1 要求不完备,应该允许一个接受者可以接受不止一个提议值。通过给一个接受者可能接受的每一个提议值标上序号,不同的提议值一定有不一样的序号,先提议的值比后提议的值有更小的序号。现在我们考虑实现当一个提议值已经被大多数接受者接受了它就被选中的情况。在这个情况下,允许有多个提议值被选中的情况,但这些被选中的提议值必须确保是相同的一个值。</p>
<p>基于以上的考虑,定义如果一个提议值被选中,那么任何一个具有更大序号、被选中的提议值也应该是 v(记为 P2)。如果 P2 被满足,那么就实现了只有一个提议者被选中。由于提议值被选中之前要先至少被一个接受者接受,那么设置条件 P2a: 如果一个提议值v被选中,那么任何一个具有更大序号的、被一个接受者接受的提议值也应该是v。然而,P2a 满足了条件 P2 但不满足条件 P1。因为最初已经声明了网络是异步的,所以可能存在这样一种情况:一个刚刚“苏醒”的提议者提议了一个具有更大序号的不同于v的值,然后被某个刚刚“苏醒”的还没接受任何提议值的接受者接受了。注意到这个情况满足 P1 但破坏了条件 P2a,因此需要加强 P2a 的条件,定义条件 P2b 为如果一个提议值被选中,那么任何一个具有更大序号的、由任何提议者提议的值也应该是 v。条件P2b蕴含了 P2a,所以条件 P2b 也蕴含了条件 P2。接下来证明如果条件 P2b 被满足,才能解决共识问题。</p>
<p>假如某个序号为 m 的提议值被选中了,那么证明任何由提议者提议的序号为n(n&gt;m)的值也是就相当于证明任何由提议者提议的序号为 m,…,(n-1)的值是v。因为序号为 m 的提议值被选中了,所以必须存在大多数接受者已经接受了这个提议值,记这个大多数接受者为集合 C。基于序号 n 的提议值,序号为 m的提议值被选中意味着C 中的每一个接受者已经接受了序号从 m 到(n-1)的一个提议值，且它们的值都为v。此外,由于任何一个大多数接受者集合和 C 至少包含一个共同接受者,因此在满足如下 P2c 条件的情况下,可以得出序号 n 的提议值也是v。</p>
<p><em>P2c: 如果一个序号为n 的提议值v被提议，那么存在一个大多数接受者集合 S 满足S 中没有一个接受者已经接受了任何序号小于n 的提议值，或者被 S接受的所有小于序号n 提议值中那个具有最大序号的提议值就是v。</em></p>
<p>现在讨论满足 P2c 的情况,从而来证明序号 n 的提议值是v。一个提议者提议序号为n 的提议值必须先承认已经(或即将)被大多数接受者接受序号最大的提议值。由于预测提议值是否将要被接受者接受比较困难，因此这个提议者只是承诺不存在这样的情况,也就是说,要求接受者不能再接受任何小于序号为 n 的提议值,具体定义如下。</p>
<p>(1)准备阶段。一个提议者选择一个序号 n,然后向每个接受者发出请求,要求接受者承诺:①小于序号 n 的提议值不会被接受;②已经接受的最大序号(序号小于 n)的提议值为 v。<br>
(2) 接受阶段。如果这个提议者收到的承诺是来自大多数接受者的,它就提议一个提议值 v,序号为 n;如果收到的承诺中没有包含提议值 (即②不成立),它就提议一个自己选择的提议值 v,序号为 n。</p>
<p>在上述的定义下,我们得出这一结论:当且仅当一个接受者没有在准备阶段回复一个序号大于 n 请求的承诺,他就会接受一个序号为n  的提议值。如果一个接受者在准备阶段接收序号为 n 的请求,而且他也回复过一个序号为 n+1 请求的承诺,那么他将不再接受序号为 n 的提议值,并且直接忽略序号为  的提议值。注意,接受者必须记住已经接受的序号最大的提议值和其序号。因此,Paxos 算法分为两个阶段,每个阶段包含以下两个步骤。</p>
<p><strong>阶段一</strong><br>
<em>(1) 一个提议者在准备阶段发出一个序号 n 的请求给大多数接受者。<br>
(2) 如果一个接受者收到的请求所包含的序号大于他之前回复过的请求的序号，则他回复一个不再接受的序号小于 n 的提议值以及一个他已经接受的序号最大的提议值v。</em></p>
<p><strong>阶段二</strong><br>
<em>(1)如果这个提议者收到来自大多数接受者的承诺,则他在接受阶段发送一个序号为 n 的提议值v。<br>
(2)如果一个接受者在接受阶段收到一个序号 n 的提议值同时他之前没有回复过准备阶段序号为n+1的请求的承诺,那么他将接受这个序号为 n 的提议值。</em></p>
<p>假设存在1个提议者,3个接受者和2个承认者。图 4.4 展示了既不存在网络错误也不存在机器错误情况下的 Paxos算法。其中V是指$\{V_a,V_b,V_c\}$中最后的那个值或是提议者自己选择的值。图4.5展示了在有一个接受者因机器错误出现失败情况下,Paxos算法仍然能实现共识。</p>
<p><img src="/img/blockchain_sec/4_2.png" alt="Paxos算法交互过程:不存在错误的情况"></p>
<p><img src="/img/blockchain_sec/4_3.png" alt="Paxos算法交互过程:存在一个错误接受者的情况"></p>
<h3 id="Raft-算法">Raft 算法</h3>
<p>4.3 节解析了第一个实现共识协议的算法-Paxos 算法,它在过去的几十年内一直是共识协议的代名词,但是该算法本身晦涩难懂,这使得它很难投入实际的应用。一些著名的计算机科学家甚至在 2012 年的计算机网络顶级会议 NSDI(USENIX Symposium onNetworked Systems,Design and Implementation)上表达了对 Paxos 算法的不满。于是同样解决了分布式共识问题的 Raft 算法以一种更易理解的方式被提出。</p>
<p>Raft 算法被分解为 3 个子问题,分别为选举领导节点、日志备份和一致性问题。Raft算法基于领导节点实现分布式节点对日志数据的共识,只要当前不存在领导节点,新的领导节点就会被选举。领导节点从客户端节点接收写入日志的新数据,同时发送消息同步其他节点的日志数据。在算法中,日志数据的数据项和它们的顺序是以状态机的形式进行更新的，一致性要求所有分布式节点的状态要保持相同。</p>
<p>在Raft 算法中,分布式网络节点被分为 3 种,即领导节点(Leader)、随从节点(Follower)和候选节点(Candidate)。在正常情况下,领导节点只有一个,其余的节点都是随从节点。领导节点的职责在于接收并处理客户端的所有请求，随从节点负责响应领导节点和候选节点发出的请求。而候选节点用于产生新的领导节点。另一方面,Raft 算法给出了任期这一定义,任期是指任意时长的时段,同时有一个连续的整数标识。开始一个任期意味着新的领导节点从候选节点中根据大多数投票原则选举产生,被选中的候选节点就成为该任期内的领导节点。值得注意的是,由于在异步网络环境下,网络可能出现通信分片的现象,这样可能导致在分布式节点中不存在大多数投票选出的领导节点。在这种情况下,该任期被中断,新的任期被开启,这保证了在任何情况下,一个任期内都最多只有一个领导节点。</p>
<p>图4.6 展示了节点在不同状态下的状态机迁移过程。每个随从节点各设置了一个任意随机时长的倒计时器(Election Timeout),通常为 150~300ms。一般情况下,节点在收到选举请求或者收到领导节点的心跳(Heartbeat)信息时会重新设置计时器。首先,节点从加入网络开始,假设网络中还不存在领导节点,它们会首先成为随从节点。此后,在一个计时器结束计时之后,这个节点状态自动变为候选节点。这时一个任期开始,候选节点向其他节点发出选举领导节点的请求消息。假设该节点获得大多数(超过半数)的投票，则该节点状态就变为领导节点,以上的过程称为选择领导节点。在领导节点任期内,它持续给其他的随从节点定时地发送心跳消息,从而确保其他节点状态的一致性。当网络中不存在领导节点向外发出心跳包时,开启新任期，随从节点变成候选节点重新选择新的领导节点。注意,每次收到领导节点的心跳包时,随从节点都要重置计时器。若在一个任期内,同时又有两个随从节点变成候选节点,并且都收到同样来自其他节点的票数,那么这个任期被中断,新的任期被开启。Raft 算法根据轮数来进行,每一轮的节点状态都会被记录下来,如果出现新一轮的选举过程,则原来的领导节点自动降级为随从节点。如果候节点没有获得足够多的投票成为领导节点,在新一轮的投票发起的,也会成为随从节点，重新开始新一轮投票选举。</p>
<p><img src="/img/blockchain_sec/4_11.png" alt=""></p>
<p>以上简要介绍了领导节点的选举过程，接下来我们简单介绍一下日志备份的过程。假设某节点经过选举投票过程成为领导节点之后，它可以控制整个系统日志数据的更新。假设当前有一个客户端发出一个“写入5”请求时,领导节点接收该请求，在这个时候，由于“写入5”请求还没有被其他节点收到,所以领导节点不能执行这个操作更新它的日志。它需要复制多份这个请求并发送给每一个随从节点，如果它收到大多数随从节点承认个请求的响应,就执行“写入 5”操作,并告知其他随从节点在它们的日志中执行“写入5操作，这个过程称为日志备份。</p>
<p>具体地,每当网络选举出一个领导节点，网络中所有的日志更新操作都要同步到所有节点。每次领导节点接收到客户端的更新操作请求时,它便通过心跳包把更新操作请求发送给其他随从节点,等待其他节点响应请求。在大多数节点都响应请求的情况下,所节点完成更新操作,领导节点把更新操作的结果返回到客户端。值得注意的是,在网络现通信分片的情况下,所有节点的日志也要求保持一致。如图 4.7 所示,假设网络中存在5个节点:A、B、、C、D,E。假定任期 1 选举出的领导节点为 B,还未发生分片的网络中个节点都收得到领导节点B的心跳包。当随从节点 C、D、E 与节点B和A出现通信中时,随从节点C、D和E由于没有收到领导节点B的心跳包,于是开启新一轮的选举。设在任期2内,节点 C变成 C、D、E网络分片中的领导节点,那么整个网络就存在两个不同任期的领导节点。假设现在两个分片网络的领导节点都有客户端向它们发送更新志数报的操作,如图 4.8所示，客户端C1向领导节点B发出“写入 3”的请求,由于领导节点B转发请求给其他随从节点时,不能收到大多数随从节点承认请求的响应,于是它不可以执行“写入 3”的操作。当客户端 C2 向领导节点C发出“写入 8”的请求时,领导节点C最终可以收到大多数随从节点的承认响应,于是更新日志操作成功。如图4.9 所示假设节点 A、B、C、D 和E可以通信,领导节点 B收到任期序号更高的领导者C的心跳,于是停止发送心跳包。同时,节点 A 和 B 回滚它们没有收到承认的更新日志请求(“写入3”的请求)且与领导节点 C同步日志数据。</p>
<p><img src="/img/blockchain_sec/4_4.png" alt="网络分片时领导节点情况"></p>
<p><img src="/img/blockchain_sec/4_5.png" alt="Paxos算法交互过程:不存在错误的情况"></p>
<p><img src="/img/blockchain_sec/4_6.png" alt="结束网络分片时的同步节点日志"></p>
<h3 id="拜占庭问题与算法">拜占庭问题与算法</h3>
<p>拜占庭容错指的是一个可靠的分布式计算系统必须能够处理计算过程中的任意错误，除了容忍 Paxos 算法中的机器崩溃而导致的错误以外,还包括网络拥塞和遭到恶意攻击引起的错误。从拜占庭问题很容易联想到拜占庭将军问题，假设有 $n$ 个将军各自坚守在相互隔离的战地，通过信差相互通信并达成“进攻”或是“撤退”的一致性指令。然而,这$n $个将军中存在一些叛徒将军可能发送错误的指令，以此来阻挠所有忠诚的将军达成一致性指令的行为。计算机科学家 Lamport 教授形式化地证明了当叛徒将军至多为$m(m&gt;0)$,将军总数不小于$3m+1$的情况下,所有忠诚的将军都获得一致的指令。他把拜占庭将军问题归纳为一个施令将军向其他 $n-1$个副将军发送指令的问题。这个过程要实现指令一致性必须满足以下两个条件。</p>
<p>(1) 所有忠诚的副将军遵循一样的指令<br>
(2) 如果施令将军是忠诚的,则每个忠诚的副将军都会遵循施令将军发送的指令。</p>
<p>Lamport 教授指出当存在 1个叛徒将军、将军总数为3 时,拜占庭将军问题不能解决。如图 4.10 中所示,施令将军和副将军 1是忠诚的,副将军 2 是叛徒。施令将军向副将军 1和副将军 2 发送“攻击”的指令,忠诚的副将军 1 报告“攻击”指令给副将军 2,而叛徒副将军 2 会报告给副将军 1 其收到的是“撤退”的指令。副将军 1 必须执行“进攻”指令，上述条件(2)才可以满足。</p>
<p>假设施令将军是叛徒,副将军 1 和 2 是忠诚的,施令将军发出“攻击”指令给副将军1而发出“撤退”指令给副将军 2,如图 4.11 所示。由于副将军1不能判断施令将军和副将军 2哪一个是叛徒,因此对于副将军 1来说当前的情况与上面讨论的情况其实是相同的他都遵循“攻击”的指令。而对于副将军 2,为满足条件(2),他将执行“撤退”指令。最终将军们不能达成一致性的指令,上述条件(1)不满足。因此,基于这个例子,推广到有m个叛徒将军而将军总数少于 $3m十1$ 的情形时,解决拜占庭将军问题的方法是不存在的。</p>
<p><img src="/img/blockchain_sec/4_7.png" alt="将军总数为3、叛徒将军为1的情形"></p>
<p><img src="/img/blockchain_sec/4_8.png" alt="将军总数为3、施令将军为叛徒的情形"></p>
<p>接下来讨论在 $m$ 个叛徒将军总数不少于$3m +1$的情形下解决拜占庭将军问题的算法$OM(m)$。$OM(m)$算法规定一个施令将军使用口头消息直接向其他$n-1$个将军发出指令。默认情况下,口头消息满足$3$个假设。</p>
<p>(1)每条口头消息都被正确地传输。规定了叛徒不能干扰任意两个将军之间的消息传输。<br>
(2)接收者知道消息的发送者,不允许叛徒伪造其他将军发送的消息。<br>
(3)任何丢失的消息可以被检测到。允许将军发现叛徒不发送消息的行为,在这种情况下,接收者默认该消息为“撤退”指令。</p>
<p>此外,算法还定义了大多数投票函数 $majority(·)$用于从$n-1$个消息 $v_1,v_2,…,v_{n-1}$中获得大多数相同的消息 ,若不存在大多数相同的消息，则输出“撤退”。基于上述假设和大多数投票函数,算法$ OM(m)$的定义如下。</p>
<p>$OM(m)$定义:当$m=0$时,算法执行如下的操作<br>
(1)施令将军发送指令给每一个副将军。<br>
(2)每一个副将军执行从施令将军获得的指令,当没有收到任何指令时,执行“撤退”指令。</p>
<p>当$m&gt;0$时,算法执行如下操作。<br>
(1)施令将军发送指令给每一个副将军。<br>
(2)每一个副将军，收到施令将军的指令,记为$v_i$,若没有收到任何指令,则记为“撤退”;每个副将军作为施令将军执行算法 $OM(m-1)$,向其他$n-2$个副将军发送$v_i$。<br>
(3)每一个副将军，收到从其他副将军$j$($i$不等于$j$)获得的指令,记为$v_j$ ,若没有收到任何指令,则记为“撤退”。最后,副将军:执行大多数投票函数得出的指令$majority(v_1,v_2,…,v_{n-1})$。</p>
<p>实际上，$OM(m)$属子一种递归算法,递归调用 $n-1$次 $OM(m-1)$算法,这$n-1$次中每一次调用了$n-2$次$OM(m-2)$算法,如此递归下去，直到$ m=0$。</p>
<p>为了让读者更易理解 $OM(m)$算法,图 4.12 展示了$m=1、n=4$ 的拜占庭将军问题，4个将军中,副将军3是叛徒,其他将军是忠诚的将军。首先施令将军执行 OM(1)算法，发送指令v给3个副将军;然后,副将军1 执行 OM(O)算法发送指令v 给副将军 2。同时叛徒副将军3发送其他指令x给副将军 2,最后(上述定义(3)),副将军 2 获得了两个指令$v$和一个指令$x$,因此,他通过大多数投票函数得出指令 。</p>
<p><img src="/img/blockchain_sec/4_9.png" alt="将军总数为 4、徒副将军个数为1的情形"></p>
<h3 id="区块链共识基本需求">区块链共识基本需求</h3>
<h4 id="激励兼容">激励兼容</h4>
<p>区块链共识协议需要确保每位参与者能够基于他在区块链的实际贡献获得最高的收益,这称为激励兼容性(Incentive compatible)。在激励兼容的环境下,任何一个参与者不可以采取自私策略谋取更高的收益,否则,整个区块链的安全性不能得到保证。实际上，这一特性也体现了参与者节点在区块链获益的公平性,例如,在比特币中,矿工可以获得的收益与其在区块链上贡献的算力成正比，比特币的作者把这称为“一个 CPU 一个投票权”。</p>
<p>现实世界中对比特币的攻击,如自私挖矿(Self-mining)、女巫攻击(Sybil Attack),破坏了类似于比特币的区块链的激励兼容性。为提高交易吞吐量,有些区块链协议增加区块的大小和区块的生成速率,但这种措施也破坏了激励兼容性。这是因为当区块变大,该区块在网络中传播到所有节点的时间也变长。例如,网络中的参与节点可能还没收到之前的区块,新的区块就已经产生了,从而加重了区块链的分叉现象，破坏了激励兼容性。因此,如何设计支持高吞吐量又能满足激励兼容性的区块链是一个有挑战的问题。</p>
<h4 id="最终共识">最终共识</h4>
<p>最终共识(Final Consensus)是指所有诚实的参与者最终会对区块链的交易数据拥一致性视图,这主要是针对类似于比特币的区块链系统来说的，其他类型的区块链可以达到即时共识(Instant Consensus)。</p>
<p>在比特币区块链系统中,在大部分的参与者都是诚实的情况下,提交到块的交易数据被全网最终确认至少需要 6个区块的确认时间,这就是最终的由来。交易用户要等待丝1小时才能确信交易被最终写进了区块链,这使得比特币区块链系统不适合一些实时交易的场景,而实现即时共识的区块链则可以保证。即时共识指一旦某个区块被添加到区块链上,这个区块就再也不会被区块链抛弃。这类区块链的共识协议往往是基于传统的拜占庭共识算法实现的,属于这类区块链系统的包括 Hyperledger、PeerCensus 等。</p>
<h4 id="活跃性">活跃性</h4>
<p>活跃性是指区块链的参与者愿意持续地创建交易、处理交易和维护区块链的交易历史。区块链的活跃性受两个因素的影响:(1)参与者的收益贡献比;(2)区块的生成时间与传播时间。第一个因素指对参与者的金钱激励,它应该与参与者对区块链的贡献成正比,在这一方面,不少研究者讨论如何合理地设置交易费来保证参与者能持续有动力参与区块链。如果交易费太低,且相应的交易又总能被处理,那么久而久之,交易用户就会不愿意支付高的交易费用,进而导致矿工不会有动力去积极地处理交易、维护区块链。另一方面，区块的生成速率与传播时间也关系到区块链的安全性,较高的区块生成速率和较长的传播时间都会降低区块链的活跃性。</p>
<h4 id="正确性">正确性</h4>
<p>正确性是指区块链交易和区块数据的正确性。对于一般的数字加密货币系统来说最关键的安全特性是能够抵抗双重支付攻击。具体来说,签名算法保证了交易不能被伪造，同时有效的交易被添加到区块链后经过一段时间的确认时间最终成为被全网节点承认的正确交易,例如,在比特币区块链系统中,需要等待 6 个区块被确认的时间,大约为1小时。矿工通过竞争解答一个密码学困难问题,并生成一个正确区块,产生的区块的正确性被其他参与节点共同验证。</p>
<h2 id="第5章-区块链安全与隐私">第5章 区块链安全与隐私</h2>
<h3 id="区块链数据安全威胁">区块链数据安全威胁</h3>
<p>区块链之所以能够在以数字货币为代表的应用领域中大放异彩，同时也能够得到其他应用领域的广泛关注,是由于区块链系统具有去中心化、可追溯、不可篡改、不可伪造、不可否认和可编程等特点。然而,区块链在安全和隐私方面的挑战仍然制约着区块链的快速发展。</p>
<p>首先,区块链是集信息安全与隐私保护于一体的新型技术,其相应的安全评估检测方法还处于发展过程中,这些技术(包括共识算法、激励机制、智能合约等)在某些关键环境下存在一定的安全隐患,并且已有的安全检测手段还无法完全应用到区块链中。例如,共识协议中的攻击问题:在 Pow 中存在的问题是集中51%算力攻击的问题,即攻击者若获得了整个区块链网络的 51%算力,就有控制整个区块网络的能力,其中也包括篡改和伪造。在比特币应用中,上述提到的 51%的攻击问题带来的后果是攻击者可以实现双重支付(Double Spending),于是提出了 PoS 协议来替换 PoW 协议,上述协议的替换有效避免了某种程度上 51%算力攻击的问题,然而新的问题会随之产生。现有的新的攻击问题有Nothing at Stake,此问题会导致共识节点不计成本地对区块链进行分叉处理，这样会造成区块链网络中不断地产生很多分叉。漏洞检测是安全问题的一个重要方面，从漏洞检测的角度出发，区块链无法提供有效的代码漏洞检测。例如在以太坊中,虽然提供了一些模板和测试环境以方便开发者开发智能合约,但由于智能合约逻辑的复杂性和分布式运行的特性,使得智能合约在代码的编写和密码模块的利用上不可避免地让黑客有可乘之机。同时,网络架构的不一致性使得传统的入侵检测技术无法直接适用到区块链系统中,这也是导致区块链上各种安全问题无法解决的重要缘由之一。其次,量子计算机、人工智能、大数据分析等计算机技术的快速发展同样给区块链带来了安全威胁。尤其是量子计算机的出现会对区块链的安全性造成巨大冲击,量子计算机一旦产生,任意大整数的快速分解从理论上就变得极其容易,破解长度为1024位的非对称加密密钥只需要很短的时间,一些传统的计算性理论假设不再成立,例如基于数论的困难假设不再是密码学上的“困难”问题。2019年10月24日,科技公司巨头谷歌的量子计算机研究团队在 Nature发表论文,此论文正式向世界宣告量子计算机已被成功研发,该计算机可以有效解决当前计算机不能解决的难题,量子计算机只用3分20秒就可以完成当前第一超算需要计算10000年的实验,这也表明基于传统非对称密码学的区块链技术在安全性上面临挑战。</p>
<p>此外,区块链的理论安全与实际应用安全之间还存在一些鸿沟。2014 年,JuanA.Garay、Aggelos Kiayias 和 Nikos Leonardos 3 位教授最先给出了有关比特币区块链的安全形式化分析和证明,列举了比特币有关的两个安全特性:公共前缀和链质量并通过协议分析得出比特币协议实现区块链的 3 个特性(活跃性、一致性和正确性)。虽然从理论上分析区块链的网络安全性比较高,但实际网络环境、用户自身安全意识和黑客主动攻击等方面的问题,仍然给区块链系统的应用带来了不可低估的安全威胁。鉴于区块链采用的网络结构是不同于传统的 P2P 结构,攻击者无法通过控制少部分节点的方式来实现对整个网络控制,但是由于实际网络部署时,各个节点之间配置的安全防护等级不同，导致攻击者可有针对性地从低安全防护等级的节点开始发起攻击,通过控制大多数节点阻碍区块链系统的正常运行。另一方面,用户在使用过程中对密钥的管理不严格,安全意识不足,或被钓鱼网站所诱骗,丢失自己的密钥,也会引发安全问题。以金融领域为例,由于区块链与金融紧密关联,相关的用户或者机构成为黑客的重点攻击目标,而一些传统用户应用层的攻击手段在区块链技术中依然可行,因此就其存在的安全问题,不论是用户自身引发的还是传统攻击手段引起的都不可忽视。</p>
<p>最后,匿名性、去中心化、防篡改性、自治化等特点虽然是区块链的技术标签,但与此同时也给区块链系统的安全监管带来了一系列难题。</p>
<p>(1) 区块链的匿名性使得区块链网络系统中发生的漏洞利用等安全事件以及骗取数字货币等网络犯罪的溯源难度增加。当非授权用户利用区块链技术进行违法犯罪活动或者对系统实施攻击使得系统变得不安全时,系统很难追踪并从系统中剔除恶意用户和攻击者。例如勒索病毒，黑客利用操作系统漏洞将用户的文件进行加密处理,需要用户发送-定量的比特币来获取解密密钥。虽然比特币地址在用户交易的过程中是公开的,但其较高的匿名性使得无法链接到现实中的非法参与者。</p>
<p>(2) 区块链的去中心化特性导致攻击者可以在更多方面进行攻击,使得系统的安全监管的难度增大,基于区块链的分布式存储模式,数据存储在不同的节点而不是集中式的服务器,且用户的通信传输方式为点对点,不需要通过可信的集中服务器或平台，因此用户交易过程中很难获取监管数据,监管的技术接口也难以实现。</p>
<p>(3)区块链的防篡改特性为恶意信息的传播提供庇护,使对数据内容的监管变得异常困难。具体地说,攻击者通过交易的方式向区块链中写入一些非法信息,利用区块链自身的同步机制实现非法信息的迅速传播,由于防篡改特性使这些非法信息难以被删除,加大了互联网监管的难度。</p>
<p>(4)数据安全责任边界不清晰。在实际应用中,节点通常指的是区块链平台、应用系统、数据所有者等实体,区块链中的这些实体互不信任,这会导致在出现安全问题时,难以划清安全责任界限。</p>
<p>总而言之,区块链本身存在诸多亟须解决的安全问题,这些问题随着区块链应用技术的迅速发展变得更加突出。因此,确保区块链的安全性是当前区块链广泛应用面临的最棘手的问题之一。</p>
<h3 id="区块链隐私泄露威胁">区块链隐私泄露威胁</h3>
<p>5.1.1 节主要从与区块链相关的一系列安全问题进行了阐述,与此同时,由于区块链在各个应用领域迅速的扩展延伸,使其在隐私泄露方面的问题也受到广泛关注。区块链技术之所以能够迅速发展并应用到相应的各领域,其优势在于数据的存储和处理不依赖于某个中心节点,从而避免了单点故障和权限滥用的恶意行为,是传统的中心化架构、集中式服务无法比拟的。然而,区块链中的数据需要分布式网络中的各个节点来共同维护从而达到一致性共识,因此交易中的信息需要公开,让所有节点都能进行验证,这就使得区块链(主要指公有链、联盟链)上的公开信息毫无隐私可言。</p>
<p><strong>1.身份信息泄露</strong><br>
公有链没有准入机制,任何节点(包括攻击者节点)都可加入网络中进行数据维护,监听区块链网络节点之间传输的数据。因此,当攻击者想要推测出某个交易者的身份信息时,首先分析获取到的交易数据,其次通过给出的背景知识,将二者结合得到最终的交易参与者的真实身份，上述攻击可以成功的原因在于区块链上交易数据是可以关联的。通过交易的关联性关系,攻击者可以削弱区块链地址的匿名性,甚至暴露用户的真实身份例如,Alice 在某个区块链交易平台上购买了一个比特币,它利用信用卡来进行支付,由于在美国 2000 美元以上的交易都需要实名,因此实名制使得攻击者可以通过交易的地址金额和时间等相关数据从支付地址关联到实际支付人,从而达到获取交易者身份信息的目的。</p>
<p>数据挖掘技术为攻击者得到关联的交易地址提供了可能性。具体地,攻击者可以通过分析交易与交易之间的关系,得到某个地址的所有相关交易数据流。由于每笔交易都记录了所有的输入地址和输出地址的信息,通过对特定地址进行检索,就能够发现该地址的全部相关交易,只要任意一个地址对应的用户真实身份信息被暴露,其他所有和该地址有关的地址都可能属于这个用户或相关用户,会致使更多的用户隐私数据泄露。此外,区块链服务提供商也有可能存在某些漏洞被攻击者利用，泄露用户隐私。如 2015 年，比特而论坛 Bitcointalk 就遭受网络攻击,被攻击者窃取了 49.9 万用户数据,包括用户名、密码、电子邮箱等。</p>
<p>数据的公开透明既是区块链技术的优势,也是区块链技术的劣势,它使得敏感信息得不到保护,通过从区块链网络中提取有价值的敏感数据,联合不同网络和平台下的用户数据,即使用户的交易费用通过比特币进行支付,也无法保证其隐私的安全性。具体地，通过利用区块链浏览器,与比特币相关的每笔交易信息都是公开可查询的,包括资金流向(即发送地址、接收地址)、交易金额、交易时间等。虽然用户使用的是匿名地址,无法直接利用交易地址查询到交易者真实的个人信息,但要查询到用户的真实信息还是有迹可循的。根据现有的研究表明,即使通过隐私保护的方法实现身份隐私,但是利用数据挖掘等手段对比特币交易信息统计分析，同时结合一些现实非比特币的交易记录,能够确认出40%的比特币用户的真实信息。因此,简单地通过比特币的地址来实现用户交易的匿名性,这种匿名体制是不完善的,确切地说,是一种伪匿名性。</p>
<p><strong>2.交易数据泄露</strong><br>
大数据分析处理技术不断进步,基于大数据挖掘的分析技术可以将用户的真实身份和资金使用情况识别出来。《纽约时报》曾报道,根据用户的购物习惯、消费记录、出行数据等信息,可以准确地预测个人的隐私信息。例如,数据分析师可以通过用户的消费行为预测出某些女性购物者是否已经怀孕。一些看似无关紧要的数据可能揭示用户的敏感信息,而且一旦恶意用户出于经济利益等考虑去挖掘这类数据并进行非法利用,就很有可能损害其他合法用户的经济财产安全,甚至人身安全。</p>
<p>在区块链与其他具体应用相结合的情形中,会涉及大量高度隐私的数据。例如,在金融业务场景中,用户与银行之间的交易记录或者银行之间的相互交易记录都是极其敏感的数据,属于银行的核心数据,因此不论是用户还是银行,都不希望彼此之间的交易记录被其他非授权用户查看。此外,在医疗场景中,多个医院组成的联盟链可以有效促进数据的共享、有利于病情的诊断,但是个人病情同样属于极度隐私的数据,患者并不想将个人的医疗数据公开地放置在区块链环境中。由此可以看出,若想要区块链技术及其应用覆盖到其他的应用场景，隐私泄露应该是最先需要解决的问题。</p>
<p>区块链的多节点共同维护、公开透明等特性是把双刃剑,这项技术在带来安全性的同时,也造成了新的数据隐私性问题。第 4 章中的区块链经典理论一一不可能三角,也即中心化、可扩展性和安全性三者之间的相互制约关系。同样,对于区块链的隐私性(安全性)和性能(可扩展性)之间的权衡也一直是实际应用中需要考虑的问题。为了做到安全的隐私保护,势必会影响系统的可扩展性,如何实现在保护数据隐私的同时依然能够支持不同节点针对数据进行安全、高效地验证是区块链领域中的热点研究方向,如何更进一步地保障区块链的隐私性就成为该领域的重要问题之一。</p>
<p>目前,从两方面考虑，既能保护隐私同时兼顾性能,有一种解决的方法就是提升硬件性能,例如,可以采用具有隐私保护功能的硬件设备 Intel SGX 同时保障效率。SGX 是由英特尔公司开发的,旨在为商用计算机上进行的安全敏感计算提供完整性和机密性的指令集扩展,SGX 的核心技术是封装,即通过提供硬件安全的强制性保障将合法的运行软件封装在 Enclave 中,为软件的执行提供可信的环境,防止恶意者的攻击以及软件的越权访问,但此技术并不能对所有的攻击都能够识别和隔离,只能保证 Enclave 中运行数据的机密性和完整性。</p>
<p>通过密码协议来增强区块链的隐私性保护也是研究的热门方向,包括使用零知识证明、安全多方计算等技术来解决链上交易公开透明的问题。目前针对区块链隐私保护机制的研究按照层级来划分,主要包括网络层、数据层以及应用层 3 方面的隐私保护。</p>
<p>总体而言,区块链利用自身的优势为去中心化的分布式系统提供了强大的技术支撑,但是区块链本身会面临不同的安全问题和隐私威胁。为了满足实际应用的需求,需要识别这些安全问题,同时要引入有效的机制来避免安全问题的产生。</p>
<h3 id="区块链安全目标">区块链安全目标</h3>
<p>虽然区块链被证明了在满足一定的条件之后在理论上是安全的,这包括区块链所使用的密码学技术,但是在实现过程和应用过程中,由于开发者没有充分预估系统的使用环境,使得区块链系统遭受了各种攻击行为。区块链的安全性问题涵盖范围较广,从用户应用端到底层数据端都有安全问题存在。本节以区块链存在的安全问题为切人点,依次介绍区块链应用过程中包含的安全性问题。具体来说,区块链的安全目标是指利用一些现有的密码学技术手段和实施方法来保障区块链系统的应用安全,其中,应用安全主要涉及应用过程中的数据安全、共识安全、智能合约安全、内容安全、密钥安全、跨链交易安全、隐私保护以及具体的密码算法安全的设计和证明等,如图 5.2 所示。在上述的主要标中,首先要实现的是数据安全,数据安全是其他方面各层级安全的基本前提。</p>
<p><img src="/img/blockchain_sec/5_1.png" alt="区块链的主要安全目标"></p>
<h4 id="数据安全">数据安全</h4>
<p>区块链实质上是一种去中心化的分布式存储系统,其保存有大量的与区块链相关的敏感数据,如用户的支付信息、交易过程、智能合约执行代码和具体的中间执行的状态等.如何保护敏感数据的隐私性是实现区块链安全的关键所在。下面基于信息安全方面的保密性、完整性、可用性、可控性和不可否认性 5 个特性定义区块链的数据安全。</p>
<p><strong>1. 保密性</strong></p>
<p>保密性是指避免合法用户或者实体的敏感数据泄露给非授权的或者恶意的参与者在基于区块链的应用中,为了实现敏感数据的保密性,要求应用系统采用符合要求的、可靠的、具有安全性证明的身份认证算法、访问控制协议和安全审计机制。其中,身份认证算法是用来在计算机及网络环境中判断用户是否合法的一组认证规则,它是访问控制的基础。在传统的身份认证体系中最常用的方法是基于可信第三方的身份认证,主要是通过用户的口令或指纹等预存在平台的信息来确认用户身份。在区块链的身份认证中,每个区块或用户的加入方式和有效的身份鉴别认证方式都是确定的。例如,在公有链(如比特币中),身份认证是通过验证用户是否有合法的私钥(即口令)来验证用户身份的。为了实现身份认证又不破坏匿名性,学者们利用零知识证明方法提供相应的身份认证服务,被称为 ChainAchor 框架，此架构使得合法用户的身份可以有选择地打开,因为每个参与者都拥有多个有效交易身份。访问控制是一种按用户预设的身份来设定用户对某些信息项访问权限的技术。此技术是实现访问控制的一种最基本的方式,它允许授权用户按照权限级别来访问或使用系统的资源,任何非法用户对系统资源的访问都会被禁止。一般来说,通过对数据进行加密来实现访问控制,合法用户只有拥有与加密公钥相对应的解密私钥,才能满足访问权限,解密查看信息。对于公有链,其访问控制是通过私钥来实现的.用户可以任意加入公有链中查看数据、发送交易等操作,但在联盟链和私有链中,它有一套严格的准入机制,用户需要获得其他节点的同意才能有权限操作和访问链上的数据。</p>
<p>审计监管是指区块链能够对非授权的数据泄露事件进行监管,包括事件的监控、分析和追责等。它主要从法律层面保障区块链数据的保密性,确保非授权的数据泄露等不安全行为得到相应的惩罚,从管理角度来控制攻击者的恶意行为。</p>
<p><strong>2. 完整性</strong></p>
<p>完整性是指数据接收者得到的数据和数据发送者发送的数据是一致的,即在数据传输的过程中没有遭受恶意者的篡改。区块链利用冗余性较大的分布式数据库系统来保障链上数据的不可篡改性。区块链中的完整性主要指用户发布的交易信息、智能合约执行的中间状态不可篡改和不可伪造。在区块链中,任何已经确认的交易记录都不能被修改，已经发生的所有行为不可抵赖,例如,区块链系统中的攻击者若进行双重支付,则此行为无法抵赖。对于底层数据,数据完整性通常是基于相应的密码组件实现的,如数字签名哈希函数等。其中,区块链中最为典型的哈希值体系结构是基于默克尔树的,使其能够维护数据完整性,同时验证数据的有效性。在共识层面上,数据存储的一致性是依靠各类共识机制(如 Pow、PoS 等)实现的。</p>
<p><strong>3. 可用性</strong><br>
可用性指合法用户可以对区块链系统中的数据随时地进行访同和使用。区块链系能的可用性首先应该具备抵抗单点放障和分布式容错的能力,使得系统在遭受各类攻击的仍然能够提供可靠的服务。同时,由于区块链网络主要是点对点的分布式结构,所以少分的节点受到攻击或产生放障将不会对整个区块链系统的运行产生较大的影响,系统可以对外提供正常的服务。然而现有的一些攻击行为,例如自私挖矿,通过控制少部分点来获取全网络超过 50%的资源,会影响区块链系统的可用性。此外,可用性还要求统在遭受实际攻击时,能够在一定时间内完成修复和重构,保证系统的正常运行。其次区块链系统的可用性还表现在能够为合法用户提供无差别服务,每个参与的节点都可以获得有效的、正确的数据,即使是新加入系统的节点也可获取相应的服务。</p>
<p>在限定时间内响应用户的访问数据请求是可用性非常重要的一方面,在区块链系统中有限时间内响应用户的访问数据请求的主要表现形式为可扩展性。可扩展性在区块链中要求系统具有低延时、高交易吞吐量等特性,考虑到区块链体系结构存在着不可能三问题,为了使实现的系统具有更好的可扩展性,会在安全性、去中心化两个特性中牺牲基部分性能满足实际应用的需求。</p>
<p><strong>4. 可控性</strong></p>
<p>可控性指系统或数据在传输范围和存储空间的可控程度。对于区块链,可控性主要指区块链的数据在链上存储的可控安全程度。公有链中允许任何节点在任意时间都可加入,支持任意交易数据的发送,但是一定的匿名性使得非法的交易行为难以追踪。例如暗网中有许多的用户利用比特币来进行黑市交易,甚至成为比特币的最大用户,这在一定程度上对区块链系统的可控性造成很大的冲击。因此,构建安全可控的联盟链更加符合数据安全的要求。此外,对于使用区块链技术的合法用户,可控性需要保证在不同个体之间,实现数字资产或数据在链上的安全控制权转移,防止非法用户对这些资产或数据的操作控制。</p>
<p><strong>5. 不可否认性</strong><br>
不可否认性通常指用户不能否认自己发送信息的行为以及信息的内容,也称不可抵赖性,在此处是指用户无法否认在区块链系统中的操作行为。在区块链中,用户发送的数据都通过交易的形式被记录下来,一且经过一定周期被确认后将无法修改。由于交易的产生与用户的地址唯一绑定拥有该地址的用户无法否认其在区块链中所做出的操作行为。不可否认性要求在不同参与者之间,用户无法抵赖以自己身份参与所完成的操作,需要与身份认证进行关联,同时系统支持安全审计功能.相关的审计日志需要被准确地记录下来。</p>
<h4 id="共识安全">共识安全</h4>
<p>由于区块链网络中的节点包含个人计算机或移动客户端,与传统网络架构中的专用服务器相比,性能低、抗攻击能力差,所以这些节点很容易被攻击者或者恶意用户攻击此外,在中心化架构中,管理者只需针对一台或者少数几台服务器进行重点保护,而在区块链网络,所有节点地位平等,很难对地理位置分散的众多节点采用相同的防护措施,这样攻击者可以选取安全保护较为薄弱的节点进行入侵,破坏区块链网络中数据的同步性。</p>
<p>共识机制用来保证区块链网络中的节点能够对某个提案达成一致,例如所有节点就某个区块可以加入区块链的问题,以此来确保区块链主链上数据的一致性,这是区块链的核心思想。区块链上的共识安全是实现数据安全的基石,起着重要的作用。保证区块链系统的最终共识、激励兼容性、活跃性以及正确性是实现共识机制的核心,也是衡量共识安全的重要属性。其中，满足最终共识是共识安全中需要保证的最基本特性。</p>
<p>最终共识是不同节点在共同约定的协议的保障下,整个系统对某些操作行为产生的结果的一致认同。在区块链系统中,满足最终共识要求在数据达成共识并存储到区块链后无法被更改。也就是说,所有节点的最终共识只有在主链上达成才能对各类攻击者行之有效,因为只有在主链上形成共识,攻击者就无法通过在分叉链上达成共识、抛弃主链来实施攻击。激励兼容性和活跃性主要是指在区块链网络中,要有足够多的节点持续地参与到区块链系统的维护过程中,这需要共识协议能够提供持续可靠的激励机制吸引节点参与。如果攻击者可以通过某种方式破坏共识协议的激励机制,这就会影响正常用户参与使用或维护区块链的积极性,从而在一定程度上降低区块链的活跃性。正确性要求共识协议能够抵抗双重支付攻击。虽然理论上需要达到 50%以上的算力才能控制区块链网络实现双重支付,但是在实际的网络环境中,攻击者通过使用一些如自私挖矿之类的攻击策略,在一定周期之后,可以将全网的算力往自己设定的这条主链上来运行,使得原始的这条链被废弃,已产生的交易转账信息也随之失效。造成双重支付攻击的策略有很多种,本书将在第 8 章中进一步描述。</p>
<h4 id="智能合约安全">智能合约安全</h4>
<p>智能合约能够支持用户编写任意的代码逻辑,一旦部署之后,区块链网络中的任意节点都需要执行智能合约上的代码,且代码逻辑不可修改。当输入满足一定的条件后,合约就会自动运行程序,即使智能合约的发布者也无法阻碍程序的自动执行。正因如此,若存在漏洞问题无法通过传统补丁的方式去修改,只能重新部署合约,那么漏洞合约上涉及的金额也无法挽回。近年来,智能合约频繁出现漏洞,导致攻击案例层出不穷,给用户和社会带来了巨大的经济损失。</p>
<p>智能合约主要从软件代码层面来考虑其安全性。软件代码层面的安全由开发安全和运行安全两部分组成，同时,开发安全又包含逻辑安全和代码安全。逻辑安全即指开发人员首先应该在编写之前结合实际功能来设计符合逻辑的、简洁的、具有可行性的代码,因为代码出错的风险与复杂性是相关联的;其次,在代码的编写过程中需尽量使用安全且目前较为成熟的开发语言,并且需要确保符合规范,合约和函数可以进行模块化管理,并养成使用安全库的习惯。此外,开发人员要准确地掌握黑客常用的攻击手段,从而在代码的编写过程中尽量避免此类型的攻击,同时了解常见的智能合约漏洞,对编写的合约进行仔细地排查,保证编译后的代码不存在这些漏洞。</p>
<p>运行安全作为一种安全保护机制,它能够随时保持更新,是对智能合约在实际虚拟机平台或系统中运行的安全保护。运行安全的基础是保持更新,即当有新的漏洞被发现时，要及时检查部署智能合约是否受到影响。当用到的库或者工具有更新时,智能合约也要及时更新,并使用最新的安全技术。若智能合约的漏洞问题、甚至被攻击者攻击出现在执行过程中,运行安全的要求是不会对本地参与区块链的系统或设备造成影响,这就需要做到隔离运行,即智能合约并不运行在本地系统上,而是运行在系统的隔离环境中,如系统虚拟机等,这样在很大程度上避免了本地支持智能合约运行的系统遭受恶意者的攻击例如,以太坊为了实现代码在隔离环境中运行,专门提供了虚拟机供合约代码运行。同时运行安全也要求即使智能合约调用了有漏洞的合约,也不会执行异常。为了实现这个目标,需要确保智能合约在开发中尽量保证模块化,即合约逻辑简单化、代码函数模块化,且需要降低模块之间的依赖性,高耦合低内聚。使得智能合约能够通过接口的方式进行安全调用,并且达到阻止异常结果通过合约调用技术方式扩散到整个区块链的目的,在一定程度上有效地确保了智能合约的安全性和可用性。良好的模块化能够降低智能合约的复杂性,使得智能合约的设计、调试和维护简单化。</p>
<h4 id="内容安全">内容安全</h4>
<p>内容安全是对数据内容本身的规范性要求，它建立在数据安全的基础之上,主要描述的是存储在区块链分布式系统中的数据要达到法律法规的要求和符合用户道德规范的标准，阻止和避免不合要求的内容在网络中传播。那么要如何解决有关内容安全的问题呢主要的解决方式是有效控制不良信息在区块链上的传播和加强对信息的管理,探索对销上违法信息审核与用户隐私保护需求间的平衡，明确区块链开发者、区块链平台运行者区块链使用者等不同角色的安全责任。</p>
<p>针对区块链内容的攻击的主要形式包括恶意信息攻击和资源滥用攻击。其中,恶意信息攻击是影响区块链内容安全的主要攻击形式,它指的是攻击者刻意向区块链中写入恐怖信息、虚假信息等。这些恶意信息利用区块链数据传播速度快、达成共识后不可修改等特性,可以很快传播到全世界,造成极大的危害。区块链中的恶意信息使得区块链会被杀毒软件结束正常运行,或者引起政治敏感等问题。资源滥用攻击指的是节点之间恶频繁交互使得区块的数据量大幅度不可控制地增长,导致普通节点由于存储不足无法容纳区块数据。这就致使可以维护区块链稳定运行以及达成主链数据共识的可靠节点逐减少,从而区块链掌握在少数有计算资源、存储资源的大公司手中,从资源的存储和掌情况可以看出这与区块链的去中心化的特性不相符合。以以太坊的资源滥用攻击为例2017年2月,攻击者利用大数量级别的垃圾交易信息来攻击以太坊 Ropsten 的测试链通过阻塞网络信道的方式导致区块链系统无法正常工作。</p>
<p>因此,内容安全可控是将区块链系统应用于各个场景的关键。内容安全也影响着政府和社会对区块链技术的接受度。在公有链中,数据一旦被用户匿名地记录就无法再对数据做出修改和追溯。因此探索基于联盟链架构的区块链应用场景对于规范内容安全重有意义,可以有计划地实施信息过滤、网络监测等技术手段为区块链的内容安全提供保魔。例如,已有研究机构(阿里巴巴)申请了与区块链内容保护相关的专利技术,该专利表明政府等机构需要以第三方管理员的身份加入系统并获取区块链中的交易数据。与此同时,该系统具有与其他区块链系统不同的特殊功能,可以向区块链发布特殊处理指令,目系统中的其他节点对于特殊指令的做法是先确认其合法,确认后才能公布到整个区块链网络,此过程是对预先设定的监管执行的智能合约的调用。</p>
<h4 id="密钥安全">密钥安全</h4>
<p>在区块链系统中,若代表着用户身份和数字资产的私钥被泄露则意味着用户丧失了对自身拥有的数字资产的支配权和控制权。因此,私钥安全为密码系统安全运行奠定了基础,也为区块链系统正常运行提供了保障。如图 5.3 所示,私钥安全指的是私钥整个生命周期的安全,主要包括私钥的随机生成,安全存储、使用,以及撤销、更新等阶段。区块链中的私钥一般由非对称算法产生,例如比特币采用基于圆曲线算法的非对称算法。非对称算法密钥主要是由随机数生成器产生的，通常使用满足随机预言机(RandomOracle,RO)模型的种子来作为随机数生成的基础。私钥的存储常常通过软件或硬件的方式来实现。软件的方式包括以文件或字符串的方式存储在服务器环境中,硬件方式一般利用现有的芯片设备或安全装置作为存储密码的工具和载体。这两种方式都存在被黑客窃取或暴力破解的风险。</p>
<p><img src="/img/blockchain_sec/5_2.png" alt="区块链的主要安全目标"></p>
<p>在私钥使用过程中,由于使用者可能遭受钓鱼、缓存侧信道等攻击,私钥将直接暴露给攻击者,这样会导致使用者失去对账户的唯一控制权。在基于中心化架构的传统应用系统中,若用户私钥丢失还可以向管理员提出申请并重新找回丢失的私钥。但在分布式的区块链中,没有管理员的角色来对参与交易的用户进行统一的私钥管理,所以用户自己就是自身私钥的管理者,而由于普通用户的安全意识不足,丢失私钥的情况就时有发生这是因为区块链系统一般存在钱包客户端(有网页版或独立客户端版),采用传统方法对用户发起的攻击形式,在区块链应用中依然存在,用户一不小心就极容易中招。因此,如可保护用户私钥的使用安全是区块链系统在设计过程中需要重点考虑的因素。</p>
<p>为了保证高可用性,区块链系统需要支持私钥的动态操作,如撤销和更新等,然而现有的比特币等公有链并不支持私钥的更新和撒销操作,只能通过重新申请的方式将数资产转移到另二个私钥所对应的公钥中。在实际的区块链集成应用场景中,需要考虑户由于意外而丢失私钥的情况,可以通过线下实名的方式找回，这类似于银行密码丢失用户通过户口或身份证来认证身份,重新设置密码。</p>
<h4 id="跨链交易安全">跨链交易安全</h4>
<p>1.6.1 节中的侧链技术是实现跨链交易的一种方式目前还存在包括公证人机制、中继、哈希锁定技术、分布式私钥控制技术等方式来构造的跨链交易方案。跨链技术出现的主要目的是实现了区块链系统中不同区块链之间的互通。大量的区块链应用平台随着区块链技术的推广应运而生,为了防止信息孤岛情形的出现,造成链与链之间的数据无法百通,实现不同链条之间的信息交互就显得十分必要。每个区块链网络都是相对封闭的独立系统,节点内部都会互不信任,因此要解决不同链之间的互信问题就非常困难。一般司以通过解决两条链之间的双向错定问题来实现链与链之间的交易，假设在 A 链上生成 p链上的铺定币,那么需要同时将 B 链上等价的数字货币进行锁定，类似于B链上的数字货币跳转到 A 链上进行使用。在实际操作过程中，需要解决两条链之间应用程序互操作性以及数据的无缝更新性问题,保证两条链的实时、准确交互。如果是通过设计一种中间链来对接两条链的方式,例如 FUSION 公有链分布式控制权服务(Distributed ControRights Service),利用锁人和解锁技术实现代币分布式控制权管理获得和解除，这一技术能够确保操作的准确性,防止两边同时都具有或都不具有对代币的控制权，保证跨链操作的原子性。</p>
<h4 id="隐私保护">隐私保护</h4>
<p>区块链系统中的信息在交易过程中为了实现各个节点间数据的同步和交易的共识是需要对外公开的,例如交易金额或中间状态。除此之外,攻击者可以通过用户交易之间的关联性对用户隐私信息进行推断。并且区块链系统中利用全局公开的账本存储所有用户的所有交易,因为存储账本是全局公开性的,使得攻击者可以很容易地获得交易的所有数据。通过分析交易中的关联关系,攻击者能够逐步降低区块链地址的匿名性,甚至能够发现匿名地址所关联的用户真实身份信息。因此,系统通过处理用户敏感数据减少隐私泄露的方式来保护用户的隐私。区块链中的关于数据隐私保护问题主要包含身份隐私保护和交易数据隐私保护。</p>
<p>(1) 身份隐私(Identity Privacy)保护。身份隐私是指参与交易的用户的真实身份和交易记录之间的链接关系是保密的且无法关联的。实现匿名性保护是电子现金中身份隐私的核心问题。中本聪描述了理想电子现金的 6 个标准,其中就包括隐私保护,指的是用户与其交易之间的关系必须是任何人都无法追踪的。具体地,完全匿名的数字货币模型必须满足以下两个属性。<br>
①不可追踪性(Untraceability): 对每笔交易的输入,都无法推测出是否由同一个人发起。<br>
②无关联性(Unlinkability): 对于区块链中任意的两笔交易输出,都无法链接到一个交易用户。<br>
(2)交易数据隐私(Transaction Data Privacy)保护。在区块链中,除了区块头之外其余的数据属于交易信息,它包括参与者的地址信息、交易金额、交易时间等。此外,对于以太坊这种支持图灵完备智能合约的区块链系统,如果构建一套去中心化的 DApp,交易还可以用来保存用户其他的信息，例如中间状态变量、交易总量等信息。交易数据隐私就是指这些交易中所包含的敏感记录。一般写入交易中的数据是否需要进行隐私保护是以用户的需求和场景而定的。</p>
<h4 id="密码算法安全">密码算法安全</h4>
<p>随着量子计算机的迅速发展,这给传统密码算法协议的安全性带来了严峻威胁。研究抗量子计算安全的密码算法已经成为密码学领域的一个重要课题。同样地,由密码学底层构建的区块链技术也会受到巨大的冲击。目前,量子计算机的研发在全球各地科研工作者的努力下正逐渐成为可能。2015 年,对量子计算机有很深造诣的 IBM 研究机构研发了一台能够进行量子计算云服务的量子计算机,并免费对外开放使用权,尽管此台计算机仅仅含有 5 个量子位。2018 年和 2019 年,谷歌和IBM 公司在美国物理学年会和国际消费电子展上先后推出了量子计算模型和量子计算芯片。另外,D-Wave 公司不甘落后,也积极推出量子计算机。因此,研究抗量子计算攻击的区块链技术迫在眉睫。</p>
<h3 id="区块链层级分类安全">区块链层级分类安全</h3>
<p>在 5.2 节的介绍中,主要介绍了与区块链相关的数据、共识等的安全目标。各个目标也说明了区块链在当前阶段中还存在着诸多的安全威胁,黑客的攻击手段层出不穷,如果在使用或者开发过程中不重点防范,则会出现相应的安全问题。此外,数字货币基于区块链技术去中心化的优势使得跨境交易的流程变得简单且交易效率提高,但各个国家对加密数字货币所持有的态度相差较大,缺乏国际上统一的规范，这也让监管区块链系统变得更加困难。因此,掌握已有的或可能有的安全问题对进一步开发和使用区块链技术非常重要。</p>
<p>如图 5.4 所示,可以将区块链系统分为应用层、智能合约层、共识层、网络层以及数据层。本节从五层结构出发,简要分析和列举每层可能遇到的安全风险。</p>
<p><img src="/img/blockchain_sec/5_3.png" alt="区块链层级结构"></p>
<p>(1)应用层主要功能是为了用户之间进行交互,实现分布式账本状态更新。应用层主要指各种区块链的交易平台、钱包客户端、Web应用端等,主要关注私钥管理以及应用客户端等存在的安全问题。</p>
<p>(2)智能合约层是区块链系统的基础也是关键。关键在于它是用户用来实现去中心<br>
化DApp 的主要模块,它封装了与应用需求相对应的逻辑算法和实现代码。基础在于它是编写区块链系统的主要组成部分,从非图灵完备的脚本代码(如比特币)发展到图灵完备的智能合约(如以太坊),但由于在开发过程或合约运行过程中的安全问题,导致在智能合约层中存在的安全威胁相对较多。</p>
<p>(4)网络层主要由两个机制和一个网络组成,包括传播机制、通信机制和分布式网络等技术。对于网络层来说,它涉及的安全问题属于传统安全问题范畴,例如分布式拒绝服务(DDoS)攻击、日蚀攻击(Eclipse Attack)等。此外，网络层还关注隐藏网络节点的数据接口,有一种攻击方式是利用网络节点不该暴露的接口挖掘节点和用户信息,从而实现数字货币非法转移的目的,造成用户经济损失。</p>
<p>(5)数据层主要涉及底层的区块、交易等数据的存储和管理。一般来说,数据层安全性是由密码学理论所支撑的,常用的密码学算法包括数字签名、哈希函数和零知识证明等。密码学算法经过许多年的研究和发展,技术水平已经较为成熟。但是,在一些具体的区块链项目,由于对底层技术不熟悉或者本身区块链平台的不完善,会造成项目中存在一些安全隐患。数据层作为区块链的底层基础构建,一旦出现漏洞等应用问题,就会给上层的应用带来严重危害。</p>
<p><strong>1. 应用层</strong><br>
在应用层中,用户会与该层的各种应用程序进行直接交互,无须考虑底层的技术实现。一般来说,应用层与区块链具体的应用有着密切的关系,目前区块链技术的应用场呈现出越来越广泛的趋势,典型的包括数字金融业务、数据版权保护应用、供应链管理等数字金融类场景是区块链技术的早期应用方式,除了比特币以外。目前已经出现大量的争币，例如以太币、零币、门罗币等。用户可以通过各种各样的数字货币客户端实施交易内买一些商品或者服务。这些数字金融类的应用都有各自对应的客户端,例如比特而专门的比特币钱包,而以太坊也有专门的以太坊钱包。</p>
<p>区块链系统应用前景极为丰富，这也让区块链系统本身面临前所未有的挑战。应用层通常与区块链系统直接交互,因此它面临的安全挑战主要由以下3方面引起。</p>
<p>(1)传统攻击威胁:传统针对 We 网页或动客户端的攻击方式在区块应用层中也适用,恶意攻击者常常可以利用一些传统的攻击手段对区块链系统实施攻击,例如钓佳网站、App 伪造漏洞直接盗取用户的个人私钥。所以,防御传统攻击是区块链应用层安全中需要解决的首要问题。</p>
<p>(2)第三方服务漏洞:区块链系统还依赖区块链服务提供商和第三方中介机构。例如,用户为了管理自己的密钥,可能使用比特币钱包供应商提供的密钥管理服务，这样攻击者就可以利用后门攻击等方式窃取用户的密钥。</p>
<p>(3)客户端开发漏洞:在应用客户端开发过程中,代码漏洞是一个难以完全杜绝的问题,特别是利用第三方进行开发,很可能产生越权漏洞或遭受供应链攻击等威胁。</p>
<p><strong>2. 智能合约层</strong><br>
智能合约给用户带来了可编程的区块链应用能力,用户可以无须关心如何设计区块链底层协议(如共识协议、交易模式等),只要具备一定的计算机基础都可以创建智能合约来构建去中心化应用，也可以通过调用智能合约接口的方式来使用去中心化服务。然而,智能合约技术给人们带来许多技术上的优势,但是使用该技术也不得不去应对诸多的安全挑战。主要原因在于,智能合约这一概念由来已久,但真正开始在区块链中使用的时间却不长,由于对其底层的运行机制和原理了解不深,对开发者和普通使用者还是极容易出现安全问题。据腾讯安全团队统计,2018 年上半年,仅仅由于智能合约漏洞而造成的直接经济损失就超过数十亿美元,智能合约技术当前面临的主要问题包括以下 3 点。</p>
<p>(1)代码开发漏洞:大部分的智能合约安全漏洞是由于创建者在编写智能合约代码时无意识地埋下了安全隐患。区块链中的智能合约,如以太坊,默认采用的编程语言是Solidity。由于合约代码和传统的 Java/C++ 等代码运行模式不同,导致出现了一套新的编程需求和规范，然而很多的开发者在还没有完全掌握该语言的情况下就发布了智能合约代码,导致被攻击者利用,造成使用者的经济损失。例如,有学者发现以太坊上有上百万个智能合约不符合 ERC-20 标准的代币(Token)合约,存在潜在的安全威胁。此外,也存在部分合约漏洞是创建者有意识地在合约中设置陷阱的情况,其利用使用者对合约的不熟悉来获取某种经济利益。目前,代码开发过程中产生的漏洞形式包括可重人攻击、交易依赖攻击、时间戳依赖攻击等。</p>
<p>(2)验证机制不完善:智能合约目前还缺少有效的形式化验证机制来保证合约的运行安全。一般而言,一种语言的发展会伴随着各种的组件和工具的产生,主要是为了提供便捷的调用和安全性检查。区块链中的智能合约由于发展时间还不是很长,相应的生态<br>
还未完善,这也是导致智能合约出现安全漏洞的原因之一。</p>
<p>(3)外部调用漏洞:创建者会依赖一些可信实体,通过提供对外数据接口来实现智合约与外部系统的连接。预言机是区块链智能合约与外部 Web API 对接的实体,但是由于中心化的原因,其自身的可信度也存在疑问,而且容易遭受外部黑客攻击或发生自身单点故障的问题。</p>
<p><strong>3. 共识层</strong><br>
共识层能够保证区块链的正常运行,是区块链的核心所在。共识层安全主要依据共识机制来确保区块链节点在复杂的网络通信模式中共享同一份有效的区块链视图，即它能够为全网对区块链数据的一致性提供保障。不同的共识协议或多或少都存在这样或那样的安全问题,现有的破坏共识层安全的攻击方式多种多样,如自私挖矿攻击、女巫攻击等，主要的原因包括以下 3 点。</p>
<p>(1) 缺乏形式化安全证明:共识机制的安全性依赖于网络实际运行环境,包括时序性、节点数量、资源(算力或权益)分布等因素。传统的安全性分析方法不能全部应用于区块链场景，造成共识机制缺乏有效的安全性证明。</p>
<p>(2)安全性假设较强:与传统密码方案将安全性归结为计算困难问题不同,共识机制的安全性是基于假设节点的诚实比例,对于不同的区块链网络,由于加入节点的数量能力等不同,诚实比例的数量很容易发生动态性调整,造成共识协议的安全假设不成立。</p>
<p>(3)扩展性较差:可扩展性是区块链不可能三角重要的一方面,为了保证去中心化的特性,往往以牺牲区块链的可扩展性为代价,比特币就是最典型的例子,它要耗费 10 分钟才会生成一个新的区块,确认一批交易。如何改善区块链自身存在的可扩展性差的问题，同时保证一定的去中心化安全特性是目前区块链共识层重点考虑的方面。</p>
<p><strong>4. 网络层</strong><br>
区块链系统网络层可以确保各个区块链节点之间通过点对点网络进行有效的数据传输。区块链网络采用 P2P技术进行节点与节点之间的通信,具备去中心化、动态变化等特性。在公有链中,网络中的节点由关系平等的服务器构成,散布于不同物理位置的任何节点可以在任何时刻自由地选择加入或者退出区块链节点网络。典型地，如比特币网络就是建立在互联网基础之上,来自全球各地的任何节点可选择在任意时候退出。截至2019 年6月,比特币网络的节点数量已经超过 5000 个,总体节点数量大约为10万个。</p>
<p>网络层中的安全问题主要是 P2P 分布式网络安全和隐私保护。在 P2P 分布式网络安全中,与传统的客户-服务器架构模式相比,P2P 分布式网络无法使用防火墙来实现内外网隔离或使用入侵检测技术来有针对性地进行防御,而且 P2P 中的节点由于安全等级和防护能力不统一,更容易遭受安全攻击。另一方面,根据分布式点对点网络的拓扑结构,可以依据网络通信的路由信息有针对性地发起攻击行为,例如,日蚀攻击就是这种攻击方式的典型代表,通过破坏目标节点与主网节点数据视图的一致性为其他攻击行为提供铺垫。</p>
<p>在网络层安全中，隐私安全问题表现得更为明显,尽管对区块链中传输的数据进行了加密处理,攻击者无法查看到明文信息,但是通信的路由信息显示了节点之间的源地址和目的地址,攻击者可以通过监听不同交易发起者的 IP 信息来推测出用户的隐私信息。</p>
<p><strong>5. 数据层</strong><br>
数据层是在网络层基础之上,提供区块链数据的管理功能。一般来说,可以从 3 个层而理解数据库系统的可信度:存储可信度、处理可信度和外部访问可信度,如图 5.5所示。</p>
<p>(1)存储可信度:指当区块链上的数据结果被确认保存后会避免数据丢失或数据被篡改的情况。存储可信度要求系统能够提供传统数据库管理系统和事务处理中所要求的事务持久性,同时也要求数据库系统在出现存储错误、通信故障或遭受蓄意攻击时,仍可以保证数据存储的正确性。</p>
<p>(2)处理可信度:指数据处理(计算)的正确性,也指数据处理过程和输出结果可审计与可溯源。即使通过共识算法来保证对于主链的共识,分布式的区块链网络架构也会由于网络延时、外部攻击等问题造成各节点在同一时间点上所看到的数据视图的不-致。因此,如何在保证数据处理正确性的前提下平衡性能是处理可信度重要的考量指标。同时,多节点验证机制和链式的数据记录方式天然支持了数据的可审计性和可溯源性。</p>
<p>(3)外部访问可信度:指数据库的访问控制机制,允许具备访问权限的用户来操作和查看数据库,阻止非法用户查看和使用数据库中的数据。外部访问可信度依据不同的应用场景(如公有链、联盟链),有不同的访问控制机制。</p>
<p>一般来说,对区块链数据层的恶意攻击包括以上 3 方面。区块链上的数据主要保存在各个区块上,区块与区块之间以链式数据结构的方式链接。区块链上的数据所面临威胁主要有资源滥用和恶意信息攻击。</p>
<p>此外,数据层中非常重要的一个方面是数据的隐私保护问题。区块链中的交易记录在往是公开可查询的,没有使用任何额外的数据保护技术对其进行保护。区块链交易记梁或多或少地包含一些敏感数据,有可能泄露用户的隐私。</p>
<h2 id="第6章-应用层安全">第6章 应用层安全</h2>
<h3 id="密钥管理安全">密钥管理安全</h3>
<p>区块链中的私钥是用户进行数字货币花费的唯一凭证,它是这样的一个随机字符串，5KYZdUEo39z3FPrtuX2QbbwGnNP5zTd7yyr2SClj299sBCnWjss,这串随机数直接关系着数字加密货币等资产使用的安全性。由于区块链中数字加密货币具有匿名性，攻击者只要拥有私钥就会成为对应数字加密货币的拥有者,可以随意地对数字加密货币进行转移和使用。私钥是作为保障区块链用户账户安全的重要屏障，一旦用户的私钥发生泄露将会导致巨大的经济损失。目前,由私钥的泄露造成的经济损失已达数百万美元。攻击者盗取私钥采取的攻击方式各不相同,其中较为经典的攻击方式包括字典攻击、撞库攻击、键盘记录攻击、缓存侧信道攻击、货币木马攻击。</p>
<h4 id="字典攻击">字典攻击</h4>
<p>字典攻击是指攻击者通过逐一尝试用户自定义词典中的可能密码而发起的攻击。对于比特币区块链,用户的地址并非公钥,在知道地址的交易中,如果想要获得该比特币需要经过以下 3 个过程。</p>
<p>(1) 通过词典查找的方式,随机生成一个私钥。<br>
(2) 通过该私钥计算出对应的公钥。<br>
(3)通过公钥计算出对应的地址,并确认该地址是否与比特币地址一致,如果不一致则重新回到第(1)步进行计算。</p>
<p>理论上,攻击者通过上述过程来完成对私钥的字典攻击的成功率是非常低的,尤其是需要运行至少 3 次的 SHA-256 哈希算法。但实际上,由于一些区块链系统在设计过程中使用了不准确的助记词帮助生成私钥,导致攻击者很容易就通过弱的助记词生成用户的私钥。例如,rabbit 的 SHA-256 哈希值很容易计算:<br>
d37d96b42ad43384915e4513505c30c0b1c4e7c765b5577eda25b5dbd7f26d89</p>
<p>如果攻击者建立一个数据量庞大的字典表,只要看到 rabbit 的哈希值就可以将其转换为初始文本,进而破解出用户私钥。在 2018 年曾发生相关的安全事故，旨在为商业级用户提供分布式应用的高性能、可扩展区块链平台的 EOS(Enterprise OperatiorSystem)区块链系统,被发现其账户存在字典攻击的潜在风险,主要原因是用户对 EOS密钥生成工具使用不当。该工具支持用户通过自己选择的种子来生成 EOS 密钥对，然而用户使用了较为简单的字符串作为种子,导致攻击者可以通过自动攻击的方式生成用户的密钥。</p>
<p>如图 6.2 所示,用户为了方便记忆,通常会采用一些强度较弱的字符串作为生成密钥的种子。攻击者利用用户的这种行为习惯,通过统计分析建立字典表,有针对性地对某些字符串进行遍历查找,直到找到(击中)某个密钥对应的公开 EOS 账户,进而导致账户数字资产被盗。</p>
<p><img src="/img/blockchain_sec/6_1.png" alt=""></p>
<h3 id="撞库攻击">撞库攻击</h3>
<p>在互联网应用中,很多用户安全意识不足或为了方便记忆,对不同的系统都设置了通用的账户名和密码,攻击者通过盗取其中一个网站系统的使用密码,来尝试获取用户在其他网站系统的登录账号,这种攻击称为撞库攻击。在区块链中,这种潜在漏洞可以被攻击者积极利用,通过窃取用户在其他网站系统的登录账号密码来推测出用户的区块链账号私钥。</p>
<p>在 6.2.1 节的 EOS 例子中,用户可以使用简单的助记符生成私,其他的区块链平台由于密码设置相对复杂,需要加上一些特殊符号。但是,很多用户在设置其他平台的账号时为了方便记忆,使用和 EOS 一样的字符串,再添加特殊符号,例如 rabbit@123。这样攻击者可以发起字典攻击盗取到用户的账号,再利用盗取的 EOS 密钥加上一些特殊字符,通过尝试登录其他区块链系统是否成功判断私钥是否正确,这就是一种典型的撞库攻击行为。例如,2018 年 9月,OKEx 数字加密货币交易所就被披露遭受撞库攻击,导致了用户账户被盗事件。</p>
<h3 id="键盘记录攻击">键盘记录攻击</h3>
<p>键盘记录攻击是指通过一些软件程序或者硬件设备将用户所有的按键数据进行捕获的攻击方式。通常键盘记录被作为一种应用工具,然而这种工具可以被攻击者利用,发起键盘记录攻击,即攻击者通过在用户移动设备或者计算机安装恶意软件,对这些软件中用户键盘的操作进行记录。一旦用户在手机或移动端进行键盘输入,植人的恶意软件就会把所有用户输入的记录打包成 PDF 等文件发送给攻击者。攻击者只需要通过简单地分析,就能还原出用户的账号密码等敏感信息。因此,利用键盘记录来发起的攻击是最容易获取密码的方法之一。</p>
<p>一般主要有两种形式的键盘记录器:硬件键盘记录器和软件键盘记录器。硬件键盘记录器通常使用 USB或物理设备连接计算机或键盘的芯片来实现，这种是很容易被察常的攻击方式。对于软件键盘记录器,由于其隐蔽性较高,这种恶意软件的安装往往是不容易察觉的,目前的检测手段也很难完整地识别出这类软件,一般的传播方式有以下两种。</p>
<p>(1)通过网络钓鱼攻击的方式,恶意攻击者通常伪装成知名机构或个人,并将恶意软件包裹在电子邮件中进行群发送,形式可以为可执行文件(.exe)、文本文件(.txt、.pdf)等<br>
用户一旦单击,就会被安装该恶意软件。<br>
(2)通过零日漏洞来主动进行扫描入侵。零日漏洞是指还没有发布正式补丁的安全漏洞,在用户未完成补丁更新之前,攻击者通过利用这种漏洞来发起攻击行为，也称零日攻击。</p>
<h3 id="缓存侧信道攻击">缓存侧信道攻击</h3>
<p>攻击者主要利用 ECDSA(圆曲线签名算法)方案中的取模运算和签名运算的代码漏洞来发起攻击,核心算法为<br>
$s=(k-1)(m+rx)(mod\ q)$</p>
<p>对于ECDSA 缓存侧信道攻击,主要实现流程伪代码如下:</p>
<p><img src="/img/blockchain_sec/6_2.png" alt=""></p>
<p>在代码的执行过程中如果出现参数 $a$ 为$[0,q-1]$时,取模运算就会终止，此时攻击者可以通过检测 DivRem 是否被调用得出参数 a 的相关信息。此外,还存在另一种常用的攻击方式:攻击者首先找到云服务供应商提供给受害站点的物理处理器,通过启动TSL 连接来触发进行 $ECDSA$ 签名;其次利用虚拟机(VM)侧通道窃听信息,利用窃听到的信息恢复出可以进行敏感操作的用户私钥;最后利用私钥来监听用户和站点之间的对话,从而盗取隐私信息。这种攻击常发生在处理器体系架构的运行状态、功耗或者电磁辐射发生变化时,这些变化会成为攻击的主要攻击源。</p>
<h3 id="货币木马攻击">货币木马攻击</h3>
<p>货币木马病毒通常指攻击者设计的一段恶意代码或者恶意软件,这些代码伪装成合法代码或者软件来控制用户终端设备的客户端。货币木马病毒是木马攻击的一种,主要目的在于窃取受害者钱包中的数字加密货币。</p>
<p>攻击者利用木马病毒来窃取数字加密货币的攻击方式原理如下:首先,攻击者通过某种方式(例如恶意邮件、钓鱼网站等),在受害者计算机或者移动设备端安装特定的木马病毒,这种特殊的木马病毒能够截取用户发起的数字加密货币交易,通过实时扫描受害者终端设备中剪贴板中的内容,查看是否出现了数字加密货币的交易地址,如比特币交易地址等。如果检测到有数字加密货币地址,在用户将交易地址复制到钱包时,攻击者会利用木马病毒将恶意地址复制到剪贴板中替换原来的合法地址,即将用户原本要发送的地址修改为攻击者预先设置好的地址。此时,如果用户没有进行地址检查,货币就会被转移到攻击者账户下。这种攻击能够很容易实现的原因是使用剪贴板不需要用户额外授权，旦遭受这种针对剪贴板的劫持木马,剪贴板上原有的内容很容易被替换和盗取。下面针对个人计算机和移动终端分别简述货币木马攻击的原理。</p>
<p><strong>1.针对个人计算机的货币木马攻击</strong><br>
个人计算机上的剪贴板是 Windows 系统中预留的一段连续的、存放信息大小可变的内存空间。它是一块全局的共享内存,主要用于暂时记录来自不同进程之间需要进行交换的数据。货币木马病毒感染个人计算机后会持续不断地扫描剪贴板中存储的数据,判断其是否为电子钱包地址,一旦判断为钱包地址就将其替换成剪贴板内存里攻击者预先设置好的接收地址。</p>
<p><strong>2.针对移动终端的货币木马攻击</strong><br>
移动终端的安卓操作系统中同样存在剪贴板，可以被用来在内存中暂存数据,任何应用程序都可以访问剪贴板中的内容。图 6.3 是安卓操作系统剪贴板的工作流程。当进行到将 Clip 对象放入剪贴板这一步骤时,木马病毒会自动检查剪贴板的内容是否为电子钱包地址,如果是则替换成攻击者设置好的钱包地址,从而窃取用户数字加密货币。</p>
<p><img src="/img/blockchain_sec/6_3.png" alt=""></p>
<p>从原理上来说,针对个人计算机或者移动终端的货币木马攻击流程是一样的,都是通过嵌人木马病毒、实时扫描剪贴板中的内容盗取用户数字资产。</p>
<h3 id="客户端安全">客户端安全</h3>
<p>不同的区块链系统都有着各自的交易客户端,主要用来提供数字加密货币的在线交易功能,支持交易数据的发出,主流的是 Web 网站和轻量客户端形式。一般交易客户端又称钱包,主要分为两类:热钱包和冷钱包。其中,前者指的是与网络直接相连的在线式钱包,而后者的主要特点是私钥不与网络接触,相比热钱包冷钱包安全性更高。目前,主要被用来进行数字加密货币交易的客户端包括比特币 Bitcoin Core 钱包、以太坊钱Mist 及莱特币 Litecoin Core 钱包等,这些钱包客户端的安全直接与数字加密货币交易用户的账户安全息息相关,一旦客户端出现安全漏洞,将会出现严重的安全事故甚至给用户带来巨大的经济损失。例如,知名的数字加密货币莱特币,其钱包客户端曾出现严重的安全事故导致用户货币被攻击者盗取,攻击者恶意篡改客户端的公开代码、加入恶意的代码、将攻击者的恶意账号注人客户端中,一旦用户使用钱包接收转账时资金就会自动地转到攻击者的账户下。</p>
<p>如表 6.1 所示,存在大量的区块链事件是由客户端安全所造成的。破坏区块链客户端的正常运行的方式各不相同,其中包括 5种:API关键密钥窃取App 造漏洞、钓鱼攻击、恶意挖矿攻击和 Web 注入攻击。</p>
<h4 id="API关键密钥窃取">API关键密钥窃取</h4>
<p>为了迎合开发者和用户的需求,主流的数字加密货币平台(如以太坊以及比特币等)会提供相关的应用程序接口(Application Programming Interface,API),用户可以利用这些用户接口完成区块链相关交易信息的查询。其中部分需要特定密钥的 API会涉及取消和确认交易等敏感操作,因此攻击者可以利用这些 API 窃取用户的关键密钥来盗取和转移用户的资产从而导致用户的财产损失。如表 6.1中所述,而安交易所入侵被盗事件的发生就是因为大量的密钥被盗取。2018 年7月4日,币交易所遭受API关键密钥窃取攻击，导致多个 Token 被盗,其中被盗的 Token 以约等于100个比特币的价格被卖出，最终导致该 Token的价格暴涨数百万倍。为了进一步说明 API攻击如何影响数字加密货币的价格变化,下面对数字加密货币中的 API的工作原理进行简单的说明。</p>
<p>用户利用数字加密货币提供的API与不同的交易所进行交互，因此当 API被恶意控制后,黑客可以通过 API 窃取用户私钥并进行一系列恶意操作。在用户启用交易所提供的API进行访问时,需要先生成一组密钥，这组密会作为用于提供用户交互过程所需权限的凭证。目前,在数字加密货币系统中存在 3 类不同等级的 API权限。</p>
<p>(1) 只读权限:可以读取指定用户相关账户信息、交易记录以及市场中相关的交易活动数据。<br>
(2) 交易权限:可以利用该权限为授权的用户账户执行相应的交易。<br>
(3) 提款权限:可以利用该权限为授权用户从各个数字加密货币交易所中提取<br>
存款。</p>
<p>通常情况下,一般用户默认开启前两个权限,即只读权限与交易权限,当用户需要提款时需要开启提款权限。因为提款权限涉及的风险更高,安全级别设置较高的数字加密货币会要求用户为其预先设置 IP 白名单和双重认证。在这种情况下即使用户的身份信息或者密码等被攻击者盗取,提款权限也不会被轻易获取。在这种限制条件下,攻击者取得相应的用户信息之后一般会将存款提取到有提款权限的账户中后再进行提取。当攻击者通过 API拿到用户信息之后的一般做法如下。</p>
<p>(1) 攻击者会先选定一种交易量和交易订单较少的数字加密作为攻击对象,通过累积足够多的某类数字加密货币为攻击做准备。<br>
(2)利用之前被盗取的用户账号,通过交易所提供的 API发起足够大的交易请求,并且在这些交易请求中,交易的价格通常会被抬高,如被抬高至日常价格的数万倍。<br>
(3)出售之前大量积累的数字加密货币,攻击者可以获得在这些交易中产生的巨大的价格差值作为利润。<br>
(4) 通过将获得的巨额利润转移出交易所来套现,资金被转移之后,所有已发生的交易将无法再更改,至此攻击者套现成功,用户将承受巨大的经济财产损失。</p>
<p>现如今 API信息泄露通常会分为两种与常见违规操作相对应的 API使用模式。主要包括下面两种 API关键密钥窃取的方式。</p>
<p><strong>1.具有大量第三方集成的大型平台</strong><br>
具有高流量站点并提供服务的组织通常具有大量的第三方集成系统,这些集成依靠API从第三方收集数据并以无缝方式将其提供给用户。在多云环境以及传统容器化等架构为代表的基础设施的去中心化、激励共享需求日益增长,这意味着 API并不是奢侈的事情,它对于现代的大集成平台必不可少,其中有的平台具有数百个 API,所有这些 API都需要进行管理和监视。但是,攻击者如果针对性地对某些开放 API的功能模块进行分析,就能发现其中的漏洞,并获取敏感数据或者特殊权限,从而实现对用户数据的访问和修改。</p>
<p>图6.4 显示了一个具有理论微服务体系结构的大型 Web 平台,该体系结构在很大程度上依赖于 API之间功能上的通信和集成。攻击者可以利用 API上的漏洞(或者是简单地缺乏访问控制)来获取对敏感数据的访问。<br>
<img src="/img/blockchain_sec/6_4.png" alt=""></p>
<p><strong>2.移动应用程序</strong></p>
<p>大多数移动应用程序都依赖 API 从服务器提取数据,使得这些应用程序可以在设备本身上使用较少的资源。由于移动应用程序保护存在一些固有的挑战，活跃的攻击者会通过反编译和逆向工程来寻找移动应用程序中的漏洞。</p>
<p>图6.5显示了一个应用程序通过移动设备专用的 API路由，用户通过 Web 界面连接相同的后端,这种适用于传统 Web 应用程序攻击的方式(例如,字典攻击货币木马攻击)也适用于移动 API。</p>
<p><img src="/img/blockchain_sec/6_5.png" alt=""></p>
<h4 id="App伪造漏洞攻击">App伪造漏洞攻击</h4>
<p>App(Application)伪造漏洞是指攻击者利用钱包客户端未进行重打包防护的漏洞在钱包客户端代码中添加自定义的恶意代码。攻击者通过这些恶意代码来监听和窃取用户私钥等关键信息，从而盗取用户财产。2017 年年底，安卓操作系统被曝出高危漏洞-Janus 签名漏洞,通过这个漏洞，攻击者可以避开安卓操作系统的签名机制,对App 程序进行修改。</p>
<p>Janus 签名漏洞产生的主要原因在于谷歌在安卓 4.4 版本中引入了新的执行虚拟机ART(Android Runtime)。相比于之前版本的执行虚拟机，ART 支持直接运行 DEX 文件,无须包装成为 ZIP 文件,因此在程序中运行时并未检查文件头部 magic 字段(为504B0304)是否为 ZIP 文件。这样攻击者可以将恶意程序放置在 APK 文件的头部。由于一般用户系统在进行 APK 文件安装时,系统都会忽略检查 APK 文件的头部 magic 字段,默认攻击者恶意程序为正常的 APK 文件,程序尾部会被直接开始读取和解压。此时,用户系统检查不出签名有任何变化,因此直接安装了被攻击者篡改过的恶意程序。</p>
<p>如图 6.6 所示,存在两个安卓 apk 应用:正常应用 apk 和恶意应用apk。攻击者通过反编译获得正常应用程序和恶意应用程序 apk 的代码(即 smali 代码)。通过在注人点注人恶意 smali代码的同时修改配置文件,可以获得一个包含恶意代码的 apk 应用程序,攻击者对它重新打包发布。</p>
<p><img src="/img/blockchain_sec/6_6.png" alt=""></p>
<p>由于安卓操作系统的使用用户非常多,攻击者可以利用 Janus 签名漏洞修改各种钱包客户端代码,通过植人恶意代码将转账的地址全部替换成攻击者的收款地址,用户一旦使用伪造的客户端钱包进行转账操作,就会造成不可估量的经济损失。</p>
<h4 id="钓鱼攻击">钓鱼攻击</h4>
<p>攻击者通过伪造以太坊、比特币等数字加密货币常用交易钱包客户端的操作界面来伪造非法客户端(称为钓鱼平台),主要针对一些对交易钱包客户端还不太熟悉的用户。一旦用户疏忽大意,不仔细检查交易客户端的安全性,确认是否为真实的客户端平台,就有可能中招,这就是典型的钓鱼攻击。攻击者利用钓鱼平台对收集到的用户敏感数据信息进行分析,从中可以挖掘出有价值的数据,甚至钱包交易私钥。</p>
<p>例如,IOTA(基于数字加密货币)在诞生之初,用户对此数字加密货币了解得不够深人,包括客户端的操作使用。攻击者利用这一点精心设计了一个钓鱼网站,<a href="http://xn--iotaseed-wg0mf8yq7gkxmd22e.io">注册域名为iotaseed.io</a>,专门用来为用户提供在线种子(随机数)生成器,该种子被用户用来生成公共钱包地址。从域名地址来看,用户很轻易地就相信该网站为 IOTA 官网版的种子生成器,而实际上,攻击者通过对底层代码修改,将随机数生成函数总是返回相同且可预测的数字,因此生成的种子也是相同的,进而掌握了用户的私钥信息，最终盗取了大量用户的数字加密货币资产,其价值近 400 万美元。</p>
<p>从上面的攻击方式可以看出,有些攻击手段需要的成本非常低,但是却能导致巨大的经济财产损失。为了保障客户端的安全性,一方面,各交易平台和安全企业可以通过建立完善的网络安全部门,不断地对交易平台进行审查,同时提供给用户检验交易平台真假的方法;另一方面,用户在使用这些客户端的时也需要多加小心,避免出现重复使用同一案码等不利于账户安全的行为。</p>
<h4 id="恶意挖矿攻击">恶意挖矿攻击</h4>
<p>恶意挖矿攻击(Cryptojacking)主要指在未获得用户授权时,强行劫持用户的计算设备进行数字加密货币的挖掘操作的恶意行为。在大多数情况下,被劫持用户的设备所拥有的计算处理资源以及通信带宽资源等会被攻击者恶意利用。目前,数字加密货币需要使用大量的计算资源和带宽来进行挖掘工作,为了减少挖掘成本以及获得尽可能多的计算资源,攻击者可以利用这种攻击手段收集被劫持用户的设备,以较少的成本获得较高的收益。</p>
<p>目前,攻击者通常会在恶意程序中注人数字货币挖掘代码以劫持用户设备，或者在恶意网站中注人恶意脚本来劫持用户设备资源。常见的方式包括在恶意网站链接、恶意电子邮件及软件中注人代码实施攻击。随着数字加密货币的进一步推广,未来攻击者采用的攻击方式会越来越多样化,类似的安全事件会不断发生。</p>
<h4 id="Web-注入攻击">Web 注入攻击</h4>
<p>在一些区块链交易系统中,如知名的货币交易所 Coinbase,钱包客户端是以 Web 网页的方式进行管理的,这样使得传统的针对 Web 客户端的攻击技术就可以被利用来对区块链交易系统进行攻击。2017 年8月,Trickbot 银行木马对几家数字加密货币交易所实施 Web注人攻击,攻击者通过木马病毒在数字加密货币交易所网站上挂起虚假登录页面功能,使得用户在购买数字加密货币时,攻击者将用户钱包接收地址定向到攻击者自己的地址。</p>
<p>目前,Web 注人攻击的方式有多种,比较常见的 Web 注人攻击主要有 SQL 注入及跨站脚本(Cross-Site Scripting,XSS)两种方式。</p>
<p><strong>1.SQL注入攻击</strong></p>
<p>SQL 注人攻击指攻击者通过精心构造 SQL 查询指令来向系统获取敏感数据,或者是网站的用户管理权限。例如,系统用户管理的 SQL 数据库运行的命令如下:<br>
<code>SELECT * FROM users WHERE 'username'='$user AND 'password'='Spasswd';</code></p>
<p>$user和 $passwd 分别指用户的用户名和密码。假设用户 Alice 登录系统访问时密码为 mingli@123,执行的 SQL数据库命令如下:<br>
<code>SELECT * FROM users WHERE 'username'='$Alice AND 'password'='mingli@123';</code></p>
<p>但是,攻击者可以使用此种 SQL 命令的漏洞来直接获得登录权限。攻击者可以在密码输入框中输入<code>'hi'OR 1--'</code>,执行的 SQL 数据库命令如下:<br>
<code>SELECT * FROM users WHERE 'username'=$Alice AND 'password'='hi' OR 1=1 --';</code></p>
<p>攻击者可以获得所有用户名为 Alice 的账户信息,由于命令行通过 OR 1=1 取消了对密码的检查。首先,1=1 总是成立,此外<code>“--”</code>在 SQL 是注释标识,可以被用来取消查询中原始的其他引号和其他任何的检查,即使有额外的凭证需要被检查,也会被系统忽略。因此,攻击者也可以直接登录系统进行访问。</p>
<p><strong>2.XSS 攻击</strong><br>
XSS 攻击指通过在网页中嵌人恶意脚本程序,攻击者可以在用户浏览被注入程序的网页时,强行将恶意程序运行在用户的浏览器上。攻击者可以设定恶意脚本执行,包括盗取用户客户端 Cookie 以获得控制用户执行权限、获取用户名和密码(或管理员权限)等会带来严重危害的命令,致使用户客户端瘫痪。</p>
<p>通常情况下,具有安全意识的用户不会轻易点击进入未知网站,但是攻击者通过转载知名网页内容或者设计钓鱼网站,用户一旦点击进入就会遭受巨大损失。</p>
<h2 id="第7章-智能合约层安全">第7章 智能合约层安全</h2>
<h3 id="以太坊与智能合约">以太坊与智能合约</h3>
<h4 id="以太坊">以太坊</h4>
<p>以太坊是区块链 2.0 的典型代表,根据其官网中所定义的，“以太坊是一种支持智能合约的去中心化平台”,所以相较于比特币，以太坊除了支持数字货币交换功能以外,更重要的特性在于其所具备的可编程智能合约。正因如此,它可以被应用到更为广泛的非金融领域。简单来理解，以太坊是一台开放式的全球计算机,所有人都可以参与进来进行读取和写入操作,它可以支持用户创建可扩展的、易于开发的和协同的去中心化应用,是一种支持图灵完备(TuringComplete)编程语言的公有链平台。基于以太坊所设计的灵活合约编程语言开发者可以在以太坊中快速地创建去中心化应用，自定义地设定交易的规则状态转换函数以及交易方式等逻辑。比特币和以太坊两大公有链对比如表 7.1所示,主要的区别体现在共识效率(平均块生成时间)、交易规则以及是否支持图灵完备智能合约方面。</p>
<p><img src="/img/blockchain_sec/6_7.png" alt=""></p>
<p>在共识机制方面,以太坊最初采用的也是同比特币一样的基于工作量证明,为了提升平台的整体效率、减少资源的浪费,正在引入基于权益证明的共识机制。以太坊计算难度设置使其块产生时间非常快,也更符合现实去中心化应用对实时性的要求。此外,在交易设计中,比特币仅支持简单的数字货币转移,而以太坊可以设定基于复杂条件的价值转移,也即用户可以定义复杂的逻辑来实现相应的业务目标。最后,比特币只能支持有限规则的脚本语言,而以太坊支持任何逻辑规则的图灵完备编程语言。总体而言,以太坊一定程度上解决了比特币在可扩展性方面的不足。</p>
<p>下面介绍以太坊 3 种特殊的数据结构。</p>
<p><strong>1.账户</strong><br>
在以太坊中,用户可以创建一个或多个账户,每个账户都对应一个由 20 字节构成的唯一地址,主要由 4 部分构成。</p>
<p>(1)随机数($Nonce$):用于确定每笔交易只能被处理一次的计数器。<br>
(2)账户余额($Balance$):账户当前的以太币余额,其单位为 $Wei,1ETH=1×10^{18}Wei$<br>
(3) 合约代码($Bytecode$):账户所对应的智能合约代码,在合约创建时产生。<br>
(4) 存储($Stored Data$):账户的存储,每个账户都包含一个“键-值”对(Key,Value)形式的持久化存储,Key 和 Value 的长度都为 256 位。</p>
<p>特别地,以太坊中主要有两种账户类型:合约账户(Contract Account,CA)和外部账户(Externally Owned Account,EOA),其中合约账户 CA 是由智能合约中的代码逻辑来控制,在合约账户收到一笔有效交易的输入时,合约内部的代码会激活并支持对内部存储进行读写、消息发送或合约的创建。外部账户 EOA 也称用户账户,由用户自己的私钥来控制,支持用户通过创建和签名的方式来完成一笔交易,与比特币交易原理类似。在以太坊中,这两类账户共同维护了一些状态对象(State Object)的实体,这些实体中包含了变量所对应的状态信息。合约账户主要存储和管理用户余额以及合约中的内容,外部账户主要负责管理用户账户的余额,这些存储的状态对象在以太坊中会基于共识协议来保证一致性,各区块链节点拥有对全局状态对象的一致性视图(一定持久块之前的视图)。图7.1为两个状态对象之间通过交易的形式发生转换，通过一笔交易形式，地址 14c5f8b。中的10ETH 转人到地址 bb75a980 中,同时通过合约代码中的逻辑,将数据 <code>data[1]=CHARLIE</code> 写入新的状态对象中,这是状态对象实体转变的简化过程,本质上是一种状态机迁移,通过用户交易触发合约状态发生改变。</p>
<p><img src="/img/blockchain_sec/6_8.png" alt=""></p>
<p><strong>2.交易</strong><br>
以太坊中的交易是指由外部账户发送的消息签名数据,其中包含了发送者签名、接收者地址、账户余额、发送币的数量、发送数据以及最大消耗的 Gas 限制(StartGas)、合约每步执行支付给矿工的费用(GasPrice)。以太坊中的交易和比特币的交易形式有些区别除了用户账户(与比特币一样,用于实现普通的转账交易),以太坊还包括合约账户,该类账户是在智能合约被第一次发布在区块链时所创建的,其创建过程是通过合约创建交易形式完成的。特别地,合约账户创建交易与其他数字货币交易形式不同,只有发送者地址,接收者地址则显示为本合约被创建的地址,如图 7.2 所示。</p>
<p><img src="/img/blockchain_sec/6_9.png" alt=""></p>
<p><strong>3.燃料</strong><br>
为了防止智能合约中的逻辑过于复杂,如出现无限循环,进而导致以太坊节点瘫痪的问题,以太坊在设计过程中引入了燃料(Gas)的概念,智能合约代码转化为底层操作指令后,每个操作指令所触发的节点计算力消耗表现为不同大小的燃料消耗,这些消耗会转化为以太币,用来支付给矿工的计算费用。简而言之,燃料是用来维持以太坊生态系统正常运行的动力来源,合约中函数执行的计算会以燃料来衡量,用来支付给执行矿工的奖励。无论是普通转账交易,还是智能合约的创建和执行过程,都需要消耗燃料。在以太坊虚抄机中,函数会转化为操作指令,每个指令会消耗特定的燃料,用户在执行该函数前都需要输入一定的燃料作为执行的必要条件,每行代码都需要一定量的燃料来完成计算,不能小于预定的值,否则无法成功。需要注意的是,为了防止一个区块的数据过大而出现同步等计算问题,以太坊对每个区块所能消耗的最大燃料数进行了限制。在一个区块中交易执行过程中,总的燃料消耗超过了最大限制,则该笔交易会执行失败。</p>
<p>在交易中,用户需要设定两个与燃料相关的参数:燃料价格$(Gas Price)$和燃料限制$(Gas Limit)$。燃料价格是用户指定的每单元燃料的价格,一般以 $GWei(1ETH=1 \times 10^{18}GWei)$为单位。燃料限制是用户指定该笔交易支付的总燃料数量。按照多退少不补的原则,在交易执行过程中,如果燃料耗尽,则所有改变过的状态回滚到原来状态,已经支付给矿工的费用不会返回;如果交易执行完成,燃料还有剩余则会返还到对应的账户中。</p>
<h4 id="智能合约">智能合约</h4>
<p>智能合约是在 20 世纪 90 年代由 Nick Szabo 教授首次提出的其定义的智能合约为“一套以数字形式指定的承诺,包括各参与方履行其他承诺的协议”。与传统的纸质合约相比,智能合约是一套执行某种特殊条件的计算机协议,用户可以自定义与协议相关的规则和条件,并能够在可信的执行环境中自动执行这些协议。实际上,智能合约本身不一定需要依赖于区块链环境来运行,只要满足条件的可信环境就能够运行智能合约。由于一度缺乏这样的可信执行环境,智能合约在实际生活中难以实现,随着区块链技术的诞生和发展,其技术特性为智能合约的部署实施创造有利的条件。</p>
<p>智能合约在区块链中实际上是一段可运行的计算机程序,当满足一定条件时(有效数据输入),记录在智能合约中的事务处理和保存机制可被自动执行。智能合约收到事务信息后,会改变合约中的数据状态,从而触发智能合约并且根据预设信息选择合约动作自动执行。目前,多种区块链平台都提供了智能合约的执行和编译环境,例如以太坊、超级账本。智能合约常用于运作自动服务机构,用来提供透明公开的信息服务。在以太坊中,智能合约是包含计算机程序代码与状态数据的集合,在无须依赖第三方的情况下执行的可信数据传播、执行以及验证,其特性主要体现在 4 方面。</p>
<p>(1)计算机程序(Computer Protocol):智能合约是计算机程序代码。(2)自行验证(Self-Verification): 智能合约通过对输入数据进行解析，来自行验证<br>
(3)自动化执行(Self-Execution): 支持在可信环境中依据响应规则,自动化执行某数据是否满足此前所预置的响应条件。些代码和协议,其他参与方无法干预执行的过程和条件。<br>
(4)防篡改(Tamper-Resistant): 已经部署后的智能合约代码和状态数据是无法被篡改的。</p>
<p>如图 7.3 所示,一个智能合约模型包括一段运行在区块链上的代码,这段代码可以维护自身的状态,控制其上所具备的数字资产,同时与外界的输入请求进行交互,执行相应的指令动作。可以看出,在该模型下,智能合约存储了持久化合约的状态以及其中所存储数据的状态,这种链上状态的自我维护是区块链构建可信式分布式账本的基础。</p>
<p><img src="/img/blockchain_sec/6_10.png" alt=""></p>
<p>在以太坊中,主要有 4 种编程语言可以用来开发智能合约:Solidity、LLL、Serpent 和Mutan。其中,Solidity 是运用最为广泛的一种,语法与 JavaScript 非常类似。利用Solidity 开发的智能合约代码首先在以太坊虚拟机(EVM)被编译成字节码,编译完成之后将其部署在以太坊区块链,这样可以通过与特定合约的创建地址交互来完成交易过程。值得注意的是,智能合约只有在执行交易调用时才会运行,属于被动式触发,通常由外部拥有有效账户地址的用户发起。一般情况下,智能合约在以太坊中处于休眠状态,直到有用户利用有效输入来触发合约执行。</p>
<p>智能合约对应以太坊的合约账户,即由合约地址、合约余额、状态信息和合约代码 4部分组成。以图 7.4 中智能合约为例,这是一个简单的计数器,里面包含一个变量 count它是该合约的状态变量,当特定用户调用函数 add()对变量进行加 1操作时，count 在以太坊网络中的全局状态将会加 1,即在交易触发条件下,智能合约发生状态迁移的简易描述过程。在 7.1.3节中,将对 Solidity 具体语言规范及编译过程进行解析。</p>
<p><img src="/img/blockchain_sec/6_11.png" alt=""></p>
<h4 id="智能合约基本语法及编译">智能合约基本语法及编译</h4>
<p><strong>1.基本语法</strong><br>
Solidity 是一种面向对象编程的静态类型开发语言,语法与 JavaScript 接近，它专门用于开发去中心化应用。Solidity 支持继承、库和复杂的用户自定义数据类型等功能。通过一个简单的示例来学习智能合约的语法。读者也可以在基于浏览器的编译环境RemixIDE 进行学习,Remix 允许用户在上面开发部署编译和测试智能合约，程序如下:</p>
<p><img src="/img/blockchain_sec/6_12.png" alt=""></p>
<p>上述程序的 SimpleStorage智能合约,主要逻辑分为两大部分:①版本杂注，声明合约编译器的版本,在未允许版本的编译环境下该合约无法编译,用于告知编译器如何对智能合约进行编译。截至2020 年 10 月,Solidity 编译器版本已经发布到 0.7.4。在SimpleStorage 合约中,编译器版本选择 0.4.0 以上、0.7.0 以下都支持。②合约部分,与Java 中所定义的 Class 对象类，是包含一系列的代码(函数)和数据(状态)的合约对象。几点说明如下。</p>
<p>(1)第2行contract 后面定义的是该合约的名称。一般情况下,一个.sol 合约文件通常由一个或者多个 contract 构成。<br>
(2)第3行定义了合约变量,该变量为 unit 整数类型。在 Solidity 中,定义了多种数常由一个或者多个 contract 构成。据基本类型,包括地址、整数、布尔、枚举等,不同的数据类型定义消耗的以太坊 Gas 不同。为了降低交易的 Gas 消耗,通常会在满足条件情况下选择 Gas 消耗最少的类型进行<br>
定义,常用的整数类型还包括 uint8、uint32、uint256。<br>
(3)第4 行定义了event 事件,它是 Solidity 中特有的一种函数类型。event 事件是为了方便开发者使用 EVM 的日志基础设施，使得用户可以在 DApp 用户界面中监听该事件是否被触发。在该合约执行调用第 11 行的 print 函数时,在区块链中创建一个日志人口,打印 Hello World 参数。event 事件主要标记合约中重要的操作日志，提醒用户重要的函数操作将会被执行。例如 Transfer(),这种与用户账户余额相关的函数操作一般会设定 event 事件,来实时地通知用户余额发生变化。<br>
(4)第 5行 set(uint x)声明一个返回类型为空的公开函数,说明该函数除了可以被本合约所调用,还可以被外部其他合约所调用。<br>
(5)第 8行 get()声明一个有返回值类型的函数,函数声明中如果包含关键字returns,则说明该函数会有返回值。根据不同的返回类型定义有不同的返回值，如returns(uint)返回的是一个整数类型的值。</p>
<p>Solidity 智能合约主要包含状态变量、函数、函数修饰器、事件、结构类型和枚举类型六大类数据结构的声明,同时支持合约与合约之间的继承。其具体的声明及含义如表 7.2所示。</p>
<p><img src="/img/blockchain_sec/6_13.png" alt=""></p>
<p>以太坊发布的 Solidity Documentation 官方教程中对 Solidity 中结构、类型变量和特殊操作等做了明确的介绍,建议可通过此教程深人学习 Solidity 编程语言。</p>
<p><strong>2.以太坊虚拟机</strong><br>
目前,计算机虚拟机主要包括两种形式:基于栈(Stack-based)的虚拟机和基于寄存器(Register-based)的虚拟机。基于栈的虚拟机典型的包括JVM、CPython 等，它主要的特点是在进行运算操作时,直接与操作数栈(Operand Stack)进行交互，即数据存取顺序为先进先出,无法直接对内存中的数据进行操作,因此速度相对较慢,但优点在于实现较为简单、易于移植。基于寄存器的虚拟机是利用多个虚拟寄存器来进行操作数的运算，速度相对较快。以太坊虚拟机(EVM)是基于栈的虚拟机。基于 Solidity 编写的智能合约通过编译之后成为二进制指令文件,通过 EVM 执行来完成合约状态信息的改变。EVM是对外隔离的沙盒环境，即在运行期间无法访问网络或文件,即使不同的合约在 EVM 中运行时也仅有有限的访问权限。一般虚拟机主要完成3种功能。</p>
<p>(1)读取指令:获取内存中的指令信息。<br>
(2)译码:确定所要执行的指令类型<br>
(3) 指令执行:执行译码后的指令。</p>
<p>如图 7.5 所示，以太坊虚拟机中栈采用32B(256b)的字长,并以字(Word)为单位进行操作,栈最大支持1024个字。</p>
<p><img src="/img/blockchain_sec/6_14.png" alt=""></p>
<p><strong>3.编译环境</strong><br>
为了运行 Solidity 智能合约,需要将其编译成EVM 所能理解的字节码,然后以交易的形式发送给以太坊来进行部署。目前主要有两种方式支持对 Solidity 合约进行编译。</p>
<p>(1)Solc:支持命令行式的 Solidity 能合约编译工具。<br>
(2)Remix:面向浏览器IDE 方式的Solidity智能合约编译部署以及调试工具。</p>
<p>通过上述工具将智能合约转换成字节码,字节码本身依据设定的机制对应到不同的操作码,基于操作码对应在 EVM 中执行的操作完成智能合约的部署和执行。如图 7.6所示,SimpleStorage 智能合约通过 Remix 编译后的字节码形式,主要包含 4 部分linkReferences、object、opcodes、sourceMap。其中,linkReferences 指链接引用;object 指字节码对象;opcodes指合约操作码列表;sourceMap 是源码的映射,主要用于调试。</p>
<p><img src="/img/blockchain_sec/6_15.png" alt=""></p>
<p>智能合约编译后的字节码对象 object 分为 3 部分:合约部署代码、合约本身代码和Auxdata 字段。</p>
<p>(1)合约部署代码(Deploy Code): 以太坊在建智能合约过程中,首先需要有创建Auxdata 字段。合约的指令,这就是合约的部署代码。虚拟机会首先为合约生成账户地址,然后再运行合约代码。合约运行之后会将运行代码和 Auxdata 部分存储于区块链中,通过将二者的存储地址与合约账户地址进行关联,具体过程则将合约账户中的 code hash 字段用该地址赋值,最后完成合约的部署。<br>
(2) 合约本身代码(Contract Code):智能合约中的实体功能部分为运行代码,即合约声明内的变量及函数逻辑。<br>
(3)Auxdata 字段:智能合约中的最后43 字节为 Auxdata,它跟在运行代码后面被存储起来,作为代码的标识(基于密码学生成指纹数据)用于合约验证。</p>
<p>在运行智能合约代码之前,需要通过 3 个步骤对所部署智能合约进行事先检查与处理。<br>
(1)payable 检查。该步骤主要是确定合约的函数是否可以执行 ETH 的发送操作payable是函数的一个声明,函数在被标记为 payable 情况下,用户不但可以执行相应的函数功能,还可以向该智能合约发送 ETH,而如果函数在没有被 payable 标记的情况下执行 ETH 发送操作会导致失败。<br>
(2) 执行构造函数。初始化智能合约中构造函数所对应的合约状态。(3)智能合约代码内存复制。本步骤将合约转换后的代码和一些属性数据从交易复制到内存中,并且返回。</p>
<p>通过以上步骤将智能合约部署完之后,合约代码可以开始运行和调用。在智能合约中,按照统一标准的 EVM操作码进行执行,但是由于虚拟机中操作码被限定在一个字以内,因此EVM指令集中最多支持 256 条指令,如表 7.3 所示,在目前已经定义的 EVM操作指令中,主要包括基本操作的算术、按位运算、跳转等指令,每条指令被设置消耗的 Gas不同,主要限定用户在一个交易中所能设计的最大逻辑,保证以太坊节点的稳定运行。</p>
<p><img src="/img/blockchain_sec/6_16.png" alt=""></p>
<h3 id="智能合约安全威胁">智能合约安全威胁</h3>
<h4 id="交易顺序依赖漏洞">交易顺序依赖漏洞</h4>
<p>交易顺序依赖漏洞(Transaction-Ordering Dependence Vulnerability)是指一种依赖于交易执行顺序而造成执行结果差异导致的安全漏洞。具体地说,针对同一个智能合约，假设在同一段时间内产生了两笔交易 T，和 T,这两笔交易都基于相同的变量执行了某个操作。对于矿工,当收到两笔交易时,他可以选择先执行 T再执行 T,也可以先执行T:再执行 T,这两笔交易被写入区块链的顺序是由最新块产生的矿工决定的,用户本身无法控制。然而,不确定的执行顺序会导致执行结果存在截然相反的结果。</p>
<p>交易发送出去后会先存人交易池中,区块链节点在共识计算时会从交易池中按照规则选取一批交易放人新生成的区块中，此时该新块还没有被确认为最终块,不同的节点选取的交易和交易放人的顺序都是不固定的,因此合约所执行的函数顺序也是不可预测的-般矿工会选择交易费高的交易放人新块中,这样攻击者可以通过提高交易费使得其交易在其他交易之前被写入,进而影响合约的执行最终结果。</p>
<p>MarketPlace 合约是一个关于股票市场的去中心化应用,合约中声明了两个变量price和 stock,以及两个功能函数 updatePrice 和 buy,其中 updatePrice 函数用来更新price值,只能合约所有者才能修改。buy 函数是用户从合约中购买股票，可以看出用户实股票的数最是与量 price 相美的,在雨数 updatePrice 中可以看到只有合约的所有者才能修改 price变量,buy 丽数是所有用户可公开调用的。合约的其他功能进行了略,包括购买股票之后需要进行转账操作。MarketPlace 合约的具体代码如下：</p>
<p><img src="/img/blockchain_sec/6_17.png" alt=""></p>
<p>从合约中可以看出,当合约所有者在用户操作 buy 函数之前或之后执行 updatePrice函数,交易的执行结果是不一样的,这将会导致用户所购买到的股票数量与预期值相差巨大。如图7.8所示,假设当前 stok 单价是 3ETH,当用户通过 buy 函数购买股票并发送-笔交易,假设用户余额中总额有 18ETH,他可以购买 6个 stock。此时,合约所有者调用updatePrice 函数修改 price 值,假设修改为9。与此同时,合约所有者用稍高一些的交易费使得修改 price 的这笔交易被优先确认,这样导致用户操作 buy 函数购买股票的价格是新的价格,最终只能购买到2个 stock。实际上,合约所有者可以任意地修改 price的值,将用户账户的余额全部清零。一般在同一个区块链存在针对相同合约的两笔交易,交易顺序依赖漏洞很容易出现。</p>
<p><img src="/img/blockchain_sec/6_18.png" alt=""></p>
<h4 id="时间戳依赖漏洞">时间戳依赖漏洞</h4>
<p>时间藏依赖漏洞(Timestamp Dependence Vulnerability)是指在合约代码中，中间状态变量值修改或某操作执行的触发条件是依赖当前区块的时间戳而引起的漏洞。假设在用户转账过程中,依赖于当前时间与初始时间的差值作为是否转账的判断条件,不同区块链节点之间的本地时间允许存在一定范围内的误差,当节点收到一个最新挖出的区块时除了验证区块内交易等内容的有效性,还会验证区块的时间戳,如果该时间藏与自己本地的时间藏相差不大,则该区块被确认有效。然而,不同矿工之间无法做到时间藏完全同步,实际上以太坊允许不同节点的本地时间差可以有 900s(15min)的波动范围,这已经是一个比较大的值,如果合约创建者选择时间戳作为操作的触发条件,往往会造成较大的误差。在 Random 合约中,变量 salt 是当前区块的时间戳。在 random 函数中,为了生成随机数的种子 seed 值,需要利用 slat 来作为计算值。显然不同矿工产生的 salt 值不同,导致该函数的执行结果依赖于最终产生区块的节点时间戳。如果恶意的矿工为了获得有利于他的条件,可以在 900s 的范围内随机地定义本地时间戳,从而影响合约的执行结果Random 合约的具体代码如下:</p>
<p><img src="/img/blockchain_sec/6_19.png" alt=""></p>
<h4 id="异常处理漏洞">异常处理漏洞</h4>
<p>异常处理是计算机编程语言或计算机硬件中的一种安全保障机制,专门用来处理超出代码正常流程范围的异常状况。通过对代码中的异常情况进行处理,可以对用户的非法参数输入进行有效控制。同样地,智能合约中异常处理的方式不正确,也会影响到合约的安全性。异常处理漏洞(Mishandled Exceptions Vulnerability)是指在合约中没有对异常情况进行有效处理而引发的漏洞。例如,在 Solidity 中用户可以通过 call 方法来实现对其他合约的函数进行调用,当调用异常时,可以通过 throw 命令来抛出异常信息,终止合约的执行。然而,已部署的智能合约在编写过程中并没有对函数调用进行异常处理,也没有对返回结果进行验证,从而导致合约后续的错误执行。比较典型的触发合约异常的条件如下。</p>
<p>(1)out-ofgas 异常:由于合约执行需要消耗的实际 Gas 是非确定性的,交易执行前输入的 Gas 只是预估值,如果在合约执行过程中 Gas 耗光,则会导致合约执行异常。<br>
(2)throw异常;合约执行到定义的hrow 则会抛出异常,被调用的合约会立刻终执行并且回退到此前的状态,返回失败。<br>
(3)栈溢出出异常:EVM最大支持 1024 深度的执行回调。随着每次的消息调用，栈深度会增加1。当调用栈深度已经达到 1023,继续执行某函数调用时，会导致合约执行失败。</p>
<p>out-of-gas 异常是智能合约最常见的异常触发条件，这是因为合约所消耗的 Gas 难以准确地估计,一且在交易中设定的 Gas 被消耗殆尽,则会出现 out-of-gas 异常。栈滥出异常是可以被主动触发的异常,攻击者(区块链节点)可以主动触发该异常，从而导致调用栈的深度达到 1023,当再次执行调用时会导致合约抛出异常。此外，触发异常的方式还包括除法中分母为0或者数组超出界限等。KingOfTheEtherThrone 合约中就存在异常处理不正确而导致的安全漏洞问题,具体代码如下:</p>
<p><img src="/img/blockchain_sec/6_20.png" alt=""></p>
<p>KingOfTheEtherThrone 是支持用户竞争成为以太币国王(Monarch)的智能合约,用户通过发送一定数量的数字货币到当前国王的地址,则可以成为新的国王。在函数claimThrone 中,第 15 行 send 函数是用户将数字货币发送到前一个国王地址如果转成功,则新用户(msg.sender)就可以成为下一任国王。由于合约并没有对 send 函数的返回结果进行验证,所以转账操作即使失败,也会执行第 18 行的国王角色的交替,导致现任国王没有收到补偿,同时还失去了国王的位置。根据上述合约异常的方式，造成 send函数返回失败的方式可以有两种: out-of-gas 异常和栈溢出异常。</p>
<p>(1) out-of-gas 异常:国王的地址并不是普通的账户地址,而是合约地址,当发送一笔交易给该合约时,由于会执行一些函数操作,相比于普通的账户地址所消耗的 Gas 会重多,但是该合约并不清楚在调用 claimThrone 函数时需要多少 Gas,就可能存在合约Gas 耗光的情况,导致合约的账户状态没有发生改变,而现任国王将丢掉自己的王座。</p>
<p>(2) 栈溢出异常:另一种攻击方式是构造超出调用栈大小限制的执行环境,send 函数是一种库函数调用,利用的是以太坊中已经定义的标准函数,该函数依赖于其他提前部署合约中的执行结果。因此,攻击者在发起攻击前,首先自身调用 1023 次,然后再发送交易给 KingOfTheEtherThrone 合约调用 claimThrone 函数，由于调用栈溢出异常导致合约执行异常,而函数中没有进行返回结果检查,会继续执行第 18 行的函数,这样现任国王既会失去王座,还得不到补偿。通常情况下,如果调用用户自己定义的合约函数,这种情况下出现异常的概率会更大,一些恶意的用户甚至故意定义一些存在漏洞的合约函数让其他用户进行调用。</p>
<p>总而言之,在开发以太坊去中心化应用中,没有权威的第三方对发布合约的内容进行审核把关,为了保证合约不出现异常情况,需要在函数调用时,做好异常处理以及函数调用返回值判断。</p>
<h4 id="竞态条件漏洞">竞态条件漏洞</h4>
<p>竞态条件漏洞(Race Condition Vulnerability)是指在设备或系统中出现不恰当的执行时序,导致无法获得正确的执行结果。一般地,当有多个进程(或线程)同时获取或修改同一个数据时,如果对该数据的访问顺序敏感,就称为存在竞态条件。</p>
<p>在 Solidity 合约中,竞态条件漏洞发生在不同合约(或不同函数)之间针对同样的状态变量而进行的攻击,以太坊目前并不支持真正意义的并行处理,然而在逻辑上不同合约或函数之间却依然存在对共享状态变量的竞争,也就必然存在竞态条件的风险。智能合约允许调用外部合约来执行本地的功能函数,但假如该外部合约为恶意攻击者创建的合约,那么攻击者可以利用合约漏洞来竞争获取该合约的控制权,从而接管当前合约的执行流程,影响合约的正常执行。目前存在两种比较典型的竞态条件漏洞:可重人攻击漏洞(Reentrancy Vulnerability)和跨函数的竞态条件漏洞(Cross Function Race Condition<br>
Vulnerability)。</p>
<p><strong>1.可重入攻击漏洞</strong><br>
可重入性是指针对一个函数在同一时间多次发起调用。在以太坊中,攻击者可以利用函数的可重人性来对智能合约发起可重入攻击。在智能合约中存在一种特殊的函数它既没有函数名、输入参数，也没有输出参数,在合约调用过程中,没有函数类型与指定的函数类型相匹配(或没有提供调用数据),它就会被执行,这个函数就是回退 falback 函数。此外,当合约地址可以接收以太币时,该函数也会被执行,此时 fallback 需要被标记为payable(代表函数可以接收外部发到合约账户上的 ETH),否则无法正常接收 ETH般在合约内部调用 fallback 函数所需要的 Gas 非常低,如果从外部合约调用 fallback函数则需要消耗较高的 Gas,这是因为需要对调用合约进行有效性检测。fallback 函数的示例代码如下:</p>
<p><img src="/img/blockchain_sec/6_21.png" alt=""></p>
<p>可重人攻击漏洞是指攻击者通过发送一笔交易,操作合约重复执行导致合约账户余额耗尽的攻击方式。在 Solidity 合约中,攻击者可以利用 allback 和 call 函数来实现可重人攻击。简单来说,攻击者自己设计一个智能合约,该合约中定义一个 payable 的fallback 函数,通过在该函数内部递归调用正常合约的转账函数,让其不断重复执行,这<br>
样就会使得转账执行多次。</p>
<p>The DAO 中总账户的余额就是通过可重人攻击漏洞被不断转走的。The DAO 的总众筹金额达到 1.5 亿美元,通过以太坊平台将募集的资金锁定在智能合约中，每个参与者根据众筹的出资额获得相应的 DAO 代币,代币可以用来对项目进行审查和投票表决如果项目获得约定的票数支持,则相应的款项会转到对应的地址，同时每个用户按照比例来获得一定收益。由于遭受可重入漏洞攻击,导致超过 300 万个 ETH 被盗取。在了解The DAO攻击之前,需要明白智能合约中的转账操作方式。</p>
<p>在Solidity 合约中,有3种函数可以实现合约之间的相互转账:addr.transfer(uint256 amount),addr.send(uint256 amount) returns( bool)、addr.call.value(),都是代表向地址为 addr 的用户账户转账,单位为 Wei,但是在执行过程中这 3 种函数稍有区别。</p>
<p>(1)addr.transfer(): 执行时有 Gas 限制,最大为 2300,如果转账失败则抛出异常<br>
信息。<br>
(2)addr,send(uint256 amount) returns(bool): 执行时有 Gas 限制,最大为 2300,如果转账失败则返回 false。<br>
(3) addr,call,value();执行时没有 Gas 限制,如果转账失败则返回 false。</p>
<p>DAO合约 withdrawRewardFor 函数的具体代码如下:</p>
<p><img src="/img/blockchain_sec/6_23.png" alt=""></p>
<p>The DA0合约受攻击的代码在 DAO 合约中 withdrawRewardFor 函数的第6行遗行执行 payOut 函数，目的是向地址_acount 转人数量为reward 的代币。payOut 函数是在 ManagedAccount.sol合约中定义的函数，主要功能为根据一定规则来判断是否达到转账的条件。</p>
<p>DAO合约 payOut 函数的具体代码如下:</p>
<p>第4行函数是向接收者_recipient 地址转账_amount 个代币,使用的是addr.callvalue 函数，由于没有 Gas 限制,可以被攻击者循环利用来发起攻击。</p>
<p>如图7.9所示，攻击者发起 The DAO攻击的主要流程:首先,攻击者创建一个攻击者合约,在其中复写fallback 函数，用于回调The DAO合约的withdrawRewardFor函数。攻击者在合约中初始化一个合法的withdrawal 时,调用 The DAO合约的withdrawRewardFor 函数,在 withdrawRewardFor函数中会执行转账操作,根据 fallback函数的特性,在合约收到转账时会自动执行 fallback 函数中的逻辑，而攻击者在复写的fallback 函数中又去重新调用 withdrawRewardFor 函数，导致 The DAO合约继续给攻击者合约转账,该过程不断地循环(虚线内的逻辑),将 The DAO 合约的 DAO币不断转出。</p>
<p><img src="/img/blockchain_sec/6_24.png" alt=""></p>
<p>简化版的攻击者合约代码如下,通过复写的 fallback 函数(第 9 行)重新调用本合的 withdrawRewardFor 函数，进而实现对 The DAO合约的重人调用。</p>
<p><img src="/img/blockchain_sec/6_25.png" alt=""></p>
<p>在第9行的fallback 函数中,攻击者通过回调 withdrawRewardFor 函数来实现递归调用攻击。为了避免无限调用 fallback 出现 Gas 耗光的异常出现，攻击者可以自定义递归的次数 account,攻击者也可以向合约地址存入一定金额的代币。然后,攻击者可以调用withdrawRewardFor函数向 The DAO发起交易在withdrawRewardFor 函数中可以看到函数调用的是 The DAO合约的 withdrawRewardFor 取款函数The DAO合约中withdrawRewardFor函数会将一定数额的代币转给攻击者,当执行完 payOut 函数后该合约会自动触发攻击者合约的 fallback 函数,这样又会递归调用 The DAO合约的withdrawRewardFor 函数进行转账,重复循环99 999 次,从而不断地将The DAO合约账户中的代币转走。</p>
<p><strong>2.跨函数的竞态条件漏洞</strong><br>
可重入攻击是针对同一个函数的不断调用来实现的竞态条件攻击,另外还存在一种针对不同函数的组合来发起的攻击,称为跨函数的竞态条件攻击。具体来说,在调用合约中某一函数的过程中,在外部同时调用另一个函数，假设这两个函数依赖于共同的状态变量,这样攻击者可以借助在该状态变量的中间态来完成攻击。TokenTransfer 合约建立了一个通证管理系统,用户可以在合约中用以太币购买通证,具体代码如下:</p>
<p><img src="/img/blockchain_sec/6_26.png" alt=""><br>
<img src="/img/blockchain_sec/6_27.png" alt=""></p>
<p>代码中主要罗列了两个函数:transfer 和 withdrawBalance。transfer 是将数量为amount 的通证转移到 to 地址上，withdrawBalance 用来将以太币存人交易发送者账户中。在该合约中,攻击者可以首先构造一个攻击合约,并复写 fallback 函数,fallback 函数中调用 TokenTransfer 合约中的 transfer 方法。在这种条件下，当攻击者调用withdrawBalance 函数来取款时，假设 msg.sender 为攻击者合约,当合约执行完第 12 行时,会自动触发执行攻击者合约中的 fallback 函数,而此时还未执行第 13 行,因此攻击者的存款状态并未修改。攻击者不仅可以将钱取走,还可以增加 to 地址的账户余额。这种跨函数的竞态条件常常发生在多个函数之间,或者多个合约之前。</p>
<h4 id="整数操作漏洞">整数操作漏洞</h4>
<p>整数操作漏洞是指在合约中由于整数变量都有上下界的限制,如果在运算过程中出现越界,即超出整数类型的有限范围时,会导致执行程序异常而遭受攻击。智能合约中有很多关于整数类型运算类的操作,由于 Solidity 智能合约中没有提供有效的整数溢出检测机制,而导致智能合约执行运算过程中容易出现安全问题,主要包括 3 类整数操作会引入整数溢出漏洞问题。</p>
<p><strong>1.算术运算错误</strong><br>
算术运算错误主要是由于算术运算结果比定义的整数类型大或者小的情况,称为整数上溢和下溢。依据运算的类型,整数溢出又可分为乘法溢出、加法溢出和减法溢出。以太坊中定义了多种无符号整数类型,包括 uint8、uint16、uint32、uint256,这些类型都是有范围限制的,超过范围则会报出异常。例如,假定变量a 被定义为 uint8,则变量a 能存储的范围是0~2s-1,即[0,255]。如果将 256 赋值给变量 ,则内存中存储的数据进位加1之后导致结果变为 0,同理,如果将-1 赋值给变量 a,结果会变为 255。</p>
<p>一般算术运算错误是由于没有准确预估变量所能达到的值，随着时间的推移,在计算过程中会超过变量的范围限制。例如,在合约中定义了一个类型为 uint32 的变量用来存储计数结果,由于不断累加,该变量值增加到超过 232-1 时,此时该值会被设置为 0,与预计计算结果不一致。同样地,如果一个整数类型变量被修改后小于 0,将会导致它下溢并被设置为最大值 225。算术运算错误容易出现在某合约中的变量是公开可修改的,攻击者可以通过更新其具体值超过定义类型的范围来导致合约执行的错误,对于较小值的整数类型更容易出现上溢问题,如 uint8、uint16。此外,算术运算错误还会发生在除法或者模运算中分母为 0的情况,同样会导致结果为 0。因此,为了防止算术运算错误,需要额外注意对整数变量的更新操作,可以定义符合应用场景的最大整数类型,同时对变量的能改需要权限级别较高的用户进行操作,对输入数据做好有效性检查。整数上溢漏洞具佬代码如下,西数add实现的功能是将两个 uint32 类型的变量相加，由于返回结果定样为uint32,这样极易出现超出uint32 的情况，导致执行结果与预期不符引发后续错误为了防止由于算术运算而导致的溢出漏洞,可以在计算前对输入数据进行有效验证,还司以使用 Solidity 中的标准库函数来实现安全运算。例如，SafeMath 合约。</p>
<p><img src="/img/blockchain_sec/6_28.png" alt=""></p>
<p><strong>2.整数截断错误</strong><br>
整数截断错误是出现在将一个整数类型转换为一个范围较小的整数类型时,导致精度丢失的错误。整数截断错误的示例代码如下,假设用户的 msg.value 值大于 255。相比其他编程语言类似于类型的强制转换,如果用户的输入大于被强制转换的类型值,那么预期的输出结果也会不一致,尤其设计用户的账户更新相关的操作，这种错误所造成的危害会更大。<br>
<img src="/img/blockchain_sec/6_29.png" alt=""></p>
<p><strong>3.类型转换错误</strong><br>
在将有符号整数类型(int)转换为相同长度的无符号整数类型(uint)过程中,可能出现将一个负数类型的值转换为一个正数值的情况,这就是类型转换错误。类型转换错误示例代码如下,合约中函数的输入类型为 int 型，函数依赖该输入的大小作为条件来执行是否转账操作。由于攻击者可公开调用该函数,那么可以在第 2 行输入一个负值来满足if判断条件,实现错误的逻辑处理,这是由于负数值被转换成了无符号类型的整数值。</p>
<p><img src="/img/blockchain_sec/6_30.png" alt=""></p>
<h4 id="基于块燃料限制攻击漏洞">基于块燃料限制攻击漏洞</h4>
<p>通常而言,矿工会选择交易费较高的交易数据打包至新块中。通过计算输入数据大小、执行指令等操作来计算交易所需的燃料,如果实际消耗的燃料数量小于燃料限制,则交易被正常处理。如果实际消耗的总燃料超过了燃料限制,该交易所有的操作都被还原为原来的状态,但是这些交易还是会产生,并且交易费会支付给矿工,未被使用的燃料则退还给用户。这种情况下,攻击者可以利用燃料限制的性质实现 DoS 攻击。具体地说攻击者可以发起一笔交易修改函数中的变量值,例如 for 循环的层数,使得交易消耗的燃料超过燃料限制，这样该函数执行会一直处理 out-o-gas 状态而无法被正确执行。基于块燃料限制攻击漏洞的示例代码如下:<br>
<img src="/img/blockchain_sec/6_31.png" alt=""></p>
<p>上述代码定义了与通证 Token 管理的函数和变量,其中 investors 指投资者数量,是一个可变长数组，通过 invest 函数可以修改 investors 的长度。攻击者可以发起 DoS 攻击,不断调用 invest 函数增加 investors 长度(消耗一定数据的 ETH)。如果合约中第12行 for 循环次数增加到一定层数，使得 distribute 函数消耗的燃料总是超过交易的燃料限制,那么 distribute 函数会一直处于 out-of-gas 异常状态而一直无法执行成功,导致合约正常功能实现受到影响。</p>
<h4 id="call-注入攻击漏洞">call 注入攻击漏洞</h4>
<p>call 注人攻击主要发生在 Solidity 合约之间的相互调用过程中。为了提升开发的效率,Solidity 支持合约之间基于 call 函数簇来实现相互调用,主要包括 3 种方法。</p>
<p><code>(1)&lt;address&gt;,call(..·) returns(bool)。</code><br>
<code>(2)&lt;address&gt;.delegatecall(...) returns(bool)。</code><br>
<code>(3)&lt;address&gt;.callcode(..·) returns(bool)。</code></p>
<p>以上传人的数据支持任何长度及类型的参数。在合约调用过程中,内置变量 msg 会随着调用的发起而发生状态变更。第一种 call 是最常用的函数调用方法,当执行该函数时,内置变量 msg 会修改为调用者,执行环境也切换到调用者的执行环境。call 方法常用的调用方式有如下两种。</p>
<p><code>(1)&lt;address&gt;.call(function_selector,argl,arg2,..)。</code><br>
<code>(2)&lt;address&gt;.call(bytes)。</code></p>
<p>address是合约账户地址,call 调用及用来执行该合约地址下的某函数。第一种是通过签数的方式,将方法及参数作为输入进行传入,第二种是直接基于字节数组作为输入的方式,在该字书数组中,同样地可以构造与第一种类似的方式执行输入数据。一般跨会铃调用执行方都会使用 msg.sender 全局变量来获取调用方的以太坊地址，以支持条件遭辑判断。在这种情况下,攻击者可以利用 all 函数实现注人攻击。例如,在智能合约中会经常判断调用者的身份信息是否是创建者身份，然而攻击者可以利用其他可公开调用的函数来绕过该条件判断。call 注人攻击漏洞示例代码如下:</p>
<p><img src="/img/blockchain_sec/6_32.png" alt=""></p>
<p>在上述 CallInstance 合约中,callData()是公开可调用函数,读人用户输入的数据data,operation()中设定是合约创建者才能执行的函数,但是攻击者可以通过其他函数来绕过该限制，以达到越权操作的目的。具体地说,攻击者可以在 callData 函数中构造一份data数据,该数据中通过设置将 operation 函数设定为选择器，这样在通过 call调用过程中会执行 operation 函数,msg.sender 也会切换为合约创建者身份，此攻击者就可以绕过第 7行的身份限制,以创建者身份来执行后续的操作。总而言之,call 函数为合约的相互调用提供了便利,但是也带来很大的安全问题,攻击者可以利用 call 函数来绕过很多限制条件。</p>
<h3 id="Solidity-安全编程">Solidity 安全编程</h3>
<p>通过7.2节的学习,了解了智能合约本身存在很多的安全陷阱，稍不注意就会导致合约执行结果与预期相差很大。以太坊智能合约的开发与其他编程语言不同,在出现漏洞时很难通过打补丁的方式来进行补救，因此会给用户造成巨大的经济损失。为了防止已知和未知的安全漏洞,不仅需要了解 Solidity 合约在 EVM 中的运行原理,同时要了解和学习新的开发思维以应对潜在的风险。本节主要从编程的简洁性、可读性、解耦性等方面出发,简要概述 Solidity 合约中的开发设计原则。</p>
<p>(1)为了保证智能合约代码的简洁性,不宜将大量的业务逻辑都放在智能合约中执行，可以将上层与应用相关的代码放在区块链外面,如通过 web3j 对接方式,将部分应用逻辑用 Java 语言来开发，将真正需要建立在去中心化逻辑上的代码放在智能合约中执行。另外,参照软件开发的设计原则,每个函数实现的功能是单一的,不同函数与函数之间保证一定的解耦性,这样使得每个函数可以基于模块化的形式被其他函数或合约调用。</p>
<p>(2)充分理解智能合约的运行机制,避免出现已知的错误。7.2 节中介绍的安全漏洞是 Solidity 中几种典型的攻击方式，还存在其他的安全漏洞在 Solidity 官网中会即时公布。Solidity 是一种与 JavaScript 类似的高级编程语言,其中的功能以及安全性方面都还在演进过程中,因此需要跟进对以太坊社区关于 Solidity 的最新安全进展,在发现新的安全漏洞时可以及时地检查自己部署的合约,尽可能快速地修复漏洞,规避风险。此外,保证合约执行过程具备一定的容错性,一旦发现错误,具备规避方案或者停止运行的功能，针对账户管理的风险尤其要注意。应尽量规避对外部合约的调用,在针对一些未经过严格审查和测试就发布的合约更需要重点关注。</p>
<p>(3)要从传统软件工程设计的角度来设计和开发智能合约。一个较为完善的智能合约需要按照“高内聚、低耦合”的原则,实现功能的模块化,充分利用已有的规范代码,减少有风险的开发编程。从智能合约的架构考虑,功能模块化和代码重用审查是验证合约规范性的主要方式。</p>
<p>下面针对 7.2 节中提到的 7类关键合约漏洞的规避措施进行描述。</p>
<p>(1) 针对交易顺序依赖漏洞,可以通过构造测试用例的方式对合约的所有函数进行测试,通过给定相同的输入数据,但是在交易确认顺序上通过设置不同的交易费来实现不同顺序的交易验证。通过这样的方式来查看合约的最终状态数据是否保持一致,如果不一致则说明合约存在交易顺序依赖漏洞的风险。如果出现此状况,则可以在函数中设定用户输入的条件判断,验证所执行的合约状态数据是否与预期的结果一致,在保持一致的<br>
条件下才向后执行。</p>
<p>(2)针对时间戳依赖漏洞,在智能合约中减少以时间戳(包括其他非确定性值)作为判断依据或者依赖值,通常情况下可以采用块高度(Block Height)作为替代值进行判断。通过块生成时间,依据场景需要可以估算利用多少块作为时间间隔合适,即时间间隔~块<br>
数量X块产生时间。</p>
<p>(3)针对异常处理漏洞问题,Solidity 支持异常捕获功能,在满足代码安全执行的同时,还需要考虑安全性。对代码中可能存在的异常行为,包括魔鬼输入、非法计算等,考虑是否由本段程序自行处理,还是需要让外层程序知晓并进行处理。如果为本段程序处理则添加 try-catch,否则通过 throw 的方式将该异常抛出。</p>
<p>(4)针对竞态条件漏洞,为了避免出现可重人攻击,可以通过 Solidity 推荐使用的“检查一生效一交互(Checks-Effects-Interactions)”模式,即在与外部合约或者函数进行交互之前,首先进行有效性检查,包括确认函数调用者的身份、所用参数是否符合规定取值范围、是否发送了足够的以太币或者用户是否具有执行的权限等。此外,为了处理会影响合约或函数之间的共享状态变量,需要将状态变量的更新放在交互之前执行,再执行合约或者函数之间的交互。竞态条件漏洞“检查一生效一交互”的具体代码如下,sendBalance 合约中，可以在 withdrawBalance 与其他函数“交互”之前,先做“检查一生效”,即将userBalances 状态变更放在if 检查之前，这样攻击者无法通过重人回调的方式对合约账户进行攻击。</p>
<p><img src="/img/blockchain_sec/6_33.png" alt=""><br>
(5)针对整数操作漏洞,可以参照两种方式来规避。首先,可以通过静态的整数溢出检查来对整数溢出问题进行安全性检查,判断输出是否在合理的范围内再进行赋值。虽然这样会提高合约消耗的燃料,但相比潜在的安全漏洞而言微不足道。此外,用户还可以利用标准库合约函数对整数进行安全性检查。智能合约中有一些专门进行算术运算的库合约 SafeMath,包括 add,sub、mul 以及 div。SafeMath 合约使用了内建的 require 或assert 函数来检查基本的算术运算是否会发生溢出。一旦发生溢出，require 和 assert 会自动触发事务回滚机制。</p>
<p>(6)针对基于块燃料限制攻击漏洞,为了保证交易中的燃料使用不超过限制,尽量避免包含循环操作的函数让外部用户进行调用,严格限制循环遍历总次数的修改权限。此外,开发者应该掌握减少燃料消耗和字节码大小的方法。例如,可以通过调用现有的库函数使得某些函数逻辑不存在本合约中,减少合约的字节码占用。另外,针对函数变量可以不设置初始值、使用言简意赅的字符串作为标识、减少对外部合约函数的调用等措施都可以用来降低燃料的消耗。</p>
<p>(7)针对 call 注人攻击漏洞,由于 calldelegatecall、callcode 3 种跨合约(函数)的调用灵活性非常大,并且在调用过程中会伴随 msg 值的变化,这给攻击者带来了极大的操作空间,因此在合约设计中,需要谨慎地使用这 3 种底层函数。要对调用参数做严格的校验,避免参数被注人包含恶意代码的数据。此外,由于 call 和 callcode 调用会改变 msg 的值,导致合约中的权限判定被绕过,导致代币被窃取,因此不能轻易地使用本合约的地址作为可信地址。同时,delegatecall和 callcode 这两种调用方法会将目标代码切换到本地环境执行,因此要对调用的函数进行细粒度的限制,防止对任意函数的调用。</p>
<h2 id="第8章-共识层安全">第8章 共识层安全</h2>
<h3 id="共识层安全概述">共识层安全概述</h3>
<p>系统的共识层安全主要概括为两方面:活性(Liveness)和一致性(Consistency)。4.6 节对这两大特性做过详细说明。具体地说，活性是指系统的共识协议的参与节点最终都会处理任一有效的消息。一致性主要用于描述系统的共识节点是否在某一有效交易上达成共识。</p>
<p>在区块链系统中,共识安全还要求系统具有抗审查性和抗 DOS 攻击的<br>
特性。</p>
<p>(1)抗审查性(Transaction Censorship Resistance):抗审查性要求系统具有抵抗恶意节点掌控交易的能力,主要是针对基于工作量证明的共识协议要求具备的性质,在这类协议中,矿工通常聚集计算力(矿池)来合作挖矿,每挖到一个块,矿池管理者就依据矿工的计算力贡献度来划分块奖励。然而,矿池机制破坏了分布式区块链的去中心化特性,恶意的矿池管理者可以掌握被处理进区块的交易,忽视矿工的计算力贡献度而不公平地划分块奖励。因此,存在矿池机制的基于工作量证明的共识协议需要保留分布式特性，即矿池的矿工挖到有效区块的概率与其计算力贡献度成正比,抵制矿池管理者掌控交易，例如SmartPool分布式矿池。</p>
<p>(2)抗 DoS 攻击(DoS Attack Resistance):抗 DoS 攻击要求系统中的共识节点具有抵抗 DoS 攻击的能力。基于工作量证明的共识协议具有抗 DoS 攻击的能力,而基于权益证明和基于拜占庭的共识协议并不具备。遭遇 DoS 攻击意味着所有诚实的共识节点都会宕机,没有处理交易的能力。现有的基于权益证明和基于拜占庭的共识协议会通过安全地更换系统的共识节点来抵抗 DoS 攻击,如 Ouroboros Praos、Algorand 和 ByzCoin。</p>
<p>实际上,经典的共识协议在分布式系统中已经被广泛研究,它们与区块链共识协议的区别在于它们只考虑封闭系统的共识问题。在安全的角度上,这些共识协议中的恶意节点可分成两类,即故障节点和拜占庭节点。具体来说,故障节点指那些因为进程失败或机器宕机而引发错误的节点，而拜占庭节点可以恶意地执行错误的指令或阻碍消息的发送在经典的共识协议中,Paxos 协议只能抵抗故障节点的错误,而 PBFT 可以抵抗拜占庭节点的错误。</p>
<h3 id="共识协议安全假设">共识协议安全假设</h3>
<p>共识机制提供了一种可以去除第三方可信机构的数据共享机制,给构建在区块链上的应用层提供去中心化的公共账本支持。共识层是区块链架构的核心,主要负责确保区块链网络中的各个节点可以共享一份有效的区块链视图。根据共识协议算法的不同,可以将共识机制划分为两大类:基于 Pow/PoS 协议的共识机制和基于 BFT 等分布式共识协议的共识机制。目前,衡量共识协议的安全指标主要包括链质量、激励相容度、作恶收益、审查敏感性。</p>
<p>(1)链质量(Chain Quality): 描述在主链挖矿的诚实区块链矿工数量。例如，比特币中51%安全代表工作在主链上诚实矿工的数量占总参与节点矿工的数量为 51%。(2)激励相容度(Incentive Compatibility):量区块链中诚实矿工获得区块奖励的最小百分比,主要是为了衡量对自私挖矿攻击的抵抗能力。<br>
(3)作恶收益(Subversion Gain):表示恶意的矿工在每个区块生成间隔的平均值内能够获得的区块奖励加上双重支付奖励的最大值,用来衡量区块链抵抗双重支付攻击的能力。<br>
(4)审查敏感性(Censorship Susceptibility):表示诚实的节点因为拒绝审查者请求而导致奖励损失的最大百分比。例如,在主链中产生了 5 个诚实区块,但是其中 3 个区块成为孤块,则审查敏感性为 3/5。该指标用于衡量矿工产生的区块成为孤立块的百分比。</p>
<h4 id="PoW-PoS-协议的安全性">PoW/PoS 协议的安全性</h4>
<p>现代密码体制下提出的密码学方案的安全性评估一般依赖于是否能将方案归约到某个公开的数学困难问题上,如 RSA 算法可以归约到大整数分解问题以及 EIGamal 算法可以归约到椭圆曲线上的离散对数问题。共识层的共识机制无法归约到某一数学困难性问题,如基于 PoW/PoS 协议共识机制安全是依赖所有诚实节点占有区块链中 51%算力或者权益。为了进一步阐明 Pow 协议和 PoS 协议的安全假设,下面分别对基于 Pow 协议共识机制和基于 PoS 协议共识机制进行详细讨论。</p>
<p>(1)基于 Pow 共识机制:在基于 PoW 共识机制的区块链中,节点想要获得出块权力必须提供一份“工作量证明”,即解决某个特定的数学问题。Pow 的安全假设是所有诚实节点占有区块链中 51%算力。如图 8.1 可以很好地说明区块链中汇集的算力资源越多,恶意的攻击者控制区块链的难度就越高。算力安全假设提供了 Pow 协议所需的安全性,但需要消耗大量的算力资源。</p>
<p><img src="/img/blockchain_sec/6_34.png" alt=""></p>
<p>(2)基于 PoS 共识机制:解决基于 PoW 共识机制中计算资源浪费的问题，最早使用基于 PoS 共识机制的数字货币是 PPcoin,以节点持有的数字货币的数量以及持有的时长来计算出币龄。节点持有货币的时间越长权益就越大,获得出块权的可能性就越大。与PoW 共识机制类似,基于 PoS 共识机制的安全假设是所有诚实节点占有区块链中 51%权益,同样以最长链为准。</p>
<p>基于 PoW/PoS 共识机制的安全假设实质上都是假设诚实节点共同维护区块链的能力远大于攻击者破坏区块链的能力。共识机制存在的问题主要体现在如下 3 方面。</p>
<p>(1)一致性不稳定:基于 PoW/PoS 共识机制在共识的过程中可能出现短暂的分叉需要等待后续更多区块生成后才能判定前面生成的区块是否获得了大多数链上节点的认可。因此,基于 PoW/PoS 共识机制下的共识机制只具备弱一致性。<br>
(2) 可扩展性差:扩展性主要用来衡量区块链中的处理交易的性能。早期的 PoWPoS 共识机制的区块链存在交易吞吐量低的问题，例如，比特币平均约每 10 分钟产生个区块,而且包含的交易有限,与传统情况下的银行交易系统的交易吞吐量和交易确认时间相比都有很大的差距。<br>
(3)重构困难: 共识机制使区块链系统具有去中心化的性质,这一性质保证了区块链可以在不需要可信第三方的维护下正常工作。但是在没有第三方维护的情况下，一旦发生安全假设被打破的情况就无法自动恢复到安全假设被打破前的状态。基于 PoS 共识机制的以太坊就曾发生过共识机制的安全假设被打破需要恢复到安全状态的情况。以太坊为了恢复安全状态,采取了所有节点共同投票进行硬分叉的措施，以恢复被盗取的以太币。硬分叉严重破坏了区块链的不可篡改性,因此当时出现了不少争议。所以,PoWPoS共识机制下的区块链存在重构问题。</p>
<h4 id="BFT协议的安全性">BFT协议的安全性</h4>
<p>拜占庭容错(Byzantine Fault Tolerance,BFT)是一种解决拜占庭问题的理论方法由于区块链的共识问题和拜占庭将军问题相似,所以基于 BFT 理论可以延伸出适用于区块链共识层的多种共识机制。现将区块链共识问题类比于拜占庭将军问题,每个参与节点充当将军的角色,参与节点之间传递消息的过程相当于将军的信使交换消息的过程在这一过程中,产生并传递错误信息给其他节点的故障节点称为拜占庭节点，传递正常消息的节点称为非拜占庭节点。假设分布式系统中有 n个节点,整个系统中的拜占庭节点不超过 m 个(n&gt;3m十1)。除了上面的安全假设,在分析拜占庭问题时,还会考虑如下4种假设。</p>
<p>(1) 拜占庭节点的操作不受控制并且可以实施合谋。<br>
(2) 拜占庭节点之间的错误行为是不具备相关性的。<br>
(3) 拜占庭节点之间的通信不是同步的,可能存在消息丢失、延迟等问题。(4) 拜占庭节点之间的消息传播不是通过秘密通道进行的,即传播中的消息是可以被攻击者窃听盗取的,但是传播的消息是不可以被篡改或者伪造的。</p>
<p>在 BFT 共识机制下,需要考虑两个安全指标,即安全性和活性。</p>
<p>(1)安全性:分布式系统下已经完成的请求不可被更改,并且可以查询和追溯已经完成的请求。对应到区块链系统中则是,已生成的区块不可被篡改以及区块中包含的交<br>
易可以被 BFT 协议下的区块链任意节点查询。<br>
(2) 活性:在分布式系统下,其他故障因素不会影响非拜占庭节点的服务请求被正常接收和执行。也就是说,在区块链系统中,系统需要稳定持续地生成新区块,节点的交易服务要被正常处理。</p>
<h3 id="可扩展共识协议">可扩展共识协议</h3>
<p>目前，区块链系统受扩展性的限制,即系统处理交易的吞吐量不随着共识节点数量的增多(计算力或股权益的增多)而增大,可扩展共识协议致力于解决这一困境。现有的可扩展共识协议包括基于混合方式(Hybrid-based)、基于变种链结构(Variant Chain-based)以及基于分片(Sharding-based)的共识协议。这类协议继承原有协议的安全假设(见 8.2节),但需要引入更强的安全假设来换取性能上的提升。</p>
<h4 id="基于混合方式的可扩展共识协议的安全性">基于混合方式的可扩展共识协议的安全性</h4>
<p>基于混合方式的可扩展共识协议是在保留原区块链协议安全性的基础上引入更快的交易处理构建组件来提高共识协议的可扩展性。新加入的构建组件往往通过牺牲分布式特性或安全性来换取更快的交易处理速度,因此,此时的共识协议的安全假设相比于原有的更强。例如,基于比特币的可信模型 Bitcoin-NG,将选取块生成者和处理交易的过程分离,选取块生成者的方式沿用比特币中的选取方式,但选中的块生成者在下一个块生成者出现之前有权利持续向主链添加交易,从而提高了交易处理速度。但是,Bitcoin-NG只保证概率性的活性。活性是共识协议的重要安全特性之一,它指系统的共识节点最终都会处理每笔有效的交易,而概率性的活性体现在 Bitcoin-NG 概率性地处理有效的交易,这一定程度上会降低系统的安全性,例如,财务系统有一笔清算交易需要完成最终确认以降低系统用户的账户风险,如果该财务系统采用了 Bitcoin-NG 协议,而该笔交易直没有被确认,从而威胁到系统用户的账户安全。闪电网也是在比特币的基础上允许验证者线下验证交易的正确性,只将多笔线下交易的结果发布到链上,加快两方之间交易的处理速度。但为了确保线下交易结果是正确的,闪电网引入非标准的数字签名方案,因此增加了密码方案的安全假设来保证系统的安全性。</p>
<h4 id="基于变种链结构的可扩展共识协议的安全性">基于变种链结构的可扩展共识协议的安全性</h4>
<p>基于变种链结构的可扩展共识协议继承了比特币的安全假设,即存在大多数的共识节点承认主链上的区块。它们通过重定义区块链协议来提高可扩展性，通常是重定义原区块链协议的共识链的结构。例如,Ghost 协议和 Spectre 协议。Ghost 协议在不影响原区块链的前提下承认有效的分叉区块,因此不同于比特币的单链结构,Ghost 协议以树状结构组织区块。在主链选择方面,它选择树状结构中权值最大的路径作为主链,其中路径的权值定义为该路径上区块的深度。但相比于比特币中每个矿工挖到新块的概率与其算力成正比不同,Ghost 协议中网络延迟小的矿工更有优势挖到新块，因此,矿工挖到新块的概率并不严格地与矿工的算力成正比。同样地,Spectre 协议允许挖矿过程中有多个区块产生,从而使原有单链在某一时间节点上的一个区块变成 DAG 区块，从而提高区块链的可扩展性。</p>
<h4 id="基于分片方式的可扩展共识协议的安全性">基于分片方式的可扩展共识协议的安全性</h4>
<p>分片技术是用于提高区块链可扩展性的关键技术之一,该技术使得区块链的性能随着节点的增多而线性增强。分片技术将区块链的共识节点划分为多个不交叉的分区,这些分区节点并行地处理区块链的交易,提高了交易处理速率,从而提高可扩展性。在提高性能的同时,共识协议还需要保证区块链的分布式特效和安全性,为了平衡好这 3 点,协议在设计上会引入如下 3 个安全假设。</p>
<p>(1)系统大多数共识节点是诚实的,一个分区至少 33%共识节点是诚实的。具体地说,协议采用不可预测且公开可验证的随机性协议,如 RandHerd 协议,来分配分区的共识节点。同时,采用密码抽签协议周期性地替换分区内的共识节点,使得分区中诚实和恶意的共识节点形成合理的比例,如 OmniLedger 协议。<br>
(2)共识节点之间存在认证的通信通道。目前的协议虽然利用传统的 BFT 协议来实现分区内交易的共识,但对共识节点的通信假设相比于原来更强。<br>
(3)系统的用户具有激励性。有些协议(如 OmniLedger 和 RSCoin 协议)在处理跨分区交易时是用户驱动的,它们要求用户有激励性去封锁和解锁相应的交易,以确保跨分区交易被正确地执行。假如用户故意封锁交易,不进行解锁操作,这类协议相当于遭遇DoS 攻击。</p>
<h3 id="共识层安全威胁">共识层安全威胁</h3>
<p>针对区块链共识机制的攻击手段有多种形式,攻击者主要针对共识机制中存在的安全假设不可靠和一致性不稳定问题来实施攻击。其中,基于安全假设不可靠的攻击包括51%攻击、贿赂攻击、币龄累计攻击等。基于一致性不稳定的攻击包括女巫攻击、芬尼攻击以及 Vector76 攻击等。近年来,攻击者对共识层实施的攻击已经引起了严重的经济损失。2016 年,51% Crew组织对基于以太坊的数字货币 Krypton 发起了 51%攻击并最后损失了21 465个KR代币。</p>
<p>为了进一步了解攻击者是如何实施针对共识层的攻击的,下面将对目前常见的 5 种攻击手段进行介绍。</p>
<h4 id="贿赂攻击">贿赂攻击</h4>
<p>贿赂攻击(Bribery Attack)指的是参与区块链共识的节点会被恶意攻击者使用数字货币或者法币所贿赂,使得这些节点工作在特定的区块或者分叉上,从而产生对恶意攻击者有利的分叉链。通过这种攻击方式,攻击者不需要掌握 51%算力也可以实现双重支付。贿赂攻击是将博弈论模型应用在区块链中的一种攻击方式。定义以下名词可以帮助理解贿赂攻击的原理。</p>
<p>(1) 非协作选择模型:该模型下所有参与节点都不存在与任意其他参与节点合作的动机,虽然参与节点可能形成群组,但是却无法形成拥有大多数节点的群组。<br>
(2) 协作选择模型:指系统的参与节点都为一个共同的动机进行合作。<br>
贿赂攻击者模型是一个非协作选择模型,即相当于在现实商业社会中的恶意收购者。恶意收购者是指在不经过被收购者同意而希望直接取得被收购者所拥有的资源的控制权。在贿赂模型下,攻击者拥有的资源如下。<br>
(1) 预算:攻击者拥有的贿赂其他参与者执行特定行动的资金总额。<br>
(2) 成本:攻击者实际支付给其他参与者的资金总额。将攻击者模型实例化到区块链中就是存在一个贿赂者利用自己拥有的足够多的资源对其他参与者进行贿赂,使得他们在区块链共识的过程中能够采取对贿赂者有利的行为。<br>
贿赂攻击对基于 Pow 共识机制、基于 POS 共识机制和基于 BFT 共识机制的安全性都会造成威胁。<br>
(1)基于 PoW 共识机制:基于 PoW 共识机制的区块链允许区块链节点自由地加或者退出区块链,并且都有机会参与共识。因此,攻击者可以通过贿赂攻击对区块链中参与共识的节点进行贿赂,从而产生对攻击者有利的区块链分叉。<br>
(2)基于 PoS共识机制:基于 PoS 共识机制的区块链共识节点需要拥有一定份额的股份权益,所以攻击者可以针对用于股份收益的节点进行贿赂。<br>
(3)基于 BFT 共识机制:基于 BFT 共识机制的区块链拥有 3f+1个共识节点,其中可以容纳f个节点出错。因此,攻击者只需要贿赂 3f+1个节点中的f+1个节点就能使区块链停止正常出块。为了获得有利于攻击者的区块,攻击者需要贿赂至少 2f+1个节点。</p>
<h4 id="币龄累计攻击">币龄累计攻击</h4>
<p>币龄累计攻击(Coin Age Accumulation Attack)指在 PoS 共识机制下攻击者根据币龄计算节点权益的机制来计算币龄总消耗,进而确定有效的区块链。币龄累计攻击主要实施于使用 PoS共识机制的区块链,而不能实施基于 Pow 共识机制的区块链。在 PoS共识机制下,矿工挖矿成功的可能性与矿工账户上持有的数字货币的数量以及持有货币的时间长度相关。在购买一定数量的数字货币并持有足够长的时间后,攻击者就可以利用自己的币龄优势控制区块链出块,从而控制整个网络。以最早采用 POS 共识机制的数字货币 Peercoin 为例,矿工获得出块权的难度与矿工持有的数字货币总额以及持有货币<br>
的时间长度有关。也就是说，矿工计算的哈希值需要满足以下公式<br>
$H(H(B_prev),A,t)≤balance(A)·m·Age(coins)$</p>
<p>式中,A 是账户地址;Bm.是上一个区块; 是时间;balance(A)是账户余额;Age(coins)是持有货币的时间长度。在 Peercoin 的最初版本中,拥有所有硬币 5%的攻击者可以将他拥有的数字货币通过交易分成多个 UTXO,直到拥有的 UTXO 的年龄比平均年龄高10倍。之后,攻击者可以利用这些币龄较高的 UTXO 来实现出块或者其他恶意操作，假如存在多个用户试图发起此攻击,则会导致网络质量严重恶化。为了防范攻击者通过长期持有数字货币获得较高币龄,区块链系统可以对矿工的持币总量和持币时间设置最大值约束,并且在达到预设的预警值时进行奖励清算来清空持币时间。</p>
<h4 id="长距离攻击">长距离攻击</h4>
<p>长距离攻击(Long Range Attack),指具有足够计算能力的攻击者通过从第一个区块开始重新构建另一个区块链。由于基于 Pow 共识机制的区块链消耗了大量的计算资源,因此难以实施。例如,攻击持续 1000 个区块的比特币至少需要 400 万美元,而且,与短距离攻击不同,这种攻击非常容易被发现。然而,PoS 共识机制与 PoW 共识机制不同PoS共识机制必须引入时间概念来替代原来的计算资源消耗机制。目前长距离攻击主要分为3类。</p>
<p>(1)向前腐化攻击(PoSterior Corruption Attack):通过控制曾经占有 50%权益的货币所有者重新构建区块链。由于这些早期持币者已经花费了他们手中的货币，不再承担持有这些货币贬值的风险,攻击者可以很容易地贿赂他们,让他们利用原来持有过的权益对区块链进行分叉。<br>
(2)权益流血攻击(Stake Bleeding Attack):在向前腐化攻击中,攻击者需要控制50%的权益。攻击者通过建立只有自己节点的区块链并在上面进行挖矿工作来获得挖矿奖励。虽然,最开始时,攻击者的链并不比公有链长,但只要它们隐藏的时间足够长,并积累使得攻击者隐藏的链拥有的权益超过 50%,那么最终攻击者工作的私有链就会成为最长链。<br>
(3)权益粉碎攻击(Stake Grinding Attack);攻击者利用自身的权益优势来获得计算出块所需哈希值的优势,从而拥有更高的出块机会。然后,再经过一段更长的时间后获得比诚实节点更长的链,实现对原有区块链的分叉。<br>
抵抗这种攻击的方式是引入检查点机制,即选择区块链中一些节点并每隔一段时间生成一个获得这些节点认证的区块,通过这样来确保这个区块所在的链原有的数据不会被撤销。</p>
<h4 id="自私挖矿攻击">自私挖矿攻击</h4>
<p>自私挖矿(Selfish-Mining)攻击,指矿工通过延迟区块的公布时间来获得出块优势实施该攻击的核心是诚实矿工在会被淘汰公共分支上浪费算力。攻击者通过有选择地公开他们开采出来的区块链来获得后续区块的出块优势,从而对公开分支实现分叉,最终使诚实矿工的工作失去价值。在自私挖矿攻击算法中,攻击者实质上维护两个区块链,包括一个私有链及一个公有链。私有链与公有链最初是一致的,一旦攻击者挖有效的区块后先加入私有链上而不进行广播。在这种情况下,攻击者就可以领先其他人一个区块的优势,然后在私有链上继续挖矿。即使公有链上的其他节点开采出区块,攻击者还是可以迅速地广播私有链的区块,那么还是有 50%的概率会被其他节点承认挖出的区块。实现攻击的情况可以分为下面两种。</p>
<p>(1)公有链长度大于私有链长度。恶意矿工需要拥有超过全网其他矿工的算力才可以通过在私有链上工作来超越公有链。由于恶意矿工拥有的算力较小,因此在这种情况<br>
下恶意矿工无法获得利益。</p>
<p>(2)私有链长度大于公有链长度一个区块。恶意矿工在私有链上进行工作会出现两种情况:①公有链中的诚实矿工在公有链中得到下一个区块,恶意矿工失去优势，此时恶意矿工主动广播私有链上的最新区块与公有链的区块进行竞争;②私有链上的恶意矿工开采出新的区块,此时私有链的长度优势得到保持。</p>
<p>目前研究者提出了两种方案来防止在区块链网络中发生的自私攻击。D发生分叉时,区块链网络把矿工随机分配到不同分支,来防止自私矿工把算力集中在较容易出块的分叉上。@网络上的矿池设置闽值限制,这将阻止自私的矿工获得比网络上运行的其他矿工更大的优势。自私挖矿攻击流程的程序代码如下:</p>
<p><img src="/img/blockchain_sec/6_35.png" alt=""></p>
<p><img src="/img/blockchain_sec/6_36.png" alt=""></p>
<h4 id="双重支付攻击">双重支付攻击</h4>
<p>双重支付攻击(Double Spending Attack)是指通过对区块链数据的改达到对同代币重复支付的目的。目前已知的实现双重支付攻击的手段有 5 种方式:51%攻击、种族攻击、预计算攻击、芬尼攻击和 Vector76 攻击。</p>
<h5 id="51-攻击">51%攻击</h5>
<p>51%攻击指攻击者利用算力优势在区块链上产生分支链。这类攻击主要发生在Pow共识机制中,拥有 51%算力的矿工可以通过自己的算力优势在新的分支链上生新区块,使得分支链成为主链从而撤销在原主链上的交易记录。如图 8.2 所示,攻击者以先在原主链(白色标识)上提交一笔交易,然后等待接收者确认后,攻击者在分支链上提交一笔接收地址不同但是花费的是同一比特币的交易,最后攻击者利用算力优势把分支链(灰色)扩展为主链,实现双重支付攻击。为了避免该攻击，一般建议用户要在收到 h个区块确认后才能认定交易有效且不可更改,k 的设定与安全强度和平台有关。</p>
<p><img src="/img/blockchain_sec/6_37.png" alt=""></p>
<h5 id="种族攻击">种族攻击</h5>
<p>如图 8.3 所示,种族攻击(Race Attack)主要针对只收到0确认就认定交易有效的用户。攻击者可以创建两个冲突的交易事务,并把第一笔交易发送给受害者,受害者接收到付款发送产品后,攻击者立刻发送相同数量的冲突交易并广播到区块链中,使得第一笔交易无效。在比特币中具体实施该攻击的过程如下;攻击者首先利用一个 UTXO 直接向接收者发送一笔支付交易,然后再利用该 UTXO 加上较高的交易费用进行广播,由于矿工一般优先选择具有较高交易费的交易进行确认,因此较高的手续费导致后者很快被其他矿工确认写入新的区块,使得接收者对应的交易被作废。<br>
<img src="/img/blockchain_sec/6_38.png" alt=""></p>
<h5 id="预计算攻击">预计算攻击</h5>
<p>预计算攻击(Precomputing Attack)的实施基于一个事实,就是在基于 PoS 共识机制的区块链中,矿工挖块时需要解密一个取决于前一个区块的哈希值。于是,攻击者可以利用拥有的算力和权益优势在产生第个区块的过程中通过随机试错的方式控制第 个区块的哈希值获得第i+1个区块的出块优势。利用这种出块优势,攻击者可以发起双重支付攻击并获取相应的区块奖励。</p>
<h5 id="芬尼攻击">芬尼攻击</h5>
<p>图8.4 为芬尼攻击(Finney Attack),这类攻击和种族攻击所针对的对象都是收到0确认就认定区块不可更改的用户。不同于种族攻击,采用芬尼攻击的攻击者是已经挖到一个区块而暂时没有广播。攻击者创建一笔交易把代币转移到自己的另一个账户,并把这笔交易记录到区块中,然后再把同一代币发给接收者。如果接收者在收到转账信息后立刻认定交易有效,那么攻击者可以广播自己挖到的区块来覆盖发送给接收者的交易。具体的攻击过程如下:①攻击者开采出一个区块 1包含一笔由地址 1向地址2转a个Token 的交易,其中,地址 1和地址 2都属于攻击者拥有的交易地址;②攻击者构造一笔由地址 1转到诚实用户的地址 3 的交易，③商家获得攻击者在②中构造的交易后发出商品;④攻击者广播区块1,利用区块的广播时间对同一个 Token 发起双重支付攻击。</p>
<p><img src="/img/blockchain_sec/6_39.png" alt=""></p>
<h5 id="Vector76攻击">Vector76攻击</h5>
<p>Vector76 攻击也称一确认攻击，是种族攻击和芬尼攻击的组合攻击形式。利用该5.Vector76攻击政击,使得交易所在的区块即使已经有过一次确认(即一个区块的延长),该交易依然可能被回淡和撤销。然而,这种攻击对攻击者而言会消耗其一次挖矿奖励的机会。如图。所示,钱包一和钱包二为攻击者所产生的两个钱包,托管电子钱包为攻击者在托管机构的存款钱包。攻击者通过控制全节点 A 和全节点 B 来发起 Vector76 攻击，其主要的程如下。</p>
<p><img src="/img/blockchain_sec/6_40.png" alt=""></p>
<p>(1)攻击者通过两个钱包客户端来创建起两个分支，即分支 1 和分支 2。在分支1中,钱包一客户端发起交易向托管电子钱包要求支取其中的数字货币(以 Token 表示)标识为交易1。攻击者将这笔交易创建后不进行广播。与此同时,在分支 2 中,攻击者利用钱包一向钱包二客户端发送同一 Token,标识为交易 2。<br>
(2)攻击者把交易 1打包进新创建的区块,并在分支1上继续挖矿,挖到区块后先不进行广播。<br>
(3)在分支1 具有一定优势后,攻击者通过全节点 A 将交易1 发送至网络,同时也通<br>
过全节点 B 发送交易 2,由于全节点 B 连接到更多节点,交易 2 会被优先确认。<br>
(4) 攻击者通过全节点 A 将包含交易 1的区块广播到网络中。<br>
(5) 托管机构假定在收到一次确认后就立刻支付 Token。<br>
(6)攻击者在收到 Tken 后直接卖换取现金,由于在网络中最终被确认的是交2,因此交易 1成为无效交易,从而实现 Vector76 攻击。</p>
<h2 id="第9章-网络层安全">第9章 网络层安全</h2>
<h3 id="网络层安全概述">网络层安全概述</h3>
<p>区块链网络层的主要功能是为共识层提供可靠、对等和安全的网络结构及通信环境。通常恶意者对网络层发起攻击的主要目的包括去匿名性和获取经济利益。针对去匿名性的手段包括收集用户线上、线下的信息分析出用户的交易流向,找出用户真实身份信息。攻击网络层达到获取经济利益的目的主要是通过阻断节点与正常区块链网络的通信连接实现的,使得正常节点收到异常信息或错误信息,进而影响交易数据的正确性。网络层的安全风险与网络的拓扑结构、网络节点(用户)行为以及通信策略等因素相关,主要分为 3 个层面的安全问题:点对点(P2P)网络、传播机制和验证机制。</p>
<p>(1) P2P 网络: 点对点网络是指两个或多个对等节点之间直接共享文件的网络架构,在区块链网络中各个节点无主次之分。由于区块链数字加密货币交易的需要,节点之间会在区块链 P2P 网络中传播自身 P 地址等信息。安全性不高的节点很容易受到攻击者的直接攻击从而带来隐私数据的泄露。目前存在多种威胁网络层安全的攻击方式,如日蚀攻击、边界网关协议(BordeGateway Protocol,BGP)劫持攻击、窃听攻击和拒绝服务攻击等,同时也引发了不少安全事故。例如,2018 年 3 月,闪电网络由于遭受拒绝服务攻击而导致大量节点下线。</p>
<p>(2)传播机制:指建立连接的节点之间进行广播通信。在区块链网络中每个新加入的节点都需要先与网络中现有的其他节点进行通信以获得在网络中广播区块链相关信息的资格。当收到来自其他节点的信息后,会按照约定的机制验证信息,最后将确认无误的信息进行广播转发。针对传播机制常发起的攻击方法包括交易延展性攻击等,2014 年 8 月,Silk Road 2 因遭到交易延展性攻击而引起了严重的经济损失最终导致价值 260 万美元的比特币被盗。</p>
<p>(3)验证机制:由于数字签名的完整性和不可抵赖性两个特点满足区块链验证机制的需求,因此选择数字签名作为区块链的验证机制。验证机制的主要作用是保证节点传播和写入区块信息的真实性。攻击者对于验证机制最主要的攻击方式是绕过验证,在比特币中就曾发生过此类攻击带来的安全事故。2010 年 8 月,攻击者在第 74 638 个比特币上创建了一笔恶意交易,导致接近 2000 亿个比特币被非法发送到两个比特币地址。后来发现是攻击者利用大整数溢出漏洞,绕过了节点的有效性验证。</p>
<p>作为区块链的底层之一,网络层的安全性十分重要,区块链网络层安全目标包括匿名性和抗 DoS 攻击。此外,对于攻击者,在网络层中发起攻击一般需要事先知道网络的拓扑结构,因此网络的拓扑结构信息通常会被保护起来使得攻击者难以获取。即使攻击者可以在不知道网络拓扑结构的前提下发起攻击,但这种情形下需要耗费更多的资源来完成攻击过程。总体而言,网络层中主要的安全目标可以围绕 3 方面:匿名性、抗 DOS 攻击、拓扑结构隐藏。</p>
<p>接下来将介绍网络层中几种常见的攻击形式,包括拒绝服务攻击、日蚀攻击、BGP 劫持攻击、女巫攻击等,此外还会对网络层攻击的防御手段进行介绍。</p>
<h3 id="网络层安全威胁">网络层安全威胁</h3>
<p>近年来,发生在网络层的安全事故数量在逐年上升。主要的安全事件如表 9.1 所示，其中 DDoS 攻击是典型的攻击形式,攻击者针对交易所、矿池和区块链应用系统等进行攻击,导致服务中止,甚至可能导致区块链网络的安全性受到损害。2014 年,攻击者采用DDoS方式对 LocalBitcoins 交易所发起了大规模攻击,导致其服务停止 40 分钟Blockchaininfo 服务平台遭受 DDoS 攻击,导致服务中断,用户无法正常访问;AntPool、CKPool和 <a href="http://GHash.io">GHash.io</a> 等矿池也遭到了 DDoS 攻击,导致矿池服务中断。</p>
<p>网络层中主要的安全威胁来自 P2P 网络、传播机制和验证机制这 3 个区块链网络层机制中存在的安全漏洞,例如,P2P 网络中的 DDOS 攻击,传播机制中交易延展性攻击,验证机制中整数滥出漏洞。网络层中的攻击通常是应用层中发生安全问题的根源,例如恶意者通过发起 Sybil 政击和DDoS 攻击切断用户与正常区块链网络的联系，造成可能的双重支付攻击,进而获取经济利益。</p>
<h4 id="拒绝服务攻击">拒绝服务攻击</h4>
<p>拒绝服务(Denial of Service,DoS)攻击的定义是: 攻击者故意地利用网络协议实<br>
的缺陷或直接通过暴力手段耗尽被攻击对象的资源,使得攻击对象无法提供正常服务行为。采用这样的手段,不仅可以使得目标计算机或网络无法提供正常的服务以及资源访间,还可以让目标系统的服务停止响应甚至崩溃。在实际情况中,由于攻击者所面临的网络带宽限制问题,较小的网络规模或者较慢的网络速度可能导致攻击者无法发出过多的请求。于是,攻击者可能使用两个或两个以上的物理终端向网络上的一个或多个目标系统发起拒绝服务攻击,实现分布式拒绝服务(DDoS)攻击。如图 9.1 所示,攻击者通过控制网络一台傀儡设备,攻击与之相连的其他设备,使其在攻击者的控制下,利用多台傀儡设备同时向远程的其他服务器发起攻击,攻击者可以通过使网络过载、阻断用户访问系统或者在较短时间向系统提交大量请求使受害者超过负荷。根据统计,目前绝大多数的交易客户端都曾遭受过 DDoS 攻击。</p>
<p>具有代表性的 DoS 攻击的方式主要有以下 4 种。</p>
<h5 id="SYN-Flood-攻击">SYN Flood 攻击</h5>
<p>SYN Flood 攻击是拒绝服务攻击的一种。在正常的三次握手协议中,首先用户端会尝试与服务器建立 TCP连线,在这个过程当中,用户端与服务器端会交换的信息如下。</p>
<p>(1) 用户端传输 SYN 同步信息到服务器端,请求建立连线。<br>
(2)服务器响应 SYN-ACK 消息给用户端,表示应答。<br>
(3)用户端发送应答 ACK 给服务器端,建立连线。</p>
<p>如图 9.2 所示是 TCP 三次握手协议。<br>
如图9.3 所示,在 SYN Flood 攻击中,攻击者通过发送大量 SYN 请求给服务器端,由于服务器会不断响应,并相应地回复消息 SYN-ACK,但是攻击者不对接收到的信息进行回复，或者攻击者在 SYN 里采用假的 IP 地址对服务器端进行欺骗，让服务器发送 SYNACK 到攻击者伪造的虚假地址,这导致了服务器端不可能收到 ACK。当正常用户想要进行 TCP 连接时，服务器端就会由于无法响应,而拒绝服务。</p>
<p><img src="/img/blockchain_sec/6_41.png" alt=""></p>
<h5 id="UDP-Flood-攻击">UDP Flood 攻击</h5>
<p>UDP 是一种不需要使用任何程序建立连接来传输数据的无连接协议。针对该协议的攻击常见的情况是利用大量 UDP 数据小包冲击服务器。攻击者可发送大量的小 UDP包给目标主机,并且这些UDP 包的源IP 地址都是伪造的,由此可以实现 UDP Flood攻击。</p>
<h5 id="IP欺骗攻击">IP欺骗攻击</h5>
<p>IP 欺骗即攻击者用他人的IP 地址伪造成自己的IP地址,并用于欺骗目标主机。IP欺骗攻击建立在主机之间正常信任关系之上。例如,对于网络上的任意两台计算机 A 和B,假设 B可以利用远程登录工具,不需要口令验证就可以登录 A 主机。此时,主机 A和B之间的信任关系是基于IP 地址而建立，所以当攻击者冒充 B的IP 地址,就可以不需要任何口令验证,从而远程登录 A。这就是 IP 欺骗攻击的原理,其攻击的步骤如下。</p>
<p>(1)攻击者攻击被信任的主机,使其网络暂时瘫痪,以免对后续的 IP 欺骗攻击造成干扰。<br>
(2)攻击者为猜测ISN基值和增加规律需要连接目标主机的某个端口。<br>
(3)攻击者把其源地址伪装成被信任的主机,发送 SYN 消息包，向目标主机发起连接请求。<br>
(4)攻击者需要等待目标主机发送响应的 SYN-ACK 包给被信任的主机,此时攻击者可能无法看见目标主机是否已经响应,需要对响应时间进行预判。<br>
(5)攻击者把其源地址伪装成被信任的主机,向目标主机发送 ACK 消息包，此时为<br>
送的消息为预测的目标主机的 ISN+1。<br>
(6)攻击者与目标主机连接建立发送命令。</p>
<h5 id="Smurf攻击">Smurf攻击</h5>
<p>Smurf 攻击的原理是同时采用 P 欺骗以及 CMP 回复方法，目的是让目标系统被大量无意义的网络数据填满,使得目标系统拒绝其他主机的正常请求,并无法提供服务。</p>
<p>Smurf 攻击的具体过程:攻击者发送伪装的 1CMP 数据包，目的地址设为任意一网络的广播地址,源地址设为要攻击的目标主机。因此,网络上的所有收到此ICMP数报包的主机都将对目标主机发出一个回应数据包，目标主机在某一段时间内收到成千上万个数据包,使得被攻击主机崩溃,并且无法提供服务。</p>
<p>DDoS 攻击已发生在针对大型公司的 Web 服务器,例如银行、电商，甚至主要的政府和公共服务等生活场景中。不仅如此,任何设备、服务器,或者连接互联网的设备都可能是DDoS 攻击的潜在目标。近年来,随着加密货币的发展,加密交易所已成为 DDoS 攻击<br>
日益流行的目标。</p>
<p>如图 9.4 所示,2017 年 10 月 24 日,比特币黄金(Bitcoin Gold,BTG)作为新加密货币,已经正式从比特币区块链中分离出来,作为一种免费的开源软件项目。此项目之后就遭到了 DDoS 攻击,BTG 团队注意到每分钟有 1000 万次点击阻塞了其网络流量请求,最终导致其官方网站中断并拒绝服务多个小时。</p>
<p>尽管各类加密交易所已经成为 DDoS 攻击的主要目标之一,但是区块链的分布式特点为抵御 DDoS 和其他网络攻击提供了强大的保护。当任意多个节点无法通信或脱机时,区块链也能够保证继续操作和验证交易。当受干扰的节点设法恢复并恢复工作时,它们将重新同步并获取未受影响的节点提供的最新数据。因此,对于区块链网络,DDoS利其他网络攻击造成破坏的可能性要小得多。工作量证明(PoW)共识机制可确保所有网络数据均受到加密证明的保护,这使得要更改以前验证过的块变得不现实,因为更改比币区块链需要逐条记录地分解整个区块链结构。因此,针对区块链的拒绝服务攻击,至多只可能在短时间内修改最近的几个区块上的交易。此外,如果攻击者设法控制了区块链中超过 50%的网络节点用于执行 51%攻击(多数攻击),底层协议也会进行快速更新,便以响应攻击。</p>
<p>除了区块链网络本身的性质外,还可以通过一些策略来抵御 DDoS 攻击。</p>
<p>(1) 增强协议容忍性:当发生 SYN Flood 攻击时,能够让 TCP 中一些未完成的半打开连接被随机释放;增加 SYN Cache 和 SYN Cookie 功能，当发现或者怀疑有攻击存在时启用,这样的操作可以增加 DDoS 攻击的难度。<br>
(2)提高系统和网络的安全性:对网络进行流量控制,关闭不需要的服务或者端口定期对系统进行补丁更新,对端口进行扫描,可以及时发现异常流量情况,定期进行攻击测试和病毒防护。<br>
(3) 端口过滤:端口过滤包括两部分,即人口过滤和出口过滤。其中,入口过滤指的是合理排列、编写防火墙和路由器访问控制列表,可以用于合理过滤数据流量,并且要合理配置边界路由;出口过滤指的是配置用户网络的边界路由,使得源 IP 地址是非法的数据包可以被及时阻塞,以免流出外网。<br>
以上的防御策略需要根据网络的具体情况进行具体配置。</p>
<h4 id="日蚀攻击">日蚀攻击</h4>
<p>在区块链系统中,在一个节点与其他节点之间建立 TCP 连接需要消耗资源。在比特币场景中,为了减少对网络资源的消耗,节点对外连接的数量是有限的。具体地说,比特币节点可以接收 117 个对内连接、对外发起8 个连接。日蚀攻击的实施就是基于这一特点,这种攻击手段是通过占用受害者的点对点连接的间隙,使得该节点停留在一个隔离的网络中,这样的攻击让被攻击节点和实际的区块链网络中建立了一个中继,使得被攻击节点收到的消息都是来自攻击者设定的消息,而且这种攻击手段的成本非常低,只需要购买少量的云服务来构造一个僵尸网络就可以实施这种攻击。如图 9.5所示,攻击者节点成为受害节点连接 P2P 网络的唯一节点,将受害节点隔离到一个网络中阻止新的区块信息进入受害节点,攻击者可以成功以低于全网算力资源 50%的攻击能力进行 51%攻击。</p>
<p><img src="/img/blockchain_sec/6_42.png" alt=""></p>
<p>日蚀攻击是一种用于攻击分布式网络的常用攻击方式,比特币网络作为分布式节点网络的典型代表,成为日蚀攻击的主要目标。如图 9.5 所示,在日蚀攻击中,攻击者试图隔离并攻击特定用户,而不是攻击整个网络。日蚀攻击发起成功后,使潜在的恶意参与者能够隔离并随后阻止其目标获得真实网络活动和当前分类账本状态的真实情况。</p>
<p>在分布式网络中,不允许网络中的节点同时连接网络上的所有其他节点,因此,为了提高效率,分布式网络中的一个书点只连接其选择的其他节点组，这些节点组内的节点连接它们自己所在的节点组。正是因为有这样的特性,使得日蚀攻击成为可能。例加,辣市阿络申的一个节点有8个传出书点。恶意攻击者的目的是劫持该节点所有的传出接。实现此目标的难易程度因网络的构造规模和性质而异,但通常，攻击者必须控制机节点的循尸网络,并把相邻节点转化为潜在的攻击目标。下一次受害节点注销并董加入网络(重置其连接,并迫使它们找到要连接的新节点集)时,攻击者很有可能控制受害节点的所有连接。</p>
<p>截止 2018 年,已经有研究表明,比特币网络和以太坊网络均可能遭受日蚀攻击的影<br>
响。在区块链网络中,攻击者可以通过日蚀攻击的方式,逐步控制足够数量的 IP 地址,他得受害者和所有其他节点之间的有效连接断开,即对被攻击者进行垄断;在以太坊网统中,攻击者可以通过日蚀攻击的方式,垄断受害节点的所有输入和输出连接,从而将受节点与网络中其他正常节点隔离,这也导致了受害者无法查看正确的以太坊交易细节,击者可以诱骗卖家在交易其实还没有完成的情况下就将物品交出。</p>
<p>为了防止日蚀攻击,在以太坊网络中可以采用以下 4 种方式。</p>
<p>(1)进行随机节点选择,以太坊节点发现机制采用了 Kademlia 算法,它由分散式杂凑表进行实现,用于非集中式 P2P 计算机网络。Kademlia 算法用于规定网络的结构,以及规定通过节点查询进行信息交换的方式。Kademlia 的网络节点之间的通信方式为UDP。所有参与通信的节点通过一组数字进行身份标识,并且形成虚拟网。但是Kademlia 不会对新连接的节点进行随机化搜索，因此,攻击者可以创建由受害者选择的节点。将这种选择与分布在网络中的对等点随机化,将使攻击者更难猜测他们应该创建哪些节点来针对受害者。<br>
(2)对每个IP 地址或机器的节点数进行限制,这也是最容易解决的缺陷之一。<br>
(3)对节点进行信息存储,节点在遇到其他节点时会存储有关它们的信息，这样使得在节点离开并重新加入网络之后保持此信息可访问性，将确保它们可以在找到其他合法对等节点之前连接一些合法对等节点。<br>
(4)尽量增加节点连接数,尽管此数目不能为无穷大,否则会减慢网络速度,但是允许的连接节点越多,带来的优势是节点连接合法用户的可能性越大。</p>
<h4 id="BGP劫持攻击">BGP劫持攻击</h4>
<p>边界网关协议(BGP)是一种自治系统的路由协议,运行于 TCP 之上，作为互联网成的关键一环,可以用于处理不同自治系统之间路由信息的交换。BGP 是目前用来处理如同互联网大小的网络的协议,而且可以妥善处理好不相关路由域间的多路连接的协议因此BGP 被广泛应用于比特币网络中。BGP系统的主要功能是和其他的 BGP系统交换网络可达信息。网络可达信息包括列出的自治系统(AS)的信息。这些信息有效地造了AS互联的拓扑图并由此清除了路由环路,同时在 AS 级别上可实施策略决策。</p>
<p>BGP 劫持攻击是指攻击者通过恶意修改数据的传输路线来截取和篡改数据,劫持的过程好比攻击者恶意篡改一段高速公路上的路标,使汽车无法找到正确的出口。一般实现在区块链网络中运行 BGP,需要控制 BCP路由器,然后使用它给周围节点发送它有更短路径的通知,而其他节点收到通知后会把流量定向到这个 BGP 路由器中,由于这样的原理,攻击者可以通过错误地向路由宜布他们对某个 IP 地址组(称为 IP 前级)的所有权,但实际上攻击者并不拥有、控制或路由这个 IP 地址组,从而实现 BGP 劫持攻击。</p>
<p>如图 9.6 所示,AS3 的 BGP 路由器声明有到达的更短路径,导致本来应该从PC 端流向AS4 的服务请求信息被 AS3 的 BGP 路由器劫持。由于 BGP 持,区块链网络中的流量可能被非法监控和拦截。另外,BGP 劫持可以作为中间人攻击的中间步骤,用于把数据导向恶意节点，达到破坏区块链交易以及共识机制的目的。由于大多数节点都托管在少数互联网服务提供商(ISP)中,即 60%的流量都会经过这些少数的 ISP,这样的机制为BGP 劫持攻击的实现提供了可能性。</p>
<p><img src="/img/blockchain_sec/6_43.png" alt=""></p>
<p>具体而言,在 BGP 劫持攻击中,攻击者需要控制或者破坏连接一个 AS 和另一个 AS的启用 BGP路由器,这样的操作增加了 BGP 持攻击的难度。攻击者完成 BGP 劫持攻击需要以下两个步骤。</p>
<p>(1)攻击者需要为路由器提供一个更具体的路线,在其他 AS前宣布一个较小范围的 IP 地址。<br>
(2)AS的运营商或已经破坏 AS 的威胁者发布通知到更大的互联网的 BGP 路由<br>
器,为某些 IP 地址块提供更短的路由。</p>
<p>攻击者通过 BGP 劫持来实现路由误导或者拦截流量等目的。目前,在区块链网络中节点的流量一旦被控制,则有可能对整个网络造成巨大的影响,如共识机制、交易等各种信息被破坏。具体而言,攻击者可以利用 BGP 劫持,将区块链网络中的节点划分成两个或多个无法通信的独立网络,此时,区块链则会分叉为两条或多条并行链,然后即可在并行的分叉的链上进行消费或者转账,在 BGP 持攻击行为停止后,区块链会以最长的链为主链，进行重新统一,并将其他的分叉丢弃,使得被丢弃的链上的交易全部无效,这样的行为很可能导致双重支付的发生，造成双重支付攻击,如图 9.7 所示。</p>
<p>针对这些需要保护的区块链,建立其专用的网络,不再让互联网服务提供商代理网络。这个网络同样需要做到去中心化,减少被单点劫持发生的概率。同时需要设立算力监控中心,实时汇报全网算力变化,算法发生显著变化时则需要及时检查该节点和其他节点之间的通信。</p>
<p><img src="/img/blockchain_sec/6_44.png" alt=""></p>
<h4 id="女巫攻击">女巫攻击</h4>
<p>女巫攻击(Sybil Attack)是指攻击者可以通过少量节点伪装出大量的节点身份标记来欺骗在区块链网络中的其他节点,把数据备份到少量的真实节点中,从而只需要控制这些节点就能破坏系统的数据备份功能。在区块链中,每个节点可以拥有多重身份标签,击者利用这一特点来达到削弱控制系统中的数据备份的效用。换句话说,女巫攻击是在对等网络中的一种攻击,其中网络中的节点同时主动操作多个身份并破坏信誉系统中的权限(权力)。攻击的主要目的是在网络中获得多数影响，以在系统中执行非法(相对于网络中设置的规则和法律)行为。单个实体(计算机)具有创建和操作多个身份(用户账户、基于 IP 地址的账户)的能力。对于外部观察者,这些假身份似乎是直下的唯一身份。</p>
<p>针对区块链或文件传输网络的 Sybil 成功攻击将使不良行为者对网络进行不成比例地控制。如果这些伪造身份获得了网络的认可,它们可能代表各种建议进行投票或中断网络中的信息流。这些身份可能显示为不同的用户,但实际上都在某一方的控制下。-旦它们生成足够多的身份,会最终对网络产生控制性影响,而其他用户甚至都无法察觉<br>
这是女巫攻击的基础,它打开了许多潜在的攻击媒介,举例如下。</p>
<p>(1) 攻击者阻止来自其他方的交易,因为该攻击者控制着其他节点所连接的节点。<br>
(2)破坏私人交易,由于大多数节点已经被攻击者控制,因此可以告诉这些交易如何路由以及它们源自何处。<br>
(3) 主导角色仅传输他们创建的块,这会将其他块放置在单独的网络中(因此容易受到双重支付攻击)。</p>
<p>女巫节点可能围绕并尝试影响到达网络上其他节点的信息,从而逐渐影响分布式账本或数据库。常见的女巫攻击的类型主要有以下两种。</p>
<p>(1)在直接攻击中,诚实节点直接受到 Sybil 节点的影响<br>
(2)在间接攻击中,与 Sybil 节点直接通信的节点攻击诚实节点。由于该中间节点受到女巫节点的恶意影响,因此受到威胁。</p>
<p>比特币网络为了证明添加到区块链的任何区块的真实性,可以使用工作量证明(PoW)共识算法。这项工作需要大量的计算能力,这可以激励矿工做诚实的工作,而对错误的工作则没有激励作用。每个节点都将验证交易,如果块中包含错误的交易,则将其视为无效。由于矿工数量众多,在比特币网络中实际上很难实现一种称为 51%攻击的女巫攻击,对于一个组织,控制 51%的矿工是非常困难的。一般防止女巫攻击的方法主要有以下3种。</p>
<p>(1) 向不同成员赋予不同权力:这是基于声誉系统的。不同的声誉级别将分配给具有不同权限级别的成员。<br>
(2) 创建身份的成本:为防止网络中出现多个假节点,可以要加入网络的每个节点支付成本。<br>
(3) 验证身份:包含两种验证方式,即直接验证和间接验证。其中,直接验证是指对已经建立的成员验证网络的新加入者进行验证;间接验证是指既定成员将验证其他一些成员，这些成员进而可以验证其他新的网络加入者。当验证新加入者的成员由已建立的实体进行验证和确认时,相信新加入者是诚实的。</p>
<h4 id="窃听攻击">窃听攻击</h4>
<p>窃听攻击(Eavesdrop Attack)指攻击者利用区块链节点的标识与其 IP 地址进行关联来追溯用户的隐私信息,包括用户所处的居住地址等。例如,在比特币网络中,节点可以通过连接区块链中现有的服务节点来加入网络中,加入网络后节点获得一组入口节点以执行后续区块链交易。节点执行交易时,需要通过入口节点广播交易到区块链网络,攻击者可以通过监听人口节点来识别对应的用户节点。当用户节点通过这些入口节点将交易扩散到区块链网络后,攻击者通过对这些交易进行分析和对人口节点进行监听就可识别出某一交易是否是来自被识别的某一用户节点。</p>
<p>网络层是区块链网络结构中密不可分的一部分,因此,防御网络层面临的攻击也是一个重要的研究内容。目前,网络层的防御手段针对以下 3 方面:P2P 网络、传播机制和验证机制。其中,包括以下安全防御手段。</p>
<p>(1)恶意节点检测机制:在区块链公有链机制中任何节点都可以申请接入网络,其中可能存在恶意节点,虽然区块链中不能限制节点的接入,但可以引入恶意节点监测机制,对节点的行为进行检测,一旦发现节点在恶意搜集信息就申请把该节点加入黑名单。<br>
(2) 限制接人:在区块链私有链和联盟链中,为了保障节点的安全性,对于接入网络<br>
中的节点,必须先经过授权,没有得到授权的节点无法搜集链中的交易信息和区块信息。目前这种防御手段只适用于私有链和联盟链场景中,因为在公有链场景中不允许存在进行授权的节点。<br>
(3)数据加密传输:在 P2P 网络中,数据可以使用可靠的加密算法进行加密后再广播,这样就可以避免恶意节点随意截取更改网络中的数据。<br>
(4)完善数据验证机制:部署更新区块链相关代码时,要进行大量且完备的测试和安全审计工作,避免攻击者利用整数溢出、权限设置不当等漏洞绕开验证攻击。</p>
<h3 id="网络层隐私保护协议">网络层隐私保护协议</h3>
<p>在 9.2 节的介绍中可知攻击者在网络层发起攻击的主要目的之一是为了对用户去器名性,来获取用户的身份隐私。在比特币系统中隐私性受到威胁的主要原因在于用户常用的交易地址被探知,使得攻击者可以有规律地追溯用户之间的联系。例如，假如一个交易包含来自同一个用户的多个输入,攻击者可以利用这一特征来跟踪比特币的流向以及地址之间的联系,最后将地址与现实中的用户身份联系起来,在某种程度上打破了匿名性。为了解决区块链在身份隐私保护方面的问题,相应的隐私保护技术被提出,其中，经典的解决方案包括混淆协议、基于零知识证明的隐私保护方案。混淆协议是网络层中进行隐私保护的主要方案之一,目前包括 MixCoin、CoinJoin 和 CoinShuffle。MixCoin 是比特币系统最早的混合方案,通过引入第三方将满足固定金额条件的用户交易进行混合，是一种中心化的混淆方案。具体地说,假设同时存在多笔交易,每组交易的用户只有一个输入地址和输出地址,MixCoin 为了将这一组交易进行混淆,会依托一个第三方服务器来完成混淆过程,不可避免地会存在中心化带来的风险和威胁,而另外两种协议(CoinJoin 和CoinShuffle)属于去中心化的混淆方案。本节将从特性、流程等方面来介绍这两种方案。</p>
<h4 id="混淆协议-CoinJoin">混淆协议 CoinJoin</h4>
<p>在软件工程领域,有一种针对程序代码进行隐私保护的技术，称为程序混淆(Program Obfuscation)。为了避免攻击者恶意阅读程序源代码,提出使用程序混淆技术将源代码经过混淆使其不能被攻击者或者其他未获得有效授权的用户查看。通过这种方式避免攻击者对源代码进行反编译操作,这种方式帮助软件开发者保护其软件及源代码的版权。程序混淆的这一功能使其成为软件知识产权保护的重要工具之一。</p>
<p>一般混淆过程首先要找到一种方式来混淆程序 P。通过混淆器(Obfuscator)产生另一程序 O(P)=Q,其中 P和Q在相同的输入情况下虽然输出相同但是 Q不会泄露任何与 P 构造有关的信息。这一特性帮助 Q 在将密码等私密信息隐藏在序结构内部并且程序中可以在隐私保护的状态下使用这些信息。通俗地说,程序混淆就是将一个程序代码通过某种方式生成另一个不同的程序,但是两个程序在使用相同输入时也能够得到相同的输出结果。</p>
<p>多年来研究者一直致力于对程序混淆的研究,其中,美国加州大学的 Sahai 教授等人在研究中证明了对于普遍功能程序的完美混淆的不可实现性,同时提出了另一种混淆相关的概念，即不可区分混淆(Indistinguishability Obfuscation,IO)。混淆的主要特性包括以下3个。</p>
<p>(1)功能保持:原电路与混淆后电路的功能能够保持一致。<br>
(2)多项式递减:原电路的运行时间的多项式大小大于经过混淆后的电路。(3)虚拟黑盒特性:对比于给出电路黑盒人口的情况,混淆电路的有效计算结果将与其保持一致。</p>
<p>不可区分性混淆技术能够应用在智能合约中保护智能合约代码的隐私。由于不可区分混淆技术强大的功能,使其受到密码学界以及工业界的广泛研究。混淆器是使用混合协议(Mixing Protocol)来混淆交易资金去向的匿名服务提供者。在混淆过程中，用户的资金被分成较小的部分。这些部分随机与其他用户的部分随机混合,最终将会得到全新的代币,流向接收地址。这有助于打破用户和其接收或支付的代币之间的联系。各种混清服务被大量使用,以增强系统的匿名性和无关联性。</p>
<p>为了保护交易数据的隐私性，比特币核心贡献者 Gregory Maxwell 提出了面向数字加密货币的混淆技术 CoinJoin,主要的思想就是分割用户输入地址和输出地址之间的关系,将用户的交易混合隐藏在多个交易中,进行混淆之后的用户交易,外部观察者无法看到地址和地址之间的对应关系,从而保护交易流向的隐私。在 CoinJoin 中聚集了同时产生的多个交易,每个交易的用户通过共同的签名来创建一笔交易，比特币系统将这些聚集的交易当作一笔交易,在这笔交易中包括若干不同用户的输入地址以及输出地址。对于外部观察者,整个交易里的单个输入地址与输出地址之间看不出明显关联,也就无法将某个用户的输入地址和输出地址联系起来,从而通过交易图对网络中的交易数据进行分析。</p>
<p>CoinJoin 协议中需要混淆交易参与者来生成一笔共同创建的交易,为了实现输入与输出的不可链接性,每个用户都独立地完成自己交易的签名,在所有用户完成签名之后CoinJoin 交易可被区块链网络认定有效。如图 9.8 所示,通过 CinJoin 协议之后,原本两个独立的交易生成了一笔混合的交易,这笔交易的输入地址包含原来独立交易的两个输入地址,在保证总的输出金额小于或等于输入金额的前提下(多余的金额被当作交易费),外界用户无法关联到 Bob 和 Carl的交易具体对应哪个输入地址(找零地址可以随机)。</p>
<p><img src="/img/blockchain_sec/6_45.png" alt=""></p>
<p>CoinJoin 可以为交易的匿名性提供保护,但同时也存在一些问题:首先，当某笔交易中参与混淆的用户比较少时,比特币仍存在被追踪的风险,例如在图 9.8 中,外界用户有比较大的概率猜出交易之间的对应关系。主要原因在于 CoinJoin 目前在区块链中并未作为主要的交易方式,截至 2018 年,该方案在比特币交易支付中的使用率仅为 4.09%由于在某一时间内可能只有少量用户产生交易到混合池中,这导致匿名集合较小无法达到有效的交易混淆作用。因为在交易数量少的集合里，仍然可以很容易推测交易的输入地址与输出地址之间的联系,并且通信开销增加。另外,CoinJoin引入一个第三方节点进行寻找参与混淆用户的过程,这样在一定程度上破坏了区块链去中心化的特性。参与浪滑的用户之间也无法保证都是诚实可信的,可能泄露对方的隐私。</p>
<h4 id="混淆协议-CoinShuffle">混淆协议 CoinShuffle</h4>
<p>CoinShuffle 主要思路是基于 CoinJoin 混淆来隐藏输入地址和输出地址之间的关系主要的区别在于引入了纠缠机制。不同于 CoinJoin,CoinShuffle 协议中不需要引入第方来辅助完成混淆过程。因此,CoinShuffle 被认为是一种允许去中心化的 CoinJoin 交易的技术,可以在没有第三方的参与下创建交易。同时,除了知道自己的输入和输出地址外,任何一方都不知道如何取消对 CoinJoin 的混合。此外,此协议能够与比特币很好地兼容,没有混合费用。</p>
<p>具体来说,CoinShuffle 协议中需要一组用户来共同生成一笔混合交易(MixingTransaction),每个用户都可以确认在这笔混合交易中自己所需要交易金额的有效性,否则可以不进行签名。每个参与者需要产生一次性密钥对，并把公钥广播出去CoinShuffle 协议主要包括 3 部分:公告(Announcement)、混淆(Shuffling)、交易验证(Transaction Verification)。</p>
<p>首先,在公告过程中,每个参与者需要生成新的比特币地址,在混合交易中指定其为输出地址。其次,参与者将新生成的输出地址以一种遗忘的方式进行洗牌,其类似于解密混合网络的方法。具体地说,每个参与者(如预先定义的洗牌顺序中的参与者 i)使用其他参与者j&gt;i 的加密密钥来创建其输出地址的分层加密。参与者依次进行洗牌,从参与者1开始:每个参与者希望从参与者-1那里得到参与者-1的密文。在接收时,每个参与者从密文中剥离出一层加密,添加自己的密文，然后随机地打乱结果集。参与者将经过打乱的密文集发送给下一个参与者 i+1。如果每个参与者都按照协议操作,最后一个参与者执行的解密将得到输出地址的无序列表,并将这个列表广播出去。在这个过程中,前一个参与者无法得知其他参与者的输出地址。</p>
<p><img src="/img/blockchain_sec/6_46.png" alt=""></p>
<p>如图 9,9 所示,假设存在 3 个参与方 A,BC 想要发起一个混合交易的 CoinShuffle协议。A 将使用C的公钥加密 A 的目的地址,并将此消息发送给 B。B 然后使用C的公钥加密 B的目的地址,并将这两个消息发送给 C。C 现在可以解密这两个消息并知道所有3个目的地址。C可以设置交易并签名,然后将其传递给 A 和 B 进行签名。只有当交易包含正确的目的地址时,各方才会签字。</p>
<p>CoinShuffle 具有安全性,健壮性并且与现有的比特币系统完美兼容。CoinShuffle坚持比特币的意识形态,是完全去中心化的,既不需要任何第三方,也不会为用户引入任何额外的匿名费用。</p>
<h2 id="第10章-数据层安全">第10章 数据层安全</h2>
<h3 id="数据层安全概述">数据层安全概述</h3>
<p>2016 年,中华人民共和国工业和信息化部提出的《中国区块链技术和应用发展白皮书》里,把区块链解释为“区块链技术是利用块链式数据结构来验证与存储数据,利用分布式节点共识算法来生成和更新数据,利用密码学的方式保证数据传输和访问的安全,利用由自动化脚本代码组成的智能合约来编程和摄作数据的一种全新的分布式基础架构与计算范式”,从中可以看出区块链安全的关键在于如何安全可靠地存储和管理数据。</p>
<p>区块链数据层的组成包括区块链中的数据块、保证数据安全存储和传输的数据加密技术以及时间截技术,它是区块链技术的基石，一旦出现安全问题就会影响整个区块链的安全运行。数据层采用的密码学机制大多是经过多年研究同时拥有相应的安全等级证明的,这些密码学算法相对比较安全。但是随着密码学研究的不断发展和深人,特别是量子计算机的发展，使得一些传统的非对称密码算法存在被攻破的可能。另一方面,区块链开发者在编写代码实现这些算法时,也有可能因为对算法理解不透彻和存在误差而导致代码中存在陷门等安全问题。另外,还存在一些攻击者会利用区块链数据不可篡改和删除的特性进行攻击，而这两方面的特性会导致数据源的部分敏感信息暴露。</p>
<p>目前,发生在区块链数据层的安全事故相对较少,例如以太坊的 Ropsten 测试链在 2017 年 2月接收到由攻击者发送的千万级别的垃圾交易信息,最终导致测试链网络瘫痪。虽然这些安全事故是发生在测试网络中,受影响的用户较少,但是这也给区块链研究者敲响了警钟,意识到区块链数据层的技术也存在不可忽视的安全漏洞。目前,区块链数据层中发生的攻击主要是针对区块数据以及交易签名与加密算法等,主要目的是破坏区块链的信息完整性,认证性和不可抵赖性。</p>
<h3 id="数据层安全威胁">数据层安全威胁</h3>
<p>数据层的安全威胁主要分为两类:数据的安全威胁以及数字签名、加密等算法的安全威胁。区块链数据指记录在区块链节点上的区块数据,包括区块中的交易、时间藏、区块头等信息。节点之间通过共识机制来共同维护数据的一致性和完整性,使得记录在最长链中的数据无法被单个节点删改,但是此特性也给区块链生态带来了其他的安全威胁。</p>
<h4 id="恶意信息攻击">恶意信息攻击</h4>
<p>恶意信息攻击是指攻击者利用区块链数据的不可篡改性,把一些病毒特征码、虚假敏感信息通过交易形式写入区块中,区块链不可逆转地记录着信息、图片等各种数据,而且每个分布式全节点都保存了本地复制完整的区块链,通过点对点方式将危害信息进行快速传播。通过对比特币、以太坊平台中的交易进行分析发现,当前存储在区块链的文件中至少含有数百个涉及政治敏感话题、病毒特征码等非法信息的文件,这些数据量的增多会威胁到区块链生态未来的生存和发展,数十亿数字货币的价值也会因此大打折扣。德国亚琛工业大学和法兰克福大学的一个研究小组指出,在添加到区块链的 1600 个文档中，有 59 个文件包含指向非法儿童照片、具有政治敏感性的内容或侵犯隐私的链接。虽然这些交易中只有少数包含非法或不适当的内容,但是即使是少量的非法或不适当的内容也会使参与者面临风险。</p>
<p>在恶意信息攻击中常见的攻击方式即为内容插人,内容插人服务依赖于通过低级数据插人方法来添加内容,如插人文档或图像到区块链。下面分析 4 种不同概念的内容插人服务,并给出它们的协议。</p>
<p>(1)CryptoGraiti:该服务是基于网络的服务,从比特币区块链读写信息和文件。它通过单个交易中的多个 P2PKH 输出脚本添加内容,最多存储 60KiB 的内容。如果要检索以前添加的内容,CryptoGraiti 至少需要扫描包含 90%可打印字符或包含图像文件的<br>
交易。<br>
(2)Satoshi Uploader; Satoshi Uploader 使用具有多个 P2X输出的单个交易插人内容。该服务将插人的数据、字段长度及 CRC32 校验和一起存储,以便于对内容进行解码。<br>
(3)P2SH Injectors:通过细微调整的 P2SH 以输入脚本来插人内容。它们将文件的块存储在 P2SH 输入脚本中。为了确保文件的完整性,P2SH 转换脚本包含并验证每个块的哈希值。<br>
(4)Apertus:该服务允许使用任意数量的 P2PKH 输出脚本在多个交易上分割内容。随后,这些片段将被存储到区块链上,作为存档被引用,该存档用于检索和重新组装这些片段。所选编码允许使用注释、文件名或数字签名来扩充内容。</p>
<p>总之,区块链提供了各种选择,可以插人任意的恶意数据。这些选项的范围包括从活动采矿者专用的小型数据插人方法到允许任何用户存储任意长度文件的服务。这种广泛的数据插人选择引发了一个问题,即在比特币区块链上存储数据会带来的好处和风险。</p>
<p>尽管区块链中的数据有潜在的好处,但插人恶意内容会使区块链网络的所有参与都面临风险,因为这些内容是不可更改的,并且区块链网络的每个对等方都将其作为良数据在本地复制传播,给区块链的健康生态带来严重影响，以下为列出的 4 类常见恶意传息攻击行为。</p>
<p>(1)著作权侵犯:随着文件共享网络的出现，盗版数据已经成为版权所有者面临的巨大挑战。为了解决这个问题,版权所有者主要针对那些肆意传播盗版数据的用户运用法律武器。例如,德国的律师事务所起诉了那些通过文件共享网络传播受版权保护内容的用户,要求他们代表版权所有者缴纳罚款。近年来,检察官还判定下载盗版数据的人有罪。法国曾暂停用户的互联网接人,随后转而对其处以高额罚款。当用户将他们的区链副本分发给新同行时,区块链上受版权保护的内容可能因此引发版权侵权的法律纠纷。<br>
(2)恶意软件:恶意信息攻击的一个主要威胁是可以传播恶意软件，这会引发严重的后果。恶意软件可以破坏敏感文件,使设备无法操作,从而造成经济损失。此外,区块链恶意软件会严重影响用户的使用满意度，因为它导致杀毒软件拒绝访问重要的区块链文件。例如,微软公司的杀毒软件在区块链上检测到一个非功能性病毒签名，必须手动修复,而病毒签名在区块链中又是无法被篡改的,导致杀毒软件持续地发出警告信息。为了解决此问题,微软公司将区块链相关的数据加入 MSE 免检列表中,但是这相当于给恶意病毒提供了有利的生存空间,加速了病毒的传播。<br>
(3)侵犯隐私: 通过披露敏感的个人数据,可能泄露自己和他人的隐私，这种威胁在个人故意侵犯他人隐私的情况下达到顶峰。例如,在区块链上公开受害者的敏感数据从而威胁甚至敲诈受害者,此外还有未经对方同意发布私人照片或视频,或恶意向公众泄露他人身份等。<br>
(4) 政治敏感话题: 政府部门机密信息的泄露,如国家机密或其他危害国家安全的信息。揭发者在链上揭露腐败等令人不快的事情,而其他所有区块链用户会强制同步保留一份泄露材料的副本。根据不同的司法管辖区，故意披露或仅仅拥有这些内容可能都是非法的。例如,美国政府通常倾向起诉故意盗窃或泄露国家机密的行为。</p>
<p>总而言之,如果区块链数据中存在着大量的非法内容，显然会对区块链生态造成直接伤害。与社交媒体平台,文件共享网络或在线存储等系统不同,这些内容可以匿名且不可撒销地存储在链上,造成永久性的破坏。常见的恶意信息攻击通常出现在数字货币产生交易(如比特币的 Coinbase 交易)的过程中。</p>
<p>具体地说,在区块链系统中,如比特币,每块会包含一笔 Coinbase 交易,它通过向系统中引入新的数字货币,来激励矿工参与共识以维持区块链。Coinbase 交易的输入脚本为100B,由一个可变长度的字段组成,该字段对区块链中新块的位置进行编码,声明一个比整个脚本长度更大的空间允许将任意数据放置到产生的间院中。此外,通过输出脚本的可变值来插人数据。标准金融交易有 4 种经过批准的模板，P2PK 和 P2PKH 交易将资币发送到一个专用的接收者,该接收者由来自其私钥的地址标识,用于支付接收到的任何金，类似地,多签名(P2MS)事务需要个私有密钥中的个来授权支付。支付到脚本哈希(P2SH)交易是指使用脚本而不是密钥来启用复杂的支出条件。各自的公钥(P2PK、P2MS)和脚本哈希值(P2PKH、P2SH)可以替换为任意数据,因为在后续输入脚本引用它们之前,对等的比特币无法验证它们的正确性。</p>
<p>由于区块链的去中心化、不可算改等特性,应对恶意信息攻击带来的危害一直是比较困难的研究课题,加强对上链数据的监管,是构建区块链安全生态的必要前提。</p>
<h4 id="资源滥用攻击">资源滥用攻击</h4>
<p>资源滥用攻击指攻击者通过不断向区块链网络中发送大量垃圾信息,不仅使得真实交易信息得不到及时确认,而且会给区块链节点的存储造成极大压力,这种直接耗费区块链中的资源而使得区块数据发生爆炸式增加,导致区块链中的节点因为无法存储大数据级的区块数据而无法加入区块链系统中。通过这种攻击方式,使得区块链中可以正常运作的节点不断减少,最终导致区块链失去中心化的性质。整个区块链被控制在少数节点中,使其不再具有可靠、安全的特性。2017 年 2 月,攻击者将千万级别的垃圾交易信息发送到以太坊公开测试链 Ropsten 中,直接阻塞了网络的正常运行,实现了资源滥用攻击。</p>
<h4 id="长度扩展攻击">长度扩展攻击</h4>
<p>长度扩展攻击(Length Extension Attack)是指攻击者在已知一个消息的哈希值和该消息长度的情况下可以计算在该消息基础上延长由攻击者选择的任意位消息的哈希值而不需要知道该消息的任一位信息。即攻击者知道 H(m,)及 m，的长度就可以计算H(m;llm;)其中m;是由攻击者任意选择的。基于 Merker-Damgard 构造的MD5<br>
SHA-1和 SHA-2 等哈希算法都容易受到此类攻击。</p>
<p>Bitcoin 的基于工作量证明协议就是采用了基于 Merker-Damgard 构造的 SHA-256算法,其中 SHA-256 算法属于 SHA-2 算法的类别,因此比特币采用了双重哈希来抵抗长度扩展攻击，即 SHA256(SHA256(·))。</p>
<p>为了更好地理解长度扩展攻击的原理,本节以基于 Merker-Damgard 构造的SHA-256算法在消息验证码(Message Authentication Code)的应用为例展示该攻击的危害。图10.1展示了长度扩展攻击的基本原理，消息在输入 Merker-Damgard 构造器之前需要分成固定长度的分块,最终由 Merker-Damgard 构造器输出消息的哈希值,攻击者在获得原消息 m，的哈希值后,可以将其作为 Merker-Damgard 构造器的中间输入值,继续输入由其选择的消息 m,就可以获原消息 m 连接m的哈希值 H(mlm)。在现实应用场景中,假设一个客户端可以向服务器发出包含参数“?name= bitcoin&amp;wallet=zhangsan”的请求和该消息的消息验证码 H(?name= bitcoin&amp;wallet=zhangsan),如果攻击者知道该消息验证码且请求消息的长度,就可以构造请求“?name= bitcoin&amp;wallet=zhangsan&amp;wallet= lisi”,即便不知道消息验证码的密钥,攻击者也可以生成该请求的有效消息验证码 H(?name=bitcoin&amp;wallet=zhangsan&amp;wallet=lisi),并发送给服务器。</p>
<p>实际上,在抵抗长度扩展攻击方面,除了采用双重哈希的方法,算法还可以采用无长度扩展攻击隐患的 SHA-3 算法。</p>
<p><img src="/img/blockchain_sec/10_1.png" alt=""></p>
<h4 id="差分攻击">差分攻击</h4>
<p>在区块链中,哈希函数得到了广泛使用,是不可缺少的一环,通过将前一个区块的哈希写入新块中来确保区块之间的链接,形成链式结构,目的是如果任何人尝试更改区块中的内容,就必须更改其后的所有区块中的哈希值,并同时在大量节点上执行此操作,但显然这样操作极其困难且代价巨大。</p>
<p>然而,哈希函数是把任意长度的字符串映射到定长的字符串，不可避免地会产生碰撞。例如,把 32位的二进制字符串映射到 16 位二进制字符串。32位字符串有 232种组合方式,而 16 位字符串只有 2种结果,那么就会出现不同的 32 位字符串的哈希值相同的情况，这就是碰撞。针对哈希函数的内在结构缺陷,可以利用某些特定攻击算法对哈希函数进行攻击。差分攻击就是针对哈希函数的一个有效攻击方法。</p>
<p>差分攻击是一种选择明文攻击方式,攻击者首先分析具有某些特定区别的明文,然后再通过加密后产生的变化来攻击加密算法。例如,密码学者王小云教授利用差分攻击,根据 MSB(最高位)不能尽快充分混淆的这个特点找到有效的差分和差分路径,有效地找出了MD5 函数的碰撞攻击，成功破解了 MD5SHA-0 和 SHA-1。</p>
<p>避免差分攻击的办法是使用能够抵御差分攻击的哈希函数,例如，比特币使用的哈希函数是 SHA-256。SHA-256 的结构是选代型的，代轮数的增加和选代算法的雪崩效应使得整体碰撞复杂度非常大,无法找到整体碰撞,所以它能够抵御现有的差分攻击。</p>
<h4 id="交易延展性攻击">交易延展性攻击</h4>
<p>交易延展性(Transaction Malleability)攻击主要是指比特币支付交易发出后,在未被确认之前可以被修改(或称为伪造复制)。具体来说,在对交易数据进行签名时,大多数区块链系统的程序是用 Openssl 库来校验用户签名的,但是 Openssl可以兼容多种编码式,数字签名依旧是有效签名,交易中所有的数据(包括签名信息)生成的哈希值都会成为数据的唯一标识符,对编码格式的简单调整会导致交易的 ID 发生变化,进而使得用户难以找到曾经发送的交易。而在签名被公钥验证之前，攻击者故意添加的那部分内容刚好会被丢弃,不会被验证。这样即使签名被修改,也能被验证通过。攻击者利用这一性质对交易的哈希值进行篡改,从而导致拥有错误的哈希值的交易被写入块中。目前,该攻击已经发生在闪电网络中,给闪电网络的正常运作带来了非常严重的影响。</p>
<p>2014 年 2月,曾经是比特币最大的交易所的 Mt.Gox 停盘,宣布倒闭,其主要原因就<br>
在于遭到了交易延展性攻击,其攻击过程简述如下。<br>
(1)用户 Bob 自己创建一个账号,同时在 Mt.Gox 交易所开通一个账号,Bob 将自己的比特币转人 Mt.Gox 交易所的账户中。<br>
(2) Bob 申请提现，即将自己的比特币取回,此时 Mt.Gox 交易所会在区块链中发起笔交易 T。<br>
(3)在交易 T，还未被成功写入区块之前,Bob 在看到这笔交易之后,对其 scriptSig签名的格式做了稍微修改,生成了一笔新的交易 T,T，和 T的交易 ID 是不同的。<br>
(4)新的交易 T被区块链网络确认后写入区块中,Bob 向 Mt.Gox 交易所投诉没有收到转账,交易所根据交易 ID 去查找 T交易,发现确实找不到,此时只能再次向 Bob 转账,相当于 Bob 进行了两次(甚至多次)的提现操作。</p>
<p>为了抵抗交易延展性攻击，比特币开发者设计了隔离见证(Segregated Witness)协议,该方法得到比特币核心的支持,并于 2017 年 8 月启用。如图 10.2 所示,隔离见证将签名与交易内容分开存放,即不再对签名进行哈希,只对交易信息进行哈希。这样只要交易信息没有变,即使签名被改变,也不会影响哈希值。为了验证签名,需要另外构造一个包含数字签名和交易哈希值的数据结构,验证签名时会根据哈希值在这个结构里找到对应的数字签名,下面就可以通过执行楠圆曲线签名算法来验证签名的合法性。</p>
<p><img src="/img/blockchain_sec/10_2.png" alt=""></p>
<h4 id="交易关联性分析">交易关联性分析</h4>
<p>匿名性(即身份的隐私性)是一些区块链系统所宣称其具备的特性,但实际上有多种攻击方式,通过对交易的分析来破坏其身份隐私性,典型的攻击方法包括多输入交易分析、零钱地址分析、多交易处理分析。</p>
<p>(1)多输入交易分析:如图 10.3 所示,通常情况下,同一笔交易中的多个输入地址被认为是同一人所有。例如,当用户钱包中的每笔 UTXO 输入都达不到应付总额时,就需要多个UTXO 共同作为输入进行交易。即用户选择一组 UTXO,使得总价值大于或于需要支付的金额。这种情况下,很容易就能推测出该交易中的输入地址都是属于同一个用户。</p>
<p><img src="/img/blockchain_sec/10_3.png" alt=""></p>
<p>(2)零钱地址(Change Address)分析:如图10.4 所示，比特币交易中,一笔 UTXO无法单独拆分进行支付,如果输入的 UTXO 总额大于需要支付的金额时，就会产生一笔新的零钱地址。此时,通过检查输出地址是否在其他交易中出现过来验证该地址是否为零钱地址,从而将输入地址用户和零钱地址用户关联起来。在实际应用中,某些钱包客户端将零钱地址作为输出的第一个地址,可以很容易地推断该地址和输入地址隶属同-用户。</p>
<p><img src="/img/blockchain_sec/10_4.png" alt=""></p>
<p>(3)多交易处理分析;如图 10.5 所示,在一段时间内,如果存在多个账户在同一段时间内向某个地址进行转账,也可以一定概率猜测这些账户地址隶属同一个用户,从而完成这几个地址的关联性分析。</p>
<p><img src="/img/blockchain_sec/10_5.png" alt=""></p>
<p>基于上述 3 种方法,同时追踪其输入地址所有发生的其他交易,可以挖掘出更多地址之间的关联性。用户的一些交易行为习惯也会不自觉地泄露自己的隐私。总体来说,基于公有链的区块链系统并未对用户关心的隐私数据(时间、金额等)进行保护,如果应用到现实生活中,这些数据属于高度敏感的信息,用户并不想公开地放在交易信息中。即使对于联盟链,各联盟节点之间也存在不想泄露给对方的敏感数据,例如多个公司之间进行贸易交易,商品的销售价格、销售数量、资金流向等信息都属于公司的商业机密。在纸币的使用过程中,个人的消费记录有时也是难以被追踪的。</p>
<h3 id="数据层安全防御">数据层安全防御</h3>
<p>数据层是区块链的底层技术,其安全运作关系着区块链系统的正常运行。因此,对数据层安全威胁和防御手段的研究变得十分重要。在设计区块链系统的过程中,对相关代码的编写要进行完善的安全性测试和审查，避免由于代码实现的漏洞而带来不必要的安全事故。具体来说,区块链研究者针对 10.2 节提到的攻击手段,提出了以下防御技术。</p>
<p>(1) 限制区块数据大小:这个防御方法主要是为了抵抗资源滥用攻击,主流的区块链平台都采用限制区块大小的方法,以此避免区块链数据快速增长。例如,在比特币区块链中,把每个区块数据限制在 1MB,使得比特币数据增长速度呈线性,根据比特币现有的速度估计,到 2029 年，区块数据的总量不会超过 1TB。但是限制数据大小的抵御方式会影响区块链上交易的确认时间,目前在比特币上确认一笔交易至少需要 1小时。<br>
(2) 增加权限验证:针对恶意信息攻击，在提交数据记录到哈希表时要进行权限验证,设置一般用户提交数据的数据量限制参数。这种防御手段可以暂时限制攻击者的攻击能力,另一种更有效的方式是重建哈希表,如加上限制链表长度等。<br>
(3) 双重摘要:一个解决长度扩展攻击的简单方法是对已经摘要后的消息进行再次摘要,即 HMAC算法。其主要原理;MAC= H(secret十H(secret十message)),先对secret 和 message 实施一轮哈希函数，然后再用得到的哈希值和 secret 进行一轮哈希，通过这种方式攻击者就无法通过拼接等手段猜出 message。这种防御手段目前已经被广泛应用于带有长度扩展攻击缺陷的各种摘要函数中。另一种解决这种攻击的方法是把<br>
(4)量子链:量子计算机的快速发展给区块链安全带来了新的挑战和威胁,因此除secret 值放在消息末尾,然后再求哈希值。了探索传统攻击的防御手段,还应该考虑针对量子计算机的防御方式,有研究者提出可以使用量子网络构建区块链的方式。由量子网络构造的区块链称为量子链,其使用具有间狮绕特性的量子粒子来创建区块链。但是这种防御技术仍停留在理论层面,目前还没有具体可实施的构建方案。</p>
<h3 id="基于零知识证明的隐私保护">基于零知识证明的隐私保护</h3>
<p>随着区块链技术不断普及和应用在多个领域,各种攻击方法被不断提出,区块链用户的隐私性受到了极大挑战，其面临的隐私泄露问题也越来越突出。为此,各种新的隐私保护方法也应运而生,区块链系统中的匿名性通常包含两层含义。<br>
(1)不可链接性:指区块链系统中同一个用户接收到的两个(或多个)交易无法被无关节点知晓这些交易是发送给同一个用户的。<br>
(2)不可追踪性:指区块链系统中无关节点无法知晓交易发送者的具体身份。<br>
传统的区块链系统并不满足以上两个特性,针对区块链中现存的一些隐私性泄露问题,本节将从交易数据隐私和身份隐私两方面来阐述隐私保护技术,主要介绍基于零知识证明的数据隐私保护技术–2k-SNARK。在 10.4 节中,将介绍基于环签名技术的身份隐私保护技术。</p>
<h4 id="Zerocash-协议与-Zcash">Zerocash 协议与 Zcash</h4>
<p>2013 年,为了解决比特币交易过程中用户隐私可能遭受泄露风险的问题，约翰·霍普金斯大学 Matthew D.Green 教授及其研究生 Ian Miers 和 Christina Garman 共同提出了Zerocoin 协议,其解决方案能够隐藏交易的发送者地址，同时通过零知识证明协议来保护发送交易方的身份隐私。同年,Matthew D.Green 教授在 Zerocoin 协议的基础之上,进一步提出了 Zerocoin 协议的新版本-Zerocash 协议。Zerocash 协议不仅实现了隐藏接收者和交易金额的功能，同时提高了算法的运行效率。在 Zerocash 中,如果一笔交易小于 1kB,那么只需要不到 6s 就可以完成确认。相比于 Zerocoin,Zerocash 把花费一个币的交易大小减小了 97,7%,花费交易需要的确认时间减少了 98.6%。Zerocash 隐藏用户的交易金额，允许随机金额的匿名交易,用户付款后直接能够到达某个固定的收款地址。</p>
<p>Zerocash 协议是基于 k-SNARK 实现的一种数字货币,将零知识证明作为交易中的一种验证方式。在具体的 Zerocash 转账过程中可以理解为,证明者是 Zerocash 交易发送者,验证者是区块链维护节点,需要验证的消息是交易转账信息。发送者提供一个证明其他用户无法通过这个证明推测出转账信息(发送者地址、交易金额),但是区块链节点依然能够验证该笔交易转账的合法性。零币(Zcash)是一个基于 Zerocash 协议实现的数字货币系统。相比于比特币,Zcash 的主要性质包括以下 3 方面。</p>
<p>(1)加密数字货币，作为最早在数字货币系统中广泛应用k-SNARK 的 Zash,它在使用加密技术为用户提供隐私保护性更强的数字货币,解决交易被追踪进而用户身份隐私泄露的问题。<br>
(2)基于零知识证明机制的区块链系统: ash 可提供完全的支付保密性,同时仍能够使用公有链来维护一个去中心化网络。Zcash 的核心概念与比特币是一脉相承的,继承了比特币的交易模型。<br>
(3)隶属比特币分支:Zcash 保留了比特币原有的模式,它是基于比特币 0.11.2 版代码修改的一种数字货币。与比特币相同的是,Zcash 的总量也是 2100 万个。另外,Zcash能够提供隐藏交易地址和交易金额的功能供用户自由选择。</p>
<p>此外,Zcash 将交易类型分为两种。</p>
<p>(1) 透明地址交易(T-address Transaction): 透明地址交易中的输入输出直接是未<br>
隐藏的可见信息。<br>
(2)隐藏地址交易(Z-address Transaction): 隐藏地址交易的输入输出,以及输入输出的地址和金额都是隐藏的。<br>
如图 10.6 所示,以上两种地址可以组合成 4 种转账方式:公开交易(T-address 之间发起交易)、加盾交易(T-address 向 Z-address 发起交易)、除盾交易(Z-address 向 Taddress 发起交易)和隐私交易(Z-address 之间发起交易)。</p>
<p><img src="/img/blockchain_sec/10_6.png" alt=""></p>
<p>在 Zcash 中,T-address 和 Z-address 分别存储于透明资金池(Transparent Pool)和屏蔽资金池(Shielded Pool)中。Zcash 中公开交易与比特币中结构一样,交易信息在区块中全网可查。隐私交易中被保护的信息无法被其他人获取。Zcash 区块链中记录数据只显示隐私交易是一笔有效交易,除此之外不会显示任何隐私数据。</p>
<p>然而,Zcash 仍然存在一定的局限性。首先,Zcash 依赖于初始参数的设置,初始参数-旦设置之后就会被销毁，同时无法检测。其次,由于交易时间比较长且占用用户较大的内存空间,导致 Zcash 还无法满足实际的使用过程。Zcash 虽然提供了安全级别较高的加密算法,但相比于其他数字货币,在支付性能上并没有明显的优势。尽管如此,Zcash在区块链中实现的数字货币的隐私保护强度为区块链的其他安全项目提供了技术参考和指导。</p>
<p>接下来将介绍 Zerocash 协议的基本构造。需要说明的是,由于 Zerocash 本身是一种非常复杂的安全协议,涉及的数据构造、算法流程需要具备较深的密码学基础,本书主要<br>
通俗易懂地让读者对 Zerocash 协议有基本理解。</p>
<p>Zerocash 协议基于零知识证明和承诺(Commitment)方案,构造了一个去中心化的匿名支付方案。其中,承诺方案可以简单理解为对某个消息的承诺,假定存在一个随机数r和消息 m,对消息 m 的承诺用 COMM 表示,假如承诺的方式是采用对消息的哈希,即cm=COMM(r,m)=H(rm),将 cm 进行公布。用户可以通过披露r和m 来验证承诺的有效性,即 H(r|lm)是否等于 cm。</p>
<p>Zerocash 协议允许任意金额的匿名支付,弥补了比特币在隐私保护方面的不足。<br>
Zerocash 协议能够与任意基于分布式账本技术的数字货币系统兼容。为了更好地理解,首先定义一个数字货币 c,它主要包含了以下 4 部分。</p>
<p>(1)币的承诺:表示为 cm©,一旦有一个新的币生成，就会产生这样一串字符<br>
(2)币的价值:表示为 ©,它的大小在 0 和最大值 mx之间。<br>
(3)币的序列号:表示为 s©,这是一个和 相关的唯一字符,用来防止双重支<br>
(4)币的地址:表示为addrk©,代表拥有币 c 的账户地址。</p>
<p>在上面这种简单的 Zerocash 协议构造过程中,币c 是按如下步骤产生的。</p>
<p>(1) 用户 选择一个随机序列号 snc)和一个陷门值r,计算对该币的承诺 cm:COMM,(sn©),并设置c:=(r,sn,cm)。此时,产生一笔交易 txMim,其中包含 cm值但不包含r和 sn©,然后这笔交易被发送到账本上。如果用户已经支付了 1个比特币到第三方交易池,这笔交易就会被加入账本,发币交易就相当于用户的存款证明。</p>
<p>(2) 构建一个列表 CMList。CMList 中包含账本上所有数字货币的承诺集合。如果用户u想要创建一个交易txsd花币c,则 txspd中需要包含该币的序列号 sn,以及一个零知识证明的证据元来佐证“我知道这样一个r且COMM,(sn)存在于列表 CMList 中”如果 sn 不存在于 CMList 中,则交易成功。如果 sn 已经在账本上出现过，说明这是双重<br>
付攻击。<br>
支付,该交易被当作无效交易处理。因为证据 元是采用零知识证明进行验证的,用户匿名性能够得到保证。因为即使 sn被公开了,也不会因此暴露出关于陷门r的任何属性数据。如果攻击者在 CMList 中找到了某个特定的交易 txsd,等价于求解了 f©:=COMM,(sn©)的逆,基于困难性假设(如哈希单向性),攻击者是很难成功的。</p>
<p>(3)压缩币的承诺列表 CMList。在断言中,CMList 被直接作为币的承诺列表,这种直接的表示方法极大限制了方案的可扩展性,因为随着 CMList 的不断增长,大多数算法的时间和空间复杂度都呈线性增长。此外,由于交易的匿名性,使得已经花掉的数字货币无法被识别出来,导致已花掉币的相关承诺也不能从 CMList 中删除以减少开销。<br>
为了解决此问题,Zerocash 构造方案中依赖于一个抗碰撞的哈希函数 CRH 来避免对 CMList 的直接表示。通过使用一种可更新可添加的基于 CRH 的默克尔树方案来构造 CMList,如图10.7 所示。其中,rt 表示树的根,默克尔树叶节点的插人会导致根节点rt 更新的时间和空间复杂度与树的深度成相关关系。因此可以将时间和空间复杂度减小到与 CMList大小的对数成比例。在此基础之上,将断言修改为“我知道这样的一个r存在COMM,(sn©)是默克尔树中的一个叶节点,它的根是 rt”。与简单的 CMList 构造相比,这种指数改进增加了一个给定的 zk-SNARK,它能够支持 CMList 的大小。例如树的深度为 $2^{64}$ 层时,Zerocash 协议能够支持 2个数字币。</p>
<p><img src="/img/blockchain_sec/10_7.png" alt=""></p>
<p>(4)将币扩展为能够实现直接支付的匿名货币。币c 的承诺 cm 是对币的序列号sn©的承诺,当一个用户把币c 转移给其他用户时,还会存在以下一此问题。假设用户u八创造了币c,并且把币c发送给用户 uB。首先,a 知道 sn©,那么当 u 把币c花出去的时候,&quot;a 通过监控整个网络的交易情况就知道“在使用这笔钱了,这样就无法保证“的身份匿名性。其次,如果 想要一次发送 100 个币给其他人,那么他需要创造 100笔交易,这样会暴露交易金额。最后,协议不支持发送不是 1个比特币的整数倍金额的交易。</p>
<p>为了支持更丰富的功能,Zerocash 协议通过改进币的承诺方案,使用伪随机函数来定位付款和分发序列号来解决以上问题。Zerocash 协议使用了 3 个伪随机函数PRF(·).PRF”(·)和PRF(·)来定位付款和分发随机数,且假定PRF”还是抗碰撞的。</p>
<p>为了保证收款人的匿名性,Zerocash 协议使用了这样的地址,每个用户u 产生一对公钥和私钥(ak;ak),当用户 拥有a的数字货币时,只能使用相应的花出去。具体地说,用户产生一个随机种子 ak,然后通过这个种子计算 aw:=PRF(0)。</p>
<p>(5)重新定义发币交易。为了构造一个数值为 的币c,用户 首先取一个秘密值p来决定一个币的序列号,相应的序列号 sn:=PRF”(p)。然后,用户对三元组(aw;v,p)进行承诺,分为两个阶段。</p>
<p>(1)承诺$(a_{kp},r,p),k:=COMM_r(a_{kp}||p)$。<br>
(2)承诺$(v,k,s),cm:=COMM_s(v||k)$。</p>
<p>其中，s 是一个随机值。最终,得到一个新的币$c:=(a_{kp},v,p,r,s,cm)$,以及一个发币交易 $tx_{Mint}:=(v,k,s,cm)$,通过验证$COMM_s(v||k)$是否和 cm 相等,任何人都能够验证 $tx_{Mint}$中的 cm 是否为交易金额为的承诺,而且其他用户即使知道$a_{kp}$也不能推测出发送者,知道$\rho$也无法推测出序列号 sn,因为这些值都被隐藏在k下。</p>
<p>通过以上逐步改进,Zerocash 能够满足隐藏交易发送者、金额以及交易接收者的功能。同时,它还支持匿名交易与公开交易之间的转化。</p>
<h4 id="zk-SNARK-概述">zk-SNARK 概述</h4>
<p>零知识证明是指证明者 (Prover)在不透露自己隐私数据的情况下,向验证者(Verifier)提供可证明其确实知道该数据的证据(Proof)的过程。验证者在不知道证明者所拥有的任何隐私信息情况下进行基于证据的验证计算,并给出一个判断结果。那么zkSNARK 与零知识证明有何种关系? zk-SNARK 的全称是 Zero-Knowledge SuccincNon-Interactive Argument of Knowledge,即零知识-简的非交互式知识证明。zkSNARK 流程简单示意如图 10.8 所示,具有如下 4 个性质。</p>
<p><img src="/img/blockchain_sec/10_8.png" alt=""></p>
<p>(1)零知识(Zero Knowledge):即证明者在证明过程中不会向验证者透露关于某个论新 statement(需要证明的数据)的任何信息，但依然能够向验证者证明该论断的有效性。<br>
(2)简洁性(Succinct): 是指在验证交互过程中，证明者和验证者之间不涉及大量教据的传输,并且验证算法简单。<br>
(3)无交互(Non-interactive):证明者和验证者之间交互的过程称为“质询-响应”的过程,无交互是指证明者只需要提供 Proof,验证者收到 Proof 即可完成本地验证,无须向证明者“质询”<br>
(4)知情证明(Argument of Knowledge):指证明者掌握拥有某个论断的证据Proof,这是zk-SNARK 中最核心的部分。</p>
<p>zk-SNARK作为一种隐私保护技术被应用到区块链中有其自身的优势。首先,kSNARK 的构造非常简洁,可以做到在短短几毫秒内就得到验证结果,并且它的证据长度可以达到只有几百字节。在传统的零知识证明构造中,证明者和验证者需要来回交互才能完成验证,或者有的方案产生的证据长度非常长,由于区块链中的每笔交易、每个区块都是有大小限制的,因此很难适用到当前的区块链系统中,而 zk-SNARK 只需要证明者向验证者发送一次证据,无须交互,即可让验证者相信证明者的断言是可信的,因此 kSNARK在区块链中应用较为广泛。</p>
<p>图10.9 是关于zk-SNARK 的总体技术架构图。从图中可以看到,zk-SNARK 本身和区块链一样，也是多种技术的融合,主要涉及 4个流程。</p>
<p><img src="/img/blockchain_sec/10_9.png" alt=""></p>
<p>(1)基于 QAP 的数学模型描述:主要指将待证明问题描述为正确的数学模型以及多项式的过程，以便实现安全高效的验证。<br>
(2)模型简化:通过上述数据描述之后,会产生较多的结果需要进行计算,本过程主票是通过抽样简化减少数据量,同样是为了方便证明者计算和验证者的验证。<br>
(3)隐私保护及诚实计算:该过程主要是为了实现如何设定束使得证明者能够按照约定的协议进行计算,而不是进行任意的计算。<br>
(4)零交互验证:通过双线性映射来实现无需交互证明的验证过程。下面将介绍 zk-SNARK 所用到的主要技术:一阶约束系统、二次算术规划、抽样计算及同态隐藏等。</p>
<h4 id="一阶约束系统">一阶约束系统</h4>
<p>为了在 Zcash 中确保零知识证明的隐私性,zk-SNARK 中编码的一些网络共识规则可以约束具有交易有效性的函数必须返回这个交易是否有效的结果,而不会透露函数执行计算过程中所依据的任何信息。在较高的层次上,zk-SNARK 的工作方式是将要证明的内容转换为某些代数方程的解的等价形式。那么如何确定有效交易的规则,即交易有效性函数转换成方程式,而不会向验证方程式的各方透露任何敏感信息。采用以下两个过程执行。</p>
<p>$Computation→Arithmetic\ Circuit→LlCS$</p>
<p>第一阶段是将交易有效性函数的逻辑步骤分解为最小的操作,进而创建一个运算电路,它类似于布尔电路,当程序被转换成算术电路时,它被编译成离散的、单个的步骤,例如逻辑运算操作 AND、OR 或 NOT。下面是计算表达式$(x×y)×(z-7)$的运算电路。</p>
<p><img src="/img/blockchain_sec/10_10.png" alt=""></p>
<p>第二阶段是构建一阶约束系统(L1CS),它是一个三元组向量(a,b,c)，解为s,使得$s·a×s·b=s·c$</p>
<p>如式(10.1)这样的三元组向量(a,b,c)就定义为约束,需要找到 s 来满足上述约束。</p>
<p>简单来说,L1CS 是将第一阶段得到的简单算式转换为上述的约束方程。</p>
<p>接下来:本文将以一个简单例子来描述零知识证明的基本过程。假设证明者需要证者证明其知道$x^3+x+5=35$ 的解(注意:此处假设验证者无法计算出该公式的能为实际的零知识证明中的这个公式的阶数非常高,在多项式有限时间以内无法计算果,但非常容易验证),但是却不能直接将解为 3 告诉验证者,那么如何做到呢?</p>
<p>为了实现该过程,证明者将该问题转化为多项式的求解过程,假设能给出满足条件的项式,就能够说明证明者知道该公式的解。这个多项式如下:$s·a×s·b-s·c=0$,其中,a，b，c，s 代表的都是向量。</p>
<p>在零知识证明过程中,不管多复杂的计算,都可以由简单的加、减、乘、除来构成。该公式也是由基本的代数运算构成(简单代数操作包括“＋、－、×、/”四种操作符),通过引入中间变量,可以将$x^3+x+5=35$ 转化为以下4个公式，即</p>
<p>$m_1=x×x$<br>
$m_2=m_1×x$<br>
$m_3=m_2+x$<br>
$output=m_3+x$</p>
<p>然后再定义一个向量,即$s=\{ONE,x,output,m_1,m_2,m_3\}$</p>
<p>为了满足$s·c=s·a×s·b$,按照第一项$m_1=x×x$来计算,结果如下:</p>
<p><img src="/img/blockchain_sec/10_11.png" alt=""></p>
<p>那么$c=\{0,0,0,1,0,0\},a=\{0,1,0,0,0,0\},b=\{0,1,0,0,0,0)$。再逐一计算上面其他3 个等式总共可以得到 4组向量,分别把每组向量合并在一起组成矩阵形式,即</p>
<p><img src="/img/blockchain_sec/10_12.png" alt=""></p>
<p>通过上述计算,就将向量转化为矩阵形式的描述,称为一阶约束系统(L1CS)。满足以下多项式的向量s就是待证明多项式的解，即$s·C=s·A×s·B$。</p>
<h4 id="二次算术规划">二次算术规划</h4>
<p>二次算术规划(QAP)是在一阶约束系统基础上,将矩阵 A、B、C 转化为由多项式成的向量过程,即将矩阵C 转化为$C(n)=\{C_1(n),C_2(n),C_3(n),C_4(n),C_5(n),C_6(n)\}$。这里使用的是拉格朗日插值法。例如当$n=1,2,3,4$ 时求 $C_4(n)$,根据拉格日插值法,$C_4(n)$可以分解为4个部分的和，即</p>
<p>$C_4^1(n)=\alpha(n-2)(n-3)(n-4)$<br>
$C_4^2(n)=\alpha(n-1)(n-3)(n-4)$<br>
$C_4^3(n)=\alpha(n-1)(n-2)(n-4)$<br>
$C_4^4(n)=\alpha(n-1)(n-2)(n-3)$</p>
<p>则$C_4(n)=C_4^1(n)+C_4^2(n)+C_4^3(n)+C_4^4(n)$。</p>
<p>在n=1时,$C_4^2(n)=C_4^3(n)=C_4^4(n)=0$,只有 $C_4^1(n)=1$,由此可计算$a=-1/6≈-0.166$。同理可得$n=2,3,4$ 时,$\beta=\gamma=\delta=0$,所以</p>
<p><img src="/img/blockchain_sec/10_13.png" alt=""></p>
<p>将 n=1,2,3,4 代人上面进行验证。通过上述公式计算后,可以将矩阵 A、B、C 转化为由多项式组成的向量,即</p>
<p><img src="/img/blockchain_sec/10_14.png" alt=""></p>
<p>也就是说,将求解的问题再一次转化为在以下等式里求解向量 s 的过程,即<br>
$s·C(n)-s·A(n)×s·B(n)=0$</p>
<p>式(10.19)其实等价于在 n=1,2,3,4,5,6 时成立(向量的长度为 6),即</p>
<p><img src="/img/blockchain_sec/10_15.png" alt=""></p>
<p>通过上述的变换,在前面的例子中:证明者想让验证者知道她有$x^3+x+5=35$ 的解的问题变成了根据不同取值,验证等式$s·C(n)-s·A(n)×s·B(n)=H(n)×Z(n)$是否成立的过程。此处为什么这两个问题是等价的呢?因为如果证明者 Alice 不知道s,在验证者 Bob 给出一些取值,让 Alice 计算$ P(n)=s·C(n)-s·A(n)×s·B(n)$和$H(n)$,Alice 是无法计算出来的。这样 Bob 也就没办法成功验证 Alice 确实知道解s。</p>
<h4 id="抽样计算">抽样计算</h4>
<p>通过二次算术规划对问题进行转化,Alice 不再需要将解 a=3 以明文的形式告诉验证者,让验证者相信她知道解,而是让 Bob 去验证以下等式是否成立,即</p>
<p>$P(n)=s·C(n)-s·A(n)×s·B(n)=H(n)×Z(n)$<br>
$Z(n)=(n-1)(n-2)(n -3)(n-4)(n-5)(n-6)$</p>
<p>证明者可以将 P(n)和 H(n)发送给 Bb,Bob 验证等式两边成立,也相信证明者知道解,但是问题在于 P(n)是一个超级大的多项式(次数达到 2 000 000),以这种形式发送给验证者,显然与 zk-SNARK 的简洁相违背。验证者是否可以随机选取一个值 n=t(t 可以不为整数,且等式两边不等于 0)发送给证明者,证明者计算 P(t)和 H(t),由于的取值范围非常大,如果抽样计算一次就验证通过,则验证者有很大的概率相信 Alice。</p>
<p>但存在这样一个问题:由于验证者是以明文的形式将 n=t 发送给证明者,证明者即使不知道真正的解 s,也可以构造一个$P^0(t),H^0(t)$,使得等式$P^0(t)=H^0(t)·Z(t)$成立,这就达不到验证的目的。为此,验证者发送给证明者的取值 n=t 必须隐藏,这就是 10.4.6 节将介绍的,在不知道取值的情况下进行的安全计算一一同态隐藏。</p>
<h4 id="同态隐藏">同态隐藏</h4>
<p>同态隐藏(Homomorphic Hidings)是零知识证明中重要的组成部分,其含义是找到具有同态属性的一种映射关系来实现隐藏输入的需求。需要先了解关于同态加密的知识,同态加密可以看作是一种特殊的加密方式,它的一个显著特点是对密文进行特定运算得到的密文,对它的解密结果与对相应的明文进行相同的运算所产生的结果是相同的换言之,这项技术使得人们可以在加密的数据中进行诸如检索、比较等操作,对结果进行解密后得出正确的操作结果,而在整个操作过程中不需要解密数据。具有同态隐藏属性的函数 E(z)具有如下属性。</p>
<p>(1)对于大部分的变量 $x$,给定 $E(x)$也很难求解 的值。<br>
(2)对于不同的输入一定有不同的输出结果,即如果 $x\neq y$,那么 $E(x)\neq E(y)$。</p>
<p>如果知道 E(x)和 E(y),则可以生成 x和y 的算术表达式的同态隐藏函数,例如,使用E(x)和 E(y)来计算 $E(x+y)$,同理也可以是乘法同态或者全同态。</p>
<p>因此,验证者不再发送明文的 t 给证明者,而是经过同态隐藏的 E(t),由于在计算P(t)和H(t)过程中涉及多阶运算,因此验证者需要发送给证明者的值实际为$E=\{E(1),E(t),E(t^2),···,E(t^N)\}$(为了安全性,N 的取值是比多项式阶都大的整数)Alice收到E 后,显然只能先求 E(P(t))和 E(H(t)),再发送给验证者让其验证$E(P(t))=E(H(t)\times Z(t))$是否成立即可。则验证过程变为如图 10.11 所示。</p>
<p><img src="/img/blockchain_sec/10_16.png" alt=""></p>
<p>此外,还有一个非常重要的问题没有解决:验证者发送给证明者的这些隐藏值是让证明者在正确的 A(n),B(n),C(n)上做计算的。也就是说,如果 Alice 并不知道 $P(n)=s·C(n)-s·A(n)\times s·B(n)=H(n)\times Z(n)$方程的解s,而是知道$P^0(n)=s^0·C^0(n)-s^0·A^0(n)\times s^0·B^0(n)=H^0(n)\times Z(n)$的解,Alice将 $p^0(n)$和 $H^0(n)$的值发送给 Bob验证者发现验证也是正确的,这显然是不对的。</p>
<p>换句话说,如何让 Alice 在规定的系数 P(n)和 H(n)上做计算,而不是$p^0(n)$ 和$H^0(n)$。需要用到 10.4.7 节的 KCA,它约束证明者只能在 $P(n)$和 $H(n)$上做计算。</p>
<h4 id="KCA运算">KCA运算</h4>
<p>KCA(Knowledge of Coefficient Test and Assumption)就是限制 Alice 在规定的系数 P(n)和 H(n)上做计算,在介绍其原理之前,先了解一个基本概念一一$\alpha$对,即假设有一对值(a,b)满足$b=a\times a$，则称其为$\alpha$对。在圆曲线加密(Elliptic Curve CryptoECC)中,已知a 和b,求解$\alpha$ 是非常困难的,这是 ECC 所用到的困难问题(不能把这个公式放到普通理解的公式中,而是要放在群、椭圆曲线的世界里)。假设验证者提供一系列的$\alpha$对($\alpha$ 是隐私的,只有验证者知道):$(a_1,b_1)，(a_2,b_2),…,(a_N,b_N)$,让 Alice 在这一系列$\alpha$对基础上,计算一个新的$\alpha$对$(a^0,b^0)$。显然,Alice 可以通过线性组合的方式求得,即</p>
<p><img src="/img/blockchain_sec/10_17.png" alt=""></p>
<p>式中,$(\beta_1,\beta_2,…,\beta_N)$是 Alice 随机选取的一些系数,这显然满足$\alpha$对的性质,验证如下:</p>
<p><img src="/img/blockchain_sec/10_18.png" alt=""></p>
<p>再回到$P(n)=s·C(n)-s·A(n)\times s·B(n)=H(n)\times Z(n)$的问题,前面已经将s的系数转化为多项式向量,即</p>
<p><img src="/img/blockchain_sec/10_19.png" alt=""></p>
<p>式中,A、B、C、s;都是n 的多项式,M 是向量s的长度。令</p>
<p><img src="/img/blockchain_sec/10_20.png" alt=""></p>
<p>因此,$QAP$方程可描述为$\phi_c(n)-\phi_A(n)\times \phi_B(n)=H(n)\times Z(n)$。同样按照抽样计算的方法,Alice 提供在$n=t $时的同态隐藏值$E(\phi_A(t))、E(\phi_B(t))、E(\phi_C(t))$,证明者验证 $E(\phi_c(t)-\phi_A(t)\times \phi_B(t))=H(n)\times Z(n)$是否正确即可。但与前面提到的证明者给出$E=(E(1),E(t),E(t^2),··,E(t^N))$不同,此处证明者给出3组、每组M个$\alpha$对,即</p>
<p><img src="/img/blockchain_sec/10_21.png" alt=""></p>
<p>Bob要求Alice 在证明中基于$(E_a,E_s,E_c)$提供的$alpha$对,返3对新的$\alpha$对:$(E(\phi_A(t)),E(\beta_A\phi_A(t)))、(E(\phi_B(t)),E(\beta_B\phi_B(t)))、(E(\phi_C(t),E(\beta_C\phi_C(t))))$。本节一开始摄区块链安全到Alice 只有通过已知的$\alpha$ 对做线性组合才能完成,即</p>
<p><img src="/img/blockchain_sec/10_22.png" alt=""></p>
<p>式中,$(\beta_1,\beta_2,…,\beta_M)$是验证者随机选取的一些系数,同理可以计算出$(E(\phi_B(t)),E(\beta_B\phi_B(t)))、(E(\phi_C(t),E(\beta_C\phi_C(t))))$。为了约束证明者在计算$(E(\phi_A(t)),E(\beta_A\phi_A(t)))、(E(\phi_B(t)),E(\beta_B\phi_B(t)))、(E(\phi_C(t),E(\beta_C\phi_C(t))))$过程中,都使用相同的系数向量$(\beta_1,\beta_2,…,\beta_M)$,可定义多项式,即</p>
<p><img src="/img/blockchain_sec/10_23.png" alt=""></p>
<p>关于 $\phi_A(n)$可能会有疑问:一会儿等于$\sum_{i=1}^MA_i(n)·s_i(n)$,一会儿等于$\sum_{i=1}^MA_i(n)·\beta_i$，其实这里并不冲突,上面只是为了描述验证的形式,验证是否具有相同的系数,则对于任意的取值n=t 如下:</p>
<p><img src="/img/blockchain_sec/10_24.png" alt=""></p>
<p>通过比较上面两个等式值是否一致,可以知道是否使用的同一个系数。</p>
<p>通过 KCA,可以保证验证者是在规定的系数上做计算,而不是随机选取的 P(n)和H(n),因为通过$alpha$对可以验证,没有使用证明者提供的一系列。 对,验证者计算出的结果在$alpha$未知的情况下,肯定是不符合$alpha$对特性的。图 10.12 描述了 k-SNARK 的交互过程。<br>
<img src="/img/blockchain_sec/10_25.png" alt=""></p>
<p>从图 10.12 中可以看出,为了验证者和证明者之间的交互,很多的数据变成了公共参数字符串(Common Reference String,CRS),其数据量太大,实时传输不太现实，但实际上公开参数后,$\beta、\delta$ 对于证明者也变得未知了。在证明者进行验证过程中,首先需要计算$E(\delta D(t))=\delta A(t) + \delta B(t) + \delta C(t)$,然后再验证 $\beta_AE(A(t))=E(\beta_A(t))$,这两步中都需要知道 $\beta、\delta$,但在 $\beta、\delta$未知的情况下如何完成?这就需要用到双线性映射将问题进行转化。</p>
<h4 id="双线性映射">双线性映射</h4>
<p>双线性映射(Bilinear Map)是由两个向量空间的元素,经过一个特殊的映射关系得到另一个向量空间上元素的线性函数。设 $G_1、G_2、G_3$是3 个阶为素数 的乘法循环群,在$G_1、G_2、G_3$上定义一个映射关系 $e:G_1\times G_2 →G_3$;。假设 X，Y，Z 为分别来自$G_1、G_2、G_3$的3个元素,双线性映射即$e(X,Y)=Z$,且在两个输入域上都满足线性特性:</p>
<p><img src="/img/blockchain_sec/10_26.png" alt=""></p>
<p>双线性:假设$a,b∈Z_p$,$P和Q∈G$;,则$e(P^a,Q^b)=e(P,Q)^{ab}。</p>
<p>在前面的同态隐藏中,其特性是存在使得 $E(x)=X$,在满足双线性映射条件下假设$x=ab=cd$,满足以下公式则称 $x→X$ 是乘法同态映射,即</p>
<p><img src="/img/blockchain_sec/10_27.png" alt=""></p>
<p>在 10.4,7 节中提到,由于B,8 未知,Bob 无法验证式(10.47)、式(10.48)和式(10.49)是否成立。</p>
<p><img src="/img/blockchain_sec/10_28.png" alt=""></p>
<p>通过双线性映射特性,zk-SNARK 将上式的验证问题转化为</p>
<p><img src="/img/blockchain_sec/10_29.png" alt=""></p>
<p>注意,这里用到两个映射 $E(x)$和 $E^0(x)$。这样就将问题进一步转化，即使 Bob 不知道$\{\beta_A,\beta_B,\beta_C\}$,只要知道$\{E^0(\beta_A),E^0(\beta_B),E^0(\beta_C),E^0(1)\}$,也可以完成验证,同样是把这两项变为 CRS 即可。此外,为了验证 $E(\delta D(t))=\delta E(D(t))$,也可以变换为</p>
<p><img src="/img/blockchain_sec/10_30.png" alt=""></p>
<p>同样地,在合未知的情况下,只需要知道 E”8)即可完成验证。通过上面的分析,只需要在CRS 中增加一些公共参数,就能完成验证过程。图10.13 描述了 zk-SNARK 的最终流程。</p>
<p><img src="/img/blockchain_sec/10_31.png" alt=""></p>
<h3 id="基于环名的隐私保护">基于环名的隐私保护</h3>
<h4 id="环签名概述">环签名概述</h4>
<p>环签名(Ring Signature)作为一种特殊的数字签名方案,是群签名的一种演进技术，最初由 3 位著名密码学家共同发明设计。群签名是多个用户组成一个群组,包括一个管理员用户和若干群组成员。当需要对某个文件进行签名时,群组中任意一个成员都能够代表整个群组来签名，这时签名者的真实身份是隐藏在整个群组中的,外部人员或者用户只能确定该签名来自这个群组中的某个成员,而无法获知具体签名者的身份信息。管理员用户被当作一个可信第三方。当出现需要找出具体的签名者时,管理员通过系统权限查找找出签名者的真实身份。</p>
<p>如图 10.14 所示,与群签名相比,环签名的特殊之处体现在系统中没有管理员用户，哪一且生成环签名之后,签名者的真实身份信息将无法追踪。因此,一个环签名方案是无条件匿名性的。一般系统中某个待签名者会临时选取一些成员构成一个集合,然后用自己的私钥以及集合中其他成员的公钥来共同生成一个环签名,他将自己的信息隐藏在其中,该过程无须其他成员的参与和帮助。除了这个属性,环签名也满足签名方案基本的属性:不可伪造性、可信性。随之又出现了新的变体方案。</p>
<p><img src="/img/blockchain_sec/10_32.png" alt=""></p>
<p>(1)基于门限的环签名(Threshold Ring Signature)方案:支持$(t,n)$门限的环签名即在群组中有 n 个用户$\{u_1,u_2,…,u_n\}$,其中的任意 t个用户$\{u_1,u_2,…,u_t\}$参与就可以生成一个环签名。<br>
(2)可链接的环签名(Linkable Ring Signature)方案:如果一个用户利用环签名匿名性进行多次签名(例如，选举投票),可链接的环签名支持判断生成的环签名是否由同一个群组中的成员产生。<br>
(3)可追踪的环签名(Traceable Ring Signature)方案:同样地,为了防止一些用户利用匿名性来滥用数字签名,可追踪的环签名方案能够支持追踪到对同一个消息进行了两次或多次签名的成员,以此来限制过度匿名性。<br>
(4)一次性环签名(Onetime Ring Signatures)方案:支持用户实现无条件的不可链接性(Unconditional Unlinkability)。</p>
<p>接下来,本节将介绍基于环签名技术的加密数字货币,通过构建支持环签名方案的CryptoNote 协议来支持包括门罗币在内的多种加密数字货币应用。</p>
<p>如上所述，一次性环签名也属于环签名的范畴,它只是在一般的环签名方案基础上实现了无条件的不可链接性。下面介绍一个一次性环签名方案,主要包含以下 4 个算法步案(GEN,SIG,VER,LNK)。</p>
<p>(1)GEN:密钥生成算法。选择一对公钥和私钥地址,并输出一个椭圆曲线密钥对<br>
(P,x)和一个公钥 I。<br>
(2)SIG:环签名算法。选择一个消息 m,一个公集合 S’,一对密钥$(P_s,x_s)$,输出一个签名和一个公钥集合 $S=S’∪\{P_s\}$。<br>
(3)VER:环签名验证算法。输入公 I、一个公集合 S 和签名，输出验证结果为正确或错误。<br>
(4)LNK;环签名链接算法。针对用户钱包里的一笔资金,算法输出链接或者独立链接表示这笔资金在之前的交易中出现过,防止用户出现双重支付攻击问题。</p>
<p>如图 10.15 所示,一次性签名的主要思想在于:用户产生的签名结果可以由某个法的公钥集合验证,而不是只能被唯一一个公钥验证。即使签名者再次使用同样的密对产生另外二个签名,其身份也无法从使用的公钥集合的用户中被分辨出来。此外,发误者的地址被隐藏起来,恶意的发送者可能尝试把同一笔资金多次发送给其他用户，这就带来了双重支付攻击的问题。</p>
<p><img src="/img/blockchain_sec/10_33.png" alt=""></p>
<h4 id="CryptoNote-协议">CryptoNote 协议</h4>
<p>在比特币区块链中,用户交易地址一旦公开,对于收款一方就会将交易关联到假名上。为了保证自己的身份信息不被泄露,接收者可以通过安全通道把自己的接收地址发送给发送者。如果用户希望接收多个不同的交易,并且不希望被公开地发现这些交易归属到同一个用户,那么他需要生成多个地址作为接收地址。显然,这样保护自身隐私的方<br>
式是非常费时费力的。</p>
<p>CryptoNote 是另一种用来实现隐藏发送者和接收者的地址以及交易不可链接性的数字货币,也是一种增强用户隐私保护的应用层协议,主要基于环签名方案来实现匿名性和交易之间的去关联性。在该协议中,发送者无须和其他用户合作或依赖于一个可信第三方来实现不可追踪性及无关联性。以下为 CryptoNote 协议的具体构造过程。</p>
<p>(1)GEN: 签名者首先选择一个随机的密钥 $x∈[1,l-1],$然后产生相应的公钥$P=xG$。另外还需要计算另一个公钥$I=xH_p(P)$,也称为“密钥镜像(Key Image)”,用来防止双重支付攻击。</p>
<p>(2)SIG:签名者通过非交互零知识证明技术生成一个一次性环签名。签名者首先在其他用户的公钥地址中选择一个大小为n的随机子集S’,令某个s满足$0\leq s \leq n$，s是签名者在集合的私密索引。签名者从$(1,2,…,l)$中随机选择$\{q_i|i=0,1,…,n\},\{w_i|i=0,1,…,n,i≠s\}$,然后做如下的转化:<br>
<img src="/img/blockchain_sec/10_34.png" alt=""></p>
<p>下一步进行一个非交互的挑战:$c=H_s(m,L_1,···,L_n,R_1,···,R_n)$</p>
<p>签名者计算响应 $c_i,r_i$为</p>
<p><img src="/img/blockchain_sec/10_36.png" alt=""></p>
<p>最终得到的签名就是$\sigma=(I,c_1,…,c_n,r_1,…,r_n)$。</p>
<p>(3)VER:验证者收到签名后,判断该签名是否合法,执行以下逆转化:</p>
<p><img src="/img/blockchain_sec/10_37.png" alt=""></p>
<p>如果满足 $\sum_{i=0}^n c_i=H_s(m,L^{‘}_0,…,L^{’}_n,R,…,R^{‘}_0,…,R^{’}_n)mod\ l$,则验证者执行下一步,即LNK算法,否则拒绝签名,输出终止。</p>
<p>(4)LNK:已有的签名结果存储在一个集合J中,验证者验证I是否在集合J中出现过,如果存在则说明两个签名是使用同一个私钥产生的。</p>
<p>协议的作用体现在,采用转换技术,签名者可以向其他人证明他至少能够找到一个x，满足 $P_i=xG$。为了让这个证据不重复，因此引入了密钥镜像 $I=xH_p(P)$。签名者利用同一对系数$(r_i,c_i)$来证明:他能够找到符合条件的,使得存在 $H_p(P_i)=I·x^{-1}$如果映射工$x→I$是一个单射，那么没有人能够从密钥镜像中恢复出公钥从而分辨出哪个是真正的签名者。对于相同的工和不同的I,签名者无法产生两个不同的签名。</p>
<p>将上面介绍的两种方法:不可链接的公钥地址和不可追踪的环签名进行结合,使得方案可以在隐私保护方面达到更高级别。它要求用户只需存储一对密钥$(k_p,k_s)$并发布$(k_p,k_s)$以接收和发送匿名交易。在对交易进行验证时,接收者需要额外运行两次椭圆曲线算法程序,再对输出的结果进行一次加法运算,就能检查系统中的这些交易是否属于自己。同时对于每一次的输出结果,接收者能够计算一个一次性的密钥对$(p_i,P_i)$,并把它们存储在自己的钱包账户中。任何输入只有在单个交易中出现时,才能被证明具有相同的所有者。在使用了一次性环签名方案之后,单个交易中的输入地址被隐藏在多个地址中间,那么外部观察者很难再通过将多个输入链接到同一个用户而追踪用户身份。</p>
<p>当接收者想要再次将这笔钱转移给其他用户时,同样可以利用环签名,有效地把自己的输入隐藏在和其他用户组成的群中,每个用户对这笔资金都享有相同的使用权。即基这笔资金以前的发送者也没有比任何外部观察者更多的信息来推测出这笔资金是被某<br>
个人使用了。因此,这个一次性环签名方案能够保证用户匿名性。</p>
<p>在袋署交易时,接收者把一个输出分成  份，在没有其他用户参与的情况下混合所有输出。和系统中的其他人一样,接收者也无法确定这笔钱是否已经被使用:因为输出结果可以作为一个模糊因素(而不是隐藏目标)加入多个签名中。接收者可以根据自身的实际需求,选择不同的模糊度 ,当 n-1 时表示接收者花费这笔钱的输出概率为 50%。当n=99% 时表示概率为 1%。随着模糊度  的取值增大,签名的大小星 O(n+1)线性增加,因此接收者会增加匿名性成本带来的额外的交易费用。</p>
<p>一般当用户地址公开时,即使交易的发送者地址通过环签名技术进行了隐藏,但任何人都可以检查所有交易的接收者来追踪交易的流向。针对这种情况,为了防止接收者的信息泄露和交易之间可链接,需要产生一个新的地址,并将其秘密地发送给发送者,但是这样就失去了用户使用单个公开地址接收交易的便利性。为此,如图 10.16 所示CryptoNote 协议采用一次性地址代替接收地址,达到隐藏接收者真实地址的目的,使得交易与交易之间无法建立良好的关联关系。为了减轻私钥管理的工作量，一次性地址不需要用户在每次产生一个交易时新建一个私钥地址，而是通过一个主密钥生成多个不同的一次性私钥。</p>
<p><img src="/img/blockchain_sec/10_38.png" alt=""></p>
<p>为了解决密钥过多的问题,CryptoNote 协议通过公钥计算,为每笔交易自动创建多个一次性密钥。这样每个用户只需要掌握一对公开密钥对,不需要每次都产生一个新的地址作为交易的接收地址,它允许其他用户使用该公开密钥对来产生一个一次性地址作为接收地址。假设发送者将发送一笔交易给接收者,他选择接收者的公开地址对$(k_p,k_s)$以及随机值r计算产生该接收者的一次性接收密钥。对接收者而言,他利用自己相应的私钥在全网查找,通过对网络中所有的交易进行验证,最终能够找到那些接收地址属于自己的交易。接收者可以通过自己的私钥计算出该交易中的一次性地址所对应的私钥,因此他可以得到这笔交易中的货币,并且没有人能够推测出这个地址和接收者的公开地址对$(k_p,k_s)$之间的联系。</p>
<p>具体来说,在产生一次性地址的过程中,接收者需要有两个不同的密钥,首先发送者根据本地数据和接收者前 1/2 的地址信息,运行 Diffie-Hellman 交换协议计算出共享密钥,然后与接收者后 1/2 的地址进行计算产生接收者的一次性接收地址。因此,CryptoNote 地址的数据大小基本上是比特币钱包地址的两倍之多。</p>
<p>如图 10.17以及图10.18 所示,标准的交易流程如下。</p>
<p>(1)当Alice需要将一笔交易发送给 Bob 时,Alice 能够知道 Bob 的公开密对(A,B)。<br>
(2)Alice 随机产生一个数$r∈[1,l-1]$,然后计算一次性公钥 $P=H_s(rA)G+B$。<br>
(3)Alice设置交易输出的目标地址为 $P$,并把$R=rG$ 加入交易里。<br>
(4)Alice将交易信息发送给 Bob。<br>
(5)Bob 检测每个网络中的交易,利用自己的私钥对(a,b),根据交易信息里的 R计算$P’=H_s(rA)G+B$,如果 P’与交易信息里的输出地址P 相等,则可以判断 Alice 的交易是把 Bob 作为接收者。<br>
(6)Bob 可以利用自己的私钥对(a,b)以及交易信息里附加的 R 恢复出相应的一次性私钥x,其中$x=H_s(aR)+b$，之后他就可以使用一次性私钥签名来花掉这笔资金。</p>
<p><img src="/img/blockchain_sec/10_39.png" alt=""></p>
<p>基于CryptoNote协议最典型的例子就是一种开源加密货币一-门罗币，创建于2014 年。它采用的是一次性环签名来实现保护用户的身份隐私性。</p>
<h2 id="第11章-区块链安全应用">第11章 区块链安全应用</h2>
<h3 id="区块链与机器学习">区块链与机器学习</h3>
<h4 id="应用背景">应用背景</h4>
<p>迄今为止,基于机器学习的算法在准确率及效率方面远胜过其他的算法因此在数据挖掘、自然语言处理、人脸识别等领域得到了广泛的应用。机器学习是一种数据分析和挖掘技术,通过从大量样本中训练出有价值的数据模型来让计算机执行人和动物与生俱来的活动。例如,对于一辆车的识别,不需要对机器学习描述一辆车的样式、形状等特征,只需要提供数百万张车辆的图片来训练它。机器学习算法可以在这些图片中找到重复的模式及特征,可以判定-张未训练过的图片是否包含车的成分。机器学习直接从大量数据中学习有价值的信息,并提取为知识,它不需要依赖于预定的方程模型,可以自适应地随着样本数增加而提高性能。</p>
<p>近年来,机器学习得到飞速发展的一个重要因素是具有大量的数据。随着互联网与通信技术的发展,人们进入了大数据时代,在商业、经济和文化等各领城中产生了庞大的数据,单一数据集的规模从几十太字节(TB)到几拍字节(PB)不等。针对大部分的机器学习算法,足够多的数据量会带来更精确的数据模型和识别准确率。因此,如何获取大量的数据集进行机器学习也是该领域发展的一个关键问题之一,其中主要涉及两方面的问题:D如何在大量的数据上进行学习。传统机器学习方法,需要把训练数据集中于某台机器或是单个数据中心里,但是一般数据所有者在数据产生和数据处理过程中是有一定成本的，企业或者个人很少会无偿地将自己的数据贡献出来进行机器学习,需要有效的激励机制来对数据所有者进行补偿。@大量的数据中包含个人或企业的敏感信息,如果将信息统一收集在中心化的第三方机构,会存在潜在的数据安全性问题,因此对这些数据的隐私性保护也是数据产生者本身非常关注的问题。</p>
<p>为了解决以上问题,通过引入区块链服务机器学习模型的训练过程中,其主要有两个优势。<br>
(1)数据管理机制:训练的数据不需要统一收集在中心化服务器利用区块链技优势。来实现多方个体之间数据的安全共享与管理,打破数据孤岛,生成更为准确的训练模型。<br>
(2)激励机制:基于区块链设计的激励机制可以使机器学习系统获取最佳数据和型,促使其变得更智能化。</p>
<p>在区块链与机器学习结合的混合模型下,任何个体都可以共享自己的数据,在保护教<br>
据的隐私前提下参与到机器学习的训练过程中,对于机器学习模型开发人员,可以基于智能合约设计的激励机制来获得学习中所需的最佳数据集。</p>
<h4 id="基于区块链技术的机器学习">基于区块链技术的机器学习</h4>
<p>在机器学习过程中,通常分为 3 个步骤。<br>
(1)特征选取。良好的特征选取可以降低机器学习的难度,提升模型训练的性能和结果的准确性。一般特征的选取从原始特征中选出能够表征训练数据的特征子集,由于数据量大且特征的线性组合比较多,因此常常运用启发式学习的方法先生成子集,并对特征及对应的模型进行评估,将反馈信息作为模型优化的标准,并以此不断迭代,最终达至满足一定条件的特征子集即可。<br>
(2) 模型训练。它将训练数据集作为输入,基于选定的机器学习算法,如聚类算法神经网络、贝叶斯估计等,通过不断迭代调整模型权重,提高模型的准确性，满足一定规则训练结束,将训练后的模型参数作为结果输出。<br>
(3)模型测试。它采用测试数据集来评估训练模型的准确性。值得注意的是,为了解决输出的模型在测试数据集中来不断训练以干扰测试数据输出结果的有效性问题,将测试训练集分为两部分:验证集和测试集。验证集是用来确定模型的超参数,选出一个最优的模型,它可以被多次使用;测试集仅用于对训练好的最优函数进行性能评估,测试集必须保证是完全独立的,直到模型调整和参数训练全部完成前应该将测试集进行封存以任何形式使用测试集中的信息都是一种窥探。</p>
<p>在基于区块链的机器学习模型下,主要包含 3 种用户角色:机器学习任务发起者、机器学习参与者,区块链矿工。前两个角色与机器学习任务相关,用户可以在应用层,通过区块链开放的远程调用接口与其进行对接;矿工主要维持区块链网络的稳定运行。</p>
<p>(1)机器学习任务发起者(简称发起者):为了获得特定的机器学习模型,发起者对所要进行的机器学习任务初始化,包括训练数据集地址、目标模型要求、奖励、截止时间等。发起者以交易的形式通过智能合约将机器学习任务发布出去。<br>
(2) 机器学习参与者(简称参与者): 参与者通过区块链中查到所发布的合约内容并决定是否参与到该机器学习任务中。如果参与,则从对应的地址中下载训练数据,利用本地的计算机资源来完成指定目标模型的训练任务。如果把一组具有相同机器学习模型训练目标的参与方称为合作组,则合作组中的每个参与者之间会将各自训练好的模型数据安全地共享出去,并从中获得一定奖励。<br>
(3)区块链矿工(简称矿工):矿工负责维护区块链正常运行,基于区块链共识算法<br>
矿工之间通过竞争来产生新块同时对交易进行确认,并获得其中的挖矿奖励和块交易费。</p>
<p>在加入机器学习任务之前,每个用户生成自己的公钥和私钥,以及对应的区块链地址,在学习过程中,用户可以使用匿名的方式,即不需要知道发起者或者参与者的真实身份信息,为了保证学习过程中发起者、参与者之间不存在违规的行为,如随意提交训练结果,或者学习完任务之后不提供奖励,需要利用区块链中智能合约的机制,来保障两方角色之间的公平性问题:对于发起者,如果提供了足够的奖励在智能合约中,则一定能获得满足预设条件的目标模型;对于参与者,如果提供了自己的计算资源进行机器学习训练则一定能获得预设的奖励。如图 11.1 所示,一般基于区块链技术的机器学习主要包括以<br>
下4 个过程:任务发布、任务训练、训练结果提交、任务评估与励发放。</p>
<p><img src="/img/blockchain_sec/11_1.png" alt=""></p>
<h5 id="任务发布">任务发布</h5>
<p>发起者创建一个面向特定机器学习任务的智能合约,在该合约中,包含训练数据集地址、训练结果评估函数和任务的奖励,发起者将合约的奖励存储在该合约地址中,在设定的时间期限内，即使有对应的私钥,该奖励也无法被发起者拿走。其中,包含合约可对外转账的条件,即参与者在提交满足要求的训练结果,通过合约验证并被区块链矿工确认后,才能从合约的账户地址中取走一部分金额作为训练奖励。为了保证该合约最终被区块链网络确认,参与者可以等待一定区块生成后再考虑是否加入该任务学习。</p>
<h5 id="任务训练">任务训练</h5>
<p>如果参与者愿意加入该任务的学习过程,则首先与合约达成一笔交易,将自己的地址信息记录在区块链中,同时为了保证参与者会按时提交训练结果,参与者也被要求放置一定的存款在智能合约地址中,该存款在用户训练提交结果之后会退还给参与者账户。各参与者完成存款操作之后,可以从发起者指定的链接地址下载训练数据集,利用本地的计算资源来训练出一个满足要求的机器学习目标模型。</p>
<h5 id="训练结果提交">训练结果提交</h5>
<p>参与者完成机器学习模型训练后,将其训练的结果并人合约中再发送到区块链。同样地,其他参与方也按照相同的方式提交训练结果。需要注意的是,该学习任务是指定时间的，参与者在提交交易时需要确保时间是在该时间之前,同时要提供一定的交易费。放止交易一直得不到确认而超出截止时间得不到奖励的情况。</p>
<h5 id="任务评估与奖励发放">任务评估与奖励发放</h5>
<p>在参与者提交完模型结果后,智能合约会自动发起参与者提交训练模型的评估,智能合约通过读取测试样本,并按照评估计算函数来对模型结果进行评估,合约依据评估结来对用户发放奖励,没有满足条件的目标模型不会给予奖励,参与者自己的存款按照合然设置进行退还。在达到截止时间之后,发起者可以利用自己的私钥将合约中的奖金赎回。</p>
<h4 id="训练数据的隐私保护">训练数据的隐私保护</h4>
<p>随着信息技术的发展,数据的隐私性越来越得到重视,尤其是大数据场景的数据泄<br>
会受到公众的广泛关注。如何保护数据的隐私性是当今社会极为关注的问题。在机器当习领域,数据的隐私性保护也格外重要。</p>
<p>在基于区块链的机器学习流程中,利用智能合约的自动化执行以及区块链的公开验证机制,可以保障一个机器学习任务在区块链中顺利完成,但是由于区块链的公开透明性,交易中的数据可以被所有人获取,也即在训练结果提交时,其他矿工或者能够连接区块链网络的人都能拿到参与者训练的结果数据。此外,发起者的训练数据是明文形式公布在区块链中,任务人都能读取到该训练数据。在实际的应用中,发起者的训练数据有-定的商业价值,不会轻易地公布出去,而且数据中可能会暴露出该用户的敏感信息。因此,如果在区块链中无法有效地保障数据的安全性,会大大地降低发起者、参与者加入该生态系统的积极性。为了保护数据的隐私性,主要从两方面进行考虑:训练数据的隐私性保护和训练模型的隐私性保护。</p>
<h5 id="训练数据的隐私性保护">训练数据的隐私性保护</h5>
<p>针对训练数据的隐私性,发起者的训练数据可以通过加密形式先保存在分布式系统中,例如星际文件系统(InterPlanetary File System,IPFS)、分布式哈希表(DistributedHash Table,DHT),这些点对点的分布式存储系统可以保证数据完整性和可用性。为了保证加密的效率,一般采用混合加密技术,利用对称加密技术对数据进行加密操作,再利用公钥对对称加密密钥进行加密,只有对应私钥的用户才能解密。在区块链环境中,可以设定一些条件来筛选参与者,如基于信誉值的用户选择机制。让参与者在智能合约中达成协商并存储一定金额的数字货币作为押金,以达到促使参与者能够积极地参与到机器学习的训练任务,并按时提交结果的目的。此后,发起者可以利用参与者的公钥对对称加密密钥进行加密,这样只有符合条件的参与者才能解密训练数据。</p>
<h5 id="训练模型的隐私性保护">训练模型的隐私性保护</h5>
<p>发起者也可以不用自己提供训练数据,而是依赖参与者自己所拥有的数据作为训练数据,这样训练数据不需要公开出去,参与者只需要本地训练好自己的数据并提交到区块链中进行处理，这种训练模式称为联邦机器学习(Federated Machine Learning)。联邦机器学习可以很好地契合区块链的场景,每个参与者用户之间是相互独立的,不需要使用相同的训练数据或者进行任何交互,只需要使用本地的训练数据即可,为学习联邦机器学习的过程,首先需要了解分布式随机梯度下降(Distributed Stochastic Gradient Descent.D-SGD)算法。</p>
<p>D-SGD算法是为了实现不同节点在本地拥有数据集而进行的训练。如图 11.2 所示,基于中心化服务器(Server)来对不同参与者(计算节点)训练的结果进行汇总计算后，重新更新全部参数,节点之间并行地利用随机梯度算法来优化神经网络模型。在训练开始前，神经网络首先随机初始化一个全局渐变矢量 $W_{global}$,然后在训练的每轮选代中,基于训练数据集计算获得一个本地的渐变矢量 $W_{local}$,$W_{local}$发送到远端服务器中,远端服务器将收到的 $W_{local}$用来更新全局渐变矢量 $W_{global}$，其更新公式为<br>
$W_{global}^{‘}=W_{global}-\alpha ·G_{local}(W_{global};x_t,y_t)$<br>
式中,$\alpha$为步长或学习率(Learning Rate);$(x_t,y_t)$为随机参与者随机抽取的训练数据;$G_{local}$为$(x_t,y_t)$所对应的经验损失函数关于当前模型 $W_{global}$的梯度。新产生的 $W_{global}^{’}$会被广播给所有的参与者,参与者会更新本地的渐变矢量进行新一轮的迭代训练,这个过程不断重复,直到预定义代价函数的期望达到最小值。</p>
<p><img src="/img/blockchain_sec/11_2.png" alt=""></p>
<p>依据节点之间的通信方式不同,D-SGD 分为两种模式:同步(Synchronous)通信机制、异步(Asynchronous)通信机制。</p>
<p>(1)基于同步通信的分布随机梯度下降(Distributed Synchronous StochasticGradient Descent,DS-SGD)算法:在每轮的迭代过程中,Server 会等待所有节点完成这轮的梯度计算任务后，将每个节点上计算的随机梯度进行汇总、平均并按照梯度更新公式来更新模型。服务器会将更新的全局模型发送给各个节点进行新一轮的迭代计算。由FDSSGD算法要等待所有的节点完成梯度计算任务才开启下一轮的选代,因此其效率<br>
与节点中运算效率最低的节点成正相关。</p>
<p>(2)基于异步通信的分布随机梯度下降(Distributed Asynchronous StochastiGadient Descent,DA-SGD)算法:与 DS-SGD算法相比,DA-SGD算法在每轮选代中无须等待所有节点完成梯度计算任务,而是在每个节点计算完随机梯度值后,再进行全局模型更新。</p>
<p>相比而言,DA-SGD算法的迭代效率比 DS-SGD 算法要快,可以满足实时性的需求，这也是其能够被广泛应用于深度神经网络训练的原因。但是,由于每轮迭代都是异步行的,会存在梯度延迟的问题，这是由于节点进行梯度计算需要时间,在该节点传回给务端进行全部模型更新时,该模型已经被其他节点更新了很多轮,导致每次所更新的全梯度并非最新的梯度,进而影响最终模型的准确率,并且随着节点数的增加，准确率会下降得更多。</p>
<p>进一步地,联邦机器学习被提出,它主要是针对训练过程中参与方$\{P_1,P_2,…,P_n\}$有各自本地的数据$\{data_1,data_2,…,data_n\}$,出于对数据隐私保护的目的,各参与方无将自己的数据共享给其他参与方,而是利用不同参与方的数据来共同训练更精确的机器学习模型。例如,参与者 $P_1$，缺少有效的标签数据 $data_2$,参与者 $P_2$缺少有效的特征数据$data_1$;,两方可以互为补充。为了解决这个问题,联邦机器学习进行模型训练时利用基F密码学的数据隐私保护机制,在密文的条件下完成对参数的更新操作，这样可以在不违背数据隐私保护需求的前提下,建立一个参与方共同维护的学习模型。</p>
<p>如图11.3 所示，总共有 n 个参与者$\{P_1,P_2,…,P_n\}$来共同参与学习,服务器端(Server)是一个半可信的云计算平台或者第三方机构,即该服务器会执行以下操作。</p>
<p><img src="/img/blockchain_sec/11_3.png" alt=""></p>
<p>(1) 诚实地存储外包数据且不对它进行篡改。<br>
(2) 公正地按照约定的协议步骤进行执行且返回正确的计算结果。<br>
(3) 试图获得用户隐私的明文信息(如训练中间结果、训练结果)。</p>
<p>在训练之前,所有的参与者共同来设定一对公钥和私钥$(k_p,k_s)$,即 $k_s$对所有参与者都是可知的,每个参与者通过安全的 TLS/SSL 协议进行数据通信。详细的学习步骤如下。</p>
<p>(1)参与者 $P_i(i=1,2,··,n)$利用自己本地数据 $data_i(i=1,2,…,n)$训练一个梯度值$G_{local_i}(W_{global};data_i)$将 $G_{local_i}$利用满足加法同态的加密方式进行加密$E(G_{local_i})$加密结果发送给服务器。</p>
<p>(2)服务器将收到的加密渐进矢量进行聚合计算,利用加法同态,即$E(W_{global}^{'})=E(W_{global})+E(-\alpha ·G_{local_i}(W_{global};data_i))$</p>
<p>由同态的性质可知，将在不同密文下计算的结果解密后,得到的值与在明文形式下的结果一样。</p>
<p>(3)服务器将更新的全局渐进矢量$E(W_{global})$重新发送给每个参与者$P_i$。<br>
(4)参与者$P_i$利用私钥解密 $E(W_{global})$继续使用本地数据进行训练。<br>
(5)当$E(W_{global})$满足最小定义的值时,则训练结束,否则回到第(1)步继续进行。</p>
<p>如图11.4 所示,利用联邦机器学习的模式,各参与者在本地进行数据计算任务,将每轮迭代训练的结果进行加密并通过交易发送给区块链智能合约,基于图灵完备的智能合约来完成对不同训练结果的更新操作。智能合约中只需要对密文结果进行计算,无须了解明文内容,因此即使是在公开的区块链平台中(例如,以太坊),该方案也能支持训练数据以及训练模型的隐私性。</p>
<p><img src="/img/blockchain_sec/11_4.png" alt=""></p>
<h3 id="区块链与数据交换">区块链与数据交换</h3>
<h4 id="应用背景-2">应用背景</h4>
<p>随着信息技术的高速发展,不同区域间的信息交流逐步增加,以互联网为主要载体的网络空间和物理世界不断交叉融合,催生出海量“人-机-物”数据。据IDC的Data Age 2025 分析与统计,全球数据圈(被创建、采集或复制的数据集合)还在经历急剧扩张,将从2018 年的33ZB增至2025 年的 175ZB。数据作为新的生产要素,如何有效利用这些大数据来产生社会价值和经济价值是关键,美国政府将大数据上升到新的高度,将其定义节<br>
未来的新石油”,充分说明了数据资源在国家未来战略规划中的重要性。</p>
<p>为了发挥和利用大数据所带来的优势,首先需要打破“人人有数据,人人缺数据”的岛式闲境,让数据在不同个体之间流通起来。数据共享(Data Sharing)作为一种实现据流通和数据利用的重要技术,不仅能够降低数据收集的成本,而且可以在隐私保护的&quot;提下实现数据分析利用的效益最大化。为了满足实际应用中对数据的迫切需求,谷歌、软、华为、腾讯、百度等科技公司竞相推出自己的大数据平台,对外提供数据支撑服务。此同时,在 2018年 Code大会上,互联网专家 Mary Meeker 在提到互联网未来发展时指出,随着数据收集、提取、分析、利用等技术的不断优化,数据共享已经成为互联网大数据发展的必然趋势,数据共享的方式也在不断地发生变化，成为了信息时代数据利用的重要方式。</p>
<p>为了实现跨个体、跨区域之间的数据共享,一般会遇到两方面的问题:隐私泄露和#享交易过程中的不公平性问题。一方面,数据包含了大量的敏感信息，如身份、位置、年龄等,这些都属于个人敏感隐私信息。数据共享是一种数据资产利用和使用的行为,在共享过程中不仅涉及物权的归属问题,同时也涉及个人信息和隐私数据等的保护问题。例如,将个人医疗病历、个人的交易消费记录开发成大数据资源,如果对这些数据的共享没有得到有效授权,就会侵害个人的隐私权。中国颁布的《中华人民共和国民法典》明确了“自然人享有隐私权。任何组织或者个人不得以刺探、侵扰、泄露、公开等方式侵害他人的隐私权。”欧盟也通过了被称为最严格的《通用数据保护条例》(GDPR),条例中明确了数据隐私保护的重要性,为解决数据滥用、保护数据隐私安全走出了重要一步。然而,现有条例的具体实施仍然需要新技术、新方案来支撑,只有通过条例和技术的共同结合才能让用户的隐私数据得到真正的保护。</p>
<p>另一方面,现有的数据共享模式中通常存在一个中心化的数据服务提供商,集中式地对用户的数据进行大量的聚合并对外提供数据服务,如图 11.5 所示。在这种中心化的数据管理模型下,用户向数据服务提供商让渡了数据的管理权,导致用户难以对其外包出去的数据进行有效审计和授权管理。为了追求更大的利益,数据服务提供商可能滥用数据进一步侵犯用户对外包数据应该享有的知情权和选择权。此外,传统单点式管理的数推管理系统也容易成为恶意攻击者的目标。如何安全有效地对数据进行管理，让用户真正做到“我的数据我做主”是实现数据贡献的必要前提。</p>
<p><img src="/img/blockchain_sec/11_5.png" alt=""></p>
<p>在之前的研究工作中已经证明,在两方的数字交易场景中,没有一个可信的第三方机构帮助,交易的公平性很难保证。买卖双方在交易过程中总有先后顺序的问题,在这种情况下,买方可能在收到东西之后不给报酬,或者卖方在收到报酬之后不提供东西。然而，在比特币、区块链技术出现以后,公平交换可以在无须依赖可信第三方机构的方式下完成。</p>
<p>区块链技术在数据管理中可以作为访问控制的中间层,实现数据的安全存储和集体维护,包括债权、股权、版权等数据,它可以降低社会活动过程中的信任成本与审计成本。将区块链运用到数据共享中不仅可以解决过度依赖中心化机构的问题,而且能够实现用户对数据所有权的有效控制。然而,在将其直接用在数据共享场景中时仍然存在诸多问题。首先是区块链中用户的隐私保护问题,区块链中的交易数据是完全公开的,用户可以通过输入地址及输出地址之间的映射关系来溯源到相应的用户的身份隐私。因此,区块链虽然可以生成无数个公钥,无需个人身份证明,但这些措施依然无法达到匿名的标准.例如,比特币作为去中心化数字加密货币,没有中心化的身份认证管理机构,曾一度被认为是一种匿名货币。然而,已有大量研究表明,通过社会工程学技术,可以跟踪到比特币钱包的物理地址(如 IP 地址),再通过大数据分析的方式,可以将用户交易的比特币地址和具体身份信息关联起来,这显然对个人隐私构成了巨大的威胁。</p>
<p>此外,在传统的数据共享方案中,由第三方的服务提供商来为数据的共享交易提供保障,包括对数据的有效性进行验证。然而在区块链去中心化的架构模式中,如何保障在共享数据过程中的公平性问题是基于区块链的数据共享方案中需要重点解决的问题之一.即数据提供者提供有效数据之后能够获得应有的报酬,以及数据使用者在支付费用之后应获得有效数据。</p>
<h4 id="基于零知识证明的数据公平交换">基于零知识证明的数据公平交换</h4>
<p>如图 11.6 所示,基于区块链的数据交换模型中主要包含两种角色。<br>
<img src="/img/blockchain_sec/11_6.png" alt=""></p>
<p>(1)数据拥有者:数据拥有者存储有价值的数据信息,该数据可以以有偿的方式发<br>
送给对方进行数据的使用和分析。<br>
(2)数据请求者:数据请求者没有数据,想通过购买的方式来获取有价值的数据。<br>
在介绍基于区块链的数据交换流程前,首先来思考一个例子。</p>
<p>Alice 是一个对数学有着极大兴趣爱好的人，有一天一道数学难题难倒了她,思考很久之后没有答案,于是想求助其他数学高手。她把这道题公布在网上,并提供一定的奖励作为报酬。Bob此时看到了这道题并解出了答案，他想把这个答案告诉 Alice,但是这里有一个问题:Alice 想要 Bob 先告诉地答案,这样她能验证答案是否正确,再把奖励给Bob。而对于 Bob,他担心 Alice 拿到答案之后不给他奖励。</p>
<p>以上是非常经典的公平性交换问题,任何一方都不会主动在对方没有给自己想易东西之前,交出自己的东西。为了解决这个问题,本节将学习如何在区块链中利用零知识证明协议来解决数据公平交换问题。</p>
<p>在上面的例子中,假设 Bob 解出的那道数学难题的答案为a ，这时,Bob 产生一个对称密钥k,将答案a 用对称加密方案加密得到$e=E(a)_k$，然后用 SHA-256 哈希函数对密钥k进行处理得到$s=SHA256(k)$，这样 Bob 将(e,s)发送给 Alice,同时发送一个零知证明$\pi$,该证明表明 e是答案a 在密钥k下的加密数据且密的哈希值等于s,即$\pi=ZKP\{(a,k)|e=E(a)_k \land s=SHA256(k) \land 1=Vry(a)\}$</p>
<p>式(11.3)表示在(a,k)未知的情况下,可以验证后面的 3 个式子$e=E(a)_k,s=SHA256(k)和1=Vry(a)$ 同时成立。其中,Vry(a)函数是验证答案的正确性。Alice到$\pi$之后对其进行验证,如果符合条件则发送一笔交易在区块链中,该交易中明确 Bob获得该笔奖励的条件是提供一个满足哈希值等于 s的密钥k。显然，只有 Bob 在解出案给出该k值,这样他将 值通过交易的形式发送给区块链。为了防止其他用户拿着Bob 发送的k 值提前去兑换奖励(例如,通过提高交易费来使得其发送的交易提前确认)可以采用数字签名的方式,即 Alice 与 Bob 达成链下的协商,并在交易中明确只接收 Bob有效签名的交易才能兑换奖励,这样即可完成一个简单的数据交换过程。</p>
<p>虽然这种数据交换方案在理论上可行,但是仍然存在潜在的风险，主要的问题在于生成零知识证明过程需要一些公共参数字符串(CRS),在以上的过程中,没有可信第三方,CRS 是由 Alice(数据买方)来生成的。但是,如果 Alice 在恶意或贪婪的情况下,通过精心设计,生成不安全的 CRS,使得在零知识证明$\pi$中会泄露(a,k)的一些信息,这对于方案的安全性是非常致命的。</p>
<h4 id="基于门电路验证的数据公平交换">基于门电路验证的数据公平交换</h4>
<p>为了实现基于区块链的数据共享,还存在另一种基于 PoM(Proo-of-Misbehavior)的方案,总体过程;Alice和 Bob 首先达成线下的承诺,约定验证数据$x$有效性的函数$\phi(x)$,如果$\phi(x)=1$则数据有效,否则数据无效。为了防止 Bob 拿到数据后不给报酬Alice首先给 Bob 的是用对称加密方式加密过的数据,这样需要在 Bo 拿到解密密后才能解密。为了交付解密密钥,需要 Bob 在交易中锁定一定金额的钱作为押金,Alice 在锁定期内将密钥公布在区块链中,因为只有 Bob 有对应的密文数据因此即使其他人拿到密钥也无法解密。如果 Bob 在拿到密钥对数据进行解密后发现, 与之前承诺的数据不一致,则 Bob 只需要上传不一致的数据作为证明,区块链上的节点对其进行验证,如果发现 Bob 上传的证明是有效的,则对 Alice 进行一定的惩罚。PoM 的核心思想是为了检查一份非常大的数据是否有效,只需要检测其中的一个小数据样本是否不符合预期,找出不符合预期的数据样本上传到区块链中,不仅可以减少区块链中存储数据的大小,而且书点的验证过程也会非常有效。为了实现这一目的,需要用到默克尔树、电路(Circuit)知识。默克尔树在第3章中进行过介绍,本章主要介绍电路知识。</p>
<p>电路$\phi(x)$指的是一个有向无环图,其初始节点来自集合 X的值,中间的每个节点代表一个门(Gate),门在数字电路中实现的是基本逻辑运算(与、或、非),因此最基本的逻辑门包含与门、或门、非门,假设把门所能进行的操作集合用符号$\rho=\{AND,NOT,OR\}$表示，$OP∈\rho$,则$OP:X^l→X$ 定义:将$X^l$ 的值作为输入，执行运算指令OP,得到输出X并作为输入结果来进行下一个门的运算。</p>
<p><img src="/img/blockchain_sec/11_7.png" alt=""></p>
<p>如图11.7所示,假设 OP 为与门、或门的情况下,其输入与输出的对应关系可以用表 11.1表示。</p>
<p><img src="/img/blockchain_sec/11_8.png" alt=""></p>
<p>在计算机中,任何确定性的程序都可以用布尔电路表示。同样地,数据验证函数$\phi(x)$也可以被表示为由许多基础门电路组成的运算集合。因此,对数据$x$的有效性验证可以通过对不同门电路单元的验证来进行。</p>
<p>假设把输入数据x 分成由不同输入片段组成的集合$x=\{x_1,x_2,…\}$,此外把组成$\phi(x)$的每个门电路表示如下:$\phi_i=\{i,OP,I_i)$, 是该门电路的唯一标识,$I_i$是该门电路的输入。值得注意的是,第j层门电路的输入是第j-1 的输出。同样地，$\phi(x)$的运算电路由不同的基础门电路组成:$\phi=\{\phi_1,\phi_2,…,\phi_m\}$。基于 PoM 的数据交换流程如图11.8 所示。</p>
<p><img src="/img/blockchain_sec/11_9.png" alt=""></p>
<p>为了减少区块链智能合约中的计算量及数据量,对数据工的验证过程,即$\phi(x)=1$不以在智能合约上进行,而是由 Alice 和 Bob 两人共同完成,智能合约作为仲裁者角色只需要验证其中的一小部分数据内容是否准确。PoM 中将数据分皮小的片段,将片段作力覆发速某览尔树,树的服书点值保存在区块链中,同时,每个子节点的验证雨数同节;保存在区块链中。为了保证 Bob在收到数据后,不会故意地声称数据无院树的会对 Bob在POM 中提供的证据的输入有效性进行验证,这也是酒过默克尔概:实观的,主要分为3部分:链下承诺达成、链上承诺签订及定金存储、密钥公布及易黎验证。</p>
<h5 id="链下承诺达成">链下承诺达成</h5>
<p>数据拥有者、数据使用者为了实现数据 $x=\{x_1,x_2,…,x_n\}$交换,首先在线下达成承诺，约定数据有效性验证函数$\phi(x)$及对应的门电路 $\phi=\{\phi_1,\phi_2,…,\phi_m\}$,数据的价格$\gamma$,其中 $\phi_i=\{i,OP,I_i)$。Alice 按照默克尔树生成方式,对$x$和$\phi$ 进行计算,分别得根节点值 $root(Mtree(x))$和 $root(Mtree(\phi))$。</p>
<p>Alice 基于对称加密算法对数据x 进行加密,加密后的密文数据表示为$x=E(x)$,加密密钥为 key,Alice 将密文数据利用安全通道发送给 Bob。</p>
<h5 id="链上承诺签订及定金存储">链上承诺签订及定金存储</h5>
<p>Alice 将 $root(Mtree(x))$、$root(Mtree(/phi))$以及加密密 $key$ 的哈希值(即 $SHA256(key)$作为承诺$c=\{root(Mtree(x)),root(Mtree(\phi)),SHA256( key)\}$,通过智能合约写入区块链中,承诺c中的两个根节点值用来对 $Alice$ 发送数据的有效性进行验证$SHA256(key)$则是为了验证 $Alice$ 公布的 $key$ 值是否正确。假设将数据$x$ 分成$8$段($n=2^l)$,则构建的门电路默克尔树结构如图 11.9 所示,$x=(x_1,x_2,…,x_8),h=root(Mtree(x))$,第一层的叶节点是x片段值,第二层电路以叶节点作为输入并进行哈希运算,以此作为第三层的输入值。$Alice$ 会用加密密$ key $对每个叶节点数据做加密运算,得到密文值即$z_i=E(x_i,key)$。</p>
<p><img src="/img/blockchain_sec/11_10.png" alt=""></p>
<p>为了保证 Alice 诚实地按照正确的方式完成数据交换过程,Alice 需要在智能合约锁定一笔押金作为存款,该存款在交易完成之前是不能被 Alice 取走的，如果 Bob 提交有效的证据证明 Alice 有恶意的行为,则该存款将被合约发送给 Bob 的地址。同样地,为了保证 Bob 诚实遵守协议,Bob 也被要求存储一定的押金。两方的押金都有一定的存储时间,即在该时间内，即使所有者有对应的私钥也无法将押金取走,区块链中的这种“押金惩罚”方式可以极大地减少恶意者不遵守约定的行为。</p>
<h5 id="密钥公布及数据验证">密钥公布及数据验证</h5>
<p>Alice 和 Bob 完成上述步骤后,Alice 依据 Bob 存储的交易是否被区块链确认来决定是否公布解密密钥 key 值。在步骤 1 中,key 的哈希值被存储在区块链中,这样 Alice必须公布正确的 key 值,使得其哈希与承诺的值一致。Bob 在区块链中查看到 Alice 公布的key 值后,可以用其解密本地的加密数据 E()。在数据验证过程中,如果 Bob 发现收到的数据不一致，此时 Bob 只需要公布不一致的数据，以及对应的验证函数 0,将其发送给智能合约。合约会首先判断 Bob 提供的输入数据是不是 Alice 当初承诺过的数据,这通过提供默克尔树的路径值以及相应的原始承诺值,合约计算得到的值是否与$root(Mtree(\phi))$相等得出 Bob 是否提供有效的输入数据。然后,通过合约利用公布的key 值以及 Bob 提供的输入数据 $z_i$;来验证 Alice 是否提供了无效数据。</p>
<h3 id="区块链与物联网">区块链与物联网</h3>
<h4 id="应用背景-3">应用背景</h4>
<p>“物联网”一词取源于 Ashton 在 1999 年提出的概念,从广义上讲,物联网是指具有传感器的嵌人式设备通过专用或公用网络互连。连接建立之后,设备之间将通过网络协同工作以及共享信息。这些设备从简单的可穿戴设备到大型工业控制机器,覆盖多项核心产业,包括车联网、智能家居、智慧城市等。这些产业将影响人类生活和社会发展的各万面。作为网络技术和智能控制系统的深度集成应用,物联网技术的成熟度是衡量国家[业和科技实力的重要标志,是未来网络产业、智能控制产业竞争的制高点。据统计,4020年,全球通过网络相连的物品超过 500 亿个，总投资也突破 2.3 万亿元。我国物联网产业规模达到2万亿元,人均持有 4个以上的物联网设备,仅物联网传感器产业规模就达到1000 亿元。</p>
<p>现有中心化模型下的物联网架构主要存在以下 5方面问题。</p>
<p>(1) 单点故障问题:单点故障指的是系统中部分服务器一旦失效,会让整个系统无法运行,造成对外服务的停止。如在上述美国的域名服务器瘫痪中,黑客就是利用 DDS式拒绝服务攻击，对域名服务器管理机构 Dynamic Network Service 所使用的服务攻击造成该服务器无法对外提供服务。<br>
2)数据使用的非透明性:在传统的物联网数据管理中,用户产生的数据通常由第三方机构进行保管,这些数据被谁使用或者被用在什么场景中,用户都无法得知,即用户对自己数据的使用缺乏有效的管理,一般第三方机构也不会对用户公开数据的用途,因此对数据的管理缺乏一定的透明性。<br>
(3)数据的安全性威胁;数据在被收集存储在第三方服务器以后，由于外部黑客攻击或者内部人员的监守自盗行为,存在数据被篡改和删除的风险,对数据的安全性造成重的威胁。<br>
(4)数据的隐私泄露;物联网应用隐私泄露风险主要来源于云端及终端。一方面云端服务平台可能遭受外部攻击、内部泄密或云服务用户弱密码认证等原因,均有可能导致用户敏感数据泄露。另一方面,设备与设备之间也存在数据泄露渠道,在同一网段或相邻网段的设备可能查看到其他设备的信息,如屋主名字、精确的地理位置信息,甚至消费者购买的物品等。<br>
(5)性能瓶颈: 随着物联网设备的不断增多,中心化的物联网架构很难满足大规模设备的并发服务请求,在有的物联网应用场景中,如车联网,对实时性要求非常高,如何满足在实时性前提下,解决大规模设备的并发访问是物联网应用中的关键问题。</p>
<p>总体而言,物联网安全问题比传统的网络安全问题更加复杂,影响物联网安全的因素众多,而且内部组网结构复杂、操作系统繁多,其安全威胁的来源可能各式各样,单个设备的不安全就有可能导致整个系统出现安全问题。下面将从基于区块链的分布式物联网框架开始,逐步分析如何利用区块链技术来应对上述问题。</p>
<h4 id="基于区块链的分布式物联网框架">基于区块链的分布式物联网框架</h4>
<p>基于区块链技术可以构建去中心化的物联网架构,如图 11.10 所示,各种与物联网相关的设备、网关、通信基站等都可以通过区块链网络有效连接起来。在该架构模式下,物联网设备通过区块链节点(例如边缘计算节点)接入区块链网络,设备与设备之间的通信过程可以通过交易的形式写入区块链中,做到安全的数据审计。同时,通过密码学技术，可以在区块链智能合约中进行安全的身份认证和访问控制。</p>
<p><img src="/img/blockchain_sec/11_11.png" alt=""></p>
<p>基于区块链的物联网架构主要包括 5 方面:共识机制、区块链节点智能合约、数据存储以及加密算法。</p>
<h5 id="共识机制">共识机制</h5>
<p>在第 4 章定义中,共识协议是指多个不同节点达成一致意见的过程,由于作为区块链共识节点的物联网设备容易遭受外部攻击,导致故障或者离线状态,因此共识协议需要具备较高的容错能力,共识协议的选择与具体的物联网应用场景相关。在物联网应用场景中,区块链可以被分为公有链和私有链,常用的公有链共识算法主要包括工作量证明(PoW)、权益证明(PoS)、活动证明(PoW 与 PoS 的结合),常用的私有链共识算法主要包PBFT、FBFT。在公有链中,共识协议产生的新区块需要在全网进行传播,因此其实际的块产生效率比较低相比私有链需要耗费更多的时间。私有链虽然在块产生效率上要优于公有链,但是其存在严重的可扩展性问题,这是由于其采用的投票机制会造成较大的网络开销,通常只能扩展到几百个节点的规模。</p>
<h5 id="区块链节点-2">区块链节点</h5>
<p>区块链节点是维护分布式账本的网络节点,角色与比特币中的矿工相似,可以参与到共识协议的区块链交易确认、块确认等事务中。每个区块链节点都配有一个私钥,公钥是公开信息。在私有链中,区块链节点的公钥是经过认证的,即需要有身份认证机构对区块链节点进行有效认证才可以加入区块链网络。作为物联网中的区块链节点，由于底层节点存在大量的并发式数据请求,因此该节点需要有较强的计算资源和通信资源，因此通常选取具有较强物理硬件条件的网络设备作为区块链节点,如上层核心交换(出口)设备。</p>
<p>在基于区块链网络去中心化网络体系架构中,可以实现对物联网节点安全访问,进行分布式安全管理。它通过设计适用于海量异构物联网设备的区块链网络系统框架,将传感器、路由器和边缘计算设备融合成一个物联区块网络。物联网节点之间的通信方式基于安装在对应节点上的区块链客户端(例如,钱包),或者开发相应的应用程序接口,实现<br>
点对点的网络通信。</p>
<p>值得注意的是,在区块链网络架构中,具有有限硬件资源的海量物联网设备作为轻量级区块链客户端进行接人,如图 11.10 所示,这些终端设备不存储分布式账本,只通过连接上层的区块链节点来上传交易和下载相关信息，例如比特币中的简化支付验证(SPV)节点,它不存储所有分布式账本的完整副本。另外,对于实时性要求不高的场景,为了降低对网络通信带宽的依赖,与底层物联网设备相连的区块链节点会汇总一段时间内的交易请求,并周期性地发送到区块链网络。</p>
<h5 id="智能合约-2">智能合约</h5>
<p>基于区块链的智能合约定义了一套事务处理和事务保存机制,以及一个完备的自动状态机,能够为物联网设备的安全访问控制和数据管理提供有效支撑。利用智能合约支持和处理物联网业务的事务执行,将相应的输入信息写入智能合约后,合约中相应的资源被更新,触发状态机运行并对输入的有效性进行判断,如果满足条件,智能合约可以选择相应的合约动作自动执行,完成对应的状态更新。</p>
<p>物联网应用业务承载包括互联网、移动通信网、WLAN 等多种类型的承载网络,物联网设备加入和退出与业务流程相绑定,如何保证节点自身身份正确及节点访问者身份正确可以通过智能合约来完成。此外,为了完成对新加入的物联网设备身份的正确性和真实性的验证,智能合约会依据设备的属性及对应的有效输入来验证新节点身份的有效性。当有半数以上的节点通过审核时,系统自动认可该节点被物联网接受,相应的信息被记入区块链账本,做到安全的系统审计。智能合约由于具有较高的灵活性,不仅可以用来做用户或设备的访问控制,还能够实现设备的安全管理以及交易支付功能。</p>
<p>具体而言,在智能合约中可以设定详细的执行规则、惩罚和触发条件。每个事务必须在执行之前满足协定的条件,并且所有的事务都被写入区块链。智能合约可以强制执行访问限制,如谁(物联网设备)可以进入事务。每个事务都与物联网节点的钱包参数签名，钱包应该存储在硬件安全容器中。在区块链上的事务记录确保了事务的不可抵赖性(例如,当一个服务提供者的物联网设备与一个消费者的物联网设备进行交易时)。</p>
<h5 id="数据存储">数据存储</h5>
<p>在物联网应用中,数据的通信和交互是非常频繁的，除了简单的交易数据外,还会有大量的数据请求,为了既实现数据的完整性验证,又可以降低存储和通信开销,通常情况下,元数据信息(包括哈希值、描述等)保存在链上(On-Chain),完整的数据在链下(OffChain)进行存储。链下的存储方式主要有 4 种:本地(Local)存储、云(Cloud)存储、分布式哈希表(Distributed Hash Tables)、星际文件系统(IPFS)。</p>
<h5 id="加密算法">加密算法</h5>
<p>物联网设备由于受到硬件、通信环境等限制,如果在基于区块链的物联网场景下单纯采用非对称加密算法往往不太合适,会使得系统的运行效率受到非常大的影响。这是因为非对称加密算法往往涉及较为复杂的计算,如指数运算、模运算等,尤其如果在智能合约中需要执行数据的加解密运算,全网的区块链节点都需要执行此类的操作,在实时性要求较高的场景下是无法满足条件的。因此,为了保持效率、安全性之间的平衡,通常会采用混合加密的方法。具体来说,原始数据的加密方法采用对称加密方式,然后利用非对称加密方法将对称加密的密钥进行加密。</p>
<h4 id="基于区块链的物联网安全漏洞挖掘">基于区块链的物联网安全漏洞挖掘</h4>
<p>物联网涉及的应用场景非常广泛,本节将以基于区块链的物联网安全漏洞挖掘为例,说明区块链技术如何强化物联网应用中的安全性。在海量的物联网设备中,一个突出的问题就是设备固件中存在安全缺陷(或安全漏洞)和恶意代码,往往对上层业务运行带来严重的危害。另外,物联网软件测试通常依赖于物联网硬件设备,因此,大多数的独立测试人员没有合适的物联网软件测试环境,很难进行物联网软件的安全性测试。因此,如何实现对物联网应用软件的安全审计,就成为有效地检测物联网应用安全问题的关键手段。</p>
<p>由于物联网软件,特别是固件部分,一旦在工作现场出现问题,很难对其进行及时的修复,甚至可能引来灾难性的后果。因此,物联网开发者希望自己新开发的软件可以得到第三方的测试和评估。为了应对物联网应用中的软件漏洞问题,区块链技术可以从两方面对其进行强化:基于众包模式的物联网软件代码联合测试、安全审计。</p>
<p>(1)利用区块链智能合约,来实现对物联网软件的众包测试,可以使得第三方软件测试者联合起来,在区块链环境下测试物联网软件,并且把结果直接发布到区块链上。根据这些公开可信的测试结果,软件开发者及其开发的软件安全水平就可以得到较为公平准的评价,从而有利于改进软件,提高物联网软件水平。</p>
<p>(2)为了实现审计功能,为物联网软件模块设计安全的区块链应用程序接口,当待验证的物联网软件模块以智能合约接口的形式存在区块链上后,第三方验证者可以通过智聚合约实现对该接口的调用和测试。测试结果在区块链上进行公开评价,进而发现高效全的物联网软件。因此,设计统一编程接口和审计机制可以提高物联网软件的安全性。</p>
<p>基于区块链的物联网漏洞检测主要包含以下 4 个参与角色。</p>
<p>(1)物联网软硬件生产厂商:简称生产者,主要是指物联网设备中运行的软件系统<br>
以及上层的业务管理系统的所有者。<br>
(2)物联网使用者:简称使用者,指从生产者手中购买相应的系统或者设备进行<br>
用的用户。(3)众包测试工作者:简称检测者,主要指具备一定软件专业技能的工作者,可以从软件系统和设备中找到恶意漏洞。一旦找到准确的软件漏洞并被合约验证通过,这些检测者可以从区块链中获取到奖励。<br>
(4) 区块链节点:基于物联网节点构建的区块链网络,支持图灵完备的智能合约。</p>
<p>基于区块链的物联网漏洞检测主要利用众包的模式,让具有专业技能的大众来参与到漏洞的检测当中,从物联网系统本身的安全性优化以及检测者可以获得一定的劳动报酬来说,这是一种双赢的模式。同时,检测的漏洞结果通过分布式的区块链节点在智能合约上完成验证,无须物联网软硬件生产厂商介人,同时工作者也能实时地拿到相应的奖励。图 11.11 所示的系统架构是基于区块链的物联网软件代码众包测试系统功能模块包括三大功能模块:众包任务管理模块、底层区块链模块、物联网接口模块。在基于区块链的众包技术基础之上,引入了子任务执行器,通过规范接口来连接物联网设备接口,借助众包测试工作者的力量来完成对设备的功能性和安全性的测试,同时在智能合约中设计有效的激励机制来保证双方之间的公平性。具体地,物联网漏洞检测过程涉及的智能合约包括用户注册合约(User Register Contract,URC)、用户汇总合约(User SummaryContract,USC)、漏洞检测任务合约(Vulnerability Detection Contract,VDC)。</p>
<p><img src="/img/blockchain_sec/11_12.png" alt=""></p>
<h5 id="用户注册合约">用户注册合约</h5>
<p>为了保证物联网设备厂商及漏洞检测者之间的公平性,双方首先需要进行注册,这是在URC 中实现的。合约注册以后会给每个用户分配一个区块链地址,相应的信息还包括对应用户类型、用户描述信息等。用户类型主要分为两种，任务请求者及漏洞检测者.在区块链交易中,无需用户的真实身份信息。同样地,在该应用场景下,用户注册时可以选择是否公开身份信息。如果为了提高影响力或可信度可选择公开身份信息，即在 URC中写入经过认证的数字签名信息，匿名注册的用户则提供唯一的标识作为其用户名.URC 会过滤重复注册的用户名。</p>
<h5 id="用户汇总合约">用户汇总合约</h5>
<p>用户汇总合约主要是用来描述每个漏洞检测者的详细信息。在漏洞检测过程中,由千技术能力、水平不一样,合约会从 4 个维度对漏洞检测者进行综合评价,包括简介信息信誉值、漏洞检测任务完成情况、活跃度。简介信息中描述用户的基本信息,包括从事的领域、所擅长的技能等,该信息在用户注册过程时初始化,如果选择非匿名注册,简介信息中还会包含可认证的签名信息。对于漏洞检测者类型用户来说,信誉值代表漏洞检测者在任务过程中产生的信誉值,用户的信誉值随着交易的发生不断变化,高信誉值反映了用户在漏洞检测任务时表现较好。有些漏洞检测任务需要具备较高的技能,因此发布者会限定所能参与漏洞检测任务的最低信誉值。漏洞检测任务完成情况描述漏洞检测者任务的总体完成情况，包括参与/发布任务数、正确检测任务数等。活跃度描述用户的参与活跃程度,描述漏洞检测者参加任务数、按时提交检测结果数等信息,代表了漏洞检测者努力程度。用户在初始注册时,USC 中的信誉度、参与任务数等初始值为 0,用户需要通过不断地接收任务、发布任务、挖矿等操作来提升自己的额度值。通过建立多维度的漏洞检测者评价体系，减少基于主观判断的选择,即使在有自私、恶意的工作者情况下,也能够保证平台的整体运行良好。</p>
<h5 id="漏洞检测任务合约">漏洞检测任务合约</h5>
<p>任务请求者将漏洞检测任务发布到合约之后,漏洞检测者可以权衡是否参与到该检测任务之中,为了保证检测任务完成的质量,合约会限定漏洞检测者同一时刻最多能接收任务的数量,漏洞检测者如果选择参与,则需要在合约中达成协议(Smart ContractAgreement),约定检测任务完成的条件、时间、奖金以及交易费。在 VDC中,任务发布者以奖金作为输入,漏洞检测者以一定数字货币作为保证金。区块链智能合约具有防止“双重支付”的能力,保证了任务发布者不能同时将一笔数字货币作为输入同时与多个漏洞检测者签订合约。为了减少在区块链平台存储数据的大小,需要为 VDC 分配了一段链外存储空间,例如 IPFS。通过 VDC 地址可以指向外部数据库的一段数据,用户可以将任务的摘要信息放在区块链平台,详细信息放在链外进行存储。</p>
<p>基于上述 3 种合约,漏洞检测者与系统所有者可以在智能合约中达成共识来实现对w洞的安全检测。图11.12 详细描述基于区块链的物联网漏洞检测主要流程,主要包括4个过程:物联网漏洞检测任务发布、物联网漏洞检测任务执行、结果评估及奖励分配和自易化漏洞通知及修复。总体来说,首先由物联网设备及系统所有者出于安全考虑的需求，在区块链中发布一个智能合约任务,该任务中定义了需要挖掘的需洞类型、时间期限及奖励等。漏洞检测者通过对相应的设备及系统进行安全性分析并取得一份检测报告。通过智能合约提交该漏洞检测报告,如果检测结果有效并被记录于区块链中,则可在合约中动被分配奖励。同时,合约还可以将检测结果返回给对应的用户。</p>
<p><img src="/img/blockchain_sec/11_13.png" alt=""></p>
<p>1)物联网漏洞检测任务发布<br>
系统所有者通过 VDC 发布漏洞检测任务,在发布的任务$Task_i$中,如式(11.4)所示主要包括几方面内容:所有者$Uid_i$、数字签名$Sign_i$;奖励 $r_i$检测系统$Sys_i$及系统版本$Ver_i$、任务完成时间$ T_i$;最低要求信誉值 $v_i$。所有者信息是在 URC 中经过注册的用户信息,注册的用户会有三部分信息:公钥和私钥对$\{pk_{Uid},sk_{Uid}\}$以及区块链地址 $addr_{Uid}$,同时包含所有者有效的签名信息,防止发布恶意的检测任务。</p>
<p>$Sign_i=Sign(H(Uid_i||r_i||Sys_i||Ver_i||T_i||v_i))_{sk_U}$</p>
<p>式中,任务的奖励r;需要满足两个条件:首先,该奖励在任务完成之前无法被系统所有者取走,即使所有者拥有有效的私钥信息也无法从合约中取走奖励,这可以有效防止恶意的系统所有者在发布任务之后,让检测者接收检测任务后撤回奖励,由于没有第三方机构进行追责处理,会导致检测者利益受损。此外,由于有些任务需要检测者安装相应的软件系统等,会占用检测者的硬件资源,因此奖励的数额需要超过检测者从事该任务的成本，这样才会吸引足够多的检测者参与到任务中。为了获得较好的检测结果,所有者会在合约中设定一些限制条件来选择优质的检测者,包括检测者的信誉值、参与任务数等。最低要求信誉值$v_i$是任务中可选设置项，即在有的检测任务中由于相对更加复杂和困难,会要求检测者具备较高的信誉值,因此要求检测者累积的信誉值满足 $v\geq v_i$。</p>
<p>2)物联网漏洞检测任务执行<br>
检测任务发布之后,检测者可选择与自身技能相匹配的检测任务。VDC 首先会确认用户是否满足相应的条件,如果符合则需要检测者$Uid_j$,将身份信息记录到任务当中,约束了检测者在任务结束之前需要上传检测结果。为了防止检测者随意地上传检测结果需要检测者在接收任务时存储一定的数字货币在合约中,该数字货币同样地在任务未结束之前无法被取走,只有等到任务评估结束之后,依据评估结果来进行分配。</p>
<p>检测者在完成该任务后需要上传检测结果报告$Rep_i$,为了防止其他区块链用户抄袭该报告,检测者将报告进行哈肴 $h_{Rep_i}=H(Rep_i)$,并将$h_{Rep_i}$通过交易记录在区块链中,报告明文可通过对称加密方式$C_{Rep_i}=Enc(Rep_i)$,保存在链外的存储空间。</p>
<p>3)结果评估及奖励分配</p>
<p>检测者在提交完检测报告后可开始进入任务评估阶段。检测者和使用者都可触发结里的评估,评估过程主要分为奖励发放以及对检测者的信誉评估。如果在约定的时间期限$T_i$内,检测者仍然没有提交检测报告,则使用者将其锁定的奖金在扣除一定的交易费之后返还至原始账户。相反在约定的时间期限内,检测者已提交工作结果,通过生产者对检测结果报告进行分析,确认该检测报告有效,则可在对应的检测报告 $h_{Rep_i}$ 附上签名信息,$Sign_{Rep_i} =Sign(h_{Rep_i})_{Uid_c}$，并给该报告进行打分,用来对检测者的信誉值进行更新。</p>
<p>检测者根据有效的检测结果$Sign_{Rep_i}$去解锁 VDC 锁定的奖励,奖励在扣除交易费之后会转入检测者所对应的地址账户,同时,也会对检测者产生的交易费进行清算。如果检测者对任务报告结果存在疑问,则可在约定的时间内,发起第三方项目评估请求。第三方评估通过选择生产者和检测者都信任的第三方评估机构进行确认,评估过程需要一定的奖励来激励第三方机构进行有效的评估,作为可信第三方的评估报酬。在交易结算完成之后,检测者依据过程和结果对检测者的工作完成情况进行信誉度评价,以作为检测者竞标下一任务的凭据。</p>
<p>4)自动化漏洞通知及修复<br>
检测报告经过确认之后,可通过智能合约自动地将漏洞信息报告给物联网系统/设备的使用者,该反馈的过程同样会伴随有生产者发布的修改建议及相应的版本更新。通过公开的区块链平台，使用者都可以获取对应系统$Sys_i$及版本$Ver_i$的漏洞检测情况,生产者可以通过交易发布对应系统或版本的漏洞修复版本链外下载地址。</p>
<p>通过上述 4 个步骤,可以完成基于区块链的物联网漏洞检测过程,在该过程中多个参与方可以借助智能合约来协调完成任务的发布、检测、结果评估及漏洞自动化修复。</p>
]]></content>
      <categories>
        <category>区块链</category>
      </categories>
      <tags>
        <tag>学习记录</tag>
        <tag>区块链</tag>
        <tag>网络安全</tag>
      </tags>
  </entry>
  <entry>
    <title>《启发》_罗振宇</title>
    <url>/posts/64e2ab84.html</url>
    <content><![CDATA[<blockquote>
<p><strong>批判性看待，要有自己的思考</strong>！</p>
</blockquote>
<blockquote>
<p>我把所有的内容形式分成三种：故事、观点、启发。“故事”，是把别人邀请进自己布置的世界里；“观点&quot;，是把自己的想法放进别人的世界里。这都是单向的互动过程。而“启发”则要复杂得多，它至少包含了四个部分：</p>
<ol>
<li>第一，我自己有一个挑战性问题；</li>
<li>第二，我在其他领域偶然遇到了一个新信息；</li>
<li>第三，这个新信息让我的问题有了一个新答案；</li>
<li>第四，这个新答案，还能扩展成一个新思路，可以应用到更广泛的领域。</li>
</ol>
<p>这四个心理过程同时发生了，才能称之为一个“启发”。“故事&quot;和“观点”也许另有所图。唯有“启发&quot;，指向自己的成长。</p>
</blockquote>
<h2 id="A">A</h2>
<h3 id="爱好">爱好</h3>
<p>人为什么要有爱好？有一个解释，说爱好最大的用处，是你可以通过它培养自制力。</p>
<p><strong>爱好，不是你生命之外的东西，而是你费了很大力气才变成的你生命之内的东西。爱好，不会给你带来很多次愉悦，而会让你投入很多次自我约束。</strong></p>
<h3 id="爱">爱</h3>
<p>有人说，<strong>如果你真的爱一个人，你的表现就是八个字，“很有时间，不怕麻烦”。</strong> 真是让人拍案叫绝。</p>
<p>爱这个东西因为是主观心理状态，口说无凭，很难衡量。但是用时间和麻烦这两个维度，就能把它客观化。</p>
<p>你想，“时间&quot;的弹性非常大。我们经常说，“没时间，没时间&quot;，但扪心自问，我们真的是没有时间吗？对爱的人也没有吗？还有“麻烦&quot;，也几乎有无穷的伸缩性。对于陌生人，抬抬眼皮都嫌麻烦，但对自己心爱的孩子，则可以无微不至。</p>
<p>用这两样弹性很大的东西来衡量爱的程度，真是再合适不过了。除此之外，<strong>所谓“我为你付出这么多&quot;“我这么辛苦都是为了谁&quot;，都只是出于责任，而不是出于爱。</strong> 我们都可以拿“很有时间，不怕麻烦&quot;这个标准来衡量一下，我们到底有多爱我们身边的人，不管是父母、伴侣，还是孩子。</p>
<h3 id="爱自己">爱自己</h3>
<p>有这么一句话：<strong>“你怎么爱你自己，就是在教别人怎么爱你。</strong></p>
<p>你整天把自己收拾得干净利落，别人才会想方设法夸你好看或者帅气。你爱读书爱思考，别人才会送你书，或者认真对待你的见解。你爱美食，而且有精深的研究，别人才会请你吃美食，送你好食材。别人爱你的方式，是由你自己决定的。</p>
<p>仔细想想，这其实是一个很颠覆的观点。因为我们是在父爱、母爱里成长起来的。<strong>父母之爱的特点是，你缺什么，就给你补什么。而我们进入社会之后，情况就变了。在成人的世界里，自己没有的东西，别人也不会给。</strong> 即使环境充满了善意、资源、工具，甚至爱，也是如此。这些东西，其实都只是“自我的放大器&quot;。</p>
<p>所以你看，<strong>所谓的缺爱，其实就是我们对自己还不够好。</strong></p>
<h3 id="暗能力">暗能力</h3>
<p>著名学者吴伯凡老师讲过一个概念，叫“暗能力&quot;。这个概念，我越想越有意思。</p>
<p><strong>什么是暗能力？简单说就是，你做一件事，会培养出其他的能力，虽然这些能力眼下不能变现，但是也许未来有一天，你会凭借这些暗能力，找到新的业务和赛道。</strong></p>
<p>所以，你看，个人改行也好，企业转型也罢，其实不是表面上的“改&quot;和“转&quot;，而是把原先就已经具有的暗能力找了个新的业务场景落了地。比如说，阿里巴巴弄了个“双十一&quot;，那就需要应付“双十一&quot;那天巨大的流量，所以网络技术能力就变得很强。这是一个暗能力，因为过了这一天就不太用得上了。但是，过不了几年，阿里一想，这个能力我可以对外卖啊，这是一个新业务啊一．一这就是后来的阿里云。</p>
<p>“暗能力&quot;这个词，让我想到一句话，<strong>“所有的奇迹，其实都早有准备&quot;。</strong> 那么请问，你有什么“暗能力&quot;呢？</p>
<h2 id="B">B</h2>
<h3 id="被迫选择">被迫选择</h3>
<p>有位老师经常在网上写文章，为大家提供一些建议，比如该不该出国，该不该买房，该不该创业，怎么选工作，等等。</p>
<p>但是时间长了之后，他发现，道理翻来禮去就那些，答案也到处都能找到，大家为什么还是很焦虑呢？</p>
<p>他有一个洞察。他说，<strong>我们过去都误以为大家需要的是更好的道理。其实不是，大家只是恐惧选择，或者更准确地说，恐惧选择之后要承担的代价。</strong> 他们反复纠缠道理，其实不是想要理性分析，而是希望能有一股外力剥夺自己自由选择的权力，给自己下达不容置疑的指令。这样做有什么好处呢？这样做，就可以逃离“我不知道该怎么办&quot;这种状态，被迫选择之后就轻松了。</p>
<p>你看，<strong>都说自由是个好东西，但是自由也意昧着承担后果。这是一个过于沉重的负担，我们一般人其实是承受不起的。</strong></p>
<h3 id="本分">本分</h3>
<p>有位中学老师告诉我，他的班上有个学生，无心高考，门心思要搞自己的兴趣一一天文学。</p>
<p>按理说，学生的兴趣，老师要支持，可是放弃高考的风险又太大。他问我，作为这个学生的班主任，他应该采取什么态度呢？</p>
<p>我的回答可能有点出人意料。我说：“你得劝告他回到高考这条路上来，听不听是他自己的事。”老师说：“这可能没用，那个学生的态度很坚决过。”我说：<strong>“有用没用，并不是我们做事的基本原则。”</strong></p>
<p>为什么这么说？</p>
<ol>
<li>首先，一个真的要走自己道路的人，是不会因为他人的几句话就改变初衷的。</li>
<li>其次，作为一名老师、一个年长几岁的人，他必须把学生<strong>选择的风险如实告之</strong>，这是<strong>尽本分。</strong></li>
</ol>
<p><strong>任何人都不是他人的神，不能替他人做选择，但是诚实地给出自己的建议，大家各尽本分，就是最好的选择。</strong></p>
<h3 id="闭环">闭环</h3>
<p><strong>在念世界里，一个观点说出来了，这件事就完了。但是，在现实世界中，如果没有一个完整的闭环，就等于什么都没有做。</strong></p>
<h3 id="变数">变数</h3>
<p><strong>真正的领导力，不是制定规则，而是让最不守规则的人的破坏力变得最小。更进一步地说，是让他不守规则的特性发挥出最大的优势。</strong></p>
<h3 id="标准答案">标准答案</h3>
<p>在当前中国的社会环境里，你会发现有两类人是最焦虑的，一类是大学生，一类是初为父母的人。</p>
<p>一上大学，你会突然发现，学习好没有用了，你想有钱，想混得好，这些事和分数是没关系的。这算是第一次价值危机吧。而一旦有了孩子，就会迎来第二次价值危机。我们有一位深圳的用户老贺，他就跟我说，有了孩子之后，突然发现，人生幸福有很大一部分取决于孩子好不好，而这事和有钱没钱关系不大。</p>
<p><strong>两次危机的实质，说白了，就是标准答案突然没了。争强好胜未必能挣到钱，有钱未必能有家庭幸福。</strong></p>
<p>你可能会问怎么办？既然问题的实质就是标准答案没了，那就没有人知道该怎么办。要不怎么能说是难题，让大家如此焦虑呢？</p>
<h3 id="不确定">不确定</h3>
<p>很多人都说现在我们处在一个“不确定&quot;的时代。“不确定&quot;这三个字后面，其实藏了一座命运的分水岭。</p>
<p>有人遇事就会想，这件事不确定性太大，就算了吧。你看，人类的理性和预测能力在起作用了，但真实世界的故事往往是怎么发生的呢？比如说，一个人干了一件事，虽然事情本身没成，但是他认识了几个新朋友，了解到了一个新机会。他尝试了新机，也没成，但是掌握了一些新资源。他想用这些资源去干点什么，也不顺利，但是顺手掌握了一些新知识·看起来这个人很鲁莽，到处撞南墙，但每一次“撞&quot;，总有一些意外收获。这些意外收获最后让他拼出了一条路。</p>
<p>所以，<strong>“不确定时代”，就是用来吓唬那些高度理性、没有100 ％的把握就不行动的人的。而对于行动者来说，本来就不需要什么确定性一他们的成功是用意外收获拼起来的。</strong></p>
<h3 id="不孝">不孝</h3>
<p>“不孝有三，无后为大&quot;这句话，几乎尽人皆知。那么，请问，不孝有三，另外两个不孝是什么？我也是读赵冬梅老师的一本书，才看到了原始资料·</p>
<p>东汉赵岐在为《孟子》作注时是这么说的：“于礼有不孝者三事，谓阿意曲从，陷亲不义，一不孝也；家贫亲老，不为禄仕，二不孝也；不娶无子，绝先祖祀，三不孝也。&quot;</p>
<p>这句话的意思是，按照儒家礼法，下列三种行为是很不孝的：<strong>父母说什么是什么，不顾是非，一味顺从，让父母陷于不义，这是第一大不孝；父母都老了，家里很穷，可是不出去谋生活，也就是在家啃老，这是第二大不孝；第三大不孝才是没有后人。</strong></p>
<p>听到这套完整的解释，你会发现，中国古人关于不孝的定义，远比我们想象的更加通情达理。</p>
<h2 id="C">C</h2>
<h3 id="才华">才华</h3>
<p>我看到一句话，说：<strong>所谓的才华，其实就是基本功的溢出。</strong></p>
<p>说白了，<strong>才华这东西，不仅不独立存在，甚至也没有追求的必要。基本功一到，藏都藏不住，会溢出来的。</strong></p>
<p>你可以想一想，我们什么时候觉得一个人有才华？往往是他写出漂亮的文章，展现出亮眼的才艺时。但是，不用说，人家背后肯定是花了大量时间磨炼基本功的。大部分时候，这里面没有才华什么事，就是花了时间。你看，从外面能看到的让人羡慕的东西，换个角度理解，其实就是他内在修炼的结果。</p>
<p>这个句式，我还真看到不少。比如一个国家，其实没有什么文化输出，“<strong>所谓的文化输出，其实就是文化魅力的溢出</strong>”。再比如一个人，没有什么财商，“<strong>所谓的财商，其实就是一个人的认知能力在财富上的展现</strong>”。</p>
<h3 id="长期主义">长期主义</h3>
<p>很多人都感觉，得到 App 里面的《跟华杉学品牌营销， 30讲》这门课，不只是在讲品牌，更是在讲一种系统的企业观。</p>
<p>我看到一位用户对这套企业观的总结。他说，其实华杉教给我们的是看问题的两个视角。</p>
<p>第一个是成本视角，这是一个用来<strong>向外看</strong>的协作视角一一<strong>反复问自己，我所做的事情，是不是降低了交易的成本，让别人更容易与我达成协作</strong>；第二个是投资视角，这是一个用来向内看的成长视角一一<strong>也是反复问自己，我所做的事情，是不是沉淀进了我的品牌资产账户，从而可以有长期的复利效应。</strong></p>
<p>请注意，想要拥有这两个视角并不容易。为什么？因为这两个视角的背后其实是一种心智模式。就是<strong>不管我当下在做什么，我都考虑这件事的长期影响。很多人都在问，什么是长期主义？这就是长期主义。</strong></p>
<h3 id="敞口">敞口</h3>
<p><strong>职场里的领导该怎么判断新来的下属是不是靠谱？我听到一个方法，很简单，就是让他去干一件在时间上敞口的小事。</strong></p>
<p>小事，就是不太难，人人都会做的事；<strong>时间上敞口</strong>，就是没有硬性的时间要求。比如说，让他去研究一个公司或者一个项目，然后绝不主动去问他这件事的进度，看他的反应。如果他能在你<strong>预期的时间内给出结果，而且结果还不错</strong>，那这个人大体上就是<strong>靠谱</strong>的。</p>
<p>你想，结果不错，证明他有基本能力。但更重要的是他能在预期的时间内给反馈，就证明他能在任务和结果之间完成闭环。这在职场上是很重要的品质，仅此一点，就胜过了很多人。如果更进一步，他在反馈结果的时候，还能呈现出系统的方法，那这就是他的加分项了。</p>
<p>你看，这就是职场里判断一个人的大秘密：<strong>获得机会，全看小事，而不是大事。</strong></p>
<h3 id="称职">称职</h3>
<p>我说过，一个职场白领，尤其是管理者，是不是称职，就看他能不能随时随地搞清楚三个问题：<strong>第一</strong>，我的目标是什么？<strong>第二</strong>，我准备怎么来达成这个目标？<strong>第三</strong>，我需要找谁、让他给我什么支持？</p>
<p>有人听了，就觉得有点慌：要是搞不清楚该怎么办？这好办。第一，搞不清楚目标，就去找自己的领导聊。实在聊不清楚，就让领导给自己定一个目标。第二，搞不清楚方法，就去同事那里找，去同行那里找，去书本那里找。找来的方法不完全适用，没关系，先僵化地学，再根据效果去优化。第三，搞不清楚该找谁、让他给什么支持怎么办？刚才那两条，不就是找人、找支持吗？</p>
<p>所以，<strong>所谓工作能力强，不是什么都会干，而是每时每刻都能分清主次。不管大事小事，都能从目标到方法再到资源，按照这个次序去思考。</strong></p>
<h3 id="成熟">成熟</h3>
<p>有一次和朋友讨论，什么是一个人成熟的标准。朋友说，很简单，就是老话说的那两句，<strong>假话全不讲，真话不全讲。</strong></p>
<p>你别看这两句话很简单，其实它们包含了三层复杂的意思·</p>
<p>第一，能分清事情的真假，这就已经不简单了。很多人岁数挺大，但基本的是非还搞不清楚。所以，这是一个人智力成熟的标志·第二，假话全不讲，这意昧着一个人有底线，有持守，有担当，不过线，这是一个人在伦理、节操上成熟的标志。第三，真话不全讲，什么话该讲，什么话不该讲，这个分寸的拿捏是极难的。所以，这是一个人在情商上成熟的标志。</p>
<p><strong>假话全不讲，真话不全讲，有智商、有操守、有情商，如果再加上一点教养，这个人就可以说是成熟了。</strong></p>
<h3 id="吃苦">吃苦</h3>
<p>在网上看到一个关于“吃苦&quot;的新定义，很有意思。</p>
<p>一般的理解，吃苦就是受穷，或者是受累。但那是匮乏时代的概念。<strong>在丰裕社会，吃苦的本质变了。变成了什么？变成了长时间为了一件事情聚焦的能力。这意味着我们因为要长期聚焦一件事，将放弃娱乐生活，放弃无效社交，放弃一部分消费，甚至还要在这个过程中忍受不被理解和孤独。所以，这个时代的吃苦，本质上是一种自控能力。</strong></p>
<p>你看，吃苦，不再是一个阶层分割的概念，不再是因为贫富差异而不得不被动承受的一种状况。吃苦，真的成了突破阶层、维持阶层的一种主动的方法。如果你希望自己的孩子能吃苦，再也不意昧着要在物质生活上克扣他，而是意昧着你希望他能在一件事情上长期坚持，直到有所成就。</p>
<h2 id="D">D</h2>
<h3 id="打卡上班">打卡上班</h3>
<p>有个朋友对我讲，现在判断一家公司的管理水平是不是跟上了互联网时代，有一个标准，就是是否还在大面积地使用打卡机。</p>
<p>这个标准简单粗暴，但往往又很说明问题。我问为什么。他说，使用打卡机，说明公司用工资买断的是员工的工作时间。但是在移动互联网时代，最不可控的就是时间。每一个人的时间都被微博、微信、短视频、游戏切成了碎片。一个人只要有一部手机，你就基本没办法管理他的时间一一馳完全可以出工不出力。</p>
<p>更重要的是，<strong>打卡上班，说明这家公司的经营效率还建立在公司组织内部的协作上，这明显是背离时代趋势的。现在的趋势是，员工有越多的时间在和组织外的资源进行协作，公司的效率才越高。</strong></p>
<p>要做到这一点，对员工的时间管理就须放开，就必须放弃原有的规则体系。</p>
<h3 id="大脑">大脑</h3>
<p>有一个研究脑科学的朋友跟我说，<strong>大脑是人一生中变化最大的器官。你每经历一件事，大脑不仅在处理这件事，还要根据处理结果，改变大脑本身，加强这部分神经回路的发育。</strong></p>
<p>也就是说，你长期那么想问题，就真的只能那么想问题了一一大多数人是没有能力改变思维习惯的。而大脑发育的方式，就是不断地把你需要去想的事变成不需要去想的事，就相当于我们把电脑的软件固化为一个硬件，这样运行效率要高得多。比如骑自行车、游泳，刚开始都是要学的，一旦学会就不用去想了，那组动作就变成自动完成的了。理解了这一层，就知道最好的学习方法和行动方法是什么了。</p>
<p><strong>在学习上，就是要多掌握概念，那是被封装好的信息，可以大幅度提高学习效率。在行动上，就是要多培养习惯。</strong></p>
<h3 id="大学">大学</h3>
<p>在做哈佛商学院的一门课程时，我们一直在思考一个问题：大学为什么不死？</p>
<p>人类的各种组织形态，都非常容易解体，比如很少有一百年以上的公司；而到处都是几百年历史的大学，比如哈佛大学有将近四百年的历史了，咱们也想象不出来哪天哈佛突然没有了。</p>
<p>为什么？我们自己的思考是，因为大学是一个非常纯粹的价值创造者。</p>
<ol>
<li>第一，它创造新的知识。</li>
<li>第二，它扩展新的关系，比如教师队伍、师徒关系、校友关系，等等。</li>
<li>第三，创造新知识有助于扩展新关系，反过来，扩展新关系也有助于创造新知识。</li>
</ol>
<p><strong>这整个过程，没有零和博弈，没有恶性竞争，是纯粹的社会价值增量。所以，大学不死。而所有想长命百岁的公司，没准也可以从中得到启发。</strong></p>
<h3 id="代理变量">代理变量</h3>
<p>经济学家何帆老师说过一个词，<strong>“代理变量”</strong>。</p>
<p>什么意思呢？<strong>就是你看不清楚一件事，也没有可靠的数据，那就找一个其他的数据，间接地了解真相。</strong></p>
<p>比如说，你想了解广东农民工的就业情况，可是这个市场没有任何可靠的统计数据，那怎么办？你应该去农贸市场了解辣椒价格的行情。因为广东的农民工基本来自湖南、江西、四川这些地方，爱吃辣椒，而广东本地人反而不怎么吃。如果辣椒行情看涨，就说明当地经济形势好，用工需求扩张，很多农民工都过来找工作了；如果辣椒行情看跌，那结论就相反。</p>
<p>在现实生活中，很多表面上的数字其实并不可靠。因为那些公认权威的数字，容易被各方面的力量影晌，甚至造假。而这些间接的代理变量，反而更为可靠。</p>
<h3 id="道德绑架">道德绑架</h3>
<p><strong>道德这个东西，用于自我约束是好的，用于向他人秀优越感，甚至是强制影响他人，就是世界上最糟糕的东西。</strong></p>
<h3 id="道歉">道歉</h3>
<p>做错了事的人经常会说一句话：“我已经道歉了，你还要我怎样？“那接下来的回应，只能是那句了：“如果道歉有用的话，要警察干吗？”</p>
<p>这好像是一个道歉诚恳不诚恳，和被道歉的人胸怀宽广不宽广之间的矛盾。这让我想起作家万维钢老师讲过的一个观点，什么叫道歉？不是“对不起&quot;“我错了&quot;“我下次不了&quot;。这种道歉，其实很不好。好像对方不原谅我，就是不宽容。那这种道歉还有什么价值？简直就是对对方的一种操纵。</p>
<p><strong>真正的道歉应该是什么样的？至少应该包括三个要素：第一，说明自己的错误；第二，说明自己的改变；第三，把是否原谅自己的决定权交给对方。</strong></p>
<p>你看，高水平的道歉，不是一个和对方和解的过程一一那不是自己能决定的。高水平的道歉，是一个自我人格完善，并且被对方看见的过程。</p>
<h3 id="底线">底线</h3>
<p>有一个词，叫“不带敌意的坚决”。我越琢磨越觉得这是一个很高的境界。</p>
<p><strong>没有敌意情绪，这个好理解，从小爹妈老师都是这么教的。但是在没情绪的同时还能保持底线，这就难了。</strong></p>
<p>就像一个实验证明，最好的博弈策略，既不是一昧地当坏人背叛，也不是一昧地当好人合作，而是一报还一报。也就是说，<strong>我开始总是选择善意合作，但如果遭遇背叛，我就还击；如果你转而合作，我也好好合作。无论环境多复杂，这个策略总是胜算最高。</strong></p>
<p>为什么？<strong>因为你把底线告诉了所有人，我不欺负人，但是谁也别欺负我。欺负我的成本肯定很高，谁也别抱侥幸心理。</strong></p>
<h3 id="第七感">第七感</h3>
<p>何帆老师推荐过一本书，叫《第七感》。</p>
<p>“第七感&quot;这个词很新鲜。前六感，我们都知道了，是<strong>视觉、听觉、嗅觉、昧觉、触觉和超感官知觉</strong>。<strong>第七感指的是什么？指的是对相互连接的世界的感知力。</strong></p>
<p>比如我们用鼠标，就是通过一种外部的连接器，实现对世界的感知。再比如说，银行家看到一个钱数，马上就能思考怎样优化金融交易；搞制造业的人看到某个产品，马上就能知道它需要什么样的供应链和大致的成本；创业者看到一个现象，马上脑子里就能蹦出一个需要协同很多人的商业解决方案。<strong>所有这些对连接的想象力、判断力和控制力，都是第七感。</strong></p>
<p>尼采说，人类只有具备第六感，才能在疯狂的工业革命中生存下来。现在恐怕是一样的。只有具备第七感，我们才能在这个网络连接大时代中生存下来。</p>
<h3 id="丁克">丁克</h3>
<p>现在有很多丁克夫妻，不生孩子。这个无可厚非，个人选择而已。但是，有一个观点说，丁克不能是夫妻双方的决定，而应该是妻子单方面的决定。</p>
<p>为什么？因为在生孩子这件事上，男女是不对等的。男性年轻时不想要孩子，但是等年纪大了，比如五六十岁，甚至更大年纪，还是可以退出这个约定，离婚再结婚生孩子。说白了，男性是可以反悔的。</p>
<p>而女性就不同了，年轻时决定丁克，到了一定岁数之后，就真的没有生育能力了，这是一个无法反悔的决定。所以说，丁克必须是女方坚定的选择，而不是什么夫妻双方的共同决定。</p>
<p>这个说法有道理，它符合经济学的逻辑。<strong>在平等的关系里，一件事情的决定权应该交给谁？谁的退出成本最高，谁最不能反悔，就应该交给谁。</strong></p>
<h3 id="定位问题">定位问题</h3>
<p>听一位老师讲课，他问了一个女生一个问题：“如果你老公和你闺蜜同时掉进水里，你先救谁？&quot;那个女生犹疑了一会儿说：“救我闺蜜。”我估计她内心挣扎了一下，公开说救老公显得太自私，所以选择了救闺蜜。</p>
<p>但这时老师却说：“你怎么不想另外一个问题呢？你老公和你闺蜜为什么会同时掉进水里？这背后会不会有什么故事？这个故事要是追溯清楚了，没准儿你一个也不想救了呢！”</p>
<p>这当然是个玩笑。老师举这个例子是想说明，<strong>绝大部分人做事的时候，本能反应都是，一出了问题，马上就想着怎么解决这个问题，这都是应激反应。而只有很少的人，首先想到的是去定位问题，去追问问题背后的问题。</strong></p>
<p>你看，世界总是给我们出选择题，想让我们在两难之中选一个。而我们要想在这场考试中得高分，最重要的是先问一问，我们为什么要做这样的选择题？</p>
<h3 id="动词哲学">动词哲学</h3>
<p>赵汀阳老师在学生毕业典礼上发表了一段讲话。</p>
<p>他说，我有一个理论叫“动词哲学&quot;。简单说就是，<strong>要拒绝名词的诱惑，不要试图去成为一个名词一无论多好听的名词，而要去成为一个动词。</strong>“你们年轻人有的是时间，所以你们可以成为很多的动词。”这个跟学生讲话的角度真好。</p>
<p>其实成为名词，还是成为动词，都在自己的一念之间。比如说，我认为自己是个爸爸，那就有对孩子的责任，但是难免也会感觉有支配孩子的权力。<strong>活在名词里，很容易给自己一个想当然的暗示，以为自己真的拥有什么</strong>。而换成动词就好多了，比如支持、陪伴或者是照料孩子的成长。<strong>用动词来描述自己的角色，会让自己目标明确，而且活得有活力。</strong></p>
<h3 id="动机分化">动机分化</h3>
<p>历史学者薛涌老师有一个说法，说教育竞争的实质是“动机分化&quot;。这个词用得有意思。</p>
<p>过去我们对教育的理解是，<strong>把人类的存量知识，尽量原封不动地转交给下一代，别让那些圣人的教诲、牛人的智慧失落了</strong>。所以，教育不需要动机分化，你只需要有一个动机，就是“好好学习，天天向上&quot;，争取做对社会有用的人。</p>
<p>但是，现在呢？<strong>教育的使命变了，这一代人根本不知道下一代人会学到什么知识，又会遭遇什么挑战</strong>，而且说实话，未来知识负担那么重，一个人如果不是真有这方面的天分，也很难有所建树了。</p>
<p>所以，教育的使命，<strong>就成了尽可能激发每一个人的潜力，帮助他们找到自己的学习动机，也就是天分和兴趣所在，分头突围，应对各自的人生挑战</strong>。所以才说，教育竞争的实质是“动机分化&quot;。</p>
<h3 id="动机落差">动机落差</h3>
<p>关于社会阶层是不是固化了的问题，有人说，寒门再难出贵子，也有人说，创业改变命运。那阶层到底是不是固化了？</p>
<p>《世界是平的》的作者弗里德曼提出过一个新视角：现代社会讲自由平等，阶层不应该固化，但是有一个落差一一<strong>工具落差</strong>。</p>
<p>比如你会用电脑，其他人不会；你会使用金融工具，其他人不会。<strong>使用什么工具，决定你处在什么社会阶层，所以新的阶层固化又形成了</strong>。可是现在工具越来越普及，连非洲的穷人也可以用上手机了，工具落差快要消失了。</p>
<p>但人类又进人了一个新的落差时代，叫“<strong>动机落差</strong>&quot;。</p>
<p><strong>拥有自我驱动力的人，可以利用非常便宜的工具进行学习、合作和创新</strong>。没有这种强烈动机的人，拥有什么资源都没用。所以，新的阶层固化又来了。<strong>自我驱动，决定命运；动机落差，决定阶层。</strong></p>
<h3 id="独当一面">独当一面</h3>
<p>有一位会计师，原来在会计师事务所工作，专业水平公认很高。</p>
<p>后来有家公司请他去当高管。因为没有经验，所以他就问脱不花，当高管和干专业工作有什么区别。脱不花说，干专业工作，衡量你价值的是你的专业水平；当企业高管，衡量你价值的是你把一滩事接走的能力。</p>
<p>什么意思呢？ <strong>专业人员，本质上是大协作系统中的一个零件，你本事再大，也是这个系统的一部分。而在企业当高管，是你自己运营一个系统。最大的价值，是你能独当一面一一件事交给你，就可以放心了。</strong> 公司找高管，本质上就是在找这样的人。</p>
<p>这段话是说给那些在职场里感觉怀才不遇的人听的。业务水平高低，不是你升职与否的原因。<strong>是不是让上层觉得你是可以托付一摊事的人，才是问题的核心</strong>。</p>
<h3 id="独立思考">独立思考</h3>
<p>很多人都在聊“独立思考&quot;这个命题。这个词，其实很有迷惑性。</p>
<p>独立，表面的意思就是跟别人不一样。所以，独立思考容易被理解成特立独行、跟别人不一样地思考。再演化下去，就容变成抬杠了。</p>
<p>但其实，<strong>有独立思考能力，不是和别人想得不一样，而是不肯承认有唯一的正确答案，不肯承认有终极的答案。这样的独立，不是跳出圈外、迥然不同的那种独立，而是冷眼旁观，可以兼容他人的那种独立</strong>。</p>
<p>我自己判断一个人是不是有独立思考的能力，有一个很简单的办法。如果一个人的口头禅是“我认为&quot;，那大概率他就是一个自以为是的人，或者是一个经常被困在某个观念里面出不来的人。而如果一个人经常说，“<strong>关于这个现象，还有一个挺有意思的解释</strong>&quot;，那就说明，他正走在独立思考的路上。</p>
<h3 id="读书">读书</h3>
<p>读书的心态有两种。一种是把自己看成一个空瓶子，从外往里灌东西，要灌的东西太多，自己的瓶口又太小，这就难免痛苦。</p>
<p><strong>另一种心态是把读书看成社交，是跨越时空和牛人聊几句</strong>一一只不过那些人要么已不在世，要么相距太远，所以就用读书这种简便的方法跟他们交流。因为是社交， <strong>你不必认识每一个人，也不必和一个人从头聊到尾，可以乘兴而来，兴尽而返。</strong> 出于对他人精神世界的好奇，在史上最牛的人群中穿梭，这样就可以随处有风景，随时有收获了。</p>
<p>说到底人还是一种社交动物，比起和枯燥的信息在一起，和人在一起更容易有快感。</p>
<h3 id="对抗时间">对抗时间</h3>
<p>我们通常都觉得，爱创造、有大理想的人有出息，爱享乐、搞小情调的人没出息。</p>
<p>但是有一个观点说，其实这都是结果，只是逃避死亡的方式不同而已。什么意思？你看，<strong>人终有一死，这件事给每个人都带来了巨大的焦虑，所以大家必须找到对抗时间的方法。</strong></p>
<p>一般有三种方法。<strong>第一种是理想主义，</strong> 就是信点什么，不管是信仰上帝，还是热心于社会公益，本质上都是把自己奉献给一个超越性的存在，从而得到拯救。<strong>第二种是浪漫主义，</strong> 就是找到点细小的乐趣，不管是爱谈恋爱还是爱美食，那些美妙的感受是永恒的。<strong>第三种是创造主义，</strong> 就是相信自己的事业、自己创作的艺术品，可以超越时间，达到不朽。</p>
<p>所以，理想主义、浪漫主义和创造主义，出现的原因都一样，只是每个人根据自己的禀赋，选择了不同的搭配比例而已。</p>
<h3 id="对事不对人">对事不对人</h3>
<p>企业家李想在接受得到 App 总编辑李翔独家专访的时候，说了一段话对我启发很大。</p>
<p>他说，一个人在工作中，之所以焦虑和痛苦，有一个很重要的原因，就是他太关注事，而不关注人。</p>
<p>这和我们平常的说法完全相反。我们平常总是说，要对事不对人。李想说，<strong>如果你眼里只有事，就只会关注得失成败，但是换个角度，你所有立场都是关注人的成长，那你天然就有了长期性的眼光。</strong></p>
<p>比如，当一件事情结束时，<strong>你首先考虑的角度是，它成就了谁，锻炼了谁，改变了谁，暴露了谁，要为谁提供什么资源，让他去做下一件事，</strong> 那你就会发现，事情本身的得失变得没那么重要了。</p>
<h3 id="对手">对手</h3>
<p><strong>一个人不应该有敌人，但应该有对手。</strong> 为什么？有两个原因。</p>
<p>首先，敌人损耗的是你的力量，而对手不一样。有对手的人生，往往让人获得力量。很多人都有体会，和某个人暗中较劲儿是我们前进的重要动力。</p>
<p>但更重要的原因是，如果我有敌人，我会以输赢为目标。而所有的输嬴，其实都是暂时的。所以，一旦我们有敌人，不管这个敌人是谁，我们就已经把自己的目标狭窄化了。所以说，“<strong>竞争意识损害竞争力</strong>&quot;一一这句话，我们是贴在自己公司墙上的。</p>
<p><strong>但是有对手就不一样。我们和对手比的，不是输赢，而是高下，这是一个没有尽头的无限游戏</strong>。这就把自己发展的天花板揭掉了。</p>
<p>所以说，如果有人把我们当敌人，我们应该把他变成对手。也就是俗话所说，他打他的，我走我的。</p>
<h3 id="敦煌">敦煌</h3>
<p>吴伯凡老师问我：“你想过敦煌是怎么来的吗？”</p>
<p>我虽然去过敦煌，但是还真没想过这个问题。在那么荒凉的地方，怎么会出现那么庞大的佛教洞窟艺术群？这钱是谁花的？</p>
<p>吴老师说，应该是两个机制的结果。<strong>第一是丝绸之路</strong>。商人因为前路凶险，要求佛祖保佑，所以就花钱建佛像。可是仅仅出于这个动机，不足以建成那么多争奇斗艳的艺术品。所以还需要<strong>第二个机制，就是斗富</strong>。你建一米的，我就来个十米的；你粗制滥造，我就精雕细刻。拼来拼去，才造就了敦煌的辉煌。</p>
<p><strong>很多伟大的东西，其实都来自一点都不伟大的人性和现实主义的算计。</strong></p>
<h2 id="E">E</h2>
<h3 id="耳顺">耳顺</h3>
<p>《论语》中有一句话，“六十而耳顺&quot;。过去通常的解释是，人到了六十岁，从耳朵到内心的通道就比较顺畅了，听别人的话能昕出微言大义。</p>
<p>但是，我看到刘润老师的一个说法，把这件事说得更透彻。他说，人的修炼，其实是分成两个阶段的。</p>
<p>第一个阶段，是你要建立一个“自我&quot;。这个阶段大概二十岁完成。然后，更艰巨的任务就来了。</p>
<p>第二个阶段，是你要战胜这个“自我&quot;。也就是说，<strong>你能旁观自己，把自己客体化；能洞察到自己每一个情绪性反应背后的实质；心里没有自我，只有目标。</strong> 这就是一个极难修炼的任务了。这个阶段一般人大概要到六十岁才能完成。</p>
<p>完成之后，<strong>一切触怒自我的外界刺激，都能被你当成帮助自己完成任务的工具，什么话听着都顺耳。这个境界才叫“耳顺”。</strong></p>
<h2 id="F">F</h2>
<h3 id="发展心理学">发展心理学</h3>
<p>两个人争论孩子教育的问题。一个说要严加管教，一个说要放任自流。其实，何必老是纠缠于绝对的对错和是非呢？</p>
<p><strong>发展心理学早就证明了，人的一生发展分成很多阶段，每个阶段所需要解决的核心冲突是不一样的。</strong></p>
<p>按照美国发展心理学家埃里克森的说法，人要经历<strong>八个阶段</strong>的心理社会演变。一岁半到三岁的孩子，是建立习惯的最佳时期，所以这个时候的管束要相对严一些。而随后，三到五岁，又是孩子培养独创性的最佳时期，一旦讥笑他们的独创性行为，他们就会失去自信心。所以，这个阶段的教育，需要更多的鼓励。</p>
<p>人生就像庄稼，不同的时候有不同的需求。</p>
<h3 id="法律思维">法律思维</h3>
<p>律师们经常讲法律思维。那到底什么是法律思维？一个律师朋友给了我一个简洁的说法。</p>
<p>他说，<strong>所谓法律思维，就是脱离具体事件，放眼到整个社会关系中来衡量是非曲直。</strong></p>
<p>比如说有一个制度，一个人失踪四年就可以在法律上宣告死亡了，这看起来很不近人情。人死了就是死了，活着就是活着。但是法律不管这个，法律要着眼于更广阔的社会关系。失踪的人可以继续生死不明，但活着的那些有利害关系的人还得继续生活·宣告死亡之后，妻子就可以再婚，财产就可以当作遗产进行分割。那你可能会问，如果人回来了呢？回来了再部分撤销嘛。</p>
<p>说白了，<strong>法律的首要目的不是搞清楚事实，而是让社会关系更有序。所以，有时候法律才会显得不近人情。</strong></p>
<h3 id="反制">反制</h3>
<p>吴伯凡老师在讲座中讲到老子留下的一句话：“反者，道之动。”什么意思？就是所有的良性趋势里都必然带有一种相反的力量。</p>
<p>比方说人的发展。每个人都追求舒服，但舒服到极致的人就一定是个宅男加胖子。这个时候，就需要一种反过来的不舒服，一种自虐的倾向。所以说，经常体育锻炼才是一种健康的生活方式。</p>
<p>再比如说，每个人都希望有个好记性，但如果记忆力好到什么都忘不了的程度，就是一种精神病症状了。这个时候，遗忘反而成为一种珍贵的能力。</p>
<p>有科学家就说，<strong>未来将展开人和电脑的激烈竞争，人获胜的重要希望所在，就是人是有缺陷的、会遗忘的、不精确的。</strong></p>
<h3 id="放大力量（人脉发展）">放大力量（人脉发展）</h3>
<p>李笑来老师跟我讲了一番道理，<strong>一个人的力量怎么才能被逐步放大？</strong> 他说，一共分四步。</p>
<ol>
<li>
<p>第一步，是自己有本事，这是基础。</p>
</li>
<li>
<p>第二步，是把自己放到一个高价值的网络中去，说白了就是和更多牛人在一起。</p>
</li>
<li>
<p>第三步，是在这个高价值网络中，形成自己的特色分工，让那些牛人离不开你。</p>
</li>
<li>
<p>第四步，是主动求助，进一步加强和这个网络的联系。</p>
</li>
</ol>
<p>归纳一下，就是<strong>自强、结群、分工、求助</strong>这四种能力。</p>
<h3 id="放空">放空</h3>
<p>有这么一个段子：</p>
<p>早上坐公交车上班，我注意到了身边的一位男子。他穿着干净得体，简单大方，脸庞上留下了少许岁月的痕迹。只见他时而静静地看着窗外，忧郁的眼神像是在思考过往的人生；时而双眼微闭，靠向座椅，让疲倦的身体可以有片刻的歇息。根据我个人多年的社会经验判断，这个人肯定是手机没电了。</p>
<p>最后这一句算是神转折。不过转念一想，很有道理。过去很长一段时间，我确实记不得什么时候看到过一个人坐在那里发呆，享受一段闲暇时光了。</p>
<p><strong>我们的脑子时刻都被手机里的信息占领，现在放空反而正在成为一种需要专门训练才能获得的能力了。</strong></p>
<h3 id="非时间">非时间</h3>
<p>有一个词，叫 <strong>“非时间”。</strong> 什么意思？简单说，<strong>就是完全属于一个人的，完全不和他人交互的时间。</strong> 比如说，晚上早早睡觉，早上 4 点钟就起床，从 4 点到 8 点这段时间，因为没人打扰，也不和他人交互，你会获得一段完全属于自己的时间。工作也好，学习也好，写作也好，很容易进人<strong>心流状态，效率会非常高。</strong> 有了这高效率的四个小时，白天的其他时间，我们反而可以用来健身、交友和娱乐。我没有这样试过，想必效果会很好。</p>
<p>不过，这提醒我们一件事，<strong>现代社会提高效率的方法是分工和合作</strong>，这就附带要求我们每个人把自己的时间表交出来，和他人的时间表对齐。但是，如果我们在合作和分工中没有什么自主权的话，我们的时间反而是被他人牵着走的。对我们自己来说，这是一个非常大的效率损失。这时候，<strong>启用“非时间”，就是一个夺回主动权的办法。</strong></p>
<h3 id="非正式交流">非正式交流</h3>
<p>谷歌公司的福利出了名地好，但员工在食堂吃饭时要排队，而且一般是排 4 分钟左右。</p>
<p>为什么呢？因为谷歌公司要给员工创造非正式交流的环境。但为什么是排 4 分钟呢？因为时间长了，大家会掏出手机来看；时间短了，大家聊不起来。这个时间是经过计算的。有了这种非正式交流的公司文化，谷歌才可以喊出那句著名的口号一一“别听河马的&quot;。也就是别听领导的，你要对自己负责。</p>
<p>很多创业者抱怨团队难融合，于是就做活动、喊口号，但还是觉得团队融合不起来。这里面的根本问题，就是太重视正式交流，而忽视了非正式交流的作用。</p>
<p>我们要相信一件事，<strong>人只要有合适的交流环境，就会自发地去接近彼此，交流就会自动地发生。</strong></p>
<h3 id="非正式知识">非正式知识</h3>
<p>我说过，一定要学习别人已经证明有效的套路。</p>
<p>我觉得可以给“套路&quot;这个词起一个更好听的名字，叫“非正式知识&quot;。</p>
<p><strong>正式的知识，是指那些可以写在教科书上的知识。但是还有一些知识，没那么光明正大，适用的范围和时间也很有限，但是非常有用。</strong> 这些知识书上就没有了，只有到特定的人那里去学。</p>
<p>举个例子。很多运营电商的人，会用白色的字，在白色的底上写很多东西。你说，这不是瞎耽误工夫吗？把字放在同样颜色的底上，谁看得见？实际上，他们就是不让用户看见，但搜索引擎能搜到。用户搜个什么词，莫名其妙就来到这家店了。这种细节里的小套路，没有内行人传授给气你摸索再长时间也未必能琢磨出来。</p>
<h3 id="分歧">分歧</h3>
<p>有人说：“我在一个群里喊，谁给我推荐一款好用的 500 块钱以下的耳机，结果没人说话；而如果我在群里说， 500块钱以下根本就没有好用的耳机，肯定马上就会有好几个人扌卜上来跟我抬杠，说这款不错，那款也不错。</p>
<p>你看，这是一个很有趣的效应。面对一个问题，让我们给出一个答案，这个难度很高；而如果面对一个答案，让我们给出一个反对意见，这似乎就要容易很多。</p>
<p>所以有人开玩笑说，<strong>中国最大的在线教育平台，根本就不是什么学而思、猿辅导，而是微博。</strong> 不管你在微博上说什么，都有人出来教育你，而且还免费。</p>
<p>这是为什么？有一句很有哲理的话可以解释这个现象。这句话是：<strong>在人群中，要高度重视分歧。分歧比共识重要，因为分歧肯定是真的，而共识有可能是假的。</strong></p>
<h3 id="风险社会">风险社会</h3>
<p>德国社会学家贝克有一个很有洞察力的说法。</p>
<p>他认为，过去的社会是<strong>阶级社会</strong>，核心的问题是资源不足，所以整个社会是围绕财富生产来运行的，<strong>社会的首要难题是如何进行财富分配。</strong></p>
<p>但是我们现在进人了一个新的社会类型，叫<strong>风险社会</strong>。资源不足问题已经大大缓解，但是社会协作变得极其复杂，累积起来的风险也变得很高。比如全球变暖、人工智能、禽流感、股灾等，到处都有巨大的风险。所以<strong>如何化解、疏导风险就变成了新的首要问题。</strong></p>
<p>说白了，<strong>过去的阶级社会概括来说是，“我饿”；现在的风险社会概括来说是，“我怕”。</strong> 按照贝克的这个思路，衡量一个社会发展的标准就变了。过去的标准是富有，是<strong>GDP</strong>;而现在衡量一个好社会的标准，是能不能给人们<strong>安全感</strong>。</p>
<h3 id="峰终定律">峰终定律</h3>
<p>心理学家卡尼曼有一个观点，<strong>我们对于一段过去的经历是不是感到愉快，取决于两个因素。</strong></p>
<p><strong>第一个因素，是这个经历中最顶点的体验。</strong> 比如你到埃及旅游，你觉得最好看的是金字塔。那好，多年之后，你想起埃及就会想到金字塔，至于旅游过程中哪顿饭吃得不好，导游有多讨厌，你都不会记得了。</p>
<p><strong>第二个因素，是当这种经历结束的那一刻我们的感觉。</strong> 举例来说，你到埃及旅游，最后在机场发现行李丢了，你很抓狂。那此前什么有关金字塔、尼罗河的体验，都大打折扣，你对埃及的记忆恐怕会永远很糟糕。</p>
<p>有人问，怎么搞好一次演讲？按照这个定律，心理学家会告诉你，<strong>首先在过程中准备一两个让人记得住的细节或者金句，然后再准备一个厉害的结尾，</strong> 演讲基本就成功了。</p>
<h3 id="服务">服务</h3>
<p>网上流传一条视频。视频中，一个女顾客来到一个卖猪肉的滩位，翻了翻案子上的几块肉，然后转头就要走。</p>
<p>老板就问：“美女，没有合适的吗？&quot;女顾客说：“对，没有合适的。“这时候，老板递过去一张纸巾，说：“不合适没关系，你擦擦手吧。&quot;顾客转身拿过纸巾，一边擦手一边说：“老板，要不你把这块肉卖给我吧。”</p>
<p>这条视频说出了一个很有趣的商业道理：<strong>不要以为你是在用自己的产品做生意；做生意，说到底经营的是人与人之间的关系。所以，有那么一句话：“客户的离去，大多是因为你的产品；而客户的回头，大多是因为你的服务。</strong></p>
<p>过去这些年，互联网平台更多的是为陌生用户提供产品，所以产品经理成了一个很重要的角色。而未来，企业需要更多地为真实的用户提供服务，所以“服务经理&quot;可能会是一个更重要的角色。</p>
<h3 id="服务的最高境界">服务的最高境界</h3>
<p>诚品书店的掌门人吴清友说过一句话，<strong>服务的最高境界是“精进自己，分享他人”。</strong> 这话说得真妙。</p>
<p><strong>所有商业都是在满足他人的需求。<strong>但传统商业是满足</strong>已知</strong>的需求，比如衣食住行，而未来的商业越来越是满足人们<strong>未知</strong>的需求。一款游戏没有设计出来，一部电影没有拍出来时，没有人知道自己需要它。所以，服务的中心越来越不是小心翼翼地伺候用户，而是服务者孤独地提升自己。</p>
<p>比方说，一个顶级大厨，不是满足我们已有的昧觉的需求，而是在让我们的昧觉进人一个前所未见的领域。</p>
<p><strong>所谓服务，只不过是把自我精进过程中某一个瞬间的成果分享给用户而已。</strong></p>
<h3 id="服务业">服务业</h3>
<p>和一个开美容院的朋友聊天。他说，你想，皮肤最重要的功能就是为人体隔离外界的影晌，如果抹点东西，皮肤就能发生改变的话，这是皮肤的失职。所以，除了补水和防晒，其他美容产品的功能都要存疑。</p>
<p>我也不知道这个结论是否科学。当时我就问他，那你干这一行，岂不是没法为顾客创造价值了吗？</p>
<p>他说，那可不是。我们这一行，为顾客<strong>创造的心理价值极大</strong>，至少有两个。一是充满爱意的对皮肤的抚摸，这是人类基因里就渴望的东西，二是一种犒赏自己的方式。那么多成功女性来到美容院，未必奢望做个美容就能返老还童。但是，<strong>被呵护、被尊重、被善待</strong>的感觉是确切可以拿走的东西。</p>
<p>这个回答很精彩。<strong>所有服务业其实都在提供两种价值，一种是所谓的功能，另一种更重要，就是对人的陪伴、支持和安慰。</strong></p>
<h2 id="G">G</h2>
<h3 id="概率思维">概率思维</h3>
<p>万维钢老师在他的得到 App 专栏《精英日课》里讲了一个有趣的话题。</p>
<p>两个人，第一个人买彩票，差一个数就能中大奖，他觉得自己运气太差了。第二个人，在一次旅游事故中，全车人都受伤了，只有他毫发无损，大家都祝贺他，说他运气太好了。这都是我们的直觉判断。</p>
<p>但如果换成用概率思维思考这两件事，结论恰好是反过来的。第一个人恰恰是运气太好了，因为只差了一个数，而第二个人的运气非常差，这么小概率的灾难事故，居然差点就落到他的头上。</p>
<p>你看，这就是直觉思维和概率思维的区别。<strong>直觉思维更在乎捉摸不定的运气，而概率思维要求，只要成本合适，只要能提高赢的概率，就要不断去做这件事。比如遇到问题，就随口向人请教，这种事在直觉和运气的世界里什么都不是，但在概率的世界里价值连城。</strong></p>
<h3 id="感觉">感觉</h3>
<p>看到这么一段话：“一个成人，最好的进攻性武器是自己的智商，最好的防守武器是自己的道德底线。而有人正好相反，他们喜欢用道德武器来攻击对手，然后用蠢来捍卫自己的尊严。”</p>
<p>这段话说得真好。扩展开说，<strong>一个人对自己的生活满意，其实是建立在三种感觉上的：安全感、优越感和存在感</strong>。这三种感觉缺一不可，但是也有优劣之分。</p>
<ol>
<li><strong>坏的安全感的基础，是讨好外界，而好的安全感的基础，是信任外界</strong>。</li>
<li><strong>坏的优越感来自攻击他人，而好的优越感来自达成目标</strong>。</li>
<li><strong>坏的存在感，是不断需要外界对自己认可和表扬，而好的存在感，只需要对自我成长有清晰的感知</strong>。</li>
</ol>
<p>所以，我们得警惕三件事，就是讨好外界、攻击他人、索取表扬。这三件事我们做得越成功，自己反而就越失败。</p>
<h3 id="感受力">感受力</h3>
<p>科幻小说家阿西莫夫说过一句话：“在科学研究中最激动人心的，也是预示着新发现的短语，并不是、 Eureka ！（有了！找到了！）‘，而是’ That’s funny… （有趣的是…），</p>
<p>什么意思？就是说，真正有价值的时刻，不是你发现了一个新东西，而是一个新现象看在你眼里，你发现和你以前的理解不一样，你顺着这个不一样追下去，也许就能有重大收获。</p>
<p>你看，<strong>关于发现，最重要的不是新东西，而是你自己，尤其是你自己感受微妙差异的能力</strong>。</p>
<p>不仅科学研究，我们读书也一样。不会读书的人，是把书当作山，自己去爬山，过程中关心的是，这座山我爬了多少。但会读书的人，是把自己当作山，用书来爬自己，关心的是读了这本书之后，<strong>我被这本书改变了多少一一一重要的是自己的改变以及对这种改变的感受力。</strong></p>
<h3 id="钢琴">钢琴</h3>
<p>有一次我和严伯钧老师聊天，我说：“我将来不会逼着我家孩子练钢琴的，要让她们过上幸福的童年生活。”</p>
<p>严伯钧说，不对，如果有条件，还是要培养孩子弹钢琴。他说：“你罗胖的孩子成不了钢琴家几乎是 100 ％的。但是<strong>练钢琴不是为了这个，而是为了赠送给孩子两个礼物</strong>。</p>
<p><strong>第一个礼物是自律</strong>。学琴总是需要长期的自律练习才能得到成就感。这是童年最难获得的体验，也是能受益一生的体验。</p>
<p><strong>第二个礼物是敏感度</strong>。练钢琴，可以培养孩子对于声音那种细微差别的敏感度。这种敏感可以扩展到很多领域，比如，对于昧道、材质、色彩、情感的细微区别的鉴别力。在未来的世界里，这是做成一切事业的基础能力，也是在私人生活中获得幸福的能力。</p>
<h3 id="高地">高地</h3>
<p>作家九边提出了一个词，叫“<strong>抢占式学习</strong>”。他举了一个例子。他有个朋友，买了一套《柏杨白话版资治通鉴》，用一年时间看了两遍，结果感觉打通了任督二脉，写什么都下笔如有神。</p>
<p>可想而知，即使是看了两遍，里面那些具体的知识，他也未必能记住多少。但是作为通读过《资治通鉴》的人，他文化视野的广度、对人性的理解深度，肯定和原来不一样了。<strong>这就是“抢占式学习”的意思，有理没理，找一个高地强攻上去</strong>。</p>
<p>比如，每天强行花半个小时背单词，一年把英语阅读这个难题解决掉；或者用一年时间，把心理学的基础知识自修一遍。</p>
<p>你要说具体的用处，可能也没那么明确，但是<strong>站上一块高地之后，回看原来，能力就是涨了一大截</strong>。而你选取的是哪块高地，区别反而就没有那么大了。</p>
<h3 id="高估">高估</h3>
<p>心理学有一个结论，就是<strong>人在成绩面前，会高估自己的作用；在失败面前，会高估环境的作用</strong>。</p>
<p>那什么人没有这种毛病？两种人，第一种是圣人。就像吴伯凡老师说的那样，他们有成绩，看窗外的风景：有挫折，看镜子里的自己。还有一种人，就是抑郁症患者。有实验证明，抑郁症患者能够相对客观地评估自己的价值，正常人反而做不到。这说明什么？说明高估自己，是我们人类这个物种生存的必要条件。所以，我们从小被教育说要时刻谦虚谨慎，这其实是有问题的。</p>
<p><strong>正确的做法是，做事之前，不妨充分高估自己，这个叫有信心；做成事之后，再反省，这才是谦虚谨慎的正确姿势。</strong></p>
<h3 id="高管">高管</h3>
<p>有一个公司招聘高管，有两个人选，都挺合适的。最后，这两个人的简历都放到了老总面前，老总说：“那两个人我都见见吧。”</p>
<p>他先约了第一个人见面聊天。聊完之后，老总说：“眭！这个人了不起，我感觉，他是这个世界上最厉害的人。”这评价够高的，大家都以为这个人肯定中选了。老总说：“不急，第二个人我也见见。”</p>
<p>见完第二个人之后，大家都问：“第二个人有第一个人厉害吗？&quot;老总摇摇头说：“没这个感觉，但是我有另外一个感觉，就是见完他之后，我觉得我才是这个世界上最厉害的人。&quot;你猜，最后老总选了谁？</p>
<p>当然是第二个，因为要招聘的是高管。<strong>高管自身能力强不强，没那么重要；是否能通过鼓舞和激励，让身边的人都觉得自己很强，这才重要。懂得这个道理，就算是懂得管理的核心秭密了</strong>。</p>
<h3 id="高考">高考</h3>
<p>一群朋友聊起我们这代人当年的高考，那真是过鬼门关。</p>
<p>所有人都知道，这是决定人生的关键一步。考得好、考得坏，对人生的影晌，从当时看，都是不可逆的。所以，能不焦虑，能不紧张吗？再看如今有孩子参加高考的家长，心态就放松多了。为什么？高考还是很重要，但已经不足以决定人生了。</p>
<p>不过，有一位家长说，<strong>高考还是人生的分水岭。什么分水岭？高考前的人生，收益和努力是基本成正比的。此后的人生，收益和努力也有关系，但是变量就多太多了，努力的方向、方式比努力本身更重要。高考前，孩子生活在一个被单一目标扭曲的世界；高考后，孩子才进入了真实世界。</strong></p>
<p>所以，高考不那么值得焦虑了，但是高考结束的那一刻，还是值得打起精神，向它致敬。</p>
<h3 id="高手">高手</h3>
<p>有人说，想要判断一个人在某一行是不是高手，你就问他问题。</p>
<p><strong>你问一个点，他能回答一个面，你再顺着这个面追问，他能回答一张网，那基本就可以判定，他是这行的高手了。</strong></p>
<p>比如说，你问一个学者，这门学科里有哪些他佩服的大师。如果只说得出一个那他就只是一个粉经的水平。如果能说出好几个人，而且是不同维度的标准，那就说明在他的认知地图上，这个学科被展开了。你再追问，这几个人为什么是大师，他能说出这些大师出现的社会条件、学术背景，以及和其他学科的联系，那就说明他对这门学科的认识已经嵌人整个人类文明的网络里了。</p>
<p>为什么应试教育培养不出对知识的真正兴趣？因为应试教育正好是反过来的。它把一张网压缩成一个面，再把一个面简化成一个点。</p>
<h3 id="个人课题">个人课题</h3>
<p>1914 年 8 月 2 日，作家卡夫卡在日记上写了两行字，第一是“德国向俄国宣战&quot;，第二行是“下午我要去学游泳&quot;。</p>
<p>你看，在个人的视角里，世界大战爆发和个人学游泳这两个课题居然是可以并列的。</p>
<p><strong>宏观世界有它的宏大主题，而这并不耽误每个人都拥有自己的独特课题</strong>。就像不管盛唐时代来不来，玄奘都会去天竺求取佛法；不管第一次世界大战谁胜谁负，都不耽误爱因斯坦在此期间提出广义相对论。</p>
<p>回头一看，<strong>构成人类文明史最灿烂部分的，是一连串个人课题结出的果实</strong>，而不是那些当时的大事。</p>
<h3 id="跟对人">跟对人</h3>
<p>看到一个段子说，什么叫“跟对人，才能做对事&quot;？</p>
<p>举个例子。去菜市场买菜时，如果你觉得自己的砍价能力不行，你就跟在一个会砍价的大妈后面，等大妈砍完价，你对老板说，“我也来两斤&quot;。你看，这多划算，大妈砍下来的低价，你也能分享。这就叫跟对人，做对事。</p>
<p>不过这还不是最高境界。真正跟人的方法是什么？是你跟在大妈后面，看大妈和老板僵持不下的时候，再加人，帮着大妈对老板说，“你便宜点，我也来两斤&quot;。这就是团购了嘛，老板可能就答应了。你和大妈都拿到了一个本来拿不下来的价格。</p>
<p>所以你看，<strong>跟人的技巧不是搭顺风车，而是在关键时刻主动加入，成为决定性的力量</strong>。这其实就不只是跟人了，而是把<strong>仔细观察、主动介入和积极合作</strong>三件事合而为一了。</p>
<h3 id="工具">工具</h3>
<p>有一位专业的摄影师，水平很高，他有两台照相机，都是很专业的。</p>
<p>为什么要有两台？他说，一台是自己用的，一台是准备随时借给别人的。毕竟难免有些朋友因为知道他有照相机找他借，而他自己用的那台是绝对不借人的。我就问他，高手不应该是那种随便拿到什么工具都能稳定发挥的人吗？就像用剑高手，应该飞花摘叶，都是杀气。那位摄影师说，那是小说，你也信？</p>
<p>其实你观察一下，<strong>各行各业，越是高手，越会使用专用工具</strong>。为什么？要想发挥稳定，就得排除外界的影响一一其中最重要的就是来自工具的影响。<strong>高手的专用工具，其实已经不是工具，而是身体的一部分</strong>。</p>
<p>换句话说，<strong>判断一个人是不是这一行的高手</strong>，不是看他抽象的个体能力，<strong>而是看他和工具、和周边资源共生的能力</strong>。</p>
<h3 id="工作能力">工作能力</h3>
<p>有人问我，怎样才算有工作能力？我的答案非常简单，就是<strong>把一个大目标拆解成小步骤的能力</strong>。</p>
<p>举个例子。得到 App 中熊太行的专栏《关系攻略》里，有一位用户问：“我爸妈让我回老家结婚，你说要不要去？&quot;</p>
<p>你看，这个问题很简单吧？但是其实没法回答，因为他把三个问题混在一起了·要不要回老家？要不要结婚？要不要和爸妈指定的那个人结婚？问题如果没有被拆解，不仅自己会乱作一团，别人也没有办法帮你。</p>
<p>工作也一样。<strong>说一个人工作能力强，并不是说他什么事都能搞定，而是指他能把目标拆解成要么可以自己搞定，要么可以明确求助别人的一个个小步骤，把怎么做的大问题，变成选择什么资源做的小问题。</strong></p>
<h3 id="公平">公平</h3>
<p>有一次，我问一位学者，人类总是想要一个越来越公平的社会，这可能吗？他斩钉截铁地回答说，不可能。</p>
<p>他的分析是这样的，人类社会的总演化方向是分工协作，而分工带来的一定是不平等。就拿生物来说，最平等的是原始单细胞生物，因为它们没有任何分工。但是一旦单细胞生物结成了多细胞，细胞间有了分工，平等立即就消失失了。</p>
<p>比如说人，人的大脑重量只占人休重量的 2 ％，但却消耗20 ％的能量。所以，<strong>只要分工还能继续带来好处，人类的不平等就是总趋势</strong>。</p>
<p>这看似是一个坏消息，<strong>不过好消息是，未来个体随时可以调整自己的分工，所以身份带来的不平等会越来越少，而智力、知识和机会带来的不平等会越来越多</strong>。说白了，这将是一个聪明人会变得越来越牛的社会。</p>
<h3 id="公司和员工">公司和员工</h3>
<p>公司和员工之间的交易本质正在发生变化。</p>
<p>在工业时代，是公司出工资换取员工的工作时间。你上班，我给钱，钱货两清。彼此的权利义务到此就结束了。</p>
<p>但是未来不一样，创新活动成为公司存在的理由。所以，员工本质上不再只是花时间来上班，而且是用自己的<strong>创造力</strong>来<strong>投资</strong>这家公司。他们不仅要获得工资收人，更重要的是，因为是投资，所以他们的创造力也必须获得投资性的收益。</p>
<p>换句话说，公司还要为<strong>员工本身的成长和市场价值</strong>增值负责。<strong>只有当员工意识到他是在为自己工作，不但为企业创造利润，还能借此机会让自己的未来更值钱，这种合作关系才能持续下去。</strong></p>
<h3 id="攻略">攻略</h3>
<p>万维钢老师在《精英日课》里讲过做事的三个层次：<strong>最高层次的叫“战略”</strong>，是做<strong>大方向的选择</strong>；其次叫“<strong>战术</strong>”，是指怎样随机应变地<strong>实现目标</strong>；最低层次的叫“<strong>攻略</strong>&quot;，就是目标既定，资源既定，别人有什么样的经验，我就怎么做，别走样就行。游戏攻略是这样，旅游攻略也是这样。</p>
<p>这三者当中，“攻略&quot;思维看起来层次最低，但恰恰是最好的思维方式。</p>
<ol>
<li><strong>第一</strong>，遇到复杂的目标，立即把它分解成小任务，小任务就用得上别人的攻略了。</li>
<li><strong>第二</strong>，只要有别人的智力资源可以借用，就要毫不犹豫地借用，越成型的攻略，就越马上拿来就用。</li>
<li><strong>第三</strong>，自己做过的事，也要把它攻略化，自己用，也分享给别人用。</li>
</ol>
<p>攻略为什么如此重要？<strong>因为最先抵达目标的人，可能不是速度最快的人，而是不走冤枉路的人。</strong></p>
<h3 id="鼓掌">鼓掌</h3>
<p>普林斯顿大学教授、著名经济学家阿维纳什有一次给本科生上课，临下课的时候，做了一个博弈论的实验。他拿出20 美元，说谁鼓掌时间长就给谁。结果你猜怎么着？鼓掌持续了四个半小时。</p>
<p>这个数字很令人震惊。我们可以想象一下，任何一个人单纯连续鼓掌四个半小时是什么感受？</p>
<p>那他们为什么鼓这么久？我想无非两个原因。第一，<strong>目标偏移了</strong>，坚持鼓掌四个半小时的学生应该不是为了那 20 美元，<strong>而是为了斗气</strong>。第二，<strong>被存量绑架了</strong>，我已经鼓了一个小时的掌，现在停下来，不就白鼓了嘛，所以只好继续。</p>
<p><strong>目标偏移，被存量绑架（沉没成本），这其实就是人生失败最重要的两条原因。</strong></p>
<h3 id="关抽屉">关抽屉</h3>
<p>小孩子的特点是喜怒无常：正在大哭，马上就能笑起来；正在撒泼打滚地要什么，只要你能成功转移他的注意力，他马上就能忘了自己刚才的要求。</p>
<p>这好像是儿童心智发展的一个缺陷。但是我岁数越大，就越知道，这是一个难得的能力。<strong>专注在当下，既不受上一件事影响，也不惦记下一件事，这太难得了</strong>。</p>
<p>记得拿破仑就这样夸奖过自己，他说：“我的脑子就像个有很多抽屉的小柜子，安放着各种事务和问题。在我想打断一个思绪的时候，我就关上一个抽屉，打开另一个。该睡觉了，我只要关上所有的抽屉，这就睡着了。”你可能觉得这只是一个比方，但其实，这种能力非常了不起。</p>
<p><strong>重要的不是你能打开下一个抽屉，而是你能彻底关上上一个抽屉，让事务和事务之间、情绪和情绪之间互不影响。</strong></p>
<h3 id="关系">关系</h3>
<p>经常听到有人感慨，说手机害人，一大家子在一起吃饭，年轻人都埋头刷手机，亲人之间的交流都没了。</p>
<p>其实这件事也可以换个角度看：也许年轻人心里就不愿意吃这顿饭呢？也许刷手机不是漠视亲情，而是亲情已经解体的表现呢？正如有个姑娘总是抱怨，男朋友现在对她怎么抠门儿，怎么不好。旁边的人一句话就说到位了：“不是他不好，是他已经不爱你了。”</p>
<p>你看，传统社会都认为，人和人之间的关系是定下来的，我们必须调整自己来适应这种关系，否则就是有道德缺陷。但是在现代社会，<strong>表面上维持某种关系的人，如果成长速度、观念变化不同步，关系随时会解体，只不过有时候要过一段时间、用别的方式表现出来而已</strong>。这才是现代社会的真相。</p>
<h3 id="观察世界">观察世界</h3>
<p>心理学者李松蔚老师提到一个有趣的观点。他把我们观察世界的方式分成了两种。</p>
<p><strong>一种叫“原因论”，就是凡事找个原因</strong>。我刚刚发了一次火。为什么？因为对方不像话，因为我忍了对方很久，因为我喝多了，因为我从小受过心理创伤，总是管不住自己，等等。总之，凡事找个原因。</p>
<p><strong>还有一种观察世界的方式，叫“目的论”。不管自己做了什么，总要设法洞察自己真实的心理目的</strong>。比如，我刚刚发了一次火。为什么？因为我想用这种方式控制对方，因为我想找个替罪羊把责任推到他身上，因为我在别的地方受了委屈，我想找个出气筒，等等。</p>
<p>你听出来了，<strong>按照原因论看世界，很舒服，但是没有用；按照目的论想事情，很艰难，但是指向了自我改变。</strong></p>
<h3 id="广告">广告</h3>
<p>有一位广告人在机场看到一块广告牌。这块广告牌还没租出去，所以它的主人就在上面做了一个招租广告，写了五个大字一一“你就是主角&quot;。这位广告人就说，这个广告做得可不好。</p>
<p>你想，如果有一个企业老板，看到这块广告牌，他会花钱用它做广告吗？大概率不会。当老板的哪有那么想当主角？这五个字忽悠不动他们。</p>
<p>那广告牌上应该写什么？应该给出一个行动的理由。最简单的方式就是列上数据：这块广告牌每天会被多少万人看到，看到它的都是哪些人。然后写上“虚位以待&quot;，留个联系电话。</p>
<p>你琢磨琢磨，这两种方式之间，其实有一道思维方式的鸿沟。通过抖机灵、装可怜、摆笑脸的方式促使对方做出某个行动，在过去的熟人社会可能有用。<strong>但在如今的陌生人社会，站在对方的角度，给对方一个行动的理由，才会更有效</strong>。</p>
<h3 id="广告的风险">广告的风险</h3>
<p>过去做广告，你花钱买广告资源就是了，没人对你承诺效果，风险你自己担。后来，互联网广告出现了，它们对做广告的人说，看到你的广告不要钱，用户对你的内容感兴趣了，点击进去才要钱，做广告的风险大大降低了。这是好事吧？</p>
<p>再后来，又有媒体说，可以一直到用户在你这儿产生了真实消费，你再为广告付费。你看，做广告的风险又降低了。那么，这是一件好事吗？</p>
<p>恰恰相反，这对做广告的企业来说，可能是灭顶之灾。为什么？你想，投人一百块广告费，也许只能赚回来一百块零一分，那也算产生了消费。长此以往，你挣的每一分钱，都拿去做了广告，你就成了广告媒体的一个附庸。</p>
<p><strong>这就是市场的一个铁规律一价值往往来自风险。换句话说，诱导你往完全没有风险的地方走的人，就是在消灭你的价值。</strong></p>
<h3 id="贵族学校">贵族学校</h3>
<p>一位教育专家讲过教育的一个内在悖论。假设你肯为你孩子的教育投人，也投得起，那么请问，你是让他上昂贵的贵族学校，还是让他上主流的公立学校？</p>
<p>直觉肯定是上贵族学校。其实不一定。贵族学校的资源是比较好，但是也带来了一个问题，就是孩子脱离了真实的社会。</p>
<p>过去，社会是充分分层的，上层、底层过着不同的生活，教育的方法和目标自然也就不同，反正将来各过各的生活。但是未来社会，谁也不知道怎么变化，现在的社会分层会不会延续。你的孩子会骑马，会演莎士比亚，但是不了解普通人的想法，你确信他能过好这一生？</p>
<p>你看，这是不是一个挺大的悖论？<strong>没有资源的教育肯定不是好教育，堆积了过多资源的教育是一种脱离了现实生活的教育，它肯定也不是好教育。</strong></p>
<h2 id="H">H</h2>
<h3 id="汉隆剃刀">汉隆剃刀</h3>
<p>有一个词叫“汉隆剃刀&quot;。什么意思呢？</p>
<p>我们在认知世界的时候，会为很多事情找原因。如果你找到的答案是“因为某个人是坏蛋’一一这不是原因一一请拿起这把“汉隆剃刀&quot;，把这个原因剃掉。<strong>看到一个不好的现象，如果你能用别人的愚蠢来解释，就最好不用别人的坏来解释，这就是汉隆剃刀原理。</strong></p>
<p>为什么？如果你认为某件事没干好，是因为有人犯蠢，那至少你还要进一步想两个问题：<strong>第一</strong>，他们为什么蠢；<strong>第二</strong>，我将来怎么不犯同样的蠢。有了第一个问题，你的思考就呈现出了<strong>结构性</strong>。有了第二个问题，你的思考就呈现出了<strong>开放性</strong>。这就是<strong>好的思考品质</strong>的两点共性。</p>
<p>但是，如果你认为这是因为某个人坏，那结论就到此为止了，既没有结构性，也没有开放性。这样的思考品质当然就很差。</p>
<h3 id="行家">行家</h3>
<p>什么叫真的懂一个行当？有八个字，“<strong>不说是非，只说趋势</strong>”。我觉得有道理。</p>
<p>所谓说是非，就是总做对错判断。什么是对的，什么是错的，哪家好，哪家坏。这不叫真懂。为什么？因为他看到了现象，但没有能力理解形成这种现象的原因，所以只好做情绪性的、表面的是非判断。</p>
<p>但是真懂的人就不一样。在他看来，很多事看着不合理，可<strong>背后</strong>都有不得已的<strong>原因</strong>；很多事看着繁花似锦，可事实上也许已经开始走下坡路。</p>
<p>所以，<strong>真行家看自己的行当，看到的是各个因素之间的互动关系，尤其是在时间上的发展趋势。</strong></p>
<h3 id="行业">行业</h3>
<p>几个年轻的记者问我，现在记者不好干，你原来也是干媒体的，能给我们点儿建议吗？我说，现在每个人都面对一个问题，就是重新定义自己的行业。</p>
<p>就拿记者来说，最早信息很闭塞，需要传递远方的信息，这是第一代记者的角色。后来，中心化社会来临，记者更愿意去挑战那些老大哥，记者角色发生了转换。但是在互联网时代，这两个使命，自有其他人去承担了。那怎么转型呢？</p>
<p>比如我自己就选择了一条路，就是把某个领域发生的事，转述给不属于这一行的人，完成表达方式的转换，在帮助人获取知识这件事上，提高效率，降低成本。其实，我不是也在做一件记者做的事吗？</p>
<p><strong>所以，所谓的重新定义行业，就是永远要考虑两件事：第一，社会的新需求是什么？第二，我可以利用我的特长在这个新需求里干点什么？</strong></p>
<h3 id="好老师">好老师</h3>
<p>通过做得到 App 、做成年人的知识服务，我有一个很重要的体会，就是什么是好老师。</p>
<p>韩愈说，传道授业解惑。这是我们中国人心目中好老师的典型形象一一<strong>一个知识的传递者</strong>。如果是在学校，确实是这样。但是在我们这个终身学习的领域呢？也就是说，个成年人的老师该是什么样的？</p>
<p>你想，一个受过完整教育的成年人，该懂的道理都懂了，不懂的知识他会去查。这个时候，老师给他的就不能是新鲜的道理和知识了，<strong>而是什么能让他对自己已经有的常识产生信念</strong>。比如说，减肥，就是管住嘴、迈开腿，这有什么难懂的？有的人对你说这个，就是讨厌，就是唠叨；而有的人对你说这个，你就听得进，做得到。后面这个人就是好老师。</p>
<p><strong>所以，成人世界的好老师什么样？就是能够通过专业能力和人格魅力，让我们真的相信那些简单的道理。</strong></p>
<h3 id="好专业">好专业</h3>
<p>有一个戏说的帖子，叫《报考医学院的四大理由》。</p>
<p>第一个理由，学了医，你将来可以转行从事其他行业，但是想倒过来就费劲了。第二个理由，医学院同学的感情都会处得特别好，大家虽然在不同科室，上至父母重病，下至孩子拉稀，不出同学的微信群就可以远程会诊。第三个理由，医生不会失业，既可以奋斗成顶级名医，也可以平躺成普通大夫。第四个理由，医学生不会嫉妒比自己优秀的同学。为什么？因为同学越优秀，自己生病的时候就越安全。</p>
<p>这当然是开玩笑的说法。不过，你发现没有？这个帖子其实也说出了大学好专业的四个特点：<strong>第一，能学点硬功夫；第二，有能帮到别人的本事；第三，有很多阶梯，你可以任意停在一个自己感觉舒适的台阶上；第四，所有人都乐于看到你的进步。</strong></p>
<h3 id="好奇心">好奇心</h3>
<p>有句诗写得好：“美人自古如名将，不许人间见白头。&quot;不过，现在这年头，<strong>人老的标志可不是白头，而是丧失对新事物的好奇心。</strong></p>
<p>有一次，我在办公室里遇到一个挺烦人的事，要把两个电子邮箱绑定在一起，不熟悉嘛，得现研究。于是，我随口就跟一个年轻人说：“兄弟帮个忙，帮我搞一下这个事。”</p>
<p>这话刚出口，我就知道不对头了。表面上是忙，是没时间，但是与此同时我也捕捉到了自己内心里的一丝不耐烦这是人老的迹象。所以，我马上就改口说：“还是我自己来吧。<strong>坚决不能放纵自己对新事物的畏难情绪。</strong></p>
<p>我希望几十年之后，我已经老了，但是还有兴趣把所有最新出的电子设备买来研究一番。<strong>在这个时代，没有什么比丧失好奇心更可怕的事情了。</strong></p>
<h3 id="合伙人">合伙人</h3>
<p>真格基金创始人徐小平老师说过一句话，对我特别有启发。他说，<strong>看一个创业者成不成，关键是看他选的那个二把手，也就是合伙人牛不牛。</strong></p>
<p>为什么？最浅层的理解是，合伙人强，队伍才强。但是徐老师的意思比这个理解要深得多。</p>
<p>他说，我们其实很难判断一个创业者靠不靠谱，因为什么样的人都有可能成功。但是他选的二把手合伙人就是他综合素质的体现了。他的<strong>挑人选人的能力、业务布局能力、与人协作的能力、带领团队的领导力</strong>，全都能从这个合伙人身上看出来。所以，合伙人不只是他的一个伙伴，还是他本人的一面镜子。</p>
<h3 id="合作思维">合作思维</h3>
<p>在合作关系中，有两种思维模式：一种是判断，一种是衡量。</p>
<p>做判断的人，总是觉得，我和对方的关系状态是既定的，比如，这个人值不值得信任？这个人跟我交情好不好？他爱不爱我？等等。如果做不了判断，那他就要去考验对方。不过人性这个东西，真的经不起考验。所以有这种思维模式的人总是会在合作关系中受伤害。</p>
<p>做衡量的人，不觉得双方的关系是确定的，也不觉得责任是对方的。所以，他们经常问的问题不是“他值得信任吗&quot;，而是“<strong>在什么情况下，他有可能选择合作</strong>&quot;。交情够了，那再加点利益？利益有了，那再深化一下交情？</p>
<p><strong>这两种思维模式之下的人，前一种人的世界里最重要的两个字，是人品；后一种人的世界里最重要的两个字，是行动。</strong></p>
<h3 id="合作与合伙">合作与合伙</h3>
<p>有一句话，叫“<strong>和有资源的人合作，和没退路的人共事</strong>”。</p>
<p>这句话很开脑洞，它一下子把困扰很多人的“找个什么样的合伙人’这个问题给说明白了。<strong>在这个时代，人与人之间的关系状态，其实是分成两种的，一种是合作，一种是合伙</strong>。看起来都有紧密联系，但本质不一样。</p>
<p><strong>合作的本质是交易</strong>，你有什么资源，我有什么资源，大家交换就好，讲究的是<strong>公平</strong>。<strong>合伙的本质是风险共担</strong>，是在最危急的时刻还能彼此支持，互不背叛，讲究的是<strong>放心</strong>。合作是能保证在好的时候变得更好，合伙是能保证在坏的时候不会更坏。所以才说，要和有资源的人合作，和没有退路的人共事。</p>
<p>从这个角度，我们才可以看清楚很多关系的实质。比如谈恋爱是合作，结婚那就是合伙；一起上班是合作，一起创业那就是合伙。</p>
<h3 id="怀孕">怀孕</h3>
<p>有一个朋友怀孕了。因为她年龄稍大，所以紧张得要死，大门不出，二门不迈，大把地吃各种孕期保健品。后来一位产科医生跟她讲，别相信那些保健品，也别信什么民间土方。那些东西之所以流行，是因为它正好针对你的恐惧。<strong>人在恐惧下，判断力是零</strong>。</p>
<p>那该信什么？只有两样东西。<strong>第一</strong>，就是主流医学界经过反复证明的东西。<strong>第二</strong>，就是人的身体本身。<strong>我们的身体是数亿年生物进化史打造出来的，精密程度远远超过现在的任何人工系统。它最强悍的能力，就是觅食和繁殖</strong>。</p>
<p>所以，怀孕了要小心肯定没错。但是如果在怀孕早期流产了，绝大多数情况都不是因为你不小心，而是因为这个胚胎质量不好，你的身体知道它不值得保留，才把它淘汰掉。所以，要相信你的身体。</p>
<h3 id="环境">环境</h3>
<p>古时候，有人问一位禅师，达摩祖师面壁九年，到底为什么？禅师回答了三个字，睡不着。这是一宗著名的禅宗公案，对我启发很大。</p>
<p>很多看起来很了不起的事，一般我们都觉得会有很深奥的原因，但往往只是一个顺理成章的结果。比如有人勇敢地从一个大家都很羡慕的地方辞职了，大多数情况下真实原因都不是因为追逐梦想，而是混不下去了。</p>
<p>再比如，某人坚持做一件很难坚持的事，也不见得是因为他有毅力，而是因为他有不得已的苦衷·比如罗胖每天坚持发语音，就是因为责任越来越大，不得已嘛。</p>
<p>所以，结论来了，要想做非凡的事，就得把自己先放到一个非凡的环境里。<strong>人的行为、选择和最后的成就，往往都是环境的结果。</strong></p>
<h3 id="灰度认知">灰度认知</h3>
<p>我们经常讲认知升级的重要性，但为什么有的人很聪明，认知能力也很强，却还是过得一塌糊涂？</p>
<p>我的朋友老喻（喻颖正）跟我讲了八个字一一“<strong>灰度认知，黑白决策</strong>。”什么意思？<strong>认知能力越强的人，对世界的理解就越是灰度的，也就是不黑不白</strong>。</p>
<p>比如一个高水平的经济学家，是不会动不动就做明确预测的，反而水平低的人什么都敢说。但是一个人要想生活好、事业好，每天都面对着大量具体的决策，而决策必须在两难中坚决拍板，非黑即白，所以叫黑白决策。</p>
<p>有的企业老板，认知能力并不行，好多事都不懂，但是拍板能力特别强，生意照样做得不错。而很多人认知水平很高，但是过不好，就是因为跨不过灰度认知、黑白决策之间的这条沟。你看，学什么都是有用的，但是学到什么都不能保证你成功。</p>
<h3 id="灰人理论">灰人理论</h3>
<p>据说牛津大学流行一种学术态度，叫“灰人理论&quot;。什么意思？就是反对刻苦。</p>
<p>比如说，我在某个方面其实没有太好的天分，但是我凭借刻苦精神，总想获得更好的学位，这种人就被称为“灰人&quot;·据说在牛津大学的鄙视链里面，这是最底层的人一一不要误会，如果你在某个方面有很高的天分，周围的人当然不会反对你刻苦的。</p>
<p>这是我们不太熟悉的一种思路。因为<strong>在那些创造性没那么高的领域，勤能补拙的效应是存在的，但是在高创造性领域，我们就不得不尊重天赋的价值了。</strong></p>
<p>其实，细想一下，这种态度也不完全是粗暴的否定，它也含有另外一层意思，那就是，<strong>每个人都各有天賦，不要在你不擅长的事情上浪费时间，要去找你真正有天分的地方。</strong></p>
<h3 id="活出自我">活出自我</h3>
<p>什么叫活出自我？</p>
<p>钢琴家古尔德说：“一个人可以在丰富自己时代的同时并不属于这个时代，他可以向所有时代诉说，因为他不属于任何特定的时代。一个人可以创造自己的时间组合，拒绝接受时间规范所强加的任何限制。”</p>
<p>说得真好。<strong>活出自我，不是叛离集体，也不是违背时代，而是他能创造一个属于他自己的时间感的组合。</strong></p>
<p>一部分人，向这个时代诉说，他要挣钱，要成名，要出人头地；另一部分人，他还要向所有时代诉说。比如，他可以选择继承一点苏东坡的精神，回应一点孔夫子的呼吁，<strong>这个组合越丰富，越别出心裁，越有自己的道理和坚持，那他就越是一个成功地活出自我的人。</strong></p>
<h3 id="伙伴">伙伴</h3>
<p><strong>人找伙伴，其实是有两种模式的，一种模式是找保姆，另一种是找战友</strong>。找保姆，是为了满足自己的各种需求。找战友，是为了在达成目标的过程中找到同盟军。</p>
<p>比如说在一家公司里，平时大家好像都是平等的同事，但大家都心知肚明，谁只是老板雇来满足特定需求的保姆，而谁是带着一身本事和自己的目标来加盟的友军。</p>
<p>找配偶也是一样。很多人是因为对方对自己好而和对方在一起，也就是把对方当成自己的保姆。其实以此为起点的家庭，往往崩溃得很快。而彼此结成战友的家庭，是我眼中的理想家庭模式，两个人都因为对方的存在而变得更好。</p>
<p>战友模式既然明显优于保姆模式，为什么还很难实现？原因很简单，战友模式里，除了两个人之外，还有一个第三者，那就是目标。这是最难的。毕竟不是每个人都有自己的目标。</p>
<h3 id="获胜规则">获胜规则</h3>
<p>一个朋友告诉我，有一次他们部门办年会，搞唱歌比赛，赛制很特别，部门所有人分成两队，每次各出一人，分主题竞赛。</p>
<p>比如说，这一轮主题是少数民族，各唱一首少数民族歌曲，曲目自选。但是重点来了，怎么确定获胜方呢？不是谁唱得好谁获胜。获胜的规则是事先另外定的，密封起来，唱完之后让评委打开看。</p>
<p>那这场少数民族主题的比赛谁获胜呢？谁唱的民族人口多谁获胜，跟唱歌水平没有一毛钱关系。那大家会不会不认真唱了？不会，所有人仍然会认真唱，发挥自己的最高水平。</p>
<p>这个游戏设计真有意思。这不就是真实的人生吗？<strong>每个人独自尽最大可能去努力，但是决定谁获胜的规则，其实事先没有人知道。</strong></p>
<h2 id="J">J</h2>
<h3 id="机制">机制</h3>
<p>有这么个段子：老婆学完了管理学，想用管理学的方法改改老公晚回家的习惯，就定下了一个机制一一老公晚上 11点还没回家，就锁门。</p>
<p>第一周，很奏效，但第二周老公的毛病就犯了，老婆按照事先的约定把门给锁了。但是慢慢地，老公索性就不回家了。那怎么办？老婆就搞出了一个新机制：老公晚上 11 点还没回家，就开着门睡觉。你能想到新规矩的效果，老公从此以后 ll 点之前准时回家。</p>
<p>这个段子说明了什么？说明了好机制和坏机制之间的区别。<strong>坏机制，是基于强制和惩罚的；而好机制，则着眼于拉动人内心深处的欲望和需要</strong>。</p>
<p>举个例子一一我是从沈祖芸老师那儿听来的，北京十一学校原来和其他学校一样，要定期检查老师们的备课本，后来就改了，改成定期收藏老师们优秀的备课本。你看，这是不是就把坏机制变成了一个好机制？</p>
<h3 id="积木式创新">积木式创新</h3>
<p>这些年关于社会图景的认识有一个变化。</p>
<p>原来，传统社会的样子看起来就是一个金字塔，上面控制下面。后来，互联网来了，我们觉得金字塔倒了，社会图景变成了流沙，不同来路的人在一起搅和，变动无常。再后来，我们终于明白，互联网社会不是金字塔，但也绝不是流沙。</p>
<p>投资人王煜全老师贡献了一个词，叫“积木&quot;。<strong>每个人，每个组织，不是随机地组合，而是各自找到自己的特色和专长，然后迅速地聚合、创新，再聚合、再创新。这叫“积木式创新”。</strong></p>
<p>观察我们当前的社会，这才是一个更有解释力的概念。</p>
<h3 id="基本功">基本功</h3>
<p>有一次，汪丁丁教授谈起中国古人教育小孩子的三门基本功，洒扫、应对、进退。</p>
<p>洒扫，就是洒水扫地，指的是做一些特别具体的事；应对，就是和人沟通的能力；进退，就是指在不同场合下，自己进人和退出、参与和回避的分寸感。这三种基本能力，比具体的知识重要得多。</p>
<p>这是古人的儿童教育，对照来看今天的成人世界，其实差不多。</p>
<p>今天，具体的知识<strong>随时在更新</strong>，你有多少<strong>存量知识</strong>都不够用。</p>
<p>所以，<strong>第一，做具体的事，心中才有真问题，求知得到的才是真知识；第二，和人的沟通能力、协作能力，是一切能力的根本；第三，选择关头的分寸感，是要终身进步的能力</strong>。回到根本，更重要的东西，其实还是这三样。</p>
<h3 id="激发">激发</h3>
<p>有一种论调，读书一定要读经典。比如读美学著作就一定要从黑格尔的那几大本美学作品读起，读历史就一定要从《史记》《资治通鉴》读起。</p>
<p>这个说法我不完全同意。对大多数人来说，读书是培养自己性灵的方法，不是搞学术，所以<strong>读书路上最有价值的节点，是那些用人性力量激发了我们进一步探索兴趣的书，而不是那些经典的书</strong>。</p>
<p>比如，让我对美学有兴趣的是李泽厚的《美的历程》；让我对晚清史兴趣大增的是高阳的《慈禧全传》·前一本是通俗介绍，后一本压根儿就是小说。但正是他们带领我登堂人室，是这两个人用他们的人格魅力点亮了我进一步求知的路灯。</p>
<p>说得更直白一点，<strong>知识获取就是自我价值生产的一种方式。这种生产和其他生产一样，低成本、高效率同样是正道。</strong></p>
<h3 id="及时反馈">及时反馈</h3>
<p>弘一法师说过这么一段话：</p>
<p>人生最不幸处，是偶有一失言，而祸不及（我说了错的话，但是好像也没什么后果 ); 偶一失谋，而事幸成（我没有精细筹划，但是事居然还办成了）；偶一恣行，而获小利（我偶尔胡作非为，居然还拿到了一点小利益 ). 后乃视为故常，而恬不为意。则莫大之患，由此生矣（我要是觉得本该如此的话，那就要倒大霉了）。</p>
<p>这段话算是中国人的传统智慧了，难得的是说得这么精炼。你看，<strong>人犯了错，受到了惩罚，其实不见得是什么大灾大难，也可能是老天爷给咱们的重要提醒。提醒得越不及时，后面的祸害反而就越大。</strong></p>
<p>要是这么说的话，什么样的环境对一个人最友好？过去我们总以为宽容的环境最友好，其实也许还要加上一个条件，那就是反馈及时。<strong>反馈及时，同时也宽容的环境，才是最友好的。</strong></p>
<h3 id="计划">计划</h3>
<p>得到高研院的一位同学，在分享中讲了一句乡村基层干部刷在墙上的口号，叫“<strong>目标刻在铁板上，计划写在沙滩上</strong>”。这是我见过的对计划和目标之间关系最好的表达。</p>
<p>在传统社会中，空谈目标是没有意义的，只有把目标转换成大家都能严格执行的计划，也就是大家真正能感知到的东西，才有可能发起有效的协作。所以，<strong>在传统社会中，计划比目标重要。</strong></p>
<p>但是现在不同了，抵达一个目标的途径其实有很多种。<strong>一个有效的计划，往往不是得到坚决执行的计划，而是在过程中不断改变的计划</strong>。万维钢老师也说，“你有你的计划，世界另有计划&quot;。</p>
<p>这个时候，能够让所有人看见、能够发起有效协作的，其实反而是那个咬定不放松的目标本身。所以才说“目标刻在铁板上&quot;，而计划只能“写在沙滩上&quot;。</p>
<h3 id="记忆力">记忆力</h3>
<p>科普视频作者安森蟲老师讲过一句话：我们人类的记忆力，其实比我们以为的要好得多，我们的大脑能记住超多的信息，但问题在于，我们往往调取不出来。</p>
<p>我也看过类似的理论，人其实是过目不忘的，但是为了减少大脑的负担，这些信息都被压制了。所谓记忆力好的人，不是存储能力强，而是建立了非常好的调取记忆的路径。</p>
<p>这个道理，如果放在整个社会场景里，就更是如此了。你想，今天的互联网和数字系统，其实就是人类的外接大脑，记忆问题早就不是问题了。如何把已经存下来的知识调取出来，这个问题变得越来越突出。</p>
<p>这就可以有两个很重要的推论：</p>
<ol>
<li><strong>第一</strong>，记忆知识，不如不断整理和丰富自己的理解框架，让信息各归其位，方便调取；</li>
<li><strong>第二</strong>，记忆知识，不如编织自己的社会性知识网络，说白了，就是认识各个方面有专门知识的人。</li>
</ol>
<h3 id="技巧">技巧</h3>
<p>有一些人际关系中的小技巧。比如说，路上偶然遇到一个人，他有没有耐心跟你说话，不要看他的神态和语言，要看他的脚，如果他脚指的方向不是你而是其他方向，那他就是随时准备开溜。</p>
<p>再比如说，说话的时候做手势一定要双手，切忌单手，因为双手暗示的是拥抱，单手容易被理解成指指点点。</p>
<p>最有意思的一个技巧是，如果你到了一群陌生人当中，全不知道他们之间的关系状态，那你就一定要准备一个笑话。重要的不是讲笑话逗他们乐，让他们喜欢你，而是在他们发笑的一瞬间注意观察，你会发现那些边笑边对望的人就是这群人中关系最好的人。谁都不看，也没人看他的人，就是人缘最差的人。</p>
<p><strong>人在社会交往中，细节是最难控制的，也是最暴露真相的。</strong></p>
<h3 id="绩效">绩效</h3>
<p>浮墨笔记（ f10m0 ）联合创始人少楠有一篇文章，说我们这代人可能正在失去创造力。为什么？因为绩效主义。</p>
<p>举个例子。如果我在走路，我接收到的所有信号，都是跟绩效和目标有关的，那我只有一个选项，就是跑。因为跑的速度史快，也更能展示能力，更容易赢得目光和掌声。我肯定不会舞蹈，因为舞蹈不符合绩效的主张，没有清晰的目标。</p>
<p>抽身出来一看，这就是个悲剧了。因为跑步并不是新的行走方式，它只是加快了速度的行走。舞蹈才是全新的运动方式。它要求我们调动对自己身体内部的节律、外部的音乐和环境的感知能力，做创造性的动作。但是不好意思，当环境全是绩效主义的衡量指标时，我们不会跳舞，只会跑步。</p>
<p><strong>这就是绩效的问题，它只会“让我们一味地忙碌，而不会产生新的事物，它只会重复或加速已经存在的事物”。</strong></p>
<h3 id="假象">假象</h3>
<p>有一个观点说，现代社会造成了一个假象，就是你的所有问题都有人负责解决。</p>
<p>比如健康问题，古人说那是命，医生治得了病治不了命；现代社会里的人，认为到医院找医生就行了。再比如个人成长问题，古人说那得靠自己争气；现代社会里的人，觉得把孩子送到最贵的学校就行了。但是，只要深想一下就知道，医学再发达，也只是在有限的边界内解决问题；教育资源再好，也不能改变这个世界上牛人和庸人的比例。</p>
<p>所以，<strong>现代社会是把没法解决的那些终极问题，在人类社会内部强行闭环了一这当然是一个假象。</strong></p>
<p>从这个角度，你就可以理解，为什么在现代社会阴谋论这么盛行了。阴谋论不是什么别的东西，正如哲学家卡尔，波普尔说的，认为世界上无论发生了什么事，都应该有人为此负责，这就是阴谋论。</p>
<h3 id="价值链">价值链</h3>
<p>有一个说法，有时候，一个企业的失败不见得是自己做错了什么，而是它所在的价值链的失败，是上游下游的合作伙伴出了问题。</p>
<p>比如，宝洁到今天做得还很好，但是它上游广告主要靠传统电视，下游渠道主要靠超市。这两个价值链上的伙伴都在走下坡路，它自己还能独善其身吗？</p>
<p>想想这种失败真是很要命，不容易觉察，甚至原先做得越好，就可能会陷得越深。</p>
<p>所以，<strong>“抱大腿&quot;</strong> 是这个时代的一种生存策略。<strong>只要是新的优质资源，想方设法合作起来再说，不能被钉死在原先的价值链上。</strong></p>
<h3 id="价值判断">价值判断</h3>
<p>选择权是一种非常有欺骗性的东西，它让我们觉得自己有力量，但其实剥夺了我们的主动性。</p>
<p>比如，价值判断，也就是说什么东西好还是不好，就是一种选择权。看起来我们张嘴就能断人祸福，但其实只是在好和不好中做一个非常狭窄的选择。</p>
<p>作家王小波说过这么一段话：“在人类的一切智能活动里，没有比做价值判断更简单的事了。假如你是只公兔子，就有做出价值判断的能力一一．大灰狼坏，母兔子好·然而兔子就不知道九九表。此种事实说明，一些缺乏其他能力的人，为什么特别热爱价值的领域。倘若对自己做价值判断，还要付出一些代价；对别人做价值判断，那就太简单、太舒服了。”这段话看得真是让人倒吸一口凉气。</p>
<p><strong>偏爱做价值判断，其实也是缺乏能力的一种表现。</strong></p>
<h3 id="坚持">坚持</h3>
<p>有一次，我在一家公司的墙上注意到一个词一一坚持。</p>
<p>坚持如何如何，这是一个典型的口号。为什么要坚持？好像是因为很难，或者看不到眼下的好处，所以坚持学习、坚持工作，好像拼的都是毅力。但是我这次看到坚持这个词，脑子里蹦出来另外一个想法，就是那些坚持做某件事的人，真的是因为毅力吗？未必。</p>
<p><strong>我们旁观别人坚持锻炼、坚持早起、坚持读书、坚持减肥，觉得难，那是我们作为旁观者的感受，是因为我们自己感受不到那种当下的好处</strong>。但是对那些身在其中、坚持下去的人来说，他们因为自己的想象力，当然也可能因为自己的知识，看得见好处。所以对他们来说，其实并不是毅力下的坚持，而只是正常地在 <strong>“行动一收益&quot;的正向反馈</strong>中生活。</p>
<p>所以，<strong>如果我们佩服一个人的毅力，还不如干脆去找找，他到底是怎么感受到这项行动给他带来的好处的。</strong></p>
<h3 id="见怪不怪">见怪不怪</h3>
<p>万维钢老师在他的订阅专栏《精英日课》里面，说到一个有意思的观点。他说，什么叫人成熟了？就是对小概率事件的接受程度比较高。</p>
<p>举个例子。小学课本里肯定只能写冬天到，雪花飘，因为冬天下雪是大概率事件。如果写春天到，雪花飘，就肯定不在小学课本里了。这可能是一本大人看的小说，因为春天下雪不太寻常，只有心智更成熟的人才会接受。</p>
<p>想来也是，<strong>所谓成熟，就是见多识广，就是见怪不怪，对小概率事件的接受程度比较高</strong>。如果这个概念成立，很多年岁大的人就不见得成熟度高了。他们可能至今还接受不了有人把好好的工作辞了，有人终生不结婚、不生孩子。</p>
<p>人类历史上，成熟第一次和年龄无关。</p>
<h3 id="建设性">建设性</h3>
<p>咱们来说说感受和事实的区别。</p>
<p>事实这种东西，随时发生，随时也就过去了，而感受不会，它会留下来，成为既和事实脱离，但是又沉积在我们脑子里的垃圾。</p>
<p>比如说失败。失败一旦成为既定事实，它就已经过去了，但是沉淀在我们脑子里的感受，会让我们沉浸在失败情绪里很长时间。所以，什么是建设性？<strong>建设性，不是一路向前，而是不断清空感受，重新回到事实</strong>。</p>
<p>在工作中经常这样。一旦目标受挫，会议室里，经常会出现三种人：上进心强的人，往往心情很沮丧，唉声叹气；现实感强的人说，就这样退而求其次吧；<strong>而建设性强的人的思路是这样的一既然事实已经如此，我们能不能基于这个事实找出另外一条路，比原来的目标还要好</strong>。职场里的成功，几乎无一例外，都是不断重复第三种思路的结果。</p>
<h3 id="讲故事">讲故事</h3>
<p>我看过一个视频。有一个盲人在街上乞讨，面前搁着一张纸，上面写着：“我是一个盲人，请帮助我。&quot;结果，路过的人很少有给钱的。</p>
<p>这时候有一个女孩路过，掏出笔来，在上面重新写了一句话。神奇的事发生了，此后的路人纷纷慷慨解囊。女孩重新写的这句话是：“这是美好的一天，而我却看不见。&quot;改得真好。</p>
<p>过去总有人以为，讲故事，就是编一个稀奇古怪的情节。其实这是对故事最大的误解。</p>
<p><strong>一个好故事的本质，是把听众或读者带入一个情境，让他们自己在里面寻找喜怒哀乐的人生体验</strong>。这门功夫可不光是写字的人用得到，讲故事已经是现代人生存的一个基本功了。</p>
<h3 id="交流">交流</h3>
<p>如果你特别想引起某个人的注意和好感，现在她发了一条朋友圈，有几张图片，那么请问你该怎么做？</p>
<p>点个赞？没什么用，因为这件事已经结束了，没有下一步了。那加几个字的评论，“照片拍得真漂亮&quot;？也没用，跟点赞的效果差不多。那再加点信息量，“照片拍得真漂亮，这是在哪里啊&quot;？她就算是回答你了，你也不得分。为什么？因为这个问题增加了她的负担，她即使回答也只是出于礼貌。</p>
<p>正确的做法是什么？是写一条评论，“第三张最好看&quot;。那你获得她回复的概率就很高很高了。为什么？因为你在她的世界中引起了一个分别，切下了一道鸿沟，造成了她自己的一个问题，她要么能回答，要么要向你求助。</p>
<p>所以，<strong>和他人交流最好的方式，不是讨好他，而是给他制造一个要解答的问题，而你恰好能给出好的答案。</strong></p>
<h3 id="教练">教练</h3>
<p>有一篇文章说，找一个好教练的方法之一，<strong>就是看对方给的指令是不是简短明确</strong>。如果不管说什么，他都讲一套大道理，指引一个模糊的方向，那么这个人可能是高手，但未必是好教练。</p>
<p>什么是简短而明确的指令？比如，他不会说“手举得高一点儿&quot;，而是会说“把手靠近耳朵&quot;；他不会说“演奏的速度再快一点儿&quot;，而是会说“跟上节拍器&quot;；他不会说“请与销售团队更紧密地合作&quot;，而是会说“请每天早上与销售团队沟通 10 分钟&quot;。</p>
<p>你看，<strong>好教练就是能站在我们的角度，知道我们能通过什么样的拐杖精确地走到下一步</strong>。</p>
<p>这就要说到“教练&quot;这个词了，英语中这个词（ coach ）的意思，其实是马车。找教练，不是在找站在我们对面的老师，而是在找一个值得信任的人，可以和我们一起去陌生的地方。</p>
<h3 id="教训">教训</h3>
<p>梅特涅亲王写给妻子的一封信中有一段话：“我们这一代人经历过法国大革命，打败过拿破仑，清楚地知道革命两个字意昧着混乱、暴戾和毁灭，但那些年轻人知道吗？他们眼里只能看到旧体制的腐朽和无能，将和平与安宁视为理所应当的馈赠，为了革命的浪漫而随时可以毫不珍惜地丢弃一、、俄怎能对国家的未来不心存疑虑？”</p>
<p>梅特涅是两百年前的人了，奥地利帝国的首相，欧洲列强联合打败拿破仑之后，他成了当时非常重要的一位政治家。</p>
<p>隔了两百多年，再来看这段话，别有一番滋昧在心头。<strong>任何价值，包括对每个人来说都至关重要的和平和安定，只要拥有了，就容易被低估，甚至要主动去否定它。所以黑格尔才说：历史给人们的唯一教训，就是人类从来不吸取教训。</strong></p>
<h3 id="教育">教育</h3>
<p>社会学家赵鼎新老师说，他教育自己的小孩，就提三个要求：<strong>能写、会算、敢判断</strong>。</p>
<p>所谓能写，就是会表达，当然包括写作和演讲等各种形式的表达。</p>
<p>所谓会算，不是指算数或者数学，而是指面对复杂的情况，能够做出理性的推理和安排，先干什么后干什么，怎么找到处理事情的最佳策略。</p>
<p>最后一条，敢判断，这就是道德范畴的事了。道德教育对孩子最大的用处，就是节省他做判断的成本。什么事可以做，什么事不可以做，什么该支持，什么该反对，心中有了坚定的道德观念，做选择的成本就很低。</p>
<p>想想也是，<strong>不仅是教育孩子，即使是成年人，一生中最重要的也是这三个维度的能力：理性决策的能力，通过表达协同他人的能力，还有因为价值观清晰而降低选择成本的能力。</strong></p>
<h3 id="接受">接受</h3>
<p>我有一个朋友，很不幸得了绝症，但后来又死里逃生了。他在回顾那几年的生活时，告诉了我一个完整的心路历程。</p>
<p>刚开始得知消息的时候，第一反应是<strong>无法接受</strong>，“这么倒霉的事情怎么落到我的头上了？&quot;所以，他很抓狂，极力否认。</p>
<p>紧接下来的一个阶段是<strong>极度沮丧</strong>，甚至折磨自己身边的人。</p>
<p>第三个阶段是<strong>麻木</strong>，觉得自己没希望了。</p>
<p>但紧接着就是第四个阶段，<strong>接受</strong>了这件事情，并把病当成身体的一个部分，甚至自己的一个伙伴。</p>
<p>最后，在和这种病共同舞蹈的过程中建立了一种新的平衡，他又可以开始新的生活了。</p>
<p>他后来总结说，<strong>任何不好的事情，不管是事业挫折还是感情挫折，第一件要让自己做到的事情，就是控制住自己排斥它的心态，先接受，然后才能放下。</strong></p>
<h3 id="截然相反">截然相反</h3>
<p>财新传媒总编辑王烁老师在一篇文章里引用了作家菲茨杰拉德的一句话：“<strong>能同时拥有两种截然相反的观念，还能正常做事的人，才是有第一流智慧的人</strong>。”这话说得真好。</p>
<p>我们一般都喜欢把有智慧的人想象成那种价值观清晰、逻辑一致的人。但实际上，高手境界，恰恰是混沌的，而不是清晰的；是随机应变的，而不是条条框框的。</p>
<p>举个例子。投资理财的高手，绝对不会一昧地谨慎，或者一昧地大胆。他最有价值的判断，可能是在电光火石的一瞬间做出的，甚至跟他平时主张的逻辑完全相反，这才叫高手。</p>
<p>很多人都说，成长就是为了懂得更多道理。这句话其实应该改一下，<strong>成长是让自己的精神世界能够容纳更多相反的道理，并且知道在什么时候使用什么道理。</strong></p>
<h3 id="解决">解决</h3>
<p><strong>创业之后，我渐渐想通了一件事一有些问题是不必解决的。</strong></p>
<p>你看，我们这代人是做着题长大的，长期被教育遇到难题不能退缩。但事实上，人在真实生活中的很多烦心事，<strong>本质上不是自己的问题，而是周边关系结构出了问题</strong>。可能关系一调整，问题就不存在了。</p>
<p>举个例子。有个朋友创业搞软件开发，产品总不满意，总在调整。结果就出现了大量管理上的问题。这种管理问题，靠组织建设、健全制度能解决吗？连加工资都没用！</p>
<p>最好的解决办法，是忘掉这些乱糟糟的问题，迅速让产品上线，让团队里所有人的注意力放到用户反馈上，放到装机量每天的变化数字上。这样团队的关系结构就变了。原来是自己人互相博弈，现在是大家<strong>团结起来和环境博弈</strong>，原来的问题自然迎刃而解。</p>
<h3 id="金钱观">金钱观</h3>
<p>有个朋友的孩子要去上大学了。他说，我想告诉孩子正确的金钱观，但是怎么精炼地表达呢？我就把计算机科学家吴军老师的一套说法推荐给他了。很简单，就五句话。</p>
<ol>
<li><strong>第一句</strong>，钱是老天爷存在你那里的，不是给你的，回头你还要还给他。</li>
<li><strong>第二句</strong>，钱只有花出去才是你的。</li>
<li><strong>第三句</strong>，钱和任何东西一样，都是为了让你生活得更好，而不是给你带来麻烦的，带来麻烦的钱，不能要。</li>
<li><strong>第四句</strong>，钱是靠挣出来的，不是靠省出来的，而挣钱的效率取决于一个人的气度和格局。</li>
<li><strong>第五句</strong>，钱是花不光的，但是可以迅速通过投资或者投机给投光。</li>
</ol>
<p>这五句话总结真精彩。说白了，钱太显眼了，往往会遮住我们的目光。而吴军老师的这五句话，都是提醒我们<strong>越过钱本身，看到它后面的东西，看到它本身实际上是什么，一不小心又能给我们带来什么。</strong></p>
<h3 id="竞争">竞争</h3>
<p>过去，教育的目标只有一个，就是把人类社会积累的经验和知识传递下去，说白了就是智商教育。</p>
<p><strong>过去的社会竞争主要取决于一个人的单体技能，你智商越高，越厉害，竞争的优势就越大</strong>。教育扮演的是一个人的充电站和加油站的角色。</p>
<p><strong>但是未来，竞争的成败主要看你所处的关系网络，以及你和这个网络协同的能力</strong>。所以，未来的情商教育越来越重要。</p>
<p>阿里巴巴上市时，制造了无数的干万富翁。很多人觉得阿里巴巴的员工是幸运丿 L ，潜台词就是他们不过是运气好，凭什么这么有钱？其实这没什么不公平的，因为人家所在的关系网络对头。</p>
<p>单个人的能力或者说聪明，越来越不是竞争的决定性因素了。</p>
<h3 id="竞争对手">竞争对手</h3>
<p>在阿里巴巴前 CEO 卫哲的一篇文章里看到一件有趣的事。</p>
<p>有一次，马云带队去美国考察，见到了很多公司的一把手。通常他都会问一个问题：谁是你们的竞争对手？一路问下去，最后问到了谷歌的创始人拉里．佩奇，得到了一个奇怪的答案。拉里、佩奇说，是 NASA （美国国家航空航天局）和奥巴马政府。</p>
<p>这是为什么？拉里．佩奇的解释是：<strong>谁跟我抢人，谁就是我们的竞争对手</strong>。</p>
<p>其他公司抢我们的工程师，我们不怕，我们可以开更高的工资抢回来。可是我们的工程师去 NASA 或者奥巴马政府工作，他们可以忍受只有我们这里五分之一，甚至更低的工资，我们还抢不过，这就麻烦了。这说明，虽然谷歌描绘了一个很大的梦想，但是还有别的地方梦想更大，做的事更好玩。所以说，谁跟我们抢人，谁就是我们的竞争对手。</p>
<h3 id="境界">境界</h3>
<p>清末的湖广总督张之洞有一句名言“我平生有三不争，不与俗人争利，二不与文士争名，三不与无谓人争闲气。”</p>
<p>这话说得在当时就有人拍案叫绝。当然，他自己也不见得就做到了。</p>
<p>这三条当中，最难的就是“不与无谓人争闲气&quot;这一条。争名争利，都是为自己争，为未来争，争的是<strong>增量部分</strong>，争一争倒也无妨。而争闲气就不同了，因为它是为身外之物争，为过去争，争的是<strong>存量部分</strong>。</p>
<p>我的一位老前辈跟我说过，<strong>人的境界就看他怎么定义自己的尊严</strong>。有的人被别人看一眼就觉得被触犯了尊严，这就是流氓的境界。有的人受胯下之辱也没觉得怎么样，这就是韩信的境界。<strong>境界越高的人，就越看似没什么尊严，但那往往是因为你看不到他真正看重的东西。</strong></p>
<h3 id="就事论事">就事论事</h3>
<p>有一个刚工作的年轻人问我，同事之间说话有什么要注意的。</p>
<p>我觉得只有一条，就是<strong>永远保持建设性立场，就事论事，解决问题</strong>。这个原则看似简单，做到其实不容易。</p>
<p>有几种类型的话是坚决不能说出口的。第一种类型，是讲资格，比如“你没有孩子，你有什么资格讨论教育问题&quot;。第二种类型，是讲动机，比如“我这是为你好&quot;或者“你这么说话到底什么意思&quot;，这都是从动机角度讨论问题。第三种类型，是讲道德，“你上个月不是这么说的，你怎么出尔反尔&quot;。第四种类型，是讲责任，“这个事情不归我管&quot;。</p>
<p>你发现没有，这四种类型，<strong>讲资格、讲动机、讲道德、讲责任，本质都一样，就是回避就事论事地讨论问题。这样，不管说得多热闹，这场交流都毫无意义。</strong></p>
<h3 id="拒绝">拒绝</h3>
<p>在工作中，跟别人学习，主要学习什么？我的体会是，<strong>要学习别人的行动模型，而不是具体的做法。</strong></p>
<p>举个例子。我经常不得不拒绝别人的请求，比如邀请我去参加个活动，我去不了。那怎么拒绝呢？态度谦和、礼貌就够了吗？</p>
<p>最近我就看到了一个很好的行动模型，简单说就是<strong>两步</strong>。</p>
<ol>
<li><strong>第一步</strong>，要说对不起，抱歉。这个我们都会。但是别忘了还有</li>
<li><strong>第二步</strong>，叫“你可以”，也就是指出对方还可以从哪个方向获得帮助。比如你请我，我去不了，但是我建议你去请请谁，或者你换个什么时间再来找我，或者你可以用个什么样的替代方法，等等。</li>
</ol>
<p>一次拒绝，只有包含了这两步，才能让对方体会到真正的善意和建设性，并且不让拒绝成为对交情的伤害·</p>
<h3 id="具体">具体</h3>
<p>插座 App 的创始人何川说了一段话。他说，<strong>过得幸福的前提，是学会具体</strong>。</p>
<p>比如你说，“我要多读书&quot;，这个目标是不对的，因为它不具体。具体的方式是：本周读完某本书的第二章。再比如你说，我要找一份好工作。你看，这还是不具体。具体的方式是：我必须进人某个行业，专注某个技能，干到什么水平。你说，我下决心要断舍离。你看，还是不具体吧？具体的方式是：哪几件东西今天就要扔掉。</p>
<p>这段话说得有意思。很多人以为，人生的选择，要么是眼前的苟且，要么是诗和远方。其实这个选择没那么重要。</p>
<p>真正重要的选择，是选择抽象还是具体。如果选择眼前，那请问你要用多长时间达到眼前的目标？如果选择远方，去多远？怎么去？<strong>只要具体，在哪里都不会是苟且，去哪里都不会是不切实际的妄想。</strong></p>
<h3 id="决策">决策</h3>
<p>做决策这件事，之所以难，并不是因为<strong>搞不清楚选择的利弊</strong>，而是有两个因素干扰。</p>
<p>第一个因素是<strong>大量的存量包袱</strong>，比如你的习惯、你的既得利益，等等。第二个因素是<strong>各种情绪</strong>，比如焦虑、恐惧、厌恶，等等。决策因素：存量包袱和情绪。</p>
<p>所以，<strong>做一个重大决策，有一个很巧妙的心法，就是要想办法启动一种旁观者心态</strong>。比如，假设这件事发生在你朋友身上，你给他出主意，你是支持还是反对。再比如，假设是十年后的你在给现在的你提建议。再比如，不仅想选择哪个好处大，也可以反过来想想，放弃哪个你比较舍不得。</p>
<p>这些方法的目的，都是<strong>让你抽离出来，摆脱存量因素和情绪因素的影响。</strong></p>
<h3 id="决策模型">决策模型</h3>
<p>最近我看到了一个非常简洁的决策模型，叫“<strong>小事抄作业，大事凭感觉</strong>”。</p>
<p>所渭小事，就是今天穿哪套衣服、中午点什么外卖，做这类决策的方法，就是“抄作业&quot;，别人怎么弄咱就怎么弄，不值得费心。那大事呢？比如说选行业、选伴侣，怎么决策？要相信感觉，问自己喜欢不喜欢，而不是算计。</p>
<p>你可能会说，这里面怎么都没有理性的空间？我看到的下面这句话很精彩：<strong>人类的理性不是凌驾在感性之上的，而是为感性买单的</strong>。什么意思？你根据自己的热爱，也就是用感性做了选择，一旦将来遇到了挫折，理性就会第一时间跳出来解决问题。反过来，如果最初的选择过于理性，一旦遇到问题，你的感性就会跳出来拖后腿。</p>
<p>所以，<strong>跟我们的直觉不一样，人类有理性当然很珍贵，但是在决策的时候，感性比理性重要</strong>。</p>
<h2 id="K">K</h2>
<h3 id="开放">开放</h3>
<p>哲学家维特根斯坦是个富二代。年轻的时候，为了搞哲学，他想找一个不受打扰的地方安静思考，于是就去挪威的一个小木屋里一个人待了一年多，结果收获不大。</p>
<p>随后第一次世界大战爆发，他迫不及待地想上战场，但仗没打多久就被俘虏了。在战俘营那种最混乱的环境中，他反倒灵感大爆发，完成了《逻辑哲学论》这本书。这本书在哲学界地位很高，被一些人认为是彻底解决哲学问题的书。</p>
<p>你看，最封闭的状态下想不通的问题，反而在乱糟糟的战俘营里想通了。</p>
<p>这件事给我们的启发是，你要是想搞一个创新的工作，抱定任何原则封闭地搞，没准儿效果最差。<strong>创新往往是一个开放的格局下四处乱撞的偶然结果。人类文明发展的基本方向是开放。</strong></p>
<h3 id="开会">开会</h3>
<p>有一种开会的方式，是给每个人准备一份备亡录。</p>
<p>备忘录中要包括这个会议要讨论的主题，会议的基本情况，等等。会议开始的时候，所有人都别说话，先静默地读这份备忘录。据说这个方法的发明人是亚马逊的贝索斯。他参加的会议，最长的这段静默时间居然能长达半个小时。</p>
<p>你可能会说，开会难道不应该是大家先分头做准备，然后带着对信息的理解，带着成熟的意见来开会吗？对，但那是理想情况。在真实世界里，太多人的日程是被排满的，他们压根儿就没时间准备。与其逼着他们在会议中表演熟悉情况，表演深思熟虑，还不如诚实一点，干脆在开始的时候专门给大家一点时间，专注地了解情况，整理思路。这样反而效率更高。</p>
<p>你看，<strong>有时候增进效率的方法也很简单，就是放弃想当然，正视现实。</strong></p>
<h3 id="开卷考试">开卷考试</h3>
<p>说到学习，我的朋友老喻有一个很有趣的角度。他说，未来的学习，本质上都是作弊，都是“开挂&quot;。</p>
<p>为什么这么说？你看，过去学习的目的，是要把知识装进自己的脑子里，好来应对挑战。但是未来呢？知识的量那么大，你不可能都装到自己脑子里了。<strong>学习的目的，是知道哪些知识在哪里，以什么形态存在，怎样才能找到它们，用什么代价能调用，这就行了。</strong></p>
<p>他举了一个例子，你学了一个学期的德语，现在要考试。老师说是开卷考试，你可以带一切学习资料，字典、参考书，什么都可以。那请问你该怎么做？</p>
<p>你应该跟老师确认一下，真的什么学习资料都可以带吗？老师说可以。那你就该带一个活的德国人。</p>
<p>你看，<strong>未来世界比拼的，不再是你的脑子里有什么，而是你能调动什么来帮你“开挂”。</strong></p>
<h3 id="抗压">抗压</h3>
<p>有一次，我和一位心理学家聊天。他说，人怎样培养自己的抗压能力呢？最好的办法，就是培养一门爱好，不管是养花、钓鱼，还是潜水、集邮，都行。</p>
<p>但是，你的爱好要符合两个条件：<strong>第一</strong>，得没有任何功利动机；<strong>第二</strong>，你得在上面花了大量的心力和时间。</p>
<p>过去，我们理解这种爱好，就是打发时间，甚至是玩物丧志。但是这位心理学家说，不是，这种爱好，对一个人来说，其实是一种内在的人格建设。<strong>用心血浇灌出来的一个小世界，平时看着什么用处都没有。但是，一旦人遇到了外部的重大冲击，比如说事业挫折什么的，因为有了这个内在的小世界，人格就不至于崩溃。而从外面显现出来的，就是这个人的抗压能力特别强。</strong></p>
<p>说白了，一个人在这个世界上总得有点什么东西舍不得。<strong>我们拥有的东西其实不是我们自己，我们舍不得的东西才是我们自己。</strong></p>
<h3 id="考场逻辑">考场逻辑</h3>
<p>一般来说，我们都觉得好学上进这件事肯定是对的。</p>
<p>可是你会发现，一个人如果已经大学毕业了，还整天把学习这件事挂在嘴边，没准儿反而要坏事。</p>
<p>我就认识好几个这样的年轻人，表面上谦逊好学，但是和周边人相比反而显得能力比较差。为什么？其实并不是真的能力有问题，而是他们有个错误的思维模式：我没准备好，我要继续学习，磨刀不误砍柴工。可是你想，这个社会上哪件事情是准备好了才干的？于是，就耽误做事了呗。</p>
<p>所以大学毕业之后，在生活中就不能遵从学生时代的考场逻辑了。<strong>考场逻辑是，只要努力学习、认真准备，你就会取得好结果。而实际社会生活中嬴家的逻辑是，先定一个目标，干起来再说，边干边学边想办法</strong>。学习从来不是一件单独的事情。</p>
<h3 id="考研">考研</h3>
<p>很多大三学生要面对一个选择：到底是该找工作，还是该考研？</p>
<p>我发现，很多人是用攒钱的心态对待考研这件事的：我要参加社会竞争了，那我的准备度够不够？好像还不够，那我再去考个研，多攒点知识、资历和准备时间。你看，这是不是攒钱的心态？</p>
<p>但还有一个看待这件事的模型，那就是投资模型。<strong>我要把未来两到三年的时间当作一个投资，那我要投到哪里去？</strong> 如果读研究生，那就意昧着，你判断清楚了，未来你要从事的那个职业，比如搞学术，学历高是一个核心竞争力，所以值得你投资两三年时间提高学历。如果直接去工作呢？这意昧着你投资的方向变了，你未来从事的那个职业，经验是核心竞争力，所以要投资更多的时间去获取从业经验。</p>
<p>这么一想，是不是要考研，就没那么纠结了。</p>
<h3 id="靠谱">靠谱</h3>
<p>一位人力资源行业的资深人士说自己是怎么识别一个人是不是靠谱的，很简单，就三条。</p>
<ol>
<li>第一，看这个人在面对一个突如其来的任务时，第一反应是什么。是倾向于行动，还是倾向于反抗？有人的直觉是批判这个任务不合理，有人是马上找解决方案，那当然后一种人靠谱。</li>
<li>第二，看这个人用什么态度对待地位明显不如他的陌生人，比如饭店服务员什么的。</li>
<li>第三，问我们自己，如果我和这个人一起出差，飞机误点了，我愿意和这个人在候机室一起待几个小时吗？</li>
</ol>
<p>这三个问题说明什么？说明三点：<strong>第一，这个人有进取心；第二，这个人有善意；第三，这个人有吸引力。三点都符，这人差不到哪里去</strong>。其实每个人的自我修炼也可以参考这三个方面来进行。</p>
<h3 id="科学和技术">科学和技术</h3>
<p>1931 年，爱因斯坦和他的妻子到美国加利福尼亚州的一个天文台参观，那里有世界上最大的望远镜。</p>
<p>天文台的人就跟爱因斯坦夫妇介绍，这个望远镜多昂贵多先进，天文学家怎么用它研究宇宙，等等。</p>
<p>爱因斯坦的妻子艾尔莎淡定地说，嗯，挺好，我老公干这个事用的是一个旧信封的背面。意思是，要什么望远镜，我老公纯粹靠思想和纸面推演就可以。</p>
<p>这个故事可以帮我们理解科学和技术的区别。过去我们都说科技，是把科学和技术混为一谈的。其实，<strong>科学更多的是一种思维方式，而技术更多的是一种实践体系。科学发展靠的是一群不以实用为目的的聪明脑袋，而技术发展靠的是大量的实践、混搭、跨界、试错。</strong></p>
<h3 id="可信">可信</h3>
<p>作家冯唐讲过获取信任的三个要素：可靠、可信和可亲。但可靠和可信不是一回事吗？冯唐说不是。</p>
<p>可靠，是自己靠谱，所谓“凡事有交代，件件有着落，事事有回音&quot;。而可信，是自己所处的社会网络对自己信任。以冯唐本人为例，他是协和医院的名医郎景和的弟子，仅仅凭借这个身份，他在医学界就是可信的一一还真是这样。</p>
<p>有一次，我听说一个朋友的公司招司机。公司看重的不仅是司机的技术水平，还有以下三点：第一，这个人得结婚了；第二，他得和家人住在一起；第三，他得有孩子，而且孩子还得正在上学。你看，这三点都是一个人的外部社会条件。符合这三点，他大概率就是一个勤恳工作、有责任心的人。</p>
<p>所以，<strong>要想获取他人的信任，不仅要自己能力强，还要让自己身处合适的社会网络之中。</strong></p>
<h3 id="渴望">渴望</h3>
<p>有一位教广告学的老师说，你要是想创作一个卖水的广告，待在云南想是想不出来的，得先去新疆待三个月，回来就知道云南的水好在哪丿 I 了。同样的道理，如果你要卖新疆的沙漠旅游，先去云南待三个月，然后就知道怎么推销新疆的沙漠了。</p>
<p>这个例子讲出了<strong>过剩时代的一个商业核心难题一怎样去制造渴望</strong>。</p>
<p>在过去的匮乏时代，消费者的需求是明摆着的，无非是衣食住行用。企业开足马力满足这些需求就可以了。但是在产能过剩时代，刚性的需求都被满足了，遍地都是水和沙子，你要是不能制造出渴望，这生意可就难做了。</p>
<p>而渴望这个东西，难就难在，它不出现的时候，消费者并不知道自己渴望什么。</p>
<h3 id="克制">克制</h3>
<p>趁早的创始人王潇有一个说法，说应该“<strong>摆脱多巴胺，追逐内啡肽</strong>&quot;。</p>
<p>简单地说，你想要什么，得到了，身体就会分泌多巴胺，让你快乐，这是一种<strong>奖励机制</strong>。而你做一件事，非常痛苦，身体就会分泌内啡肽，让你不那么痛苦，这是一种<strong>补偿机制</strong>。打游戏，就会分泌多巴胺；而健身，就会分泌内啡肽。</p>
<p>后来，我又看到了一个说法，“<strong>低级的欲望通过放纵就能得到，而高级的欲望需要克制才能获得</strong>”。对啊，想大吃一顿，放纵就行子而想减肥获得好身材，那就得克制才行。</p>
<p>你看，自己爽了，身体会分泌多巴胺。而通过克制和努力，获得了某个结果，不仅身体会分泌内啡肽补偿你，整个社会也会补偿你一下。里里外外都补偿，克制还是很划算的。</p>
<h3 id="客户需求">客户需求</h3>
<p>我朋友圈里的一个餐馆老板贴出来一张外卖订单。客人订的是什么呢？小炒肉。但是备注里面赫然写着：不吃辣。这不是难为人吗？</p>
<p>过一会儿，他又贴出一张外卖订单，客人点的是水煮鸡·但备注上写着：能多放点猪肉吗？又是一个无厘头的客户要求。</p>
<p>过去我们一直认为，服务业的核心精神就是要满足客户的需求，但从前面两个例子来看，客户的需求其实是一个非常模糊的东西。他在下单的时候，也许真的是想吃小炒肉，但是他又真的怕吃辣，于是两个自相矛盾的愿望就这么提出来了。</p>
<p>我们都当过客户，可我们真的知道自己的需求是什么吗？并不一定。很多情况下，我们更想让一个值得信任的人或品牌给我们一个需求。所以，<strong>这个时代，服务的核心精神，也许就是能创造出一个客户需求，并且让它被普遍接受。</strong></p>
<h3 id="课程">课程</h3>
<p>李希贵校长有一个洞察。他说，学校是干什么的？<strong>是把未来社会的复杂性压缩在一个小环境里，让学生在进入社会之前提前体验一遍。</strong></p>
<p>你看，学校里有那么多个性不同的人要相处，有那么多挑战要应对，很复杂的。但是学校和社会相比还是安全得多，在学校里，学生不怕失败，可以安心地试错。</p>
<p>理解了学校的这个本质，就可以重新定义什么是“课程&quot;了。课程不仅是把知识往学生的脑子里装，课程的作用还体现在，把社会的某个方面用非常浓缩的方式展现给学生，让学生提前在里面感受一下，摸爬滚打一番，发掘出自己的潜能。比如计算机课，不是让学生真的把计算机水平提高到什么程度，而是让学生提前知道自己喜不喜欢计算机。</p>
<p>你看，<strong>课程不仅是知识的“注射器”，还是学生自己的“体温表”。</strong></p>
<h3 id="恐惧清单">恐惧清单</h3>
<p>少楠拉了一张有趣的清单一一<strong>恐惧清单</strong>。简单地说，就是遇到一件恐惧的事情时，我们可以参照去思考的七件事。</p>
<ol>
<li>第一，事情的定义。</li>
<li>第二，我对它的恐惧程度。</li>
<li>第三，我现在能想到的预防措施。</li>
<li>第四，如果预防不了，那我的修复措施是什么。</li>
<li>第五，我尝试修复它，能带来什么好处。</li>
<li>第六，如果不这么做，半年后的代价是什么。</li>
<li>第七，如果不这么做，三年后的代价是什么。</li>
</ol>
<p>你可能会说，把这个清单拉出来，把答案填上，能有什么好处呢？首先，把一个巨大的未知问题变成很多具体的小问题，本身就是迈向解决问题的一大步。其次，在恐惧面前，我们原本只能做应激反应，要么战斗，要么逃跑。而拉出这张清单，最大的好处就是，终于把理性调动出来，可以着手解决问题了。</p>
<h3 id="控制力">控制力</h3>
<p>美国有一家公司，每次招聘员工，培训之后，签约之前，会给这些人一个选择：如果你不喜欢我们公司的做事方式，现在就辞职，我们给你 1000 美元。不辞是吧？那好，再加。这个辞职奖金后来居然加到了 4000 美元。但是大部分人还是留下了，而且留下的人干得都很好。</p>
<p>这个制度有两个用处。首先，是把真正喜欢这个公司的人筛选出来了，如果你只是为了钱，给你钱了，可以走人了啊。但更重要的是，让每个人在心底进行了一次权衡我是损失了 4000 美元，自愿付出了代价，才加人这家公司的一一当然工作积极性就不一样。</p>
<p>你看，<strong>改变一个人的看法，最终的途径不是说服，而是让他感觉这件事是由他自己控制的。</strong></p>
<h3 id="夸奖">夸奖</h3>
<p>我们都知道一句话，好孩子是夸出来的。但是凯叔讲故事的创始人王凯有一次说到这个话题，就说，这话没错，但怎么夸，还是有学问的。</p>
<p>比如，你不能夸孩子聪明。为什么？因为聪明是一种禀赋，你夸他聪明，其实把孩子锁定在了一个自我认知上面：哦，我是个聪明人，我要不断地证明我聪明，凡是显得傻的事都不能干。于是，孩子对陌生事物的探索能力反而被限制住了。</p>
<p>那应该怎么夸呢？你想让孩子往哪个方向发展，你就朝哪个方向夸他。比如，“你现在弹钢琴的姿势非常优雅；你这次很努力，果然有进步；你居然这么会关心其他人&quot;。这种夸，就会给孩子一个推进自我的方向感。</p>
<p><strong>不仅是孩子，成人也一样，每个人都需要被肯定。如果被肯定的是现状，他就会倾向于维持现状。如果被肯定的是方向，他就会倾向于维持努力的方向。</strong></p>
<h2 id="L">L</h2>
<h3 id="辣椒">辣椒</h3>
<p>辣椒为什么辣？因为里面含有辣椒素。那辣椒为什么会演化出辣椒素呢？肯定是为了防止被动物吃啊一一一这是辣椒的防身武器。</p>
<p>但是这个策略，遇到人类就没用了一一一人类爱吃辣。请注意，辣的感觉不是昧觉，而是痛觉。说白了，爱吃辣，是人喜欢上了受伤害之后带来的快感。</p>
<p>你看，人类这个奇葩物种，让辣椒给遇上了，算它倒霉。但问题是，辣椒倒霉了吗？并没有。人类爱吃辣，导致现在全球辣椒种植面积约 200 万公顷，年产量约 4000 万吨，辣椒因此成了植物界非常成功的物种。</p>
<p>发生在辣椒身上的这个故事，真是“祸福难测&quot;这个词最好的注脚。它也顺便告诉我们一个道理：<strong>自己有什么本事很重要，但跟什么人协同进化更重要；自己能抵挡伤害很重要，但跟一个厉害的家伙结成伙伴更重要。</strong></p>
<h3 id="栏杆">栏杆</h3>
<p>巴菲特有一句名言：“在投资方面我们之所以做得非常成功，是因为我们全神贯注于寻找我们可以轻松跨越的 1 英尺栏杆，而避开那些我们没有能力跨越的 7 英尺栏杆。”</p>
<p>你看，这句话里面有两种做事的方法。</p>
<p><strong>一种，是所谓跨越七英尺的栏杆，凡事找最难的去做，这只适合那些极有天赋的人。</strong></p>
<p><strong>还有一种，就是寻找那些一英尺的栏杆，难度低一些的</strong>。这可不是避重就轻，首先，你得找到很多根这样的栏杆；其次，你得找到跨越它们的可重复的简单动作。<strong>简单、重复，就能取得超乎想象的回报。这种方法其实更适合我们普通人。</strong></p>
<h3 id="懒蚂蚁效应">懒蚂蚁效应</h3>
<p>听说了一个词，“懒蚂蚁效应&quot;。说的是，一个蚂蚁群里有80 ％左右的蚂蚁在认真干活，打扫卫生，找吃的，忙得很；还有 20 ％，什么活儿 都不干，这 20 ％就叫“懒蚂蚁&quot;。</p>
<p>可蚂蚁群是缺不了这些“懒鬼&quot;的。它们闲逛，实际上是在四处碰运气，寻找另外的食物，它们的行动没有特定目的，保持和群体的差异化。<strong>平时它们是没什么贡献，但是一旦原来的食物源头枯竭了，想要拯救蚂蚁群，就得靠这批见多识广的懒蚂蚁了</strong>。</p>
<p>这么看来，人类中那些爱发表奇谈怪论的思想家，其实也是“懒蚂蚁&quot;。他们整天研究一些没什么用的问题，但是他们的作用也很大。<strong>一方面，他们是在探索人类未来的生存通道；另一方面，他们也在为现在的文明方式保留珍贵的差异化。</strong></p>
<h3 id="劳力士">劳力士</h3>
<p>有一篇文章说，黑社会老大的手上要戴劳力士表，背后有三个原因。</p>
<p>第一是因为劳力士很贵，如果这些黑社会老大犯了事儿，要跑路，那变卖这块随身的表，还能有个生计，或许还能借此东山再起。</p>
<p>但是比劳力士贵的表有很多，为什么非得是劳力士呢？这就牵涉到第二个原因了。</p>
<p>劳力士的变现能力最强，在世界各地的赌场里，劳力士都是硬通货，随时可以换成钱。其他的表虽然贵，但是没有这种便利性。</p>
<p>那第三个原因呢？所有黑社会老大都戴劳力士，某个老大如果变卖过劳力士，要在东山再起之后，按照 1.5 倍的价格把它赎回来，否则不吉利。这已经是黑道的一种文化。</p>
<p>你看，<strong>一个东西想流行，总是要经历这三个阶段：先提供价值，再让价值具备通用性，最后让价值上升为一种文化，反过来还能强化价值本身。</strong></p>
<h3 id="老板">老板</h3>
<p>有一位老板跟我讲他的心得。他说，什么叫企业管好了，就是老板从“踩油门的&quot;变成“踩刹车的&quot;了。</p>
<p>绝大多数老板觉得自己牛哄哄，是企业的“灵魂&quot;“舵手&quot;“发动机&quot;，无所不能。其实这是因为他们根本就没办法让每一个同事都有自我驱动的能力，所以只能累死自己。更重要的是，这样的企业很容易翻车。因为老板是“踩油门的&quot;，那一旦方向错了，或者速度快了，就没有任何力量能给他“踩刹车&quot;了。</p>
<p>真正的好组织，这个关系是倒过来的：<strong>人人都自我驱动，每个层级都有活力</strong>。老板只干一件事一一“踩刹车&quot;，通过调节资源，制止那些过激的做法。</p>
<p>那位老板总结说，<strong>搞管理，管住什么不重要，重要的是能够激发活力；做正确的决定不重要，重要的是少犯错误。</strong></p>
<h3 id="老年生活">老年生活</h3>
<p>日本人日野原重明写了一本书，名字叫《活好》。这位老先生一百岁的时候开始写诗，一百零二岁出版了自己的诗集和童话绘本，一百零三岁的时候第一次挑战骑马，一百零五岁写了这本书。</p>
<p>这本书当中最让我动容的，是这么两句话：“<strong>如果寿命足够长，我们就可以获得足够的时间来探索未知的自己。虽然一个人不可能彻底明白自己，可是越来越了解自己所带来的喜悦，远远胜过年老体衰的痛苦</strong>。”</p>
<p>这句话真好，因为它回答了一个问题：当我们变老的时候，是不是一切都在变得越来越糟糕？并不是。至少有一件事是变得越来越好的，那就是我们对自己的了解。对啊，岁数越来越大，了解世界的能力肯定是下降了，但对自己的探索是可以渐人佳境的。</p>
<p>你看，<strong>要想老年生活得快乐，就得形成探索自己的习惯和乐趣。</strong></p>
<h3 id="冷漠">冷漠</h3>
<p>我读人物传记有一个心得，就是牛人的性格当中都有点适度的冷漠。</p>
<p>在一般的观念里，我们都会颂扬热情的价值，贬低冷漠的价值。<strong>但热情是什么？究其实质，它是一种总想和别人融为一体的、获得认可和安全感的情绪。而冷漠这种情绪正相反，它在隔断和其他人的联系，专注于确立自己的存在价值</strong>。比如，乔布斯不做公益慈善。再比如，杰克，韦尔奇公然说“我不需要员工喜欢我&quot;。</p>
<p>混沌大学创办人李善友教授的一句话对我触动也很大。他说：“<strong>我岁数越大就越不在乎别人的看法，在别人看来就是我越变越坏了</strong>。&quot;表面上看，他是更“坏&quot;了；实际上，他只是不想受外界干扰，更专注于自己了。从这个意义上讲，冷漠也是一种正面的力量，只是长期被我们漠视和低估了。</p>
<h3 id="理想生活">理想生活</h3>
<p>有人问诗人余光中：“李敖天天找你茬儿，骂你，你却从不回应，这是为什么呢？</p>
<p>&quot;余光中的回答很妙，他说：“李敖天天骂我，说明他的生活不能没有我；而我不搭理他，证明我的生活可以没有他。”</p>
<p>当然了，余光中和李敖的恩怨没那么简单，但是这段话确实说得很好。这段话其实说出了<strong>我们一生努力的两个方向</strong>。<strong>第一个方向是向外努力，目标是让更多人的生活不能没有我，让社会协作网络中更多的点愿意主动跟我连接，也就是通常所谓的成功。第二个方向是向内努力，目标是让我的生活可以没有些什么</strong>。比如“断舍离&quot;，就是脱离对物的依赖。比如“拿得起，放得下&quot;，就是脱离对人和事的依赖。</p>
<p>一个人的理想生活境界其实应该同时包括这两个方面。别人对你“拿得起&quot;，而你自己“放得下&quot;。</p>
<h3 id="两难">两难</h3>
<p>爱因斯坦说过一句话，如果你遇到一个两难的问题，那从提出问题的角度其实是没法回答的。你必须换一个角度，才能得到答案。</p>
<p>我最初看到这个说法时，觉得很费解。可是后来创业了，对爱因斯坦这句话的体会就比较深了。一个阶段觉得是天大难题的事，过了一阵有了一个新的视角，就觉得自己原先的纠结毫无必要。</p>
<p>打个比方。这就像一个姑娘面对两个追求者，如果还在犹豫选哪个，那原因一定不是她不清楚这两个人的优缺点，而是她还不知道自己到底需要一个什么样的人。</p>
<p>所以后来我养成了一个习惯，<strong>一旦碰到两难问题，先不选，先等等。等找到观察这个问题的更高的角度，先前的两难马上就迎刃而解了。</strong></p>
<p>可以说，一切问题的解决，都不是找到答案的结果，而是自我突破的结果。</p>
<h3 id="临床">临床</h3>
<p>和一位医药专家聊天时，我问了他一个问题：一种药上市之前，有所谓的“一期临床&quot;“二期临床&quot;“三期临床&quot;，这些都有什么区别？这里的“一二三”是怎么分的？</p>
<p>他说，表面上看，是试验规模不一样，人数越来越多。但这不是重点，重点是每一期药物临床试验的<strong>核心目标不一样</strong>。一期临床主要是<strong>看危害性</strong>，就是这种药会不会有很大的副作用。二期临床，虽然也关注危害性，但重点是<strong>看疗效</strong>。而三期临床，主要是看它的<strong>稳定性</strong>。简单来说，就是如果它对一部分人有效，要看对其他人是不是也有效。</p>
<p>你看，医药行业长期积累下来的这套经验，对我们也有用。<strong>做一件事，最常见的思考角度就是它有没有用。但实际上，只要你再多考虑两个维度，也就是它的危害性和稳定性一一有没有害处，能不能长期使用，你就会发现，很多看起来很有用的东西，你不敢用了。</strong></p>
<h3 id="领导力">领导力</h3>
<p>心理学家刘嘉老师给我讲了一个有趣的实验。</p>
<p>让两只小老鼠过独木桥，相向而行，那就只有一只能过去。要知道，老鼠的世界里也是有等级的，所以，等级低的老鼠会给等级高的老鼠让路。接下来，科学家对让路的小老鼠的大脑做了点改造，让它有勇气。再上独木桥，这只小老鼠就不让了。</p>
<p>但是，这毕竟是外力作用的结果。撤掉了外力影响，它还会这么有勇气吗？实验表明，只要改造六次，这只老鼠不需要任何外力作用，也可以雄赳赳气昂昂地和其他老鼠对抗了。</p>
<p>刘嘉老师说，可见，<strong>最好的领导力根本不是什么打鸡血灌鸡汤，什么情绪抚慰团队建设。最好的领导力只有一种，就是持续带领团队打胜仗。胜仗打多了，团队对领导的信心自然就建立起来了。</strong></p>
<h3 id="麦当劳">麦当劳</h3>
<p>麦当劳的老板说过一句话：大家都以为我是卖汉堡包的，但我真正的生意是做房地产。</p>
<p>你还别说，事实上，麦当劳就是世界上最大的房地产主，它拥有的房地产甚至超过了天主教会。</p>
<p>简单说一下它的策略。麦当劳首先琢磨哪个地段是这个城市将来人流最旺的地方，然后就下手买地，或者用一个很低的价格签长期的租赁合同。接着，建一个快餐店，然后转租给加盟商，再然后就是收加盟费和房租。加盟费是小头，房租年年涨，那才是大头。<strong>房租占麦当劳收人的 90 ％</strong>。那你说它到底是卖汉堡的，还是做房地产的？</p>
<p>你看，这就是观察商业现象的有趣之处，<strong>表面上的生意和实际上的生意经常是两回事。而企业家干的，就是完成中间的这个转换。</strong></p>
<h3 id="模块化">模块化</h3>
<p>多年前，我问一位前辈，什么叫工作能力强？</p>
<p>他回答，<strong>看一个人的工作能力，就是看他能不能迅速地把大目标拆成小目标</strong>。这句话我一直记到了今天，而且越琢磨越觉得有道理。把大目标拆成小目标，也就是模块化，是人类现代化以来的一个伟大发明。</p>
<p>举个例子。以前的汽车司机都得会修车，但现在完全不用了，葚至连修车工人都不会那么细致地修车了。哪个零件坏了，直接换一个新的，工人根本就不用把那个坏模块拆开来修。</p>
<p>那么，<strong>模块化的好处是什么</strong>？简单地说，有两点。<strong>第一，可以促进分工</strong>，把更多的人引人创新的体系里面。所以，工作能力强的人可以驾驭更多的属下，就是这个道理，就因为他能把大事拆成小事。<strong>第二，风险小了，可以把坏事的风险控制在一个模块之内，从而减小对整个系统的影响。</strong></p>
<h3 id="目标窄化">目标窄化</h3>
<p>我们经常听到一句批评人的话，说这个人“目的性太强&quot;。</p>
<p>但是仔细想想，一个人目的性强，也不是坏事。有目标，行动才有方法，才有约束。但为什么我们本能上就是讨厌目的性强的人呢？</p>
<p><strong>其实，那些人不是目的性强，而是目标窄化</strong>。比如，我要是只对挣钱感兴趣，大家就会担心我为挣钱没底线。如果我还有更多的目标，哪怕只是为了让孩子将来能上好大学而挣钱，大家就知道了，我的行为是有一个校正器的。</p>
<p>所以，<strong>一个很重要的生存策略，就是把自己多层次的目标主动暴露出来</strong>。就像迪士尼的创始人沃尔特．迪士尼说的：“我们拍电影不是为了赚钱，我们拍电影是为了赚钱拍更多的电影。&quot;你看，同样是挣钱，多暴露一层目标，是不是马上就显得清新可喜、“高大上&quot;了。</p>
<h2 id="N">N</h2>
<h3 id="能力模型">能力模型</h3>
<p>我们经常说到一个词一一个人能力。到底什么是个人能力？有人建了一个模型，说个人能力分成七个方面。</p>
<ol>
<li><strong>第一</strong>，清楚自己要什么，这是目的。</li>
<li><strong>第二</strong>，清楚自己需要做成怎样，这是目标。目标和目的不一样。比如，我的目的是得到领导的赏识，但目标是把最近团队的经验总结成一本手册。你看，定目标比较难。</li>
<li><strong>第三</strong>，清楚自己应该怎么做也就是实现目标的落地方案。</li>
<li><strong>第四</strong>，清楚自己不能怎么做，这是风险规避。</li>
<li><strong>第五</strong>，清楚自己做的事有什么影响力，这是对环境的洞察。</li>
<li><strong>第六</strong>，清楚遇到问题该怎么调整这是灵活应变。</li>
<li><strong>第七</strong>，清楚自己没有解决问题时，要怎么处理，这是承担后果的预期准备和止损策略。</li>
</ol>
<p>所谓个人能力的成长，其实是要围绕这七个点不断提升。</p>
<h3 id="逆向思考">逆向思考</h3>
<p>经常听人说，要逆向思考，那逆向思考的好处是什么？</p>
<p>查理·芒格举过一个例子。如果你想帮助一个国家，那么只需要问毁灭这个国家的方式有哪些，然后选择不去做这些事就好。</p>
<p>你看，正向思考下的帮助，不管是给钱还是给别的，可能有用，也可能没用。因为一个国家的兴旺，有很多条路。而逆向思考呢？一个国家毁火的方式无非就那几种，帮助它远离这几种可能，是确切有用的帮助。所以，<strong>逆向思考最大的好处，是避免了自以为是的创新，回到了事情的实质</strong>。</p>
<p>就拿企业创新来说，正向思考创新，很多人主张要把某件事做到极致。这当然是好事，但是把事情做到极致，就意昧着不可持续。那如果逆向思考呢？对一家企业来说，最重要的不过就是，适当、缓慢、不可退转的进步，这才是值得追求的创新目标。</p>
<h3 id="年龄段现象">年龄段现象</h3>
<p>红杉的一个调研团队来我们公司做报告，讲“ 00 后&quot;一代的消费特点。</p>
<p>我越听越觉得心惊胆战。为什么？因为我对那个年轻人的世界完全陌生。他们用的手机上的 App ，他们喜欢的动漫、游戏，我都没听说过。</p>
<p>有一名同事就对我说，我知道你在担心什么，你不就是担心自己、公司，还有咱们的产品被年轻人抛弃吗？但你得分清楚两件事，他们现在喜欢什么，到底是一个年龄段现象，还是一个代际现象？如果是年龄段现象，等他们大了，就不会再喜欢；如果是代际现象，那才是真实的商业升级换代。年轻人代表未来，这句话只对了一半。他们身上有部分东西永远跟我们不一样了，但也有一部分东西迟早会和我们一样。</p>
<p>所以，<strong>面向未来的商业，不是讨好年轻人，而是在他们长大的路上耐心等待。</strong></p>
<h3 id="牛人">牛人</h3>
<p>怎样认识一个陌生的牛人？答案不是求助，而是给他们提供帮助。你可能会说，牛人不缺钱，不缺机会，我能提供什么帮助啊？</p>
<p>牛人确实不缺这些，但是牛人缺不同的视角。<strong>牛人之所以牛，就是因为他们总是担心世界的某个侧面他们没有看到</strong>。</p>
<p>那应该怎么做呢？比如说，你想认识雷军，就可以每天找一个一线手机店的老板聊天，把他对市场和小米的看法归纳出来，每天在微博 上@ 雷军。信不信总有一天，雷军会主动跟你联系？</p>
<p><strong>钱和机会，牛人总比我们多，但是信息和视角，就不一定了。</strong></p>
<h2 id="P">P</h2>
<h3 id="拍马屁">拍马屁</h3>
<p>人们通常有一个看法，拍马屁之所以起作用，是因为领导听得很舒服，所以就给你机会，提拔你·如果仅仅是这么看，那就是既小看了领导，也小看了拍马屁。</p>
<p>其实，拍马屁的功能有三个层次。<strong>第一</strong>，领导听了很爽，这是人之常情。<strong>第二</strong>，在现代社会里，上下级之间没有表达忠诚的仪式，那拍马屁就成了传递表忠心信息的有效渠道，让领导觉得你是一个使唤得动的人。<strong>第三</strong>，公开拍马屁是要承受一点周边的压力的，这意昧着你不仅愿意效忠，而且愿意为效忠付出代价。</p>
<p>你站在领导的角度想一想：<strong>有这么个人，共事起来舒服，使唤得动，又愿意付出一定的代价，即使这个人能力并不太突出，领导愿不愿意用他？</strong></p>
<h3 id="配得上">配得上</h3>
<p>碰到一个以前的老同事，他跟我说了很多现在单位不如意的地方，然后悠悠地叹了口气说，要是有人给我 100 万元的年薪，我就走了。很多老同事都跟我说过类似的话。其实，这个想法并不对。</p>
<p><strong>你在市场中的价格不是谁赏给你的，而是你自己挣到的</strong>。但前提是你得在市场中找到这个估值。所以，就算是有人愿意给 100 万元的年薪又怎么样？如果你不值这个钱，很快会被发现，这个钱和这个职位很快就没有了，而此前任何的承诺都没有用。如果你值这个钱，根本就不用等，下海一练，市场很快就会给到你这个钱。</p>
<p>这让我想起查理·芒格讲过的一句话：“<strong>你要是想得到某种东西，最可靠的办法是让你自己配得上它</strong>。”</p>
<p><strong>体制内的准则是做好准备，等待时机。而市场中的准则是立即行动，准备纠错。干起来再说。</strong></p>
<h3 id="偏好">偏好</h3>
<p>据说杨振宁先生说过这么一句话，教育就是发现偏好、培养偏好、发展偏好，幸运的话就把偏好变成饭碗。</p>
<p>你想，过去我们谈教育，好像全面发展才是天经地义的。现在，杨振宁强调偏好的价值。未来社会的竞争，建立在社会基础设施高度发达的基础上。<strong>人的发展，更多的不是向外、向上去攀登社会阶梯，而是向内去发掘自身的个性优势</strong>。</p>
<p>好的容貌、好的歌喉、好的舞姿、好的口才、好的理解力、好的动作准确度，等等，都能变成优势。比如一个农民，要是能在田间地头卖好自家水果，就已经是贏家，不需要考大学、进城这些攀登社会阶层的动作了。</p>
<p>所以，把自己的偏好发掘出来，然后把它转换成突出的个人优势，这是未来社会美好的一个侧面。</p>
<h3 id="骗子">骗子</h3>
<p>有一次我们办公室聊起骗子这个话题。</p>
<p>有人说：“现在的骗子水平也太低了，一口南方口音给我打电话，、你明天早上到我办公室来一趟’，一听就是假的。”</p>
<p>我的同事李倩老本行是搞语言学的，她说：“这可不一定是水平低，这恰恰是水平高。这些骗子之所以做得这么漏洞百出是有原因的。<strong>很多跨国诈骗集团群发的邮件，里头就会塞进大量的语法拼写错误。这样做的好处是可以把在知识和智力上稍差的人，或者粗心大意的人先筛选出来，然后再用人工跟进，实施下一步的诈骗</strong>。</p>
<p>你想，打一个电话或者发一封邮件成本很低，但是后面跟进诈骗的成本就高了。专门针对知识水准低或者粗心大意的人，当然可以提高成功率。</p>
<h3 id="评价">评价</h3>
<p>我岁数越大，越不愿意评价他人。这倒不是因为我变得更宽容了一一宽容是知道对方有错，忍了一一而是因为我发现，我根本不知道一个表面上看到的行为，对他人的内心到底意昧着什么。</p>
<p>举个例子。一个女孩喜欢买名牌包，你非要评价她虚荣浅薄，有意义吗？买名牌包，也许是她让自己活得有心气、有奔头的一个简便方法。她要是天天买地摊货，旁观者倒是觉得她朴素，但没准儿她自己的内心一片灰暗。对她来说，哪种生活方式好，从长期看，还真的不一定。</p>
<p><strong>我们从外面看到的任何人的任何“缺陷”，可能都是他巨大的精神世界的一小部分，也都是他做更好的自己的一个过程</strong>。只要不突破道德和法律底线，真的很难说什么是对，什么是错。</p>
<h2 id="Q">Q</h2>
<h3 id="企业规模">企业规模</h3>
<p>和朋友老喻聊天，说起企业规模的话题。他说，<strong>所有上规模的企业，本质上都做到了三件事的统一</strong>。哪三件事？</p>
<p><strong>第一，认知半径要尽可能地宽</strong>，否则就会视野狭窄。这个好理解。</p>
<p><strong>第二，能力半径要尽可能地明确</strong>。这是巴菲特经常强调的话，企业应该只做自己能力半径之内的事。</p>
<p><strong>第三，行动半径要尽可能地小</strong>。什么意思？这就牵涉到对规模本质的理解了。</p>
<p><strong>规模，本质上不是能力强的结果，而是一个简单的动作大量重复的结果</strong>。所以，要想上规模，做的动作就得少、就得简单。比如，世界上所有上规模的餐饮企业，都是快餐企业。为什么？因为菜单上的菜品少，复制起来就容易。</p>
<h3 id="企业文化">企业文化</h3>
<p>看到一家企业的口号，九个字：<strong>会操心，敢着急，能解决</strong>。这是近年来我看到的最好的企业文化口号。这九个字里面包含了一个职场人的三个基本素质。</p>
<p>“会操心&quot;，肯定不是指为分内的事操心，而是指适当跨越边界，全面考虑所有协作界面上的事。不管事实上有没有升职，先在思想上给自己升个职再说。</p>
<p>“敢着急&quot;，为什么用一个“敢&quot;字呢？这不是说你敢跟任何人急眼，而是说，你得成为整个协作网络的刚性边界。触碰边界的人都能感受到你的督促和约束。这是一个没有权力的人对他人施加影响力最好的方式。</p>
<p>“能解决&quot;，有一句话说得好，一个人的职场生涯，不是丛他上班的第一天开始的，而是从他解决第一个问题开始的。</p>
<h3 id="强关系">强关系</h3>
<p>李笑来说，他<strong>交朋友有一个心法，就是一定要想办法共同做一件事</strong>。这句话越琢磨越有道理。</p>
<p>这个时代，人和人之间的关系有很多层次。有的弱关系，只是你通讯录里的一行字，你根本不记得他是谁。</p>
<p>而要结成强关系，过去那些什么喝酒吃饭的招儿没用了，在愉快的氛围中结成的关系，很快就会被愉快地忘掉。这个时候，一起做一件事就很有用了。为什么？因为<strong>一起做一件事，意味着一起经历过克服困难的痛苦，意味着他需要你的协作，必须将心比心地替你着想。这样结成的关系才叫强关系</strong>。</p>
<p>当然，共同做的事可深可浅。比如说，你遇到一个难题，请他来帮你开一个策划会，这其实也算。</p>
<h3 id="亲子交流">亲子交流</h3>
<p>一篇文章说，家长和孩子交流，每天只问四个问题就够了：</p>
<ol>
<li><strong>第一</strong>，学校今天有什么好事发生吗？</li>
<li><strong>第二</strong>，今天你有什么好表现？</li>
<li><strong>第三</strong>，今天你有什么收获？</li>
<li><strong>第四</strong>，你有什么事需要爸妈的帮助吗？</li>
</ol>
<p>这四个问题很简单，但背后的用意很深。“学校有什么好事发生&quot;，是探查孩子的<strong>价值观</strong>，并且指引他看到事情更积极的一面。“你有什么好表现&quot;，是增加孩子的<strong>自信心</strong>。“你有什么收获&quot;，是在帮助孩子形成<strong>点滴积累人生收获</strong>的习惯。“有什么需要帮忙的&quot;，是不断提醒孩子，虽然自己的事情要自己负责，但要<strong>学会求助</strong>。</p>
<p>除了这四个问题，其他灌输不仅可能无效，甚至有可能适得其反。<strong>现代教育最重要的任务，是让孩子高质量、有效率地获得多样化的人生。而任何好的多样化结果都强求不来，只能是自然演化的结果。</strong></p>
<h3 id="勤奋">勤奋</h3>
<p>亚马逊公司的老板贝索斯是一个很严格的人。据说，他给高管发邮件，经常只有一个问号。光这个问号，就能吓得人瑟瑟发抖。</p>
<p>那么请问，这么个风格的人，一天工作多少个小时？请注意，不是“ 996 &quot;，更不是“ 007 &quot;。他说，一天要睡够 8 个小时，上午 10 点前基本不开会；比较费脑子的会，午饭之前开；比较困难的决定，下午 5 点前就做。所以，他基本是个早睡早起的人。</p>
<p>跟我们印象中勤奋的创业者不太一样吧？他的时间投人明显不够啊。那为什么他可以这样呢？贝索斯自己是这样说的：“我每天的主要工作，是做<strong>少而精的决策</strong>，要是每天能做出三个明智的决策，那就够了。所以要休息好，睡得好。”</p>
<p>你看，贝索斯的做法其实重新定义了“勤奋&quot;这件事。<strong>勤奋，不再是对自己时间资源总量的无限开发，而是对自己时间使用质量的无限提高。</strong></p>
<h3 id="情感账户">情感账户</h3>
<p>有一个概念，叫“情感账户&quot;，它能解释很多现象，但是又经常被人忘记。举个例子。如果家里有青春期的孩子，父母唠叨他的内容无非就是要用功读书，不要熬夜，少打游戏，等等。</p>
<p>那为什么有的孩子听，有的孩子不听呢？跟这些话本身的对错没什么关系，关键是看父母平时存在孩子“情感账户&quot;里的储蓄有多少。只有情感账户里的储蓄足够充裕时，孩子才有可能接受父母的建议。</p>
<p>同样的道理，在公司里经常有人说：“这件事我当时就说了应该那么做，但是没人听我的，你看现在失败了吧！”就算他说的是事实，但真相仍然是，这个人存在同事情感账户里的储蓄太少了，所以才没人昕他的。这也和事情本身的是非对错没什么关系。</p>
<p>你看，<strong>这个世界的运行方式和我们的直觉不太一样。是非对错只是表面，人和人之间的信任和情感才是底层。</strong></p>
<h3 id="情商">情商</h3>
<p>我们经常说一个词，情商。那请问什么是情商？定义有很多。我觉得最简单透彻的一个，就是“能感知到别人的感受的能力&quot;。但是说实话，这个定义还是让人无法操作。</p>
<p>后来我偶然看到三个词，分别是 <strong>“距离”“分寸”和“进退”</strong> 一这不就是情商的三个操作界面吗？</p>
<p>和任何人交往，怎么判断和他的距离？怎么通过方法拉近或者疏远和他的距离？这是一个本领。还有，如果双方距离很近了，不同的事，还要掌握不同的分寸。不足和过度，马上就会引起别人的不适感。当然，这三个界面中，最重要的是进退。因为这不仅需要判断力，还需要行动力。什么时候加人和别人的合作？什么时候果断退出？</p>
<p>一个人如果真觉得自己情商低，自我训练的办法，无非就是在和人交往的时候，在这三个界面上反复提醒自己。</p>
<h3 id="情绪">情绪</h3>
<p><strong>一个人一旦陷入某种情绪，基本就可以判定，他正在犯错误</strong>。为什么？不是说有情绪显得没涵养，而是说有情绪会让人搞错目标。</p>
<p>举个例子。工作单位领导给你压任务，你不高兴，那情绪的指向就是领导。其实搞错了，你真正的目标是工作本身。</p>
<p>再比如说，你要做一次公开演讲，你害怕，那情绪的指向就是演讲，其实也搞错了，你真正的目标是要通过演讲形成大范围的影响力。</p>
<p>你发现没有，<strong>为什么我们的情绪总是会让我们偏离目标？因为情绪是进化过程中形成的，它只能指向我们看得见摸得着、近在眼前的东西。而在越来越复杂的现代社会，目标总是在远处，甚至要靠想象力才能理解。</strong></p>
<h3 id="情绪价值">情绪价值</h3>
<p>经常听见有人说，现在找另一半，关键要看对方能提供的情绪价值。说白了，也就是和这个人待在一起舒服不舒服。</p>
<p>但是我看见一个说法，说<strong>情绪价值如果翻译成一个人的素质，可以分成四类</strong>。</p>
<ol>
<li><strong>第一，智识</strong>，也就是这个人的见识水准怎么样。</li>
<li><strong>第二，审美</strong>，这不仅是说他能不能欣赏艺术品，也是说他一举一动的每个细节有没有美的意识。</li>
<li><strong>第三，私德</strong>，也就是这个人对身边的人好不好。</li>
<li><strong>第四，公德</strong>，也就是这个人的社会担当如何。</li>
</ol>
<p>但问题是，这是完全独立的四种品格。换句话说，一个人完全可能是智识高手，但在审美上一塌糊涂。一个人也完全可能在私德上无懈可击，但在公德上是一个魔鬼，比如希特勒。</p>
<p>所以，如果咱们说要找一个能提供情绪价值的人，那到底是在找什么样的人呢？还是很难说清楚。</p>
<h3 id="情绪控制">情绪控制</h3>
<p>当朋友或者亲人陷人激动情绪的时候，怎么劝他呢？我听到这么一个方法，一般是分成三步。</p>
<p><strong>第一步，不是劝他控制情绪，而是让他把情绪描述出来</strong>。你是不是有点难过或者生气啊？最重要的一句话是，你试着描述一下你的感受。一旦接受你这句话的引导，他马上就会启动大脑里的理性机制。他要想，要判断，要组织语，要形成逻辑。这个时候主导情绪的大脑机制马上就放松下来了。</p>
<p><strong>第二步，帮他定位产生情绪的原因</strong>。</p>
<p><strong>第三步，给他一个目标，也就是引导他思考怎么办</strong>。</p>
<p>重复以上三个步骤，很快，他就会觉得刚才的情绪很可笑。这个方法我自己试了一下，真的很有效。</p>
<h3 id="权利周边">权利周边</h3>
<p>大家在谈论权力的时候，总是喜欢从权力的拥有者出发，因为他们大权在握。但是，我倒觉得，从权力的周边着眼是一个更好的角度。</p>
<p>比如说，慈禧太后是不是毒杀了光绪皇帝？为慈禧辩护的人总是说，虎毒不食子·像辜鸿铭就反复说，普天之下所有母亲都可以作证。但是我倒倾向于认为，就是慈禧干的。</p>
<p>理由是，<strong>权力拥有者其实是被权力的周边力量绑架的</strong>。第一，如果慈禧不弄死光绪，她死之后，她周边所有的人都要遭殃，她所有的反对派都会聚集在光绪周围对她留下的班底进行清算。这是不得已。第二，其实不需要慈禧真的动手，她周边的人出于恐惧就会干，只需要她默许就可以了。</p>
<p>所以，<strong>慈禧杀光绪，不是人性的恶，而是政治格局的必然。</strong></p>
<h3 id="缺口">缺口</h3>
<p>有位企业老总告诉我，他有一个观察，如果一位企业家是理论大师，什么都有一套解释，逻辑特别自洽，那这个企业肯定要出问题。原因很简单，没有缺口了嘛。</p>
<p>所谓企业，就是一个协作型的组织体。它的效能一定来自每一个个体的创造性。老板要是能把一切都说得清清楚楚，那员工只剩下执行的份丿 I 了。时间一长，这个企业组织的创造性就被摧毁了。</p>
<p>这位老总还告诉我，<strong>老板下指令，有时候话不能说得太清楚。留出缺口，让底下人去猜，猜不到你真实的意思，他就会调动自己的创造性来弥补这个缺口</strong>。对于好的创造性结果，老板保留事后追认的权威。</p>
<p>你看，<strong>老板显得笨的时候，未必是真笨，也许不过是留个缺口</strong>。可是这个时候，员工的机会就来了。</p>
<h2 id="R">R</h2>
<h3 id="人格">人格</h3>
<p>我的同事冯启娜跟我讲，人格分两种，一种叫关系型人格，一种叫目标型人格。</p>
<p>这个分类一下让我想明白了为什么有的人明明很聪明，但是很难有成就。</p>
<p>你看，每个人除了基本生存，还要刷存在感。但问题是，<strong>如果你是用调整关系的方法来刷存在感，那无论多努力，都很可能失败，因为你仅仅是要比周围的人好一这就叫关系型人格</strong>。除了让自己变得更好之外，还能在行为上陷害别人，在舆论上贬低别人，学阿 Q 在评价上瞧不起别人，样可以刷到存在感。这种人虽然聪明，但是容易把聪明用到坏地方。网上很多喷子就是这么活的。</p>
<p><strong>而目标型人格，是通过确定一个目标来刷存在感，没法取巧，只能努力，当然就容易做出成就。</strong></p>
<h3 id="人格修习">人格修习</h3>
<p>为什么狗和人那么亲近，而猫对人爱答不理？为什么狗很忠诚，而猫经常背叛？</p>
<p>我听到过两个解释。第一个解释是，狗是很早就被人类驯化的，那个时候食物少，所以，狗得跟人类紧密相伴才能存活。而猫是在人类进人农业社会之后才被驯化的，食物相对充足，所以猫就没那么忠诚。</p>
<p>第二个解释是，狗和猫的安全感来源不一样。狗是社交动物，它的安全感建立在和人的联系上，去哪儿不重要，重要的是和主人在一起。而猫是领地动物，它的安全感建立在地盘意识上，重要的是对环境的熟悉，而不是人。</p>
<p>这让我想起熊逸老师的一句话：“<strong>所有人格修习的目标，都是从一只必须和人亲近的’狗，成长为一只可以适当孤独的’猫，。”从“狗”到“猫”，就意味着你的人格不仅不再依赖关系，而且有了自己的领地。</strong></p>
<h3 id="人际关系">人际关系</h3>
<p>有刚上大学和刚上班的朋友问我，<strong>怎么和同学、同事打交道？</strong> 处理人际关系这件事永远考验智商和情商。但如果说到原则，不过简单的几条。</p>
<ol>
<li><strong>第一，善良</strong>，永远向对方表达善意，永远坚持不率先背叛对方。</li>
<li><strong>第二，可激怒</strong>，当对方出现背叛行为时，立即报复回去，让背叛者付出适当的代价。</li>
<li><strong>第三，宽容</strong>，不会因为别人的一次背叛长时间怀恨在心或者没完没了地报复，只要对方改过自新、重新回到合作轨道上，就能既往不咎地恢复合作。</li>
<li><strong>第四，简单透明</strong>，要让所有人清晰地知道自己的这个策略，不搅浑水，不随意变动策略。</li>
</ol>
<p>以上几条并不是我的发明，而是现代博弈论通过实验得出的重要发现。</p>
<h3 id="人脉">人脉</h3>
<p>你发现没有，现在有一些人热衷于跑各种会，认识各种人。你问他们为什么要这么做，他们会说，这是在结识人脉。</p>
<p>过去，我一直觉得这么做没什么用，直到看了作家连岳的一篇文章，才想清楚了为什么没用。</p>
<p><strong>在以前的熟人社会，你多认识人，哪怕是点头之交也是有用的</strong>，等你有困难的时候去找人家帮忙，他肯定帮，他不是在帮你的忙，而是怕不帮你的忙被自己的社会关系非议一一圈子就那么大嘛。</p>
<p><strong>但是在现在的陌生人社会里，人际关系的底层结构已经变了</strong>。对于一个闯上门来求助的陌生人，一般人的第一反应是警惕，第二反应是看不起一一你但凡有点智慧，有点诚意，也不会通过这种方式来认识人。拒绝帮助这样的人，一点心理压力也没有。</p>
<p>你看，社会底层结构变了，再用老办法，就成了刻舟求剑。</p>
<h3 id="人性">人性</h3>
<p><strong>在所有的人生忠告当中，有一条我觉得特别重要，那就是不要考验人性</strong>。无论是故意拿利益去诱惑一个人，看他是不是品德高洁，还是故意为难自己的伴侣，看他是不是还爱自己，都不要。</p>
<p>但问题是，为什么不能考验？是因为人性本来丑恶，经不住考验吗？不是。我看到一个观点说，<strong>之所以不要考验人性，是因为我们自己不能作恶</strong>。</p>
<p>你想，人性中本来就既有魔鬼，又有天使。那我们该做的事情，用李希贵校长的话说就是，“<strong>让魔鬼沉睡，让天使起舞</strong>”一一这是我们和他人合作时的基本原则。如果我们设置诱惑考验对方，就是主动把对方人性中的魔鬼叫醒。</p>
<p>这并不证明对方是魔鬼，<strong>而是我们亲手把对方人性中的魔鬼释放了出来，那么，作恶的岂不就是我们自己</strong>？所以才说，干万不要考验人性。</p>
<h3 id="人性配方">人性配方</h3>
<p>经济学者薛兆丰老师在录制《奇葩说》时讲了一段话。</p>
<p>他说，西方有人统计，在幼儿园里，孩子最爱说的三个词<strong>more （我还要）、 mine （我的）和 no （我不）</strong>。在经济学上，不就对应<strong>需求、产权和自由</strong>三个概念吗？这是人类与生俱来的三个要求。</p>
<p>但是，有这三个要求就能在社会中存活吗？并不能。孩子进了幼儿园，接受老师的教育，老师经常说的三个高频词是： <strong>wait （等待）、 take turn （轮流）、 share （分享）</strong>，也就是<strong>你要有耐心，你要守秩序，你要学会分享</strong>。这都是在人与人的交往中才能学会的进阶的、高级的智慧。</p>
<p>所以，你说人性有没有配方？当然有。与生俱来的三个要求：<strong>表达需求、维护产权、争取自由</strong>。但加上社会对我们的三个要求：<strong>保持耐心、遵守秩序和善于分享</strong>，这才是完整的人性配方。</p>
<h3 id="忍无可忍">忍无可忍</h3>
<p>有一句话，叫“忍无可忍，则无须再忍&quot;。</p>
<p>这句话经常用来解释自己某个行动的正当性。我忍不了了，所以就这么干了。其实，<strong>只要是在忍无可忍的状态下干的，无论这件事是成是败，是对是错，后果是好是坏，都是不该干的</strong>。</p>
<p>为什么？因为，<strong>人一生努力的目标，不就在于让自己的选择余地越来越大吗？换句话说，就是避免让自己没有选择。而忍无可忍，就等于承认自己陷入了没有选择的状态</strong>。</p>
<p>其实仔细想想，人怎么会没有选择？就是被人拿刀顶着脖子，也有委曲求全和舍生取义两个选项。</p>
<p>经常有人问一个问题：到底是努力更重要，还是选择更重要？我看到一个答案是这样的：<strong>当你有选择时，选择更重要；而当你没有选择时，努力才重要。<strong>这个答案其实还有一个延伸一一</strong>努力是为了什么？是为了让自己更有选择。</strong></p>
<h3 id="认了">认了</h3>
<p>有一次，我翻出一张以前办的健身卡。当时办它花了我好几千块钱，而实际上我也就第一个月去了几次。后来每看到这张卡一次，我就羞愧一次。</p>
<p>时隔几年，再看到这张健身卡时，我发现羞愧没了，说白了就是认了。</p>
<p>很多办健身卡的人，根本原因就是不讠人一一凭什么我就大肚子？凭什么我就没有胸肌、腹肌、小蛮腰？虽然不认，但是又懒，所以就纠结。</p>
<p><strong>年轻的时候，我总以为克服这种纠结的方式是把自己变得勤快起来。后来发现，其实还有一个解决方式，就是干脆认了。把有限的时间资源投到更符合自己禀賦的地方，去干点自己更擅长的事</strong>。</p>
<p>人生不如意事常八九。补救的方法，不是让不如意变得如意，而是让一个大大的如意冲淡那些不如意。</p>
<h3 id="日记">日记</h3>
<p>有人劝别人写日记，说写日记有这么三个好处。</p>
<p><strong>第一，是给自己的生活留下一份记录</strong>。我们的大脑其实是非常不可靠的。过去发生了什么，大脑经常欺骗我们。而有了日记，我们就会<strong>拥有真实的自我审视</strong>的机会。这一点好理解。</p>
<p>第二个好处呢？我们虽然好像每天都在思考点什么，但是如果不写下来，这些思考只能算是思绪，飘来荡去的，非常容易丢失。<strong>写的过程，其实是探索自己到底怎么想的过程</strong>。</p>
<p>但更重要的是第三个好处。<strong>长期记日记的人，会非常清楚地知道一件事，就是自己对未来的判断有多不靠谱</strong>。今天的兴奋，第二天可能就会转为沮丧；今年看好的事，明年看起来很可能就像个笑话；现在崇拜的人，一旦持续观察，会发现和自己想象的完全不一样。</p>
<p>你看，<strong>一个记日记的人，更容易学会不高估自己的判断力。</strong></p>
<h2 id="S">S</h2>
<h3 id="晒被子">晒被子</h3>
<p>你可能听说过，美国很多小区是有公约的一．一．不允许晒被子。不仅是在大马路上不能晒，就是在自己家院子里也不许晒。</p>
<p>为什么会这样？这首先是因为美国中产阶级几乎家家都有烘干机，确实没有必要晒。其次是，大家都不晒被子，整个小区看起来美观整洁了不少。</p>
<p>后来我看到一则材料，才恍然大悟，这原来不是审美问题，而是经济利益问题。你想，如果有人晒被子，在美国往往就会被理解为买不起烘干机，那就是穷人。美国社会流动性很大，这个小区有一家被人怀疑是穷人，整个地方就有穷人区之嫌，那整个小区的房价就会跌。房价一跌，穷人真住进来，恶性循环就来了，最后整个小区的人财产受损。</p>
<p>在很多情况下，<strong>整洁与否看起来是审美问题，但深究下去，往往都是财富问题。</strong></p>
<h3 id="奢侈品">奢侈品</h3>
<p>有一位时尚行业的朋友告诉我，很多高档奢侈品，原来是和欧洲上层阶级的生活方式匹配的。这些东西很贵但是未必好用，因为它需要人有强大的自律能力。</p>
<p>比如说，国际顶级大牌的男装衬衫，都不会用免烫的面料。也就是说，如果你坐没坐相，站没站相，到处乱蹭，总是把衣服弄得皱巴巴的，你就是穿得起，也穿不出样子。</p>
<p><strong>高档奢侈品不是炫耀的工具，而是约束自己的工具</strong>。</p>
<p>我们总听人说，<strong>懂多少道理也过不好这一生。如果没有自律能力，不仅光懂道理没用，有多少钱也是过不好这一生的。</strong></p>
<h3 id="社会网络">社会网络</h3>
<p>有个朋友为来不来北京工作犹豫。为什么犹豫呢？担心混不好。</p>
<p>我就跟他讲，到哪里都不能保证你混得好，但是<strong>如果你对现状太不满意了，那切断自己原来的社会网络</strong>，换个大城市，把自己的社会网络升个级，可能也挺不错的。</p>
<p>有一本社会学的经典著作，叫《学做工》。书中说，通过在英国工人中的调研发现，工人的孩子往往还当工人，正所谓“龙生龙，凤生凤，老鼠的孩子会打洞&quot;。为什么会这样？并不是因为当工人光荣，或者被资本家迫害，而是因为家庭对一个人的影晌实在是太大了。</p>
<p><strong>阻碍底层人民向上层流动的根本原因，不是社会不公正，而是家庭生活把那种所谓的穷人思维又传到了孩子身上。每个人都是自己社会网络的囚徒</strong>。切换网络往往比个人努力还要重要。</p>
<h3 id="社会资本">社会资本</h3>
<p>一个小孩和他妈吵架。他妈说：“你得长本事，长大才有竞争力！”小孩说：“没本事就求人呗。&quot;小孩的想法看似很没出息，但他说的话是有一定道理的。</p>
<p>过去，我们总是重视人力资本、货币资本这些资本形态。而在互联网时代，搞人际关系的方法越来越丰富。所以社会关系网络带来的价值，也就是社会资本，越来越受学术界重视。</p>
<p><strong>社会资本和其他资本最大的不同是两点。第一是无法占有，它只存在于相互的关系之中。第二，社会资本既不像人力资本那样增值很慢，也不像货币资本那样越用越少。它可以快速增值，而且越用越多。</strong></p>
<p>在未来社会，没准小孩说的那句话反而成真了，<strong>经营自己的本事还不如经营社会关系，自己会干还不如会求人。</strong></p>
<h3 id="社交">社交</h3>
<p>有一本书，叫《如何让你爱的人爱上你》。从书名来看，这本书好像不太靠谱，但其实书里的内容非常精彩。本质上，这不是一本教你如何谈恋爱的书，而是一本教你如何社交的书。</p>
<p>举个例子。当有人夸你好看或帅气时，你应该如何回答？中国人一般的反应是，“哪里哪里&quot;。这样回答，谦虚是谦虚，但就把天儿聊死了。美国人一般的回答是什么呢？是“谢谢&quot;。这样回答虽然也算是接招了，但最终效果差不多，还是把天儿聊死了。</p>
<p>《如何让你爱的人爱上你》这本书里说，法国人有一个语言习惯，但凡遇到有人夸自己好看，就会回答，“谢谢，你真是太好了&quot;，或者更进一步说，“你能注意到这一点，真是太可爱了&quot;。</p>
<p>这样就把赞美的阳光反射到了赞美者的身上，这个话题就打开了，也可以进一步往下聊了。<strong>社交其实没有什么别的诀窍，就是不断设法开启双方交往的可能。</strong></p>
<h3 id="涉猎">涉猎</h3>
<p>我们经常说一个词，“涉猎&quot;。一般的理解是，涉猎是一种不求甚解的、粗略的学习方法。那这是一种什么样的学习方法呢？</p>
<p>有一个说法是，“涉&quot;，就是踵着水去对岸，目的不在于水，而在于那个目标一一．去对岸；而“猎&quot;，就是打猎，过程不重要，重要的是那个目标，是那个捕获猎物的结果。</p>
<p>所以，这两个字组合起来一一<strong>涉猎，是指一种带着清晰的目标，在海量的资料中寻找自己想要的答案的学习方法</strong>。比如，你为了做一次旅行的攻略，四处去查相关的资料，这就是涉猎。</p>
<p>你看，<strong>涉猎的本质，不是不求甚解，而是有清晰的目标</strong>。而当我们说一个人涉猎甚广时，我们是在说什么呢？不是说这个人装了一肚子杂七杂八的东西，而是说这个人的脑子里有好多要求解的问题。</p>
<h3 id="生存空间">生存空间</h3>
<p>有一句话说，一个人的悲催命运，就是始终在“得不到&quot;和“不得不&quot;之间反复徘徊。</p>
<p>想想也是，“得不到&quot;，封住了一个人<strong>行动的上限</strong>；“不得不&quot;，又封住了一个人<strong>自由的底线</strong>，这个空间实在是太狭窄，太憋闷了。</p>
<p>把这句话反过来理解，一个人如果想扩展自己的生存空间，无非也就是要做两件事：<strong>第一，经常审视那些自己还没有的东西，问自己能力和欲望之间的距离，以免陷入得不到的境地；第二，经常审视那些自己已经有的东西，问自己失去它们又能如何，以免陷入不得不的境地</strong>。这样人的生存空间就大了。</p>
<p>就像有人说，一个人什么时候适合结婚？答案是两个：第一，找到自己配得上的人的时候；第二，即使结了婚也不怕离婚的时候。你看，这就是同时摆脱了“得不到&quot;和“不得不&quot;。</p>
<h3 id="失败">失败</h3>
<p>我听脸书公司一位高管说，他们公司对于什么是成功的产口口，有一个奇怪的定义。</p>
<p><strong>有两种产品，都算是成功的：一种是上线之后快速增长的产品，还有一种是上线之后快速死掉的产品。那什么才算是失败的产品呢？就是那种成又成不了，死又不甘心，通过各种努力勉强活下来的产品</strong>。</p>
<p>这背后的道理不难理解·先天不足，靠后天资源喂养，最终还是没法在残酷的竞争中取胜，不如早点死掉，节约资源干点别的。</p>
<p>我听完他的这套说法，内心还是挺震撼的。为什么？因为传统社会，通常是按照成败论英雄，败了就很难翻盘。但是在一个快速变动的社会，为失败付出的代价变得越来越小，再来一局的可能性大大提高。</p>
<p>所以，<strong>犹豫、拖延才是最大的劣势，而失败本身反倒不值得恐惧了。</strong></p>
<h3 id="时间">时间</h3>
<p>我在网上看到一个思路，说时间管理这件事，其实搞错了时间的本质。</p>
<p>我们一般都把时间当成资源来看，一种非常有限、稀缺、珍贵的资源。但是你想过没有，<strong>时间是一个网络</strong>。</p>
<p>简单来说，<strong>时间的价值主要取决于两点。第一，我可以使用多少别人的时间</strong>。比如说，如果我生活在有闪送服务的城市，我花一点钱找人提供服务，很多事就不用自己跑一趟了。<strong>第二，我能和多少人的时间发生协同</strong>。比如说，我做一个直播，有 10 个人来看，还是有 10000 个人来看，我的时间价值当然就不一样。</p>
<p>这么分析下来，时间管理的目标就变了，不是怎么高效地利用自己的时间，而是怎么让自己的时间和他人的时间更有连通性。</p>
<h3 id="时间杠杆">时间杠杆</h3>
<p>怎样节省时间？本能的办法，就是挤娱乐休闲的时间去干活。这其实忽略了时间杠杆的巨大作用。</p>
<p><strong>什么是时间杠杆？我的体会有两种。一种是“可积累杠杆</strong>”。比如说，在职场上，我每件事情都自己干，那就不如多协同周边的人一起干。这样，一份努力就可以变成很多人的能力。你放心，不会出现什么教会徒弟饿死师父的事，反而会积累出一种可以重复使用的资源。时间一长，很多事自己就不用干了，时间就省下来了。</p>
<p><strong>还有一种时间杠杆，可以称之为“自动化杠杆</strong>”。简单地说，就是把一些经常要做的事自动化。比如，每天在固定时间浏览固定的资讯，或者在固定时间、固定量地健身。你可能会说，这怎么会省时间呢？当然啊，单独启动一件事所耗费的时间和心力是巨大的，而把它们自动化了之后，就节省了一大块启动决策的时间。</p>
<p>真正能节省大块时间的方法，都是在时间杠杆上想办法。</p>
<h3 id="时间管理">时间管理</h3>
<p>有一个观点说，时间管理这件事，一般方法的人手点可能都错了。为什么？因为它们都想站在自己和时间的外面，规范对时间的使用。管理得越狠，就越是分秒必争，自己的生活就会越绷越紧，最后往往会受不了。</p>
<p><strong>真正的时间管理秘诀是什么？其实就是四个字。头两个字是“沉浸”，沉浸在自己做的事里</strong>。你可能会说，不对啊，我就是沉浸在刷手机、打游戏里，所以才浪费时间，才需要时间管理。</p>
<p>但光有头两个字不行，还得有<strong>后两个字一“尊重</strong>”。也就是说，<strong>沉浸的，是你尊重的事情</strong>，比如读书、健身、向佩服的人请教等。</p>
<p>只要你能说服自己沉浸在这些你尊重的事情里，就不必给时间打什么格格，做什么约束。能沉浸在这些事情中，其实就是在最大限度地利用好时间了，而这本身就是最好的时间管理。</p>
<h3 id="实力">实力</h3>
<p>哈佛大学教授斯蒂芬·沃尔特有一篇评论美国实力的文章。他说，一个国家的力量其实是由三根支柱构成的。</p>
<p>第一根支柱，是经济和军事实力。黄油和大炮，这个大家都懂。</p>
<p>第二根支柱，是一系列盟友的支持。盟友是什么？不见得你干什么他们都同意，但是他们明白，跟着你混，他们会受益。所以，关键时刻，他们愿意和你保持一致。</p>
<p>还有第三根支柱，就是对你能力的信心。你办什么能成什么，别的国家办不到的事你能办到，那别的国家即使不知道所以然，也会服从你的领导。</p>
<p>这篇文章说的是国家这个层面的问题，个人其实也一样。<strong>过去我们对实力总有一种误解，以为实力总是用于对比和压制别人。其实，实力更高级的体现方式是为别人创造利益。那比这更高级的体现方式呢？是把自己的事做成。</strong></p>
<h3 id="试错">试错</h3>
<p>很多互联网公司看上去一片混乱，实际上业务增长得还挺好。</p>
<p>通常的解释是，在一个不确定的市场上，公司要不断试错，混乱是必须付出的成本。当然，这种说法还是显得有些无奈。</p>
<p>后来我听到一个新的解释说，这不是试错，而是密封。什么意思？互联网公司的创业团队，面对的是一个新市场，所有方向看起来都通，但这就没法聚集起共识和力量。所以，<strong>往不同的方向去试，证明了错的方向，就等于告诉团队所有人，此路不通。然后，资源、心思和士气就能拧成一股绳，往能通的方向上去使劲儿</strong>。这就像一部蒸汽机，要想运转，必须得有橡胶做的密封圈，这样才能把产生的能量约束起来，集中起来，用到对的地方。</p>
<p>所以，<strong>虽然从外面看，试错是白白付出的成本，但从内部看，它凝聚了团队共识，其实产生了巨大的收益。</strong></p>
<h3 id="适合">适合</h3>
<p>有这么一位书画鉴定家，如果有朋友找他鉴定书画，他在看东西之前，一定要问，你买了没有？如果你还没买，他就实话实说，是真是假。如果你已经买了，他就推脱说对于这类作品自己拿不准，你最好另请高明。因为如果说是假的，就肯定得罪人了。</p>
<p>总之，他的原则就是，<strong>假话绝不说，真话看情况再决定说多少</strong>。反正他是既不能干没水平的事，也不能干得罪人的事。</p>
<p>可能你会认为这位老先生太滑头，我倒是觉得，他的原则符合起码的处事策略。我们自小受的教育，关于什么是是非，太多子关于什么是适合，反而太少了。</p>
<p>什么是适合？<strong>适合就是不仅仅讲抽象的道理，还要讲究具体的处境和目的</strong>。人生的绝大部分问题，脱离了具体处境和目的，是没有答案的。</p>
<h3 id="收益措辞">收益措辞</h3>
<p>理论上讲，<strong>任何一个意思都可以用两种措辞来表达，一个是收益措辞，强调对方会得到什么；另一个是损失措辞，强调对方会失去什么</strong>。人天生都害怕损失，所以一个人会不会说话，关键看他经常用哪种措辞。</p>
<p>举个例子。“老婆，我玩的时候能想着你吗&quot;，这叫收益措辞；“老婆，我想你的时候能玩吗&quot;，叫损失措辞。感觉到区别了吧？</p>
<p>再比如，“你的作品，我有三点修改意见&quot;，这叫损失措辞；“这作品要是能增加三个东西，肯定更受欢迎&quot;，这叫收益措辞。</p>
<p>我试了下，把损失措辞改成收益措辞，马上显得情商高很多。</p>
<h3 id="手机">手机</h3>
<p>有位朋友对我说，他想发起一个公益活动，号召大家不把手机带进卧室。</p>
<p>他的道理很清楚，现在太多人每天睡觉前的最后一个动作是放下手机，早上起来第一个动作是拿起手机。这样的话，夫妻之间的交流会减少，灯下阅读的时间会减少。总而言之，过去发生在卧室里的各种美好的事情都会减少。他说：“罗胖，你能不能帮我发起一下这个活动？&quot;我说：“我不！”</p>
<p>我的道理也很简单。第一，你觉得这样不好，完全可以自己这样做。生活怎样才会更好，这往往是个偏好。偏好这种东西，自己做就可以了，不必号召别人。</p>
<p>第二，人和手机之间的关系将会越来越紧密，<strong>手机会成为人类的一个器官。这是大势所趋，我们没有办法和一个趋势作斗争，与其抗拒，不如迎上去适应它。</strong></p>
<h3 id="手艺">手艺</h3>
<p>曾鸣教授讲过一句话：</p>
<p>一个创业者最终形成的战略，其实包含三个部分，既有科学的部分，就是有规律；也有艺术的部分，就是创造的部分；但是还有第三个部分，就是手艺。”</p>
<p><strong>手艺是什么？就是天天做，重复做，然后积累出来的认知。这样的认知无法言传，只有功夫到了才有</strong>。正如武志红说的，<strong>这叫穿过身体的知识</strong>。</p>
<p>我创业以来，体会最深的就是这一点。向着具体的目标，做具体的事，找具体的解决方法，把做的事变成自己的手艺。</p>
<h3 id="书店">书店</h3>
<p>去深圳的时候，我顺便逛了一下那里的一家书店，规模巨大。奇怪，不是说书店行业不行了吗？怎么这里还这么红火？</p>
<p>同行的当地朋友告诉我，<strong>书店还是不挣钱，但是书店可以汇聚客流</strong>。它可以把周边的生意带火，比如餐饮、服装，都因为有这家书店变成了旺铺。</p>
<p>你想，周末两口子逛街，老婆要去买衣服，老公没什么兴趣，于是一个带书店的商业中心就成了最佳选择。老婆安心逛，把老公寄存在书店里打发几个小时，这反而成了书店最佳的应用场景。所以，如果不单独看书店，而是把整个商业中心看成一个产业，书店反而成了一个重要的价值源头。</p>
<p><strong>跨界混搭，从横向整合的角度重新观察商业世界，会看到完全不同的景象。</strong></p>
<h3 id="衰老">衰老</h3>
<p>有一个问题：人是从什么时候开始衰老的？是岁数大的时候吗？不一定。蔡钰老师说，是从人生的高光时刻开始的。这一辈子，什么时候你最光彩，什么时候衰老就要开始了。</p>
<p>为什么？因为<strong>人是靠成就奖赏的反馈活着的</strong>。最高光的时刻，就是成就奖赏最强的时刻。后面如果没有什么事可以加大奖赏的剂量，那一个人的衰老就开始了。</p>
<p>从这个角度看，<strong>防止衰老，最好的办法是让自己一生都处在上升期，让后面都有更好的高光时刻</strong>。你可能会说，这怎么可能？当然可能。</p>
<p><strong>有两个办法：第一，做一个巨大的工程</strong>，要用一辈子去做的工程，把人生最辉煌的成就拖到最后才交卷；<strong>第二，做价值持续积累的事</strong>，比如当老师，岁数越大，培养的学生越多，人生的奖赏越到后面越大。这样的人生，其实就是不衰老的人生。</p>
<h3 id="水流">水流</h3>
<p>有人说，创业就好像一个人在森林里迷了路。</p>
<p>那怎么走出去呢？方法无外乎两种，一种是试图找到一张准确的宏观地图，另一种是不要地图，只要找到一个靠谱的依据。</p>
<p>吴伯凡老师说，在森林里，这个依据就是水流。跟着水流走，坏处是会走弯路，但好处是不走回头路，总能走出去。跟着水流走，你还会遇到那些也来找水流的聪明人，大家一起走，就更安全。直到走出森林，这帮人其实也不知道这片森林的地图是怎样的。</p>
<p>你看，<strong>如果你想做成一件事，重要的不是认准一个道理，而是有能力发现新的事实。一方面根据事实来修正自己的道理，另一方面不断遇到那些同样尊重事实的人，一起往前走。</strong></p>
<h3 id="说服">说服</h3>
<p>一个段子说，有一对儿老两口，老吵架·一吵架，老太太就不理老头，一句话也不说，老头就着急难受。</p>
<p>后来老头摸索出一个办法，他把家里所有带螺口的瓶子，不管是酱油瓶，还是泡菜罐子，都拧得紧紧的。老太太拧不开，就只能找老头：“帮我拧开！”这话只要说了第一句，后面的事不就好力了吗？</p>
<p>你看，<strong>说服一个人最好的办法，不是用道理、用诚意、用行动，而是给他制造一种情势</strong>。</p>
<p>从这个小故事，你会发现，人为什么会主动说服自己？因为每个人都很难摆脱自己的惯性。一个老太太自己平时打得开的瓶瓶罐罐忽然打不开了，也就是惯性被阻断了，她太难受了。说话也一样，一旦开口说话，让她开启了一个惯性，她也就回不去了。一切套路的背后，都有一个惯性在起作用。</p>
<h3 id="说谎">说谎</h3>
<p>有个朋友欢天喜地地告诉我，他两岁多的儿子会说谎了。我说，你儿子会说谎了，你还高兴得鼻涕泡都出来了？你是亲爹不？</p>
<p>他说，你可别小看说谎这件事，在儿童时代，说谎不是什么道德问题。<strong>孩子开始说谎，说明他人生中最重要的智力训练开始了</strong>。人的智商、情商发育都是靠说谎来锻炼的。</p>
<p>你想，<strong>说谎可不是一个单向行为，一个谎撒出去，一根漫长的链条就被启动了</strong>。你得斟酌这个谎话的可信度吧？你得判断对方的反应吧？然后，你还得准备新的谎话来应付这个反应吧？这个谎话又会引发新的反应，你还得再应付吧？所以，这是孩子人生中第一次应对如此复杂的情况。他的智力成长第一次有如此坚实的阶梯。这不值得高兴吗？</p>
<h3 id="思维方式">思维方式</h3>
<p>有一种思维方式叫<strong>聚合思维，也叫求同思维，就是把看到的所有新东西，都归类到自己熟悉的东西里去</strong>。</p>
<p>比如看到寿司，说这不就是米饭加鱼片吗？看到比萨，说这不就是把肉放到了烧饼上面吗？</p>
<p>再比如，说互联网思维的那些东西，工业化时代不是就有了吗？有什么新鲜的？用这种思维方式想问题，归纳性强，也比较容易获得安全感，因为世界上没有新东西。</p>
<p>可是，还有一种和聚合思维相反的思维方式，叫<strong>发散思维，就是总会注意到事物新奇的、不同的特点</strong>。米饭加鱼片，叫寿司？这个没吃过，一定要尝尝。</p>
<p>世界上绝大部分辩论都是由这两种思维方式的矛盾引起的。</p>
<h3 id="思想家">思想家</h3>
<p>过去看书，尤其是思想方面的理论书，经常会被那些晦涩的词困扰，比如“能指&quot;“所指&quot;“后现代&quot;“解构&quot;“复调理论&quot;，等等。看多了之后，就会觉得那些写书的人故弄玄虚。心想，你们就不能说人话吗？</p>
<p>但是后来我看到法国哲学家德勒兹的一个说法，他说，理论和哲学之所以要发明这些晦涩的概念，不是因为思想家们愿意这么做，而是因为<strong>这个世界本来就有一些部分是晦暗不明的，是很难表达的。而思想家的工作，就是通过发明概念和词语，把这些部分指出来，让世人看到</strong>。</p>
<p>这个工作当然相当艰难，难免要生造词汇。刚开始，大家不适应，觉得晦涩，但是时间长了，有不同的人都看到了这个晦暗的角落，这个角落就会被照亮。</p>
<p>你看，<strong>很多我们要怪罪到人身上的事，其实都是世界本来就有的困难。</strong></p>
<h3 id="死磕">死磕</h3>
<p>互联网时代的死磕和传统时代的死磕作用是不一样的。</p>
<p>以前，死磕只是为了得到更好的结果。所以有的人就会怀疑，风险这么大，万一得不到那个结果怎么办？</p>
<p>可是<strong>在互联网时代，死磕一件事，可以让你不仅走在通向结果的路上，还可以让你向周围的人传播自己的品牌，让周边所有的人知道你是一个靠谱的、认真的、不获全胜决不收兵的人</strong>。就算你原先要的那个结果没得到，也没关系，一个靠谱的人，是人人都希望合作的人。</p>
<p>所以，<strong>众目睽揆之下的生活策略，就是专心干自己的事，用干那个事情该有的样子去干自己的事。</strong></p>
<h3 id="素养">素养</h3>
<p>我们经常讲“素养&quot;，这个词到底是什么意思？</p>
<p>原来我是望文生义，“素&quot;就是元素的素，是基本的意思，那“素养&quot;就是基本修养。但是后来我偶然看到了这个词的来历。</p>
<p>原来这个词出自《汉书·李寻传》中的一句话：“马不伏历，不可以趋道；士不素养，不可以重国。“意思是说，这马啊，得让它晚上趴在马槽上吃饱了，这样它白天才能驮着东西赶路；国家平常就得重视培养人才，否则这个国家就发展不起来。所以，这个“素”，不是元素的素，而是平素的素，日常的意思。<strong>素养这个词的意思，就是日积月累出来的修养</strong>。</p>
<p>从这个解释来看，<strong>我们说一个人有没有素养，意思就不是这个人水平高不高，而是在他的身上能不能看到那种水滴石穿的痕迹</strong>。所以，想知道自己在别人眼里有没有素养，只要反思一下自己有没有每天都在重复地积累就行了。</p>
<h3 id="算法">算法</h3>
<p>有一位老师发微博说，他在深圳遇到一位出租车司机。这位司机说，现在他们主要得和各种出行平台的算法斗。</p>
<p>怎么斗呢？如果你只用一个平台，平台上的算法发现，你这辆车，派什么单就接什么单，很稳定，所以各种小单就会派给你。而精明的司机，会在几个平台之间换着用。这样算法就会判断，你是一个随时要跑掉的司机，得留住你，所以就会把好活儿派给你。算法越这么想，司机就越会这么换着用。</p>
<p>站在平台的角度想，给新来的、不稳定的合作者尝点甜头，留住他们，这好像没什么不对。可他们没有意识到，这其实是在欺负原先那些稳定的合作者，所谓的<strong>大数据杀熟</strong>，就是这么来的。</p>
<p>你看，<strong>一次没道理的奖励，其实就是很多次对其他人不公平的惩罚。</strong></p>
<h3 id="损人不利己">损人不利己</h3>
<p>对于损人利己的人，我从来不抱怨，因为这是人之常情。<strong>社会合作从来不会因为人人利己而崩溃。真正给我们的社会协作带来困扰的，是那些损人不利己的人。他们的最大问题是，搞不清楚自己的利益所在</strong>。通常来说，有三种可能。</p>
<p>第一，利益眼界太狭窄，也就是只看得到眼前利益，看不到更长远、更多元的利益格局。比方说，对自以为可以信任的人说其他人的坏话。</p>
<p>第二，利益被各种情感因素绑架。比如，在生意场上因为看对方不爽，而宁可毁掉一桩原本可以双赢的合作，所谓“打翻狗食盆，大家吃不成&quot;。</p>
<p>第三，只看到自己的利益计算，而不会从他人的角度想一想，自己单方面的图谋有没有可能实现。</p>
<p>所以，如果说坏人的问题是道德问题，那这些损人不利己的人，他们的问题就是智力问题。</p>
<h2 id="T">T</h2>
<h3 id="讨好">讨好</h3>
<p>有一位企业家跟我感慨，现在的消费者也太不可理喻了，面对讨好他们的人，他们不领情；面对高贵冷艳的人，他们反而忠心跟随，痴心不改。你说这是什么现象呢？我说，这其实就是工业时代转型的一个现象。</p>
<p>原本，人们生活在相对固定的社会关系中，人和人之间要想充分协作，减少摩擦，就得相互讨好，以巩固那些关系。</p>
<p>可是，互联网带来的横向连接可能趋向于无限大，人不再局限于一些固定的社会关系中。所以，这个时候，<strong>人类协作的黏合剂就不再是彼此讨好，而是彼此吸引了</strong>。</p>
<p>那些高贵冷艳的人，你可能看不惯，但是在喜欢的人看来，他们就是“有性格，有情怀&quot;。一句话，讨好的时代过去了，吸引的时代开始了。</p>
<h3 id="提拔">提拔</h3>
<p>你有没有想过，在工作岗位上，一个人为什么会被提拔？</p>
<p>答案好像明摆着，<strong>无非两个原因：第一，能力强；第二被领导或者组织信任。但在现实中，另外一个原因也非常重要，就是有人能接替他现在的位置。</strong></p>
<p>很多人既能干，又被信任，但之所以迟迟没有被提拔，就是因为他要是升官了，他现在的活儿就没人干了，只好等等再说。你可能会说，这对他不公平啊。但是，<strong>组织行为从来不是以公平为第一目标的，而是以组织自身的利益为指针</strong>。</p>
<p>看清这个事实，所有职场里的人，就可以重新整理一下自己的优先级。达成当前的工作目标固然重要，不断充实提升自己也很重要。但是，<strong>为自己的岗位找到一个能接替自己的人，培养他，给他机会，更重要。利他就是利己，听起来是鸡汤，但在现实中，这就是事实。</strong></p>
<h3 id="体验经济">体验经济</h3>
<p>在一个会议上遇到了一位朋友。他说，某个瞬间，他突然明白了什么是体验经济。</p>
<p>他给我看他脚上穿的鞋，说这鞋他买了 8 双。为什么？因为这鞋有 5 厘米的内增高。其实这位朋友并不矮，而且已经功成名就，也不用靠个头儿去博取什么社会竞争力了。那他为什么还要穿这种内增高的鞋？</p>
<p>他说，一次偶然的机会，他穿上了这种鞋，发现自己的视野一下高出了 5 厘米。这 5 厘米的视野真是美妙，一旦体验到了，就绝不舍得再失去了。所以，他就干脆买了 8 双同样的鞋。这样，他就随时可以享受高 5 厘米的视野了。</p>
<p>他说，从这个例子中，他悟出了<strong>体验经济最核心的特征，就是没法退转。一旦体验到更美好的东西，就没法再退回到原来的体验层级上去了</strong>。体验经济有前途，原因就在此。</p>
<h3 id="跳槽">跳槽</h3>
<p>好几个人跟我商量跳槽的事。我的建议当中，有一个共同的东西，就是干万不要有毁掉重来的心态。</p>
<p>人一辈子就这么短，是经不住几次毁掉重来的。<strong>跳槽和离婚可不同，它是踩着已有的东西去够那些自己还没有的东西。它一定不能是因为对现状的嫌弃，而应该是因为想更好地利用现在的资源</strong>。如果你发现现在的资源没什么好的，那问题就来了。这说明你没有建设性地经营自己的习惯，跳到一个新的地方，结果一样还是不满意。</p>
<p>比如，有一个坐了三年牢的人，出来之后身体特别好。他说，坐牢也能向不同阶层的人学习，顺便调理饮食，高血压都治好了。每天再做几十个俯卧撑，身体倍儿。</p>
<p>你看，会经营自己的人，连坐牢都不会觉得一无所得，现在的工作，再坏也坏不过坐牢吧。</p>
<h3 id="同场竞争">同场竞争</h3>
<p>在商业领域，人们经常谈行业竞争。但是在未来，竞争其实不是行业内部的事，即使嬴得了行业内的竞争，也有可能输掉公司的未来。</p>
<p>为什么？<strong>因为未来的商业竞争，本质上是争夺消费者的时间</strong>。</p>
<p>你看，随着科技发展，<strong>未来一切都可能是充裕的，唯独消费者的时间和注意力是稀缺的</strong>。电影院、咖啡馆、出版社、培训机构、旅游公司，<strong>实际上都是在争夺同一批消费者的时间，是同场竞争，没有行业之分</strong>。大家的着眼点都是，占用了消费者多少时间。</p>
<p>作家凯文，凯利把这个说法又推进了一步，他说，<strong>未来，很多行业其实都是过滤器一在海量对象中，把无效选择过滤掉，让人更好地利用时间。</strong></p>
<h3 id="童年">童年</h3>
<p>当了几年爸爸，我最大的收获就是重新理解了童年。都说快乐的童年，其实不然，童年其实是一段很苦的日子。</p>
<p>你想，一个孩子，他的世界就那么点儿，控制世界的能力也就那么点儿。就像那句话说的，世界的一粒灰，落到他们头上就是一座山。一个玩具坏了，或者遭遇到一点点不公平，大人看来也许不算什么，但在他们看来，那就是天塌了一样的灾难。</p>
<p>从这个角度看我们自己，也是一样。如果我们觉得一件事有天大，带来了天大的悲哀，原因也只有一个，那就是我们看到的世界太小了。</p>
<p>所以，<strong>给孩子知识不是目标，帮他们看到更大的世界，从艰苦的童年状态解脱出来，才是目标。童年没有什么值得羡慕的，成长才值得羡慕。</strong></p>
<h3 id="透明度">透明度</h3>
<p>西汉的丞相一一也是刘邦的重要谋士一一陈平，有一次逃亡时，要坐船渡过一条河。</p>
<p>摆渡的船夫看见陈平相貌堂堂，又是一个人赶路，就怀疑他是一位逃亡的将领一．．一反正是个大人物，所以身上肯定有钱。于是船夫就起了歹意，看着陈平，眼露凶光。陈平意识到情况不妙，但是已经上了贼船，能怎么办呢？求饶？认？斗狠？都没用。</p>
<p>陈平灵机一动，二话不说就脱掉上衣，光着上身开始帮船夫划桨。船夫一看，上衣都脱光了，也没看到什么金银财宝，还是算了吧。</p>
<p>这个故事告诉我们，<strong>在复杂的环境中生存，有时需要你保持透明度，而且是提前保持透明度，不要事到临头再解释。</strong></p>
<h3 id="推己及人">推己及人</h3>
<p>原来你要是想了解其他人的想法，方法很简单，就是<strong>推己及人、将心比心</strong>。一件事，我不知道别人怎么想，但是反过来想想我自己在这个处境下会怎么想，基本上也就可以推断出别人的想法了。这个方法，我用了很多年，一直很好用。</p>
<p>但是，这几年我发现这个方法不灵了，原因有两个：<strong>第一</strong>，社会在多元化，人和人的差异变得越来越大。<strong>第二</strong>，自己在一个领域扎得越深，就越不知道不在这个领域里的人怎么想。</p>
<p>有一个词叫“<strong>知识的诅咒</strong>&quot;。没有专业的知识，你就没有竞争力。但是如果有了某种专业知识，你就为自己打造了一个认知牢笼。</p>
<p>这么说来，<strong>人一生的学习，可以分成两个阶段：第一个阶段，学习知识，建立竞争力；第二个阶段，走出知识的牢笼，重建同理心。</strong></p>
<h3 id="退休">退休</h3>
<p>硅谷投资人纳沉尔对“退休&quot;这个词有一个很有趣的定义。<strong>什么是退休？不是不工作，而是不再为了想象中的明天而牺牲今天</strong>。</p>
<p>按照这个定义，一个人的退休方法有很多种。<strong>第一种方法当然是存够了钱，想干什么就干什么</strong>，不为明天焦虑，这个人的状态是退休了。<strong>第二种方法，是把开销降到几乎为零</strong>，比如说出家修行，那也不用为明天焦虑，也算退休了。其实还有<strong>第三种方法，就是做自己热爱的事</strong>，能不能挣到钱无所谓。</p>
<p>我觉得第三种方法最好。为什么？因为通常做自己热爱的事，就是找到了最独特的价值。在我们这个时代，独特价值通常都能挣到钱。</p>
<p>比如你学过画画，你真热爱，就在社交平台上直播画画，画一张卖一张。只要你不想着怎么扩大规模，不为明天焦虑，你信不信，真的就能有不错的收人。这可能是我们这代人最理想的退休生活了。</p>
<h3 id="妥协">妥协</h3>
<p>哲学家齐美尔说过一句话很有意思：“<strong>最高境界的处世艺术是不妥协却能适应现实</strong>，极端不幸的个人素质是不断妥协却还不能适应现实。”</p>
<p>你看，这就把高人和普通人区别开来了。为什么会这样？答案是两种妥协和适应的本质不一样。<strong>高人的不妥协是行动上的不妥协，适应是态度上的适应</strong>。有领导力的人都这样，我心里有的行动目标是不能变的，但是面对不同人的不同情绪，我可以自如地变通。</p>
<p><strong>而普通人正好反过来，他们不能妥协的是态度，行动上倒是可以随意地变</strong>。你一定听过很多人说这样的话：“我跟他捣乱，不是为什么利益，我就是咽不下这口气。&quot;或者，“这件事我之所以不做，是因为没必要非得把关系搞僵。”</p>
<p>你看，他时刻在意态度和情绪，因此不坚持任何行动。这就是为什么老是妥协却很不幸的根源。</p>
<h2 id="W">W</h2>
<h3 id="挖人">挖人</h3>
<p>参加领教工坊的活动时，有人问雕爷，怎么才能留住关键岗位上的员工？</p>
<p>雕爷举了一个例子。他公司的设计师，在行业内公认水平比较高，但是没有被挖走过。</p>
<p>为什么？核心原因有两点。<strong>第一，是给盼头，小幅度但高频率地加薪</strong>。不是按年，而是按月小幅度加薪。外面挖人，靠的无非就是加薪。被挖的人一算，在这儿只要好好干，过段时间也会加到这个水平，那就一动不如一静了。</p>
<p><strong>第二，是给宽松</strong>。雕爷说，用关键岗位上的能人，最重要的心法就是不能往死里用，最多要求他一半时间在工作，要给他涵养心智的时间。外面高薪挖去的人，一定是往死里用。那被挖的人也知道，那样的话，过不了多长时间自己就会被使废了，自然就不会走。</p>
<h3 id="威胁">威胁</h3>
<p>有一次，我和一位创业者聊天，他在他那个行当里已经做到第一名了。</p>
<p>我就问他：“你觉得你这个行当里的第二和第三名对你有威胁吗？&quot;他说：“没有，我最害怕的是刚进人这个行业的那些小企业。”我问：“为什么呢？”</p>
<p>他说：“第二、第三名的企业拥有的资源类型和我差不多，打法差不多。说白了，他们的资源和思路，都锁定在我这条路上了，但是什么都不如我，那还有什么可怕的？但是那些刚刚人行的小公司就不一样了，他们没有什么资源。所以，他们一定在逼着自己想别的办法，用其他类型的资源超过我们。万一他们想出来了，形成了竞争力，到时候，船大难掉头，难受的反而是我们。”</p>
<p>他还说了一句话：“<strong>要小心那些满手都是坏牌的人，因为当手里的每一张牌都是坏牌时，他们想要嬴一把，唯一的办法就是打破游戏规则。</strong></p>
<h3 id="为己">为己</h3>
<p>我经常讲一个有点犯忌讳的道理：<strong>人做什么，应该都是为了自己</strong>。</p>
<p>比如，我和同事讲，你干万别想着牺牲自己，为公司做贡献，<strong>你做什么都应该是为了你自己的成长</strong>。我们的责任，<strong>是找到方法让你和公司共赢</strong>。</p>
<p>再比如，你做慈善也不是因为可怜穷人，是你要对自己更满意，让自己对社会问题有判断，有担当。</p>
<p>再比如，你去听音乐会，注重着装，不是对演奏者的尊重。本质上，你是在尊重你自己和这段音乐的缘分，尊重自己花出去的时间，让自己变得更完美。</p>
<h3 id="未来">未来</h3>
<p>在总结自己过去一年的认知变化时，我说了特别重要的一句话：“<strong>现在就是未来。</strong></p>
<p>什么意思呢？过去我总觉得，未来是未来，现在是现在。未来之所以有价值，是因为我们可以通过努力，让它变得和现在不一样。所以，未来是想象和规划出来的。但是，后来，我有个新的感受，说白了就是，<strong>未来是什么样子，跟紉划的关系不大，它更多是通过做好手头的事来实现的</strong>。</p>
<p>比如，一位导演，拍好手头这一部电影，有了票房，有了业界的口碑，下一部的片约和机会也就来了。再比如，你在公司做好一件小事，哪怕只是接待一位客人，流程严谨，礼貌周到，也会被看成工作能力强的表现，下一个机会也就随之来了。</p>
<p>所以，<strong>未来是什么？未来只是我们现在做的事情中某个因素的展开。</strong></p>
<h3 id="未完成的人">未完成的人</h3>
<p>翻我自己的读书笔记，翻完之后，眼睛一闭，脑子里蹦出来的第一个词是“未完成的人&quot;。这是我看问题的一个很大的视角转换。</p>
<p>过去，我会把所有努力都看成自己变强大的过程一一我这个人就这样了，所以我需要更多的武器让自己变得更厉害。</p>
<p>但是，如果从“未完成的人&quot;这个角度来看，应该是，我要成为的那个人，我还远远没有达到，那个人有更多的智慧，有更好的感受力，有更多处理问题的工具，所以我现在的努力不过是要更接近那个目标。</p>
<p>这样看问题的好处是，你不会贸然说什么有用，什么没用。有用没用，那是相对于我当前的目标而言的。而<strong>对于那个未完成的自己来说，我现在多读一首诗，多站在那里看一眼风景，多认识一个人听他讲自己的故事，都是我完整人格里不该缺少的一个片段。</strong></p>
<h3 id="文盲">文盲</h3>
<p>有一位老板，几十年来，生意都做得很好，但他其实是个文盲。这好像不太符合我们讲的，做生意、创业，要不断地认知升级。那他为什么还能把生意做好呢？</p>
<p>事实上，他虽是文盲，可智力并不低，数学能力非常好。他做生意，对财务特别敏感。任何生意上的决策一一一你不用跟他讲道理，他反正也不太昕得懂一．一．他都能用投资回报率这一把尺子来衡量。划算就做，不划算就不做。除此之外，他做决策没有别的维度。</p>
<p>你可能看出来了。其实他的方法和巴菲特是类似的，就是<strong>长期坚持用一种价值尺度来衡量自己的投资，尽量不受任何其他因素影响。对于有知识的人来说，这需要极高的认知水平才能做到</strong>。而这位老板，文盲这个因素让他排除掉了那些干扰因素，他同样也做到了。</p>
<h3 id="无用之学">无用之学</h3>
<p>有一次我和一位学者聊天，他是那种特别谦虚的人，说观点之前，总是要说：“我这说的都是无用之学，就是博大家一乐。”</p>
<p>那次我终于没忍住，说您以后再别说什么无用之学了。过去可能确实是这样，但是未来，虚头巴脑的知识的价值会越来越被重视。</p>
<p>就像有一个段子说的那样，同样面对美景，别人可以吟诵“大漠孤烟直，长河落日圆&quot;，你只能说“真好看&quot;；同样面对一道茶，别人能说出这个品种的源流和典故，你只能说“真好喝&quot;。你花的旅行费用和买茶叶的钱是不是就贬值了？</p>
<p><strong>未来的市场中，体验本身就是价值，而创造体验的，除了商家，就是你自己的知识。这就是知识价值的显性化。</strong></p>
<h2 id="X">X</h2>
<h3 id="相亲">相亲</h3>
<p>我们总编室的宣明栋老师写了一篇文章，主题是“如何提高相亲的成功率&quot;。</p>
<p>相亲成功需要很多条件，比如学历、收人、家境，等等。这些都可以通过发问得到答案。但是，<strong>如果你还在意对方的人品、三观，靠问问题就不行了，语言是没法描述三观的。那靠什么？靠一起经历事件</strong>。</p>
<p>请注意，什么叫“事件&quot;？一起吃个饭叫事件吗？一起看个电影叫事件吗？不叫，因为这些不是能够呈现一个人社会性的过程。那什么是事件呢？比如，吃饭结账的时候发现老板算错了账，他怎么处理；看电影的时候，旁边一直有人大声说话，他怎么处理。这些才是事件。</p>
<p>你看，当我们面对一个处境，这个处境找我们要一个反应，这是事件。而每一个事件，看在旁观者的眼里，都在暴露我们的人品和三观。</p>
<h3 id="消费">消费</h3>
<p>英国才子阿兰·德波顿在《身份的焦虑》这本书里面写了一段话：“<strong>要想停止注意某件事物，最快的方法就是将它购买到手一一就如同要想停止欣赏某个人，最快的方法可能就是与其结婚。”</strong></p>
<p>后半句话，当然有玩笑的成分。但是前半句，还是透露了一个真相：一样东西的绝大部分价值，在我们决定买它、下单支付、收货完成的那一刻，就已经消失了。</p>
<p>就像许知远说的，我们现在这个社会其实不是物质匮乏，而是意义匮乏。<strong>绝大部分消费，其实是意义消费和身份消费</strong>。很多人买书不看，其实也是这个原因。比如关注到一本书，好喜欢这个书名，于是买子拿到了，占有这个书名的意义感就满足了，对这本书的关注也就结束了。</p>
<p><strong>占有本身，就是意义的实现，这可能是消费时代的最大秭密。</strong></p>
<h3 id="消费主义">消费主义</h3>
<p>在微博上看到有位老师提了一个问题：“请问，抵御消费主义的最佳手段是什么？”</p>
<p>他的答案是两个字：创作。听起来很突兀的一个答案，但是很有道理。先搞清楚，<strong>什么是消费主义？不是好吃懒做、奢侈浪费，而是用消费来解决意义缺失的问题</strong>。比如，我买了一个苹果手机或者一个什么包包就证明我怎样怎样。这哪里是买东西啊？这是买一个意义。反过来也就证明，我没有能力自己去创造意义，我需要买一个现成的。这才叫消费主义。</p>
<p>那该怎么办呢？创作解决的就是这个问题。有一张白纸，我就能画一幅画；有一些小花小草，我就能拍一幅摄影作品。这是在点石成金，是在一片意义的空白中，横空创造出了意义。这样的人，怎么可能被消费主义绑架？</p>
<p>所以才说，<strong>抵御消费主义的最佳手段，不是节省，而是创作。</strong></p>
<h3 id="小步快跑">小步快跑</h3>
<p>关于互联网软件产品，过去的观念是，一款软件要设计得尽善尽美才能投放市场，比如微软的 Windows。</p>
<p>可是后来大家发现，没这个必要，于是腾讯提出“小步快跑，快速迭代&quot;的做法。尽快上线，不要怕有缺陷，在和用户的互动中快速改进。</p>
<p>我又听到一位创业者在讲课时说，其实还有一种更快的做法，就是有一个初步的想法，立即让设计师做一张图出来。它根本还不是一个软件，只是一张图，上面的功能都是画上去的。然后发到自己的朋友圈，如果在熟人圈里有不错的反响，那再进一步去做。</p>
<p>你看，<strong>互联网大大提升了社会的反馈速度。好处是，不需要做那种完整规划了，有一个大致的方向，就可以从最实际的地方做起</strong>。行动的重要性将会渐渐地超过计划的重要性。</p>
<h3 id="小人">小人</h3>
<p>有一句话说，<strong>人生需要遇见四种人，分别是名师（指路）、贵人（相助）、亲人（支持）。还有第四种呢？是小人（刺激）</strong>。这不符合我们传统的价值观啊。</p>
<p>按说，你遇到小人捣鬼，要么是快意恩仇报复回去；要么就云淡风轻，他强由他强，清风拂山冈，他横由他横，明月照大江。</p>
<p>但是大部分人，其实既没有能力及时报复小人，也没有胸怀真的把这件事放下。<strong>而如果机缘好的话，这份小人给的刺激，反而是前进的动力</strong>。</p>
<p>就像一位创业者跟我说的，创业的动机哪有那么单纯？理想当然是有的，但是绝大部分创业者除了理想之外，还有三样东西：<strong>第一</strong>，挣钱的欲望，就是说单纯的物质占有欲；<strong>第二</strong>，出人头地的欲望，这里面有很多虚荣心的成分；<strong>第三</strong>，干得好气死那帮小人的欲望。你看，这就是小人刺激的功劳了。</p>
<h3 id="协作">协作</h3>
<p>送孩子上幼儿园，看见教室门口有家长给老师留的字条，上面写着几个字：让孩子多喝水、多吃菜。这父母的心情，咱都能理解。不过，我觉得这个字条还是写得不好。</p>
<p>第一，多是多少？没有一个明确的标准。事实上，老师也无法执行。陌生人之间的合作，边界不清楚的瞩咐是完全没有效果的。第二，不仅没有效果，而且传达了对老师的不信任。多这么一句，客观效果上就会让老师有受挫感。·别觉得我言过其实，如果你会开车，旁边总是坐一个人提醒你注意安全，虽然是好意，你也会抓狂的。</p>
<p>所以，这张纸条如果要写，要么就写得边界清楚，比如，“我给孩子带去的瓶子里准备了适量的水，请老师督促他喝光。谢谢！“；要么就只写五个字，“老师辛苦了”。</p>
<p><strong>和陌生人协作，要点就这么两个：边界清晰，足够信任。</strong></p>
<h3 id="写作">写作</h3>
<p>作家和菜头写过一篇文章，叫《开始写作吧》。</p>
<p>我刚开始觉得，这不是扯吗？劝人写作，这件事太难了。即使汉语是母语，即使受过高等教育，真能把文章写明白的人其实也不多。</p>
<p>但是，我觉得文章中有一句话很有道理。和菜头说，写作让你“用最小的代价，体验了一件事是如何完成的。文章好坏根本不重要，重要的是你完整地经历了一次创造，而且是在沉重的心理压力和干扰下完成了这次创造&quot;。</p>
<p>这让我联想起著名的泰勒斯三问。有学生问古希腊哲学家泰勒斯，<strong>人生最难的事是什么？答案是了解自己。最简单的事是什么？答案是给别人意见。最快乐的事又是什么？答案是拥有自己的目标，并将它完成。而和菜头说的写作，就是这最快乐的事。</strong></p>
<h3 id="写作焦虑">写作焦虑</h3>
<p>写作是件挺让人焦虑的事，我们都特别想写好，但就是下不去手写第一行字。怎么办？</p>
<p>其实，所有的焦虑都是因为我们活在一个想象的目标里，而不是活在当下。所以，<strong>解决的办法就是把那个想象的目标拆成一个个当下可执行的台阶或者步骤</strong>。比如，五天后要交一篇五千字的文章。那我一天写一千字行不行？不好意思，那不是一个好台阶，因为第一天的一干字就不好写。</p>
<p><strong>有效的办法是，先写一篇叫“烂稿子”的东西</strong>，就是有想法就往上堆，也不讲究措辞，反正也不让人看。虽然词不达意，但毕竟可以下笔千言。等“烂稿子&quot;写完了，这一级台阶踏上了，你会发现，把它改成一篇能用的稿子就简单多了。</p>
<p>你看，<strong>焦虑的本质是因为缺乏可控制的当下行动，一旦行动开始，逃避模式就转化成了战斗模式，焦虑自然也就没有了。</strong></p>
<h3 id="心法">心法</h3>
<p>我经常提到一个词，叫“心法&quot;。我本来的意思，是指那些必须心领神会才能掌握的方法。后来我看到一个进一步的解释，说“心法&quot;是和“算法&quot;相对立的。</p>
<p>所谓算法，就是用理性实现对外操控，输人信息，输出结果，追求的是达成目标的效率。而 <strong>“心法”要求的是对内自我反省，以促进自己成长，然后通过成长之后的自己来达成目标</strong>。它追求的是自我改变。</p>
<p>举个例子。市面上有很多教你怎么追女孩的书，有的就是算法派，教你一大堆话术技巧，看似很实用，但是说实话，人家姑娘是一个大活人，眼里看到的也是你这个大活人，就算你最后成功了真正起作用的怎么会是一两句话呢？一定是那个整体的、散发魅力的你。</p>
<p><strong>未来的世界可能就这样一分为二了。算法，属于机器，而心法，才属于人类。</strong></p>
<h3 id="心理医生">心理医生</h3>
<p>领教工坊联合创始人肖知兴老师跟我说，他一直很奇怪，为什么美国人在俚语中把心理医生称为 shrink。</p>
<p>shrink ，这个单词的本意是“收缩&quot;。奇怪，治心理疾病和收缩挨得上吗？</p>
<p>有一次，他遇到一位美国的精神病医生，就把这个问题提出来了。医生是这么回答的，<strong>其实所有的精神疾患都是因为自我太大了</strong>，以至于和本我、超我有点不协调。自我、本我和超我，是弗洛伊德提出的心理学理论。</p>
<p><strong>什么叫自我太大？简单来说，就是太自负、太自卑或者太在意自己</strong>。而医生的职责就是帮你把自我缩小一下。所以，美国人就把心理医生称为 shrink了。</p>
<h3 id="心流">心流</h3>
<p>我们经常听到一句话，就是“过程比结果重要&quot;。</p>
<p>那什么时候容易听到这句话呢？结果不尽如人意的时候，或者对结果没什么把握的时候。所以，这通常是一句安慰人的话。</p>
<p>但是，我又听到了一个新的理解：<strong>如果你处于“心流”状态，也就是全身心投入地去创造，感知系统和外界隔绝，忘却了时间的流逝，那么过程确实就比结果重要。因为这已经是人类迄今为止能够找到的最幸福的状态了</strong>。更进一步地想，不是结果不重要，而是因为有了这个情绪饱满的过程，你的精神本来就已经达到了一种什么结果都能坦然接受的状态。</p>
<p>所以，如果我们觉得“结果比过程重要&quot;这句话有点扯淡，其实反过来证明了我们可能还没有全身心地投人。</p>
<h3 id="新东西">新东西</h3>
<p>所有的策略调整，都应该以事情原本应该有的样子为基准线。</p>
<p>有朋友问，什么叫原本应该有的样子？难道什么事都有应该有的样子吗？谁规定的应该？</p>
<p>答案是，凡事都有，它们应该有的样子叫传统。</p>
<p>我们生活的这个时代，经常给我们一个假象，就是世界是全新的。其实，这不是真相。<strong>真相是，这个世界的绝大部分都是早就定下来的</strong>。宇宙常数、日升月落、文化惯性、社会网络、生活节序、人类需求，这些东西都是早就定下来的。<strong>一个新东西出现，表面上看是横空出世，但如果细究下去，它一定是某个老东西在新的技术条件下的展现。它的底层逻辑一定不是新的</strong>。</p>
<p>所以，如果你感觉自己做了一件新事情，先别高兴，你还要再追问一件事，就是它的传统到底对接到了哪里。这个问题有了答案，你才有把握，这是一个真正的新东西。</p>
<h3 id="新目标">新目标</h3>
<p>说说在家带孩子的发现。</p>
<p>当孩子沉迷在一样东西里面的时候，你要是想把她拔出来，太难了。比如她在玩她的小兔兔，你要是提醒她该出门了，现在去换衣服，她根本就不理你。如果上去强行打断，马上就是一场哭闹。</p>
<p>那最有效的方式是什么呢？是给她一个新目标。比如跟她说，我们要出门了，你把小兔兔放到门口的板凳上，哄它睡觉，让她乖乖的，在门口等你回来，好不好？孩子一听有新的玩法，马上照办。而且在这个过程中，也把马上就要出门这个新目标植人了。<strong>等于提前做好了出门的心理建设</strong>，后面的事就没那么难了。</p>
<p>其实对成人不也一样吗？<strong>强行纠正一个行为，永远都不如顺着这个行为的方向，给他植入一个新目标</strong>。你看，孩子并不是不成熟的成人，他们只是成年人本来的样子。</p>
<h3 id="信任">信任</h3>
<p>有个年轻人跟我抱怨说，他曾在团队里犯了一个错，他道歉了，也当众反省了，毛病也改了，其他人也表示原谅了，但他就是感觉大家还在排斥他。所以他就感慨，这个时代的人怎么这么不宽容？</p>
<p>我说，可能是你自己没有搞清楚状况。我们这代人受的教育是，错了不要紧，改了就是好同志。没错，在是非对错这个维度上，世界确实变得越来越宽容，大家不会揪住你的小辫子不放。</p>
<p>但是，你别忘了，这个世界还有另一个维度，叫信任。信任跟对错没什么关系。它存在于每个人的心里，无法衡量，难以描述。你犯了一次错，可能很容易获得大家的原谅。但如果你在犯错的过程中还伤害了大家对你的信任，想要再次获得信任则比登天还难。</p>
<p><strong>在理念世界里，对错似乎很重要。但在现实世界里，信任比对错重要多了。</strong></p>
<h3 id="信商">信商</h3>
<p>有一个词，叫 <strong>“信商”，说的是一个人辨别信息来源真实性的能力</strong>。在这个时代，信商可能比智商更重要。因为智商不够，可以通过找靠谱的人合作来弥补，<strong>而信商不够，连谁靠谱都不知道</strong>。</p>
<p>想要信商高，我觉得做到三条也就够了。</p>
<ol>
<li><strong>第一，相信权威大机构</strong>。一说到权威，很多人本能地反感。但我的常识还是告诉我，一件传得很热闹的事，如果主流权威媒体始终没有报道，那它大概率是假的。</li>
<li><strong>第二，不要相信令人震惊的事实</strong>。一般咱们震惊的事，就是反常识的事。这个世界上反常识的事情没有那么多。等一会儿，没准反转就来了。</li>
<li><strong>第三，当消息来源紊乱的时候，更倾向于相信说得不精彩、不亢奋的那一方</strong>。情绪亢奋，容易讲好一个故事。但一个好故事，总是会扭曲一部分事实。</li>
</ol>
<h3 id="信息">信息</h3>
<p>梁宁老师有一个洞察：<strong>在一个组织里，一个人有没有权力，关键不是看他的职位，而是看他在信息流里面的位置。</strong></p>
<p>比如一位企业家，创业二十多年，在五十五岁就选择了退休。为什么？原来，这位企业家为了保持企业的活力，在退休前两年，让自己这一辈的老兄弟都退了，换上了一批二十多岁的年轻人。</p>
<p>逻辑上，他当然还有权力。但是这个时候，公司主力干部是一批二十多岁的年轻人，他们跟五十五岁的董事长沟通，是有困难的。遇到事情，他们更愿意和同龄的同事商量，觉得靠谱才会去和老板说。这个时候，老板听到的信息，其实已经是所有人串通后的共识了。本质上，老板只是被通知发生了什么。所以，不管他退不退，都已经在实质上丧失了权力。</p>
<p>你看，<strong>失去权力是从失去信息开始的。</strong></p>
<h3 id="信息茧房">信息茧房</h3>
<p>美国学者凯斯桑斯坦在《网络共和国》这本书里提出了一个词，“信息茧房&quot;。</p>
<p>它的意思是，<strong>在互联网时代，每个人都可以根据自己的喜好定制信息，看自己爱看的东西。结果时间一长，每个人就像蚕吐丝一样，都把自己禁锢在了一个自己造就的牢房里</strong>。</p>
<p>这个前景看起来很可怕，但是我要说，这并不是互联网时代的独有现象。古代的王和当代的企业家也一样，拥有权力的时间一长，你会发现你只能听到你爱听的话了，权力变身为牢房。所以中国古代的皇帝才要发明御史台系统，清代皇帝还进一步发明了密折系统，用来打破这个危险的牢房。</p>
<p>所以，在未来的互联网时代，打破自己信息茧房的能力，将成为一个人竞争力的来源之一。</p>
<h3 id="信息优势">信息优势</h3>
<p>我们经常说“<strong>信息就是权力</strong>&quot;。但很多人觉得这话挺怪的，有信息的人，比如说一位记者，他能有什么权力呢？这个问题要钻到权力系统的内部才看得懂。</p>
<p>举个例子。你现在是一位大老板，你有组织内的一切人权和财权，想提拔谁就提拔谁，想花什么钱就花什么钱。但问题是，你凭什么要提拔这个人，而不是另一个人呢？凭什么要花这笔钱，而不是那笔钱呢？这就需要信息了。要知道，权力可不只是予取予求，权力是要对结果负责的。</p>
<p>再举一个例子。老板给你布置一个活儿，而你掌握全部信息，所以你想干的事，你就会痛痛快快地去干；而你不想干的事，你要么反复强调困难，要么频繁地请示，那领导自然也就干不成。你说，实际的权力是掌握在你手里，还是掌握在你的老板手里呢？</p>
<p>所以说，<strong>很多情况下，实际的权力都来自信息优势。</strong></p>
<h3 id="兴奋">兴奋</h3>
<p>一位专家讲课，提到当年他从一家著名外企来到一家创业公司。他形容那个感觉就相当于 20 世纪 30 年代从上海来到延安一一各方面条件都差了很多，但人的状态变得很兴奋。随后他说了一句话：“人不怕累，怕的是不兴奋。&quot;这句话给了我很大启发。</p>
<p>上一代中国人和这一代中国人对人生的认识，可能最大的区别就在这里。<strong>在匮乏时代，人生目标被锁定在最大限度地获取资源，最小限度地支出资源上</strong>。所以，事少钱多离家近，不累而且收人高，就变成了衡量工作优劣的标准。</p>
<p>但是<strong>在今天的丰裕时代呢？人生目标其实是悄悄切换了的，变成了要能激发我的生命能量，让我兴奋起来</strong>。</p>
<p>所以，衡量自己是不是老了，也可以扪心自问这个问题：现在的我，最害怕的是吃亏上当，还是不再兴奋了呢？</p>
<h3 id="行动">行动</h3>
<p>我问李笑来：“很多人说碎片化知识没用，灌一脑子知识，结果还是不能成功，你会怎么回应这种质疑？&quot;</p>
<p>李笑来说：“我当年在新东方讲课的时候，经常会有学生问我怎么背单词。怎么背？就是背啊，一个词一个词地背，反复多背几遍就会了。难道非要找人骗你，得用词根联想记忆法？那些方法只有在你开始背之后才能起作用。”</p>
<p><strong>知识从来就没有任何方法能够传递给你，除非你拥有自己的目标，然后开始行动</strong>。哪怕这个目标很普通，比如考上大学。行动一旦开始，碎片化的知识就会迅速被你组织起来，<strong>使用、试错、迭代、内化</strong>，穿过你的身体，最后成为你的一部分。</p>
<p>这个世界说到底是自己成全自己。</p>
<h3 id="行动基础">行动基础</h3>
<p>我有一个很深的体会，<strong>支持你做出一个行动的，并不一定是你想明白了一个道理，而是此前的另外一些行动</strong>。</p>
<p>比如，很多时候，我想要做一件事，但就是觉得哪儿不对，想不清楚怎么做，没法下手。但是过了一年半载，做这件事的路径突然就清晰了，怎么做的细节都呈现在面前了。</p>
<p>这是为什么？不是因为你的水平提高了，而是因为在这一年半载中，你做了很多与此无关的事，这些事都成了你做下一件事的基础。<strong>行动才是下一步行动的台阶，每登一步，看见的风景都不一样</strong>。</p>
<p>就像有人说的，当面对两个选择时，抛硬币总能奏效。这并不是说抛硬币能给出对的答案，而是当你把它抛在空中的那一秒，你突然就会知道你希望自己的选择是什么。你看，包括抛硬币在内，所有的行动都是有效的。</p>
<h3 id="快乐和幸福">快乐和幸福</h3>
<p>在汉语中，快乐和幸福这两个词的意思差不多，但是读起来好像又有很大差别，总觉得幸福比快乐要高级一点。这个差别究竟是什么？</p>
<p>王川老师有一个解释，<strong>快乐和幸福的区别在于，事情结束之后，能量和信息的效率有没有提高。</strong></p>
<p>你想，快乐是指吃喝玩乐这些感官享受。享受完了就完了，快乐就结束了，人并没有实质性的进步，需要靠下一次吃喝玩乐才能再次获得快乐。</p>
<p>而幸福就不一样了，幸福来自一种能力提高的感受。比如说，找到了伴侣很幸福，这其实是一种能力的提高，你融人了一个共同体。再比如，经过艰苦努力考上了好大学，很幸福，这是资源获取能力的提高。</p>
<p>所以，<strong>快乐是一种成功获取了外部资源的感受；而幸福，是一种成功提升了内部能力的感受</strong>。从这个角度来说，幸福当然就要比快乐高级。</p>
<h3 id="休息">休息</h3>
<p>吴军老师对“休息&quot;这个词有一个定义。他说：“<strong>休息的本质，就是从外界获得信息和能量</strong>。”说得真好。</p>
<p>为什么需要休息？因为你感觉能量耗竭了。对体力劳动者来说，那当然就要停止能量的输出，歇下来，然后对能量进行补充。比如，吃饭就是一种休息。但是，脑力劳动者如果还照搬这个休息方法，就有问题了。<strong>脑力耗竭，本质上是缺信息</strong>。</p>
<p>根据热力学的原理，只要是一个封闭系统，只要不从外界获得能量和信息，它就会熵增，会变得越来越无序。那怎么办？要输人新的信息。所以，<strong>脑力劳动者需要的休息，恰恰不是什么都不干，而是换一种信息输入的方式，听音乐，看画册，旅行，找圈子之外的人聊天，读点和手头的事没关系的书，等等</strong>。</p>
<p>只要能换个方式体验世界，就是脑力劳动者最好的休息。</p>
<h3 id="修养">修养</h3>
<p>学者鲍鹏山老师有一段话：说到一个人的修养，总是说修养到最后是心平气和。但这不是唯一的境界，也不是最高的境界。对于个人的得失，能做到心平气和，当然好。但是如果对外界的事呢？看见什么都心平气和，那不叫修养境界，那叫麻木，惧至是道德麻木。</p>
<p>确实，如果修养是这样的，人就彻底丧失行动能力了。我发微信请教鲍老师：“那你说，人最高的修养境界是什么？“鲍老师给我发来孔子在《论语》里的一句话：“志于道，据于德，依于仁，游于艺。”</p>
<p>什么意思呢？志于道，就是生命有目标：据于德，就是做事有依据，有底线，有操守；依于仁，就是能理顺待人的态度；游于艺，就是能靠艺术以及各种精神生活追求内心的丰盈。</p>
<p><strong>有目标，会做事，善待人，有趣味，这才是一个人最高的修养境界。</strong></p>
<h3 id="选锋">选锋</h3>
<p>华杉老师提到一个话题，叫“选锋&quot;。</p>
<p>什么意思呢？就是<strong>打仗的时候要把最精锐的士兵选出来，放到一起，成为像刀锋一样的力量</strong>。</p>
<p>不管古今中外，这都是战场上的惯常做法。道理很简单，最精锐的士兵放在一起，才能让他们感受到荣誉，才能激发他们的战斗力。如果把他们分散在比较弱的队伍里，旁边的人就想了，反正天塌下来有大个子顶着，我不用怎么出力。不仅精锐士兵的荣譜感下降，还会拉低其他士兵的战斗力。</p>
<p>其实职场里也一样。我就见过很多老板，喜欢把能干的人分散使用。表面上，似乎各个业务条线的力量比较均匀，但是实际上会削弱公司整体的实力。<strong>让能干的人在一起彼此激发，让稍弱的人无从依靠，也有机会变成能干的人，这才是用人之道。</strong></p>
<h3 id="选择">选择</h3>
<p>我昕商业研究者张潇雨老师说到一个做事的方法。</p>
<p>他说，如果你面对两个选项，没有一个选项能明显好过另外一个，那该怎么选呢？答案是，随便选一个，然后把它变成一个好选择。</p>
<p>这句话听着非常醒目提神。为什么？你想，我们习惯的思维，是通过做选择来过好这一生的。但是回头一看，你会发现，其实我们做出什么选择，往往没有我们想象中的那么重要。因为通常我们面临的都是以下两种情况：第一种，是看似有得选，其实没得选。比如，看似好学校就在那里，但是我考不上，所以它并不是我在当下真实存在的选项。而第二种，是看似很重要，其实纠结来纠结去，选哪个都差不多。</p>
<p>所以，<strong>大多数时候，人最重要的不是做出什么具体的选择，而是努力把自己最终的选择变成一个好选择。</strong></p>
<h3 id="选择成本">选择成本</h3>
<p>远在加拿大的老喻有一天发朋友圈感慨说， Costco 这家零售公司真是太厉害了。温哥华人家里常用的东西几乎都被这家店包了。紧接着他又说， Costco 更厉害的地方是，假如它的店里没有你想买的某样东西，说明你也许根本就不需要那样东西。后一句话特别有意思，我盯着它看了半天。</p>
<p>你想，过去二十年，我们亲眼见到互联网的快速发展，同时也看到了<strong>互朕网的一个缺陷，就是给了我们无穷多的选择。事实上，它的丰富，只是对匮乏时代的一种反弹。而人类真正需要的东西，实际上是很少的</strong>。</p>
<p>互联网上半场的逻辑是，要尽可能的丰富。如果有下半场的话，我猜测逻辑就是要尽可能地让消费者减少选择的负担和成本。</p>
<p>所以，<strong>未来真正的服务，不是把全部可能的选择摆在你面前，而是帮你节省选择的成本。</strong></p>
<h3 id="选择困难症">选择困难症</h3>
<p>有一次，一个同事跟我说，每天最为难的时刻，不是工作遇到难题，而是中午订外卖：那么多选择，无从下手。</p>
<p>我说，这不是你的决策力出了问题，而是因为你知道的好吃的东西太少了。</p>
<p>一头驴饿死在两堆草之间，不是因为犹豫，而是因为它只知道有这两堆草。还有一句“心灵硫酸&quot;说得好，你纠是因为读书太少，而又想得太多。说到底是眼界出了问题。</p>
<p><strong>治疗选择困难症，不是要减少选择，而是要扩展眼界，知道什么是真正美好的东西。</strong></p>
<h3 id="选专业">选专业</h3>
<p>昕潘石屹讲到一个观点。有人问他，上大学应该选什么专业？</p>
<p>他没正面回答，而是说：“如果你遇到一个人，看不出他从哪里来的，交往一段时间后，也看不出他是学什么专业的，这很可能是一个很厉害的人。”</p>
<p>还真是，所谓专业，只是一个人在特定阶段的执念。只要你开始解决具体问题，需要的工具就不是一个专业能满足的了，你要调动很多其他专业的工具。解决的问题越多，你跨过专业边界的次数就越多。久而久之，当然就看不出你是学什么专业的了。</p>
<p>这么说来，<strong>上大学该怎么选专业？其实选什么专业都行，关键在于，心里得明白，选专业，不是选未来的职业，而是选未来你跨越职业边界最好用的工具。</strong></p>
<h3 id="学无止境">学无止境</h3>
<p>有个词叫“学无止境&quot;。它到底是什么意思？是说知识很多，学不完吗？确实如此，但还有一个维度，就是每一个知识的内在深度也是没有止境的。</p>
<p><strong>学习知识，至少能分成四层：听过、知道、理解和能讲</strong>。听过，是知识从你的脑子中流淌过一遍。知道，是知识你已经记住，渗透进了你的脑子。理解，是这个知识已经和你脑子里的其他知识结成了一个网络，你可以随时调用。而最高境界是能讲，就是输出，你能把它讲给别人听，还能确保别人有收获，这个就太难了。</p>
<p>这四个层次之间的难度，何川打过一个比方，<strong>听过，就像你见过一辆汽车；知道，就像你会开车；理解，就像你会修车；而能讲呢？就像你会造车</strong>。几个境界之间的差距大得难以想象。</p>
<p>所以，把读书和听课当成学习的全部，也许是对学习这件事挺大的一个误解。</p>
<h3 id="学习">学习</h3>
<p>领导力专家刘澜老师有一个“四问学习法，简单来说就是，遇到任何新信息，不仅要把信息接住，还要在意识中问自己四个问题：<br>
<strong>第一，我听到或者看到了什么</strong>？这是在事实层面搞清楚自己脑子里留下的东西。</p>
<p><strong>第二，这些东西和我熟悉的东西有什么关系</strong>？这是更进一步，把新知识和自己的旧世界建立联系。</p>
<p><strong>第三，我会变成什么</strong>？学到这个知识之前的我，和学到这个知识之后的我有什么区别？</p>
<p><strong>第四，我要用到哪里</strong>？也就是我下一步的行动会是什么。</p>
<p>这个“四问学习法&quot;看起来有点繁琐。我们怎么可能一边看书，一边不断在脑子里像跑马灯一样问这四个问题呢？但你发现## Y</p>
<p>，或者说都是本能。</p>
<p>有一句话说得好，<strong>一个会学习的人最大的特点，就是关心自己，胜过关心自己学到的知识。</strong></p>
<h3 id="训练">训练</h3>
<p>一项技能的顶级高手过的是什么生活？顶级运动员的生活你能想到，肯定是日复一日非常艰苦的训练。其实一流的服裝模特也是这样。</p>
<p>在我们一般人的印象里，服装模特吃的苦，无非就是少吃饭，寒冬腊月在室外也要穿着很少的衣服受冻，等等。但是一位健身教练跟我讲，好的模特每天要进行至少四个小时的力量训练。嗒嗒嗒嗒走到台前，啪的一下能站住、站稳，这是需要很强的力量的。每一个姿态都能到位，也是需要很强的力量的。</p>
<p>所以有一个说法，<strong>顶级高手的状态，其实就是“蓝领工人”的状态</strong>。</p>
<p>什么意思呢？就是<strong>不管喜欢不喜欢，每天都得起来照常上班。上班的内容，通常也都是非常枯燥的重复训练。正如艺术家克洛斯说的，我们专业艺术家不讲什么灵感，“灵感是留给业余爱好者的”。</strong></p>
<h2 id="Y">Y</h2>
<h3 id="延长线">延长线</h3>
<p>我经常引用曾鸣教授讲过的一个词一一一终局思维。</p>
<p>不过，在工作中和同事谈起终局思维时，我还会辅助用另外一个词一一延长线，<strong>就是做一件事，如果不能看到终局，能看到延长下去的趋势也行</strong>。</p>
<p>比如，一项业务，做肯定有收益，但是延长下去想，你要是发现这个业务一旦做大，组织会变得极其复杂，复杂到控制不住的程度，那就不能做。再比如，你要不要留在一家公司工作，不能只看现在收益大不大，还要在延长线上看，在这里干下去，人生是走上坡路还是走下坡路。如果是走下坡路，那不如现在就离开。</p>
<p>所以你看，<strong>每当决策两难的时候，加上一根辅助线，也就是延长线，来帮助思考，很多疑难就会迎刃而解。</strong></p>
<h3 id="延伸">延伸</h3>
<p>有一次，我接待一拨客人。谈事的时候，因为要思考，我这手就没闲着，拿着别人刚刚递过来的名片在手里把玩。</p>
<p>过了一会儿，其中一个和我很熟的朋友暗中给我发了一条微信，说：“兄弟，求求你别再玩别人的名片了。每个人的名片，在他自己的心目中，都是他自己的延伸。你玩得爽，他们可难受死了。”</p>
<p>后来我观察了几次，如果有人玩我的名片，我确实也有相同的感受。说这个不是想说什么社交礼仪，只是想说这个<strong>世界的本质是人的延伸</strong>。每个人在成长的过程中，都会把自我的人格延伸出去，比如我的家人、我的朋友、我的母校、我的祖国，甚至我的名片，谁要是对他们不好，我们感受到的都是对自己的侵犯。</p>
<p>所以，<strong>尊重人也要尊重他延伸出去的东西。</strong></p>
<h3 id="演讲">演讲</h3>
<p>有人问我演讲的技巧。其实我的演讲技巧也一般，但是毕竟抛头露面这么多次，还是有一些心得。</p>
<p>很多人都以为，演讲技巧是加法，是一种由外而内、由少变多的技术。我的体会恰好相反。当众说话能力的提升本质上是一种减法。不是尽可能提升一个弱小的自己，让自己有更多的技能和更多的包装，而是<strong>尽可能矮化一个原本已经很强大的自己，让自己剥除过多的技巧和过分的包装</strong>。</p>
<p>为什么有人演讲会紧张，会显得假大空？因为我们从小就熟悉一些朗诵腔、播音腔，以及假装“高大上’的东西，并且不知不觉把这些东西内化成了自己的。</p>
<p><strong>演讲能力的进步其实是一种内心的进步，是一点点逼近真实的自己和真实的想法的过程。</strong></p>
<h3 id="演讲稿">演讲稿</h3>
<p><strong>一篇好的演讲稿，最终出炉，至少要经过四大关。</strong></p>
<p><strong>第一关，是结构和材料</strong>，这个当然很重要，它决定了一场演讲的信息品质。</p>
<p><strong>第二关，要细磨的是文字上的细节</strong>。因为一篇演讲稿，最终是要通过各种渠道来发布的。不能光说的时候痛快，也要经得起被印在纸上反复地看。</p>
<p><strong>第三关，是当着人反复地说这篇稿子</strong>，因为纸上成立的东西，经过口头，再传达给听众，在听众的感受中，又是另一个东西了。写好的演讲稿被推翻重来，往往就在这个关口。</p>
<p>还有<strong>第四关，就是检视每一个演讲片段被截屏出去会不会产生歧义</strong>。这就更是一个细致的活儿了。</p>
<h3 id="养育">养育</h3>
<p>有一个朋友，工作特别忙，平时没空管孩子，挺内疚的。我就给她看了李希贵校长讲的一句话：“<strong>孩子不会成为你希望的样子，而会成为你的样子</strong>。</p>
<p>养育孩子有两种方法。一种是吃穿住行学，各个方面都关照，当然与此同时也意味着各种限制。另外一种是提供资源和榜样，这个榜样就是我们父母自己。</p>
<p>二者背后是两种完全不同的养育逻辑。一种是按照现代社会的逻辑，把孩子看成一个即将投人竞争的投资品，对他当然就要投人时间和资源。还有一种，是按照人类古老的逻辑，把孩子看成生命的传承，看成另一个人，榜样的作用和人格的示范当然才是最有效的。</p>
<p>你相信哪种逻辑？</p>
<h3 id="谣言">谣言</h3>
<p>很多企业问我，面对谣言该怎么办？</p>
<p>过去传统的答案都是删帖或者辟谣。这种思维方式的本质是洗衣服一一想尽办法把脏点洗掉，让它恢复原状。这在相对静止的传统社会是可行的。</p>
<p>不过，在互联网时代，时间奔流向前，谣言一旦产生，就已经是你的一部分了。公众既没有兴趣听你辟谣，也没有耐心重建对你的信任。怎么办？这个时候应该想的是，怎样利用这个谣言，踩在这个谣言的基础上，进一步表达自己。</p>
<p><strong>谣言千不好万不好，有一样很好，就是给你带来了这个时代最为稀缺的东西一注意力。被人误解其实要远远好过被人忘却。</strong></p>
<h3 id="一无所获">一无所获</h3>
<p>我们经常听到一个说法，说要相信“复利&quot;的力量。复利的力量惊人，这当然没有错。但是有人紧接着跟了一句，“每天进步一点点，比如 0 彐％，虽然进步很小，但是积累起来不得了&quot;。这话就有问题了。</p>
<p>老喻就说了，未来是不确定的，谁能保证你每天真的能进步一点点？<strong>现实情况是，即使你非常努力， 99％的时间里你依然会感觉一无所获</strong>。</p>
<p>比如，某家公司的股票，上市以来回报率惊人，但它肯定不是一天涨一点那么涨上去的。中途甚至会经历好几次大跌，跌到让人怀疑人生那种。</p>
<p>所以真正考验人的，不是你是否相信复利一一一那只会让你痴迷确定性，不肯接受世界是不确定的这个事实。<strong>真正考验人的是，你能否在一无所获的情况下仍然坚持做正确的事。</strong></p>
<h3 id="仪式">仪式</h3>
<p>在仪式这个问题上，感觉很重要，内容没那么重要。</p>
<p>为什么这么说？因为<strong>仪式的根本作用，就是找到一件事情的边界</strong>。比如春节就是年和年的边界，婚礼就是单身和婚姻的边界。再比如，你上班，就该穿商务正装；去酒吧，就一定要休闲亮眼；听音乐会，就穿礼服。听着挺繁琐的，但这不只是为了尊重这些场合，显得有礼貌，也是为了让自己的行为举止有边界感。</p>
<p>有这种边界感的人，就不会上班的时候刷微信、打游戏，度假的时候又惦记着工作，而是会活得特别有自控力，会向所有的潜在合作者释放确定性的信息。说白了，就是我有分寸、懂规矩、能自控、贼靠谱。</p>
<p>所以，《小王子》这本书里说：“<strong>仪式感就是使某一天与其他日子不同，使某一时刻与其他时刻不同。</strong>”至于这个边界是什么，用什么来划分，就真的不重要了。</p>
<h3 id="已知">已知</h3>
<p>作家采铜在得到 App 的“知识城邦&quot;里写了一段话。</p>
<p>他说：“所有已知的背后都埋伏着一连串恼人的、难以回答的问题。比如你看到一张梅花的照片，你可以说这是梅花。可是如果我反问你，梅花是什么？你可能就哑口无言了。<strong>承认自己已知的卑微，是认知重塑的起点</strong>。”这段话说得真好。</p>
<p>我们通常都以为，知识在已知之外，我不懂的东西，才是我要学的东西。其实不然，知识就在已知的下面。跟家里小孩对话的时候，会强烈地感受到这一点。什么是神仙？什么是自由？什么是权利？什么是玻璃？什么是钢铁？我以为自己懂的东西，只要往下面深问一层，就会发现全是黑洞洞的未知。</p>
<p><strong>良好的生活，其实用不到太多边界之外的知识。我们缺的通常都是对脚下的理解。</strong></p>
<h3 id="以身作则">以身作则</h3>
<p>曾经有一位母亲带着孩子去拜见甘地。她对甘地说：“求您一件事，我儿子太爱吃糖，医生说这样不好，但我说服不了他。我儿子非常崇拜您，您能劝劝他吗？&quot;</p>
<p>甘地说：“你下个月再来吧。&quot;这位母亲说：“我们走了三天才到这儿，您就开开金口劝劝吧。&quot;甘地还是坚持说：“不行，你们下个月再来。”</p>
<p>一个月后，那对母子又来了。甘地就对那个小男孩说：“小朋友，你不要再吃太多糖了。&quot;小男孩点点头。</p>
<p>这位母亲就问：“这么简单的一句话，您上个月怎么就不肯说呢？&quot;甘地说：“因为那时候我也有吃太多糖的习惯。”</p>
<p>这个故事是不是真的，我不知道，但我读到之后非常震撼。<strong>自己做不到的事情，永远不去劝告别人。你想在这世上看到什么改变，就先自己做到那个改变。</strong></p>
<h3 id="艺术">艺术</h3>
<p>1917 年，法国艺术家杜尚搞了一个恶作剧。他把一个用过的小便池签上名字，送到一个艺术展上展出，还正儿八经地起了一个名字，叫《喷泉》。后来到了 2004 年，这件所谓的艺术作品甚至击败了毕加索，被推选为现代艺术中影响力最大的作品。</p>
<p>有人说，了解杜尚是了解西方现代艺术的关键。为什么他这个恶作剧这么重要？原因之一，就是他一下子把艺术的底牌揭开来让大家看到了，完成了对艺术的价值解构。过去我们都以为艺术是指那些有创造力的东西，但是杜尚给了艺术一个新的定义。<strong>所谓艺术，就是指那些被安放在艺术殿堂里的东西。有没有创造性，其实并不好说</strong>。</p>
<p><strong>这也揭露了人类社会的一个真相一一在哪里，往往比是什么重要得多。</strong></p>
<h3 id="艺术史">艺术史</h3>
<p>艺术史学家贡布里希说过一句很奇怪的话，“<strong>实际上没有艺术这种东西，只有艺术家而已”。</strong></p>
<p>什么意思呢？一般都认为，艺术史就是由风格、流派构成的。</p>
<p>贡布里希说不对，<strong>艺术史其实是由一代代的艺术家，通过解决他们面对的一个个具体问题堆出来的</strong>。风格、精神，那都是事后总结出来的·比如说，荷兰绘画之所以有强烈的世俗倾向，是因为宗教改革后，画家已经接不到宗教题材画的订单了。</p>
<p>你看，<strong>具体的有创造力的人，面对具体问题，解决这些问题，然后再汇成河流，最后被总结成精神和原则，这才是世界变化的真实过程。</strong></p>
<h3 id="意义">意义</h3>
<p>每个人都会在人生的某个阶段想一个问题，特别俗的一个问题：人生的意义是什么？</p>
<p>生之前，咱什么都不是；死了，又什么意义都没有了。就中间这一段，如果不想明白意义，就很难心安。</p>
<p>通常解决这个问题有三个办法。</p>
<p><strong>第一个是自欺欺人</strong>。假装自己可以永远活下去，然后盯住一个目标，比如当官发财，拼命争，拼命攒，用没有终点的方式做一件有终点的事。</p>
<p><strong>第二个办法是相信来世和天堂</strong>。这也确实可以把人生活出意义。</p>
<p><strong>第三个</strong>办法的境界就比较高了，也是存在主义哲学的基本主张，那就是<strong>在生死之间自我造就，用一次又一次的具体选择，自己成全自己，活得精彩，活得有尊严</strong>。理解了这种境界，咱们才会理解那句话，过程比结果重要，做好当下的事比成功重要。</p>
<h3 id="意义资本">意义资本</h3>
<p>看到一句话说，“意义是新的资本&quot;。</p>
<p><strong>过去，钱、社会关系、品牌是资本；未来，意义和创造意义的能力也是资本</strong>。</p>
<p>什么叫资本？至少有这么几个特征。</p>
<p><strong>第一</strong>，资本都是能生蛋的母鸡，<strong>凡是能创造出新财富的资源都叫资本</strong>。一个能创造出意义的人，就能发起大规模的协作，当然能创造出新财富。</p>
<p>资本的<strong>第二个特征是稀缺</strong>。意义本来就是稀缺的，未来会越来越稀缺。很多人都急需知道自己到底为什么在努力。</p>
<p>资本的<strong>第三个特征是能保值增值</strong>。一个意义，一旦创造出来，就会和金钱资本一样，有一种自我扩张的冲动。</p>
<p>那意义作为一种新的资本，会带来什么变化？你想，每一个能够影响他人的人，都或大或小地成了可以发行这种资本的银行。从这个意义上说，这个世界正在变得越来越平等。</p>
<h3 id="银弹">银弹</h3>
<p>有一篇关于软件工程的经典论文，论文本身我看不懂，但是论文名很有意思，叫《没有银弹》。</p>
<p>“银弹&quot;这个词来源于欧洲中世纪的传说。有一种叫狼人的妖怪，一般的子弹对它没用，只有用银子做成的子弹才能打死它。后来“银弹&quot;这个词就被用来形容那些特效的、一用就灵的方法。而 <strong>“没有银弹”的意思就是，软件工程是一个超级复杂的系统，没有任何特效方法可以一下子提高效率</strong>。</p>
<p>看到这个词，我特别想把它贴在墙上。无论创业、做项目，还是养育孩子，所有复杂的事都是如此。面对的问题是独特的，解决问题的资源是独特的，机缘也是独特的。</p>
<p>所以，<strong>解决问题的高手都不追求一劳永逸。他只是把自己打造成一个善于定义问题、解决问题，而且不断迭代的独特系统。过程中，他要不断提醒自己：没有银弹。</strong></p>
<h3 id="营销">营销</h3>
<p>“营销&quot;的目的是什么？这个问题当然有各种各样的答案。比如营销是为了建立品牌，营销是为了维护用户关系，等等。</p>
<p>有一个角度新奇的解释，说<strong>营销是为了切换用户的思考框架</strong>。最典型的，钻石如果和石墨在一个序列里，那就是一堆碳原子，不值钱；但是如果和爱情，和婚姻的承诺在一起，那就贵得多了一一这就是成功的营销。</p>
<p>再比如说，如果用户把一款电动汽车和电子产品归在一起，在这个思考框架里，电动汽车的价格就上不去。但是如果它在用户心里被放进了豪华车这个思考框架，溢价就高多了。</p>
<p><strong>说到底，营销就是讲故事。讲故事的目的，就是让自己的产品和其他更有价值的东西站在一起，在用户的心智中产生联想效应。这一联想，思考框架就换了，和用户的关系也变了，品牌和产品的价值也就上升了。</strong></p>
<h3 id="用户抛弃路径">用户抛弃路径</h3>
<p>看到一篇文章，讲了一个有意思的逻辑。</p>
<p>它说，优化互联网产品，有一个很重要的方法，叫简化用户抛弃路径。简单来说，就是当用户不想用你的产品时，他们能够更方便地离开。我们知道，一般做产品都是要拼命留住用户，这个说法怎么正好相反？</p>
<p>它的道理是这样的。互联网产品之所以有可能爆发性增长，就是因为用户会不断地给你反馈，然后你能根据这些反馈不断地迭代自己。认识到这一点，你就知道了，<strong>想尽办法留住的用户，往往不是你最真实的用户</strong>，他们给你的反馈可能是错误的。所以，你就无法获得<strong>互联网给你的最大利益一一快速和真实的反馈</strong>。留住他们，虽然眼下好像避免了损失，但其实会造成更大的损失。</p>
<p><strong>诚恳对待一切合作伙伴，让该留的留下，让该走的赶紧走，让自己处在一个真实的世界里，这是一切成长的基本前提。</strong></p>
<h3 id="优秀的人">优秀的人</h3>
<p>吴伯凡老师说，管理学界有一次投票，选举排名第一的管理理念，结果第一名居然是 no asshole （没有混蛋）。</p>
<p>想来也是，让一帮不掺杂混蛋的优秀的人在一起工作，大大节省管理成本，甚至压根儿就不用管理，那可不就是最棒的管理吗？</p>
<p>可问题是，什么叫优秀的人？什么叫混蛋？优秀的人不是能把什么都做对的人一一那叫神仙不叫人。</p>
<p>我觉得，<strong>优秀的人核心就是两个字一一具体。再宏大的目标，他们也能拆解成一个个具体的小任务，然后再想具体的方法完成这个小任务</strong>。比如勤奋、善于协作，都是这个特点的结果。而混蛋呢，正好相反，一脑子抽象观念，所以除了待在原地抱怨，什么也做不了。</p>
<h3 id="游戏">游戏</h3>
<p>为什么大家爱玩游戏？对于这个问题，我有一个小心得。</p>
<p>你看，我们身处的这个世界，那么广大、浩渺、无穷。而我们身处其中，那么渺小、卑微、有限。不管我们做什么，都不能指望这个世界给我们一个明确的反馈。这时候，游戏就诞生了。在任何一款游戏里，人的行动，都可以得到一个明确的反馈。</p>
<p>比如，下棋，棋高一着就能嬴；掰腕子，力气小了就会输。你会发现，所有的游戏，都是在大世界中圈出来一个小角落。在这个封闭的小角落里，<strong>人的行动、能力很快会兑现为结果，形成反馈闭环</strong>。</p>
<p>所以，为什么人类会对游戏上瘾？因为人类太需要反馈了。想通了这个道理，就知道为什么<strong>经常给别人点个赞，对别人的行动给个回应，是一种很大的善意。因为我们在大大的世界中，帮对方完成了一个小小的游戏。</strong></p>
<h3 id="诱惑">诱惑</h3>
<p>我有一个特别爱看书的朋友，他知识非常渊博。有一次我跟他闲聊，问他是从什么时候开始爱看书的。他说，这件事的起因，是小时候他老爹的一个诡计。</p>
<p>原来，他小的时候，他爹有很多藏书，但就是不对他开放·他每到一个特定的岁数，他老爹才对他开放一个书柜，说这个柜子里的书你可以看了，其他的暂时还不行。但是，他老爹平时又经常跟他谈起那些不让他看的书。有时候还拿一本，找出其中一段，跟他讨论两句，让他看两眼，然后又收起来。这个朋友说，他的青少年时代就生活在对书籍的强烈好奇心中。</p>
<p>他说：“我爱看书，根本的起因不是什么求知欲，而是一个魔鬼般的诱惑。”</p>
<p><strong>所有希望培养孩子某种爱好的父母，其实都可以借鉴一下这个方法，有时候诱惑比逼迫有用得多。</strong></p>
<h3 id="育儿">育儿</h3>
<p>我有一次见一个朋友教育孩子，印象深刻。</p>
<p>朋友的儿子大概四五岁的样子，那天不知道为什么突然发脾气，拿起玩具就乱扔。朋友不急不恼，说了一句：“自己扔的，一会儿自己要捡起来。”孩子马上就不扔了。</p>
<p>朋友后来跟我说，<strong>一般的家长都倾向于管理孩子的行为，那是很难管住的。而他管孩子，着眼于管理孩子行为的结果，其中的核心精神是负责任</strong>。换句话说，你可以自由选择，但是我要把这个选择的后果跟你讲清楚。</p>
<p><strong>只要意识到自己需要负责任，其实孩子比大人想象的要理智得多。</strong></p>
<h3 id="原创">原创</h3>
<p>看到一个悖论，叫“原创悖论&quot;。一般来说，我们都认为伟大的艺术家都是原创，不会抄袭别人。但是你真要去问大艺术家，他会坦诚地告诉你，<strong>天下文章一大抄，借鉴前人的作品是常态。</strong></p>
<p>这个悖论还有一层，你以为大艺术家只是模仿和借鉴吗？其实不是，他们是<strong>通过模仿他人来自我成长</strong>。有一句话很精彩：我们是通过模仿他人，并观察我们的独特性随着时间的推移而出现，从而发现我们是谁。</p>
<p><strong>所谓原创，不是凭空出现一个完全属于自我的独特的东西，而是在模仿别人的过程中，一点一点地发现，自己的哪些改造是更好的，自己的哪些特点是想放弃也放弃不了的</strong>。模仿越多，这种对自己的发现也就越多。</p>
<p>所以你看，模仿和原创不仅不冲突，甚至可以说，原创就在模仿之中。</p>
<h3 id="原则">原则</h3>
<p>为什么一个人做人要有原则和底线，一家公司必须要有价值观？除了道德上的理由，其实还有一个原因。</p>
<p>人和公司一样，每时每刻都在面临各种选择。但是，无论你多聪明多理性，选择的时候，信息总是不完备的，都不一定能选对。那怎么办？就是用原则和底线来选·这会让选择的效率变高、速度变快。</p>
<p>就拿开公司来说，你要是每时每刻都想着靠行贿做生意，除了法律上和道德上有风险，你会发现到处都有机会做选择。就算你把事办成了，选择的效率也会变低。<strong>一个有原则和底线的人，排除了大量的选择，专注在自己擅长的事情上，自然也就更有竞争力。</strong></p>
<p>所以，原则是什么？<strong>原则是让你的选择变得更少，竞争力变得更强的工具。</strong></p>
<h3 id="圆珠笔">圆珠笔</h3>
<p>第一次用圆珠笔时，不知道你想过一个问题没有：为什么钢笔的墨水管那么粗，而圆珠笔芯那么细呢？</p>
<p>其实，刚刚发明圆珠笔的时候，笔芯和钢笔墨水管是差不多粗细的。但人们很快就发现，这样的笔芯漏油。为什么漏油呢？笔头的耐磨性不好，那颗小圆珠磨小了，自然就漏油了。所以，刚开始改进的技术思路，都是提高笔头的耐磨性。但是这个方向上的努力后来都失败了。</p>
<p>后来大家发现，圆珠笔一般是写到 2 万个字的时候开始漏油。那好，把笔芯做细，装油量减少，把一支笔芯的写字量控制在巧万个字的范围内，然后，问题就解决了。</p>
<p>你看，解决一个问题，永远有两个方法：<strong>第一，解决这个问题；第二，让问题本身消失</strong>。还有，得不到一个东西的时候，就转头想想，是不是可以不要它？这永远是个有效的思路。</p>
<h3 id="远见">远见</h3>
<p>我们经常说，一个人应该有远见。但这几年，我对远见有了新的理解。</p>
<p><strong>第一，所渭的远见，都是在不断做具体事的过程中，逐渐生长出来的</strong>。观察我身边的那些牛人，<strong>他们的远见都在不断迭代中</strong>，去年的和今年的不一样。请注意，这是特指做具体的事的人。那些评论家甩的满口大词，不叫远见。</p>
<p><strong>第二，真的不能要求每一个人有远见</strong>。他眼前就有一笔钱可赚，你要求他为了某个远见放弃这个机会，其实也就是放弃眼下的生存，这太不近人情了。</p>
<p>所以你看，远见既不是确定不变的，也不是一定正确的。那到底什么是远见？我的体会是，<strong>一个人既有生存下来的热情和能力，又有不被生存条件驯化的警觉性，为生存方式的迭代保持了充足的可能性，这就已经算是很有远见了。</strong></p>
<h3 id="越级">越级</h3>
<p>有一个从部队退伍的朋友跟我讲了他刚当兵那会儿的事情。</p>
<p>有一次，他在路上遇到了连长。作为一个自来熟的人，他马上凑上去和连长寒暄，顺便还汇报了一件事情。但是万万没想到，连长勃然大怒，揪着他来到排长那里，拍着桌子吼：“这是你带的好兵，居然学会越级汇报了。”这个朋友讲，经过这件事，他算是明白了，在部队里，越级汇报是一个天大的忌讳，但直到现在他也没明白这里面的原因。</p>
<p>你看，这个问题看似不起眼，但其实已经触及了一个大组织内中层权力的本质。<strong>中层权力是什么？就是根据这一的信息做决策的机会</strong>。如果在信息上被绕开，你下面的情况你的上级完全知道，那这一层权力也就形同虚设了。</p>
<p>所以，<strong>在政治学上有一个观点认为，权力的本质就是信息。</strong></p>
<h3 id="运气">运气</h3>
<p>曾国藩这辈子说了好多名言警句，可他自己最重视的是这么一句：“不信书，信运气，公之言，传万世。&quot;</p>
<p>不要信书上讲的那些，要信运气，这是曾国藩给自己拟的墓志铭。活了一辈子，他觉得就这句话要传给千秋万代。孔夫子从来不信神神鬼鬼那些东西，怎么曾国藩这个大儒反而强调要信命运呢？</p>
<p>作家杨早有一个说法，曾国藩这句话，其实非常厚道。“不信书，信运气&quot;，其实是提醒成功人士别狂，不成功人士也别泄气。<strong>万般皆是命，半点不由人，对不确定性的敬畏和恐惧，不管对谁来说，都是最好的精神养料。</strong></p>
<h2 id="Z">Z</h2>
<h3 id="宰相">宰相</h3>
<p>中国古代最大的官，叫“宰相&quot;。《周礼》里面很多官名，都叫什么“宰&quot;，比如冢宰、大宰、小宰、宰夫、内宰、里宰。</p>
<p>可是你有没有觉得奇怪，这个“宰&quot;字，是屠宰、屠夫的意思，和当官有什么关系？过去我看到的解释，都是说，“宰&quot;是指充当家奴的罪人。这个好像没什么说服力，从罪人到宰相，地位差别有点大。</p>
<p>后来我看到一个新的解释。你回到最原始的村落里去想一想，杀猪宰羊，那是大事一一有肉吃了嘛。宰的任务是把猪羊弄死，这不是关键，关键是分肉。你家分多少，他家分多少，这是重大的利益问题。所以操刀割肉的人，必须得有公信力，大家相信你能够在利益分配上做一个公允的人。所以，“宰&quot;后来才引申为官员。</p>
<p><strong>你看，所有握有权力的人，不管在做什么，本质上只有一件事，就是做好利益分配。</strong></p>
<h3 id="赞美">赞美</h3>
<p>脱不花的《沟通训练营》里面有一讲，专门讲怎么赞美他人。</p>
<p>我看到有人就说了，难道每个人都值得赞美吗？我遇到人就赞美，难道不是拍马屁吗？我不觉得他哪儿好，我还赞美他，不是很虚伪吗？听起来很有道理。但问题是，这些说法还是误解了行走江湖的正确姿势。</p>
<p>他人是什么？他人就是我们的“磨刀石&quot;。<strong>从某种角度来说，和他人的每一次相遇、每一次沟通，长期来说，对我们只有一个意义，就是让我们变得更好</strong>。</p>
<p>那我们再来看前面的几个问题：难道每个人都值得赞美吗？当然，因为每个人都有长处。我遇到人就赞美，难道不是拍马屁吗？当然不是，这是你在练习，练习发现他人长处的能力。我不觉得他哪儿好，我还赞美他，不是很虚伪吗？你不觉得他哪儿好，这没什么可骄傲的，这只是一种能力上的欠缺而已。</p>
<h3 id="增强回路">增强回路</h3>
<p>刘润老师提到一个词，“增强回路&quot;。第一次听到这个词时，我立即就觉得脑子开了个天窗。</p>
<p>什么叫“增强回路&quot;？<strong>简单地说，就是你做一件事，它的结果会强化你做下一件事情的因</strong>。也就是将军们经常说的那句话，一场战役的目的不只是赢，还要为下一场战役准备更有利的战场&quot;。</p>
<p>刘润老师举了个例子。你想提高自己孩子的写作能力，最好的方法，就是让他开一个微信公众号，一旦有了不断增长的阅读数、留言数和打赏，这些结果就会强化他写作下一篇文章的因，一个增强回路就形成了。</p>
<p>用这个方法来反思我们手头正在做的事，你就不会只问怎么才能做成它。你还会问，做成了它会成就什么，然后再来决定要不要做。</p>
<h3 id="找工作">找工作</h3>
<p>资深生涯规划师古典老师在一篇文章里提了一个很重要的醒。很多人一提找工作，第一反应就是找个招聘网站投简历。</p>
<p>但是古典说，这个路子不对。你别从找工作的人的角度想，而是反过来从招人干活儿的老板的角度想，如果有一个新机会、大机会，你会给谁？一定是给身边合作多年，靠谱的人。这就把 90 ％的好机会拿走了。</p>
<p>如果身边没有合适的人，老板会怎么办？老板一般会让熟悉的人推荐他们的熟人、同学等。这些人又拿走了剩下的 10 ％机会中的 90 ％。最后实在没办法，老板才会找招聘网站。</p>
<p>明白了这个机理，找工作的方法也就清楚了。<strong>首先，好好干眼前的事，争取最好的身边机会。其次，多建立社会关系，争取被推荐的机会。最后，去考虑怎么投简历。</strong></p>
<h3 id="照猫画虎">照猫画虎</h3>
<p>《读库》的主编六哥（张立宪）引述缪哲老师的观点，说什么是傻叉。他说，就是那种“进退感&quot;和“分寸感&quot;都很差的人。这个定义真好。<strong>所谓进退感，就是对参与和退出一件事情的时机的判断。所谓分寸感，就是对参与力度的判断。</strong></p>
<p>你发现没有？要想在这两个维度上表现出色，光靠学知识是做不到的。知识最多让我们能把握底线和高线，就是什么事该干，什么事绝对不能干。但知识并不能训练我们，让我们拥有进退感和分寸感这样的实践智慧。</p>
<p><strong>怎么训练这两种感觉呢？我自己的体会，就是向其他人学习一最好是身边的人，照猫画虎地学</strong>，学他们怎么待人接物，怎么发邮件，怎么发言，怎么表达不满和赞许。</p>
<p>有一句话说得好，<strong>所谓的素质就是学表演，一招一式地学着演。表演得多了，素质就是我的了。</strong></p>
<h3 id="侦察兵">侦察兵</h3>
<p>看到一篇对我很有启发的文章。军队里面有两种兵，一种是战士，一种是侦察兵，他们的行为模式是不一样的。</p>
<p>战士，无非是保护自己、打败敌人、服从权威、爱护战友，只要把这些人人都有的本能激发出来就可以了。</p>
<p>可是侦察兵就不一样了。他们必须学会和已有的知识及本能作斗争。比如说，一个有经验的侦察兵知道某地有一座桥，但是如果真要画到地图上，他就不得不再确认一下。要想搞清楚世界的真相，就必须警惕存量。</p>
<p>你看，人的竞争策略也可以大体分成这两种。<strong>在力量决定输嬴的时代，存量越多的人，也就是“战士型”的人，越会贏。但是，到了认知决定输嬴的时代，对存量越警惕，对增量越好奇的人，也就是“侦察兵型”的人，才会嬴。</strong></p>
<h3 id="政治">政治</h3>
<p>19 世纪初，梅特涅亲王说过一句话：“<strong>政治最伟大的价值，就在于清晰判断各方的利益</strong>。</p>
<p>其实，何止政治，只要你想通过协调多人做成一件事，梅特涅的这句话就很重要。“清晰判断各方的利益&quot;，这句话有好几层潜台词。</p>
<p>第一，别看大家都在做同一件事，但是每一个参与者的利益都不同。你认识到了吗？判断得出来吗？</p>
<p>第二，你打心眼里认可这个不同吗？你能让别人服从你的利益，而且还能设法帮助每个人实现自己的利益吗？</p>
<p>第三，如果这些利益是互相冲突的，你有能力找出办法，平息这些冲突吗？</p>
<p>第四，在斗争中，不管你的优势有多大，你能为别人的利益留下足够的空间吗？</p>
<p>如果能想到这四层，即使处理的只是私人小事，我们也算得上政治家了。</p>
<h3 id="知恩图报">知恩图报</h3>
<p>人类社会有一种基本的道德准则，叫知恩图报，也就是受了谁的恩惠，就要回报谁。这个准则在熟人社会是可以运行的。今天你家人帮我家盖了房子，明天我家人就有义务帮你家打井。</p>
<p>但是，<strong>进入现代之后，陌生人社会来了，这根知恩图报的链条就断了</strong>。比如，在城市里你帮助了一个过路的人，只能是出于善念，不能指望，也指望不上将来他回报你什么。那问题来了，在陌生人构成的现代社会，我们怎么才能把善意的链条延续下去？</p>
<p>一次，我看到某个电视剧里的一句台词，很受启发。主人公帮了人，对方干恩万谢，说必有后报。主人公说：“<strong>你不用回报我，以后你有条件了，也这样帮助别人，把我给你的这份善意传递下去就好了</strong>。</p>
<p>这真是一个绝好的回答。以后，我要是帮了萍水相逢的人，这也会是我的答案。</p>
<h3 id="职场思维">职场思维</h3>
<p>有一家公司让一个员工去追回一笔应收货款。这小伙子追不回来，最后回家取了笔钱交给公司了。你要是领导，遇到这样的下属，是不是会哭笑不得？虽然已经进了职场，但他仍然是“考场式”思维方式。</p>
<p>职场和考场有什么不同呢？总结起来，最根本的有三点。</p>
<ol>
<li><strong>第一，职场中没有确定的题目</strong>。即使老板出了题目，有经验的职场人也会把它改造成自己愿意做的题目。</li>
<li><strong>第二，职场中没有闭卷考试</strong>。一切难题的解决都是广泛求助的结果。</li>
<li><strong>第三</strong>，很多老板经常喊什么不管过程只要结果，但是你放心，最终决定你在公司内混得好不好的，<strong>永远是你做事的方式</strong>。</li>
</ol>
<p>理解不了这三点，工作成绩再好，也还是个职场的。</p>
<h3 id="职业">职业</h3>
<p>美国著名法官霍尔姆斯在一篇演讲中谈到他自己做的法律职业。这是我见过的对自己的职业意义理解得最深的人。霍尔姆斯讲了两点。</p>
<p>第一，法律工作者既是事件的见证者，又是事件的参与者。既可以思考，又可以行动。从业者可以同时用这两种身份去体验生命的激情。</p>
<p>第二，法律这个职业就像一面魔术镜子，反映的不仅是这一代人的生活，而且是曾经存在过的所有人的生活。</p>
<p>对啊，现在的法律制度，其实是历史上所有法律制度堆在一起的结果。不过，仔细想想，<strong>世界上所有的职业，如果一个人能做到最高的境界，其实都符合霍尔姆斯讲的这两点标准：第一，既是思考者又是行动者；第二，既着眼于现在，又站在所有前人的肩上。</strong></p>
<h3 id="中国式父母">中国式父母</h3>
<p>有一个嘲笑中国式父母的说法，说他们从小就逼你练琴，可长大你如果真想去搞音乐，他们会吓得半死；他们从小送你去上奥数班，但是如果你想当数学家，他们马上会痛心疾首，告诉你搞数学将来没饭吃。</p>
<p>他们希望孩子在某个方面表现出色，但是又不希望孩子真的喜欢上它。这种教育观念看起来很畸形。</p>
<p>但是有一位父亲跟我说了另外一番道理。他说，这也未必就是一件坏事。在真实的人生场景中，为了一个长期的目标忍受眼下的枯燥和无趣，这是人生常态。</p>
<p><strong>人生有两种模式：享受过程，随时能找到趣味，这是一种；盯死目标，找到方法，然后付诸行动，这也是一种</strong>。有能力分清楚手段和目的的区别，在趣昧感和目标感之间找到平衡，这本身也是教育的目的之一。</p>
<h3 id="终生学习者">终生学习者</h3>
<p>有人问贝聿铭老先生：“你是否羡慕那些创造了建筑流派的建筑师？”</p>
<p>贝聿铭回答说：“我从来没有考虑过这个问题，因为我一直沉浸在如何解决我自己的问题之中。”这个回答太精彩了。</p>
<p>我们得到高研院有八个字校训：具体、坚忍、好奇、开放。第一个词就是具体。什么意思？就是说，<strong>一个终身学习者，必须有自己手头在做的具体的事，面对非常具体的难题要解决，这个时候，其他领域的知识和思维模型才能帮到他</strong>。如果他只是空泛地在讨论话题，无目的地在放任兴趣，那他只是一个知识搜集者而已。</p>
<p>一个好的学习者的能力，其实就像贝聿铭先生说的那样：第一，他不是在评论其他人的问题，而是在面对自己的问题；第二，沉浸其中，解决掉它。</p>
<h3 id="主次">主次</h3>
<p>有同事问我一个问题，工作能力的本质是什么？还真把我问住了。如果倒转一些年，在分工清晰的社会，工作能力就是职业技能，厨师就得会做菜，医生就得会看病。</p>
<p>但现在职场上的大量工作都是新的，谁也没有为这些工作准备好什么职业技能，那工作能力还怎么体现呢？我自己的体会是，<strong>工作能力就是分清主次的能力</strong>。</p>
<p><strong>在全局中分清主次，就是分清当下最重要的任务是什么；在一个时间段内分清主次，就是分清今天上午最该做的工作是什么；在一篇文档里分清主次，就是分清我写这篇东西主要得说清什么</strong>。</p>
<p>因为现在职场的残酷，往往体现为对事务主导权的争夺。哪怕我是一个领导，如果不能分清主次、掌控自己的时间表，别人一定会来把我的时间扯得稀烂，让我的行动模式变成应激反应模式。分不清主次，即使我再有能力，最终可能也会一事无成。</p>
<h3 id="专长">专长</h3>
<p>以前我在节目里讲过，这个时代的人，<strong>应该有两项以上的专长</strong>。即使你在每一个领域只是前 20％的水平，但是混搭之后，你可能就拥有全世界独一无二的优势了。</p>
<p>但问题是，如果你现在只有一个专长，也不知道还应该学点什么，该怎么办呢？建议你去学演讲。为什么？<strong>因为我们这个时代正在发生一次切换：影响力，也就是你构建起协作网络的能力，比你实际占有的任何资源都更值钱</strong>。</p>
<p>而构建影响力，最重要的是什么？是效率。一个人如果能够同时影响很多人，效率就高。写作和演讲就是这样的能力。</p>
<p><strong>一个行业的红利，往往不是被水平最高或者职位最高的人拿走的，而是被最能写和最能说的人拿走的。</strong></p>
<h3 id="专业">专业</h3>
<p>一个专业人士和一个业余的人，最核心的区别在哪里？不只是水平高低不同，做事的方法也不同。</p>
<p>业余人士看到某个问题，往往是凭着本能的直觉去解决它，是在这个问题本身上使劲。而专业人士呢？因为他对这个系统非常了解，他知道，最显而易见的解决方法反而会让事情变得更糟。所以，他会尝试改变这个系统中元素和氕素之间的互动关系。</p>
<p>最简单的例子就是，一只熊，看见门关了，它只会去撞门；而一个人，看见门关了，他会去找钥匙。一个业余跑步者，跑不快，他会拼命跑；一个专业运动员，要提升速度，会就身体的不同部位做针对性训练。</p>
<p><strong>业余的人看见事件，专业的人看见事件背后的系统。</strong></p>
<h3 id="准备">准备</h3>
<p>很多书里都强调一种做事的心法一一马上去做。</p>
<p>那为什么有人不马上去做呢？他要做准备。那为什么中国人这么相信做准备呢？因为考试文化深人人心，我们总是相信长期准备，然后一次性博弈。比如，除了高考，我们还苦苦考各种证，就是为了递一次简历；苦苦写 PPT, 就是为了领导点一次头；甚至谈恋爱都是苦苦做准备，然后像上刑场似的一次性向姑娘表白。</p>
<p><strong>其实真实世界里，除了考试之外，所有成功都是多次博弈的结果</strong>。追个姑娘，反复接触然后水到渠成，反而成功率高。职场中也一样，要想成功说服人，事前事后的诚恳沟通远比一次性的请示汇报重要得多。</p>
<p>所以我经常感慨，考试文化是创造文化的敌人。</p>
<h3 id="自我介绍">自我介绍</h3>
<p>脱不花去上了一个学习班，其中有一个环节是做自我介绍，每个人一分钟。这么短的时间能说什么？无非是姓名、职业、会干什么，等等。</p>
<p>但其中有一位同学的自我介绍是这样的。他说，我研究了你们每一个人。谁，哪年你在哪个城市的时候，我也在那个城市；谁，在干什么的时候，我就在你隔壁那个楼；谁，我们共同认识谁。最后说到脱不花，他说，我不认识你，但我是得到 App 的重度用户，我还把得到 App 推荐给了很多人。</p>
<p>你看，这么介绍一轮，一分钟，底下掌声雷动，而这段介绍也成为当天最好的自我介绍。</p>
<p>这件事给我两个启发：<strong>第一，在陌生人那里建立一个好印象，最好的方式其实不是美化自己，而是把自己放到一个和对方有关的网络里；第二，一个人在做一件事之前做超乎寻常的准，总是会赢得尊敬。</strong></p>
<h3 id="自省">自省</h3>
<p>通常我们都是把自省理解为自我批评。其实不然，这个词的含义比这宽广得多。</p>
<p><strong>自省是一种以自己为标准来衡量外在世界的能力</strong>。有这种能力的人，就有可能超越外在世界强加给自己的种种负面情绪。</p>
<p>比方说，<strong>在职场中的生存策略，到底是努力完成老板的指令，以便得到组织的认可，还是尽可能利用组织提供的机会完成自身的成长</strong>？我通常主张后一种策略。因为前一种策略会有成功和失败，而后一种则只是收获大小的问题。</p>
<p>那你可能会说，这样太自私了吧。其实，你不妨找几个老板打听打听，他们到底是喜欢听话的员工，还是喜欢那种主动推动自己专业成长的员工。</p>
<h3 id="做事">做事</h3>
<p>宋代皇帝宋真宗很看重大词人晏殊，遇到棘手的事，就经常写张小纸条，派人去向晏殊咨询意见。而晏殊回复的时候，每次都把皇帝写的小纸条和自己答复的纸张粘在一起。</p>
<p>你别看这是个小小的细节，背后的意思是：您的来信，我送回了，我既不会泄露里面的信息，也不会把它当作炫耀的工具，您放心。</p>
<p>这样谨慎干练的人，皇帝怎么会不喜欢呢？所以后来晏殊一路做官做到宰相。</p>
<p>这件事看起来只是一个官场小伎俩，但实际上是一种非常难实现的平衡。<strong>做任何事，你的目标其实是三个方面的收益：第一，做成这件事本身带来的收益；第二，让合作伙伴信任你的能力；第三，让合作伙伴觉得和你的合作是可持续的</strong>。这三个收益全拿到了，这件事才算真正做成了。</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>二课</tag>
        <tag>阅读</tag>
      </tags>
  </entry>
</search>
